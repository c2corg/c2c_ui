{"version":3,"file":"js/yeti-legacy.511d963b.js","mappings":"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","sources":["webpack://c2c_ui/./src/views/portals/YetiView.vue","webpack://c2c_ui/./src/components/yeti/Yetix.vue","webpack://c2c_ui/./src/components/yeti/map-layers/AreaLayer.vue","webpack://c2c_ui/./src/components/yeti/Article.vue","webpack://c2c_ui/./src/components/yeti/SubPanelTitle.vue","webpack://c2c_ui/./src/components/yeti/SubPanelTitle.vue?70f4","webpack://c2c_ui/src/components/yeti/Article.vue","webpack://c2c_ui/./src/components/yeti/Article.vue?55d3","webpack://c2c_ui/./src/components/yeti/Article.vue?e0e2","webpack://c2c_ui/./src/components/yeti/Panel.vue","webpack://c2c_ui/src/components/yeti/Yetix.vue","webpack://c2c_ui/./src/components/yeti/Yetix.vue?67b8","webpack://c2c_ui/src/components/yeti/Panel.vue","webpack://c2c_ui/./src/components/yeti/Panel.vue?4577","webpack://c2c_ui/./src/components/yeti/Panel.vue?88f7","webpack://c2c_ui/./src/components/yeti/SubPanelBra.vue","webpack://c2c_ui/./src/components/yeti/Counter.vue","webpack://c2c_ui/src/components/yeti/Counter.vue","webpack://c2c_ui/./src/components/yeti/Counter.vue?57dc","webpack://c2c_ui/./src/components/yeti/Counter.vue?1d54","webpack://c2c_ui/./src/components/yeti/DropdownContent.vue","webpack://c2c_ui/src/components/yeti/DropdownContent.vue","webpack://c2c_ui/./src/components/yeti/DropdownContent.vue?8b0f","webpack://c2c_ui/./src/components/yeti/DropdownContent.vue?b696","webpack://c2c_ui/./src/components/yeti/Info.vue","webpack://c2c_ui/src/components/yeti/Info.vue","webpack://c2c_ui/./src/components/yeti/Info.vue?6323","webpack://c2c_ui/./src/components/yeti/Info.vue?79eb","webpack://c2c_ui/src/components/yeti/SubPanelBra.vue","webpack://c2c_ui/./src/components/yeti/SubPanelBra.vue?a250","webpack://c2c_ui/./src/components/yeti/SubPanelBra.vue?bf21","webpack://c2c_ui/./src/components/yeti/SubPanelCourse.vue","webpack://c2c_ui/./src/components/yeti/FeaturesList.vue","webpack://c2c_ui/src/components/yeti/FeaturesList.vue","webpack://c2c_ui/./src/components/yeti/FeaturesList.vue?6c74","webpack://c2c_ui/./src/components/yeti/FeaturesList.vue?737b","webpack://c2c_ui/./src/components/yeti/SimplifyTool.vue","webpack://c2c_ui/src/components/yeti/SimplifyTool.vue","webpack://c2c_ui/./src/components/yeti/SimplifyTool.vue?8aa7","webpack://c2c_ui/./src/components/yeti/SimplifyTool.vue?ae11","webpack://c2c_ui/src/components/yeti/SubPanelCourse.vue","webpack://c2c_ui/./src/components/yeti/SubPanelCourse.vue?7270","webpack://c2c_ui/./src/components/yeti/SubPanelCourse.vue?ed14","webpack://c2c_ui/./src/components/yeti/SubPanelMethods.vue","webpack://c2c_ui/src/components/yeti/SubPanelMethods.vue","webpack://c2c_ui/./src/components/yeti/SubPanelMethods.vue?e7f4","webpack://c2c_ui/./src/components/yeti/SubPanelMethods.vue?da38","webpack://c2c_ui/./src/components/yeti/Tabs.vue","webpack://c2c_ui/src/components/yeti/Tabs.vue","webpack://c2c_ui/./src/components/yeti/Tabs.vue?e81d","webpack://c2c_ui/./src/components/yeti/Tabs.vue?4e23","webpack://c2c_ui/./src/components/yeti/ValidationButton.vue","webpack://c2c_ui/src/components/yeti/ValidationButton.vue","webpack://c2c_ui/./src/components/yeti/ValidationButton.vue?319b","webpack://c2c_ui/./src/components/yeti/ValidationButton.vue?e8fe","webpack://c2c_ui/./src/components/yeti/YetiMap.vue","webpack://c2c_ui/./src/components/yeti/map-layers/layer.js","webpack://c2c_ui/src/components/yeti/map-layers/AreaLayer.vue","webpack://c2c_ui/./src/components/yeti/map-layers/AreaLayer.vue?00d6","webpack://c2c_ui/./src/components/yeti/map-layers/AvalancheBulletinsLayer.vue","webpack://c2c_ui/./node_modules/@turf/helpers/dist/es/index.js","webpack://c2c_ui/./node_modules/@turf/invariant/dist/es/index.js","webpack://c2c_ui/./node_modules/@turf/intersect/dist/es/index.js","webpack://c2c_ui/src/components/yeti/map-layers/AvalancheBulletinsLayer.vue","webpack://c2c_ui/./src/components/yeti/map-layers/RouteLayer.vue","webpack://c2c_ui/./src/components/yeti/map-layers/AvalancheBulletinsLayer.vue?30f3","webpack://c2c_ui/./src/components/yeti/map-layers/AvalancheBulletinsLayer.vue?71ae","webpack://c2c_ui/./src/components/yeti/map-layers/FlowcaptLayer.vue","webpack://c2c_ui/./src/components/yeti/map-layers/IconLayer.vue","webpack://c2c_ui/src/components/yeti/map-layers/IconLayer.vue","webpack://c2c_ui/./src/components/yeti/map-layers/IconLayer.vue?8b6e","webpack://c2c_ui/./src/components/yeti/map-layers/IconLayer.vue?bd0d","webpack://c2c_ui/src/components/yeti/map-layers/FlowcaptLayer.vue","webpack://c2c_ui/./src/components/yeti/map-layers/FlowcaptLayer.vue?b94f","webpack://c2c_ui/./src/components/yeti/map-layers/FlowcaptLayer.vue?b3e3","webpack://c2c_ui/./src/components/yeti/map-layers/NivosesLayer.vue","webpack://c2c_ui/src/components/yeti/map-layers/NivosesLayer.vue","webpack://c2c_ui/./src/components/yeti/map-layers/NivosesLayer.vue?d716","webpack://c2c_ui/./src/components/yeti/map-layers/NivosesLayer.vue?1569","webpack://c2c_ui/./src/components/yeti/map-layers/RommaLayer.vue","webpack://c2c_ui/src/components/yeti/map-layers/RommaLayer.vue","webpack://c2c_ui/./src/components/yeti/map-layers/RommaLayer.vue?b45a","webpack://c2c_ui/./src/components/yeti/map-layers/RommaLayer.vue?19d4","webpack://c2c_ui/src/components/yeti/map-layers/RouteLayer.vue","webpack://c2c_ui/./src/components/yeti/map-layers/RouteLayer.vue?1ff8","webpack://c2c_ui/./src/components/yeti/map-layers/YetiLayer.vue","webpack://c2c_ui/src/components/yeti/map-layers/YetiLayer.vue","webpack://c2c_ui/./src/components/yeti/map-layers/YetiLayer.vue?1cd5","webpack://c2c_ui/./src/components/yeti/map-layers/YetiLayer.vue?e2b7","webpack://c2c_ui/src/components/yeti/YetiMap.vue","webpack://c2c_ui/./src/components/yeti/YetiMap.vue?c212","webpack://c2c_ui/./src/components/yeti/YetiMap.vue?4247","webpack://c2c_ui/src/views/portals/YetiView.vue","webpack://c2c_ui/./src/views/portals/YetiView.vue?5058","webpack://c2c_ui/./src/views/portals/YetiView.vue?4e9b","webpack://c2c_ui/./node_modules/polygon-clipping/dist/polygon-clipping.umd.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"section\"},[_c('html-header',{attrs:{\"title\":\"Yeti\"}}),_vm._v(\" \"),_c('div',{staticClass:\"box\"},[_c('h1',{staticClass:\"title is-1\"},[_c('div',{staticClass:\"yeti-icon is-inline-block\"},[_c('icon-yeti')],1),_vm._v(\" \"),_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"YETI - A preparation tool for your outing\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"yeti-app\"},[(_vm.showDisclaimer)?_c('div',{staticClass:\"box yeti-overlay\"},[_c('yeti-article',{staticClass:\"yeti-article--disclaimer\",attrs:{\"article\":_vm.articles.disclaimer}}),_vm._v(\" \"),_c('form',{attrs:{\"action\":\"#\"},on:{\"submit\":_vm.onSubmitDisclaimer}},[_c('input-checkbox',{directives:[{name:\"translate\",rawName:\"v-translate\"}],model:{value:(_vm.checkDisclaimer),callback:function ($$v) {_vm.checkDisclaimer=$$v},expression:\"checkDisclaimer\"}},[_vm._v(\"\\n          I read and understood the interest and limitations of YETI\\n        \")]),_vm._v(\" \"),_c('button',{directives:[{name:\"translate\",rawName:\"v-translate\"}],staticClass:\"button is-primary\",attrs:{\"disabled\":!_vm.checkDisclaimer}},[_vm._v(\"Launch YETI\")])],1)],1):_vm._e(),_vm._v(\" \"),(_vm.$route.params.page === 'faq')?_c('div',{staticClass:\"box yeti-overlay\"},[_c('p',[_c('router-link',{directives:[{name:\"translate\",rawName:\"v-translate\"}],attrs:{\"to\":\".\"}},[_vm._v(\"Go back to YETI\")])],1),_vm._v(\" \"),_c('yeti-article',{staticClass:\"yeti-article--disclaimer\",attrs:{\"article\":_vm.articles.disclaimer}}),_vm._v(\" \"),_c('yeti-article',{attrs:{\"article\":_vm.articles.faq}})],1):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"columns yeti-content\"},[_c('div',{staticClass:\"column is-6-tablet is-6-desktop is-5-widescreen is-4-fullhd form-container\"},[_c('div',{staticClass:\"columns mb-0 yeti-columns--reverse is-mobile\"},[_c('ul',{staticClass:\"column is-narrow pb-0\"},[_c('li',[_c('router-link',{directives:[{name:\"translate\",rawName:\"v-translate\"}],staticClass:\"is-block yetitabs-link\",attrs:{\"to\":_vm.$route.fullPath + '/faq'}},[_vm._v(\"\\n                FAQ?\\n              \")])],1)]),_vm._v(\" \"),_c('tabs',{attrs:{\"tabs\":_vm.tabs}})],1),_vm._v(\" \"),_c('div',{staticClass:\"box\"},[_c('panel',{ref:\"panel0\",staticClass:\"is-relative\",attrs:{\"index\":0}},[_c('validation-button',{staticClass:\"is-hidden-mobile yeti-validation--top\",attrs:{\"current-error\":_vm.currentError,\"loading\":_vm.promise,\"tabindex\":\"-1\"},on:{\"click\":_vm.compute}}),_vm._v(\" \"),_c('sub-panel-bra'),_vm._v(\" \"),_c('sub-panel-methods',{on:{\"warn-about-method-bra\":_vm.warnAboutMethodBra}}),_vm._v(\" \"),_c('validation-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.method.type),expression:\"method.type\"}],staticClass:\"yeti-validation--bottom\",attrs:{\"current-error\":_vm.currentError,\"loading\":_vm.promise},on:{\"click\":_vm.compute}})],1),_vm._v(\" \"),_c('panel',{ref:\"panel1\",attrs:{\"index\":1}},[_c('sub-panel-course')],1)],1),_vm._v(\" \"),_vm._m(0)]),_vm._v(\" \"),_c('yeti-map',{ref:\"map\",attrs:{\"yeti-data\":_vm.yetiData,\"yeti-extent\":_vm.yetiExtent}})],1)])],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"box yeti-logos\"},[_c('div',{staticClass:\"columns is-mobile is-vcentered\"},[_c('div',{staticClass:\"column has-text-centered\"},[_c('a',{attrs:{\"href\":\"http://www.ensg.eu\"}},[_c('picture',[_c('source',{attrs:{\"srcset\":require(\"@/assets/img/yeti/logo-ensg.webp\"),\"type\":\"image/webp\"}}),_vm._v(\" \"),_c('source',{attrs:{\"srcset\":require(\"@/assets/img/yeti/logo-ensg.avif\"),\"type\":\"image/avif\"}}),_vm._v(\" \"),_c('img',{attrs:{\"src\":require(\"@/assets/img/yeti/logo-ensg.jpg\"),\"alt\":\"Logo ENSG\",\"width\":\"120\",\"loading\":\"lazy\"}})])])]),_vm._v(\" \"),_c('div',{staticClass:\"column has-text-centered\"},[_c('a',{attrs:{\"href\":\"https://www.petzl.com/fondation/fondation-petzl?language=fr\"}},[_c('picture',[_c('source',{attrs:{\"srcset\":require(\"@/assets/img/yeti/logo-fondation-petzl.webp\"),\"type\":\"image/webp\"}}),_vm._v(\" \"),_c('source',{attrs:{\"srcset\":require(\"@/assets/img/yeti/logo-fondation-petzl.avif\"),\"type\":\"image/avif\"}}),_vm._v(\" \"),_c('img',{attrs:{\"src\":require(\"@/assets/img/yeti/logo-fondation-petzl.jpg\"),\"alt\":\"Logo Fondation Petzl\",\"width\":\"90\",\"loading\":\"lazy\"}})])])])])])\n}]\n\nexport { render, staticRenderFns }","var render, staticRenderFns\nimport script from \"./Yetix.vue?vue&type=script&lang=js&\"\nexport * from \"./Yetix.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render, staticRenderFns\nimport script from \"./AreaLayer.vue?vue&type=script&lang=js&\"\nexport * from \"./AreaLayer.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.document)?_c('div',{staticClass:\"yeti-article\"},[_c('sub-panel-title',[_vm._v(_vm._s(_vm.title))]),_vm._v(\" \"),_c('markdown-section',{attrs:{\"document\":_vm.document,\"field\":_vm.fields.description,\"hide-title\":\"\"}})],1):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"columns is-mobile\"},[_c('div',{staticClass:\"column\"},[_c('h2',{staticClass:\"title is-3\"},[_vm._t(\"default\")],2)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./SubPanelTitle.vue?vue&type=template&id=5195febc&scoped=true&\"\nvar script = {}\nimport style0 from \"./SubPanelTitle.vue?vue&type=style&index=0&id=5195febc&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5195febc\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"yeti-article\" v-if=\"document\">\n    <sub-panel-title>{{ title }}</sub-panel-title>\n    <markdown-section :document=\"document\" :field=\"fields.description\" hide-title></markdown-section>\n  </div>\n</template>\n\n<script>\nimport SubPanelTitle from '@/components/yeti/SubPanelTitle.vue';\nimport c2c from '@/js/apis/c2c';\nimport constants from '@/js/constants';\nimport MarkdownSection from '@/views/document/utils/field-viewers/MarkdownSection';\n\nexport default {\n  components: {\n    SubPanelTitle,\n    MarkdownSection,\n  },\n  props: {\n    article: {\n      type: Object,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      promise: null,\n    };\n  },\n  computed: {\n    id() {\n      return this.article.id;\n    },\n    title() {\n      return this.article.title;\n    },\n    document() {\n      return this.promise?.data ?? null;\n    },\n    fields() {\n      return constants.objectDefinitions.article.fields;\n    },\n    lang() {\n      return this.$language.current;\n    },\n  },\n  watch: {\n    lang() {\n      this.cookDocument();\n    },\n  },\n  mounted() {\n    this.cookDocument();\n  },\n  methods: {\n    cookDocument() {\n      // get document, and set promise only in then (no FOIT)\n      c2c.article.getCooked(this.id, this.$language.current).then((result) => {\n        this.promise = result;\n      });\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.yeti-article {\n  max-width: 1039px;\n  margin-top: 1.75em;\n}\n:deep(h3) {\n  margin-top: 2em;\n}\n:deep(p) {\n  margin: 1em 0;\n}\n:deep(ul) {\n  list-style-type: disc;\n}\n:deep(figure) img {\n  max-width: 90%;\n  max-height: 500px;\n}\n.yeti-article--disclaimer :deep(li) {\n  margin: 2em 0;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./Article.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./Article.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Article.vue?vue&type=template&id=6c55e92e&scoped=true&\"\nimport script from \"./Article.vue?vue&type=script&lang=js&\"\nexport * from \"./Article.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Article.vue?vue&type=style&index=0&id=6c55e92e&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6c55e92e\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"yeti-panel\",attrs:{\"role\":\"tabpanel\",\"id\":'panel' + _vm.index,\"aria-labelledby\":'tab' + _vm.index,\"hidden\":_vm.activeTab !== _vm.index}},[_vm._t(\"default\")],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\n/**\n * Yetix\n * State management component for Yeti (VueX inspired)\n *\n * - Read-only state\n * - State mutations can only occur here\n * - Actions call API\n */\n\nimport axios from 'axios';\nimport Vue from 'vue';\n\nlet defaultState = {\n  API_URL: 'https://api.ensg.eu/',\n  DANGER_MAX_WHEN_MRD: 3,\n  VALID_MINIMUM_MAP_ZOOM: 13,\n\n  activeTab: 0,\n\n  bra: {\n    high: null,\n    low: null,\n    altiThreshold: null,\n    isDifferent: false,\n  },\n\n  method: {\n    type: null,\n    orientation: [],\n    potentialDanger: null,\n    wetSnow: false,\n    groupSize: 1,\n  },\n\n  areas: [],\n  areaOk: true,\n  showAreas: false,\n\n  features: [],\n  featuresTitle: 'New route',\n  featuresLength: 0,\n\n  mountains: {\n    all: [],\n    visible: [],\n  },\n  bulletinsLoaded: false,\n  showAvalancheBulletins: false,\n\n  nivoses: [],\n  showNivoses: false,\n\n  romma: [],\n  showRomma: false,\n\n  flowcapt: [],\n  showFlowcapt: false,\n\n  mapZoom: 0,\n  drawingMode: false,\n\n  validSimplifyTolerance: false,\n};\n\n/**\n * Read-only reactive state\n *\n * A copy of `defaultState` without reference (to be able to reset default state)\n */\nlet state = Vue.observable(JSON.parse(JSON.stringify(defaultState)));\n\n/**\n * Exported state\n *\n * Computed act as getters for read-only state properties\n * Methods act as mutations (to mutate state) or actions (api calls)\n */\nexport default new Vue({\n  computed: {\n    DANGER_MAX_WHEN_MRD() {\n      return state.DANGER_MAX_WHEN_MRD;\n    },\n    VALID_MINIMUM_MAP_ZOOM() {\n      return state.VALID_MINIMUM_MAP_ZOOM;\n    },\n    activeTab() {\n      return state.activeTab;\n    },\n    bra() {\n      return state.bra;\n    },\n    method() {\n      return state.method;\n    },\n    areas() {\n      return state.areas;\n    },\n    areaOk() {\n      return state.areaOk;\n    },\n    showAreas() {\n      return state.showAreas;\n    },\n    features() {\n      return state.features;\n    },\n    hasFeatures() {\n      return !!state.features.length;\n    },\n    featuresTitle() {\n      return state.featuresTitle;\n    },\n    featuresLength() {\n      return state.featuresLength;\n    },\n    mountains() {\n      return state.mountains;\n    },\n    bulletinsLoaded() {\n      return state.bulletinsLoaded;\n    },\n    showAvalancheBulletins() {\n      return state.showAvalancheBulletins;\n    },\n    nivoses() {\n      return state.nivoses;\n    },\n    showNivoses() {\n      return state.showNivoses;\n    },\n    romma() {\n      return state.romma;\n    },\n    showRomma() {\n      return state.showRomma;\n    },\n    flowcapt() {\n      return state.flowcapt;\n    },\n    showFlowcapt() {\n      return state.showFlowcapt;\n    },\n    mapZoom() {\n      return state.mapZoom;\n    },\n    drawingMode() {\n      return state.drawingMode;\n    },\n    validSimplifyTolerance() {\n      return state.validSimplifyTolerance;\n    },\n  },\n  methods: {\n    // mutations\n    setActiveTab(index) {\n      state.activeTab = index;\n    },\n    setBra(prop, value) {\n      state.bra[prop] = value;\n    },\n    setMethod(prop, value) {\n      state.method[prop] = value;\n    },\n    setAreas(areas) {\n      state.areas = areas;\n    },\n    setAreaOk(areaOk) {\n      state.areaOk = areaOk;\n    },\n    setShowAreas(showAreas) {\n      state.showAreas = showAreas;\n    },\n    setFeatures(features) {\n      state.features = features;\n    },\n    setFeaturesTitle(featuresTitle) {\n      state.featuresTitle = featuresTitle;\n    },\n    setFeaturesLength(featuresLength) {\n      state.featuresLength = featuresLength;\n    },\n    setAllMountains(mountains) {\n      state.mountains.all = mountains;\n    },\n    setVisibleMountains(mountains) {\n      state.mountains.visible = mountains;\n    },\n    setShowAvalancheBulletins(showAvalancheBulletins) {\n      state.showAvalancheBulletins = showAvalancheBulletins;\n    },\n    setBulletinsLoaded(bool) {\n      state.bulletinsLoaded = bool;\n    },\n    setNivoses(nivoses) {\n      state.nivoses = nivoses;\n    },\n    setShowNivoses(showNivoses) {\n      state.showNivoses = showNivoses;\n    },\n    setRomma(romma) {\n      state.romma = romma;\n    },\n    setShowRomma(showRomma) {\n      state.showRomma = showRomma;\n    },\n    setFlowcapt(flowcapt) {\n      state.flowcapt = flowcapt;\n    },\n    setShowFlowcapt(showFlowcapt) {\n      state.showFlowcapt = showFlowcapt;\n    },\n    setMapZoom(mapZoom) {\n      state.mapZoom = mapZoom;\n    },\n    setDrawingMode(drawingMode) {\n      state.drawingMode = drawingMode;\n    },\n    setValidSimplifyTolerance(validSimplifyTolerance) {\n      state.validSimplifyTolerance = validSimplifyTolerance;\n      // when validSimplifyTolerance is OK\n      // check state for drawingMode:\n      // if it's on, store it (tmp), and retrieve state later\n      if (validSimplifyTolerance) {\n        if (state.drawingMode) {\n          state.tmpDrawingMode = true;\n          this.setDrawingMode(false);\n        }\n      } else {\n        if (state.tmpDrawingMode) {\n          this.setDrawingMode(true);\n          delete state.tmpDrawingMode;\n        }\n      }\n    },\n    setDefault() {\n      // revert all state properties to default\n      for (let i in state) {\n        if (typeof state[i] === 'object' && !Array.isArray(state[i])) {\n          for (let j in state[i]) {\n            state[i][j] = defaultState[i][j];\n          }\n        } else {\n          state[i] = defaultState[i];\n        }\n      }\n    },\n    // actions\n    fetchApi(url) {\n      return axios.get(state.API_URL + url);\n    },\n    fetchAreas() {\n      return this.fetchApi('yeti-extent');\n    },\n    fetchMountains() {\n      return this.fetchApi('zonesbra');\n    },\n    fetchBulletins() {\n      return this.fetchApi('bra');\n    },\n    fetchNivoses() {\n      return this.fetchApi('nivoses');\n    },\n    fetchRomma() {\n      return this.fetchApi('romma');\n    },\n    fetchFlowcapt() {\n      return this.fetchApi('flowcapt');\n    },\n  },\n});\n</script>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./Yetix.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./Yetix.vue?vue&type=script&lang=js&\"","<template>\n  <div\n    class=\"yeti-panel\"\n    role=\"tabpanel\"\n    :id=\"'panel' + index\"\n    :aria-labelledby=\"'tab' + index\"\n    :hidden=\"activeTab !== index\"\n  >\n    <slot></slot>\n  </div>\n</template>\n\n<script>\nimport Yetix from '@/components/yeti/Yetix';\n\nexport default {\n  props: {\n    index: {\n      type: Number,\n      required: true,\n    },\n  },\n  computed: {\n    activeTab() {\n      return Yetix.activeTab;\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import '@/assets/sass/variables';\n\n:deep(a) {\n  &:hover,\n  &:focus {\n    text-decoration: underline;\n  }\n}\n\n:deep(h4) {\n  margin-top: 1rem;\n  margin-bottom: 0.25rem !important;\n}\n\n:deep(abbr) {\n  text-decoration: none;\n  border-bottom: dotted 2px #aaa;\n}\n\n:deep(strong),\n:deep(dt) {\n  font-weight: bold;\n  color: inherit;\n}\n\n:deep(.yeti-subpanel + .yeti-subpanel) {\n  margin-top: 2rem;\n}\n\n:deep(.content-ul) {\n  list-style: disc outside;\n  margin-left: 2em;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./Panel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./Panel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Panel.vue?vue&type=template&id=344ddb5a&scoped=true&\"\nimport script from \"./Panel.vue?vue&type=script&lang=js&\"\nexport * from \"./Panel.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Panel.vue?vue&type=style&index=0&id=344ddb5a&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"344ddb5a\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"yeti-subpanel\"},[_c('sub-panel-title',[_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Danger level\")])]),_vm._v(\" \"),_c('div',{staticClass:\"columns is-mobile\"},[_c('div',{staticClass:\"column\"},[_c('div',{staticClass:\"inputs-bra\",class:{ 'inputs-bra-different': _vm.bra.isDifferent }},[_c('svg',{attrs:{\"viewBox\":\"0 0 100 100\",\"width\":\"120\",\"height\":\"120\"}},[_c('polygon',{staticStyle:{\"fill\":\"none\",\"stroke\":\"#000\",\"stroke-miterlimit\":\"10\"},attrs:{\"points\":\"2.2,89.5 97.5,89.5 62.7,11.9 48,32.9 31.8,25.5 \"}}),_vm._v(\" \"),_c('line',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.bra.isDifferent),expression:\"bra.isDifferent\"}],staticStyle:{\"fill\":\"none\",\"stroke\":\"#000\",\"stroke-miterlimit\":\"10\"},attrs:{\"x1\":\"10\",\"y1\":\"61.5\",\"x2\":\"90\",\"y2\":\"61.5\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"input-bra-high select is-small\"},[_c('select',{attrs:{\"id\":\"selectBra\",\"aria-label\":_vm.$gettext('High danger level from the avalanche bulletin')},domProps:{\"value\":_vm.bra.high},on:{\"change\":function($event){return _vm.onChange($event, 'high')}}},[_c('option',{attrs:{\"selected\":\"\"},domProps:{\"value\":null}}),_vm._v(\" \"),_c('option',{domProps:{\"value\":1}},[_vm._v(\"1\")]),_vm._v(\" \"),_c('option',{domProps:{\"value\":2}},[_vm._v(\"2\")]),_vm._v(\" \"),_c('option',{domProps:{\"value\":3}},[_vm._v(\"3\")]),_vm._v(\" \"),_c('option',{domProps:{\"value\":4}},[_vm._v(\"4\")])])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.bra.isDifferent),expression:\"bra.isDifferent\"}],staticClass:\"input-bra-threshold control\"},[_c('label',{directives:[{name:\"translate\",rawName:\"v-translate\"}],attrs:{\"for\":\"inputThreshold\"}},[_vm._v(\"Altitude\")]),_vm._v(\" \"),_c('input',{staticClass:\"input is-small\",attrs:{\"id\":\"inputThreshold\",\"type\":\"number\",\"min\":\"0\",\"max\":\"4800\",\"step\":\"100\",\"maxlength\":\"4\"},domProps:{\"value\":_vm.bra.altiThreshold},on:{\"change\":function($event){return _vm.onChange($event, 'altiThreshold')}}})]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.bra.isDifferent),expression:\"bra.isDifferent\"}],staticClass:\"input-bra-low select is-small\"},[_c('select',{attrs:{\"aria-label\":\"$gettext('Low danger level from the avalanche bulletin')\"},domProps:{\"value\":_vm.bra.low},on:{\"change\":function($event){return _vm.onChange($event, 'low')}}},[_c('option',{attrs:{\"selected\":\"\"},domProps:{\"value\":null}}),_vm._v(\" \"),_c('option',{domProps:{\"value\":1}},[_vm._v(\"1\")]),_vm._v(\" \"),_c('option',{domProps:{\"value\":2}},[_vm._v(\"2\")]),_vm._v(\" \"),_c('option',{domProps:{\"value\":3}},[_vm._v(\"3\")]),_vm._v(\" \"),_c('option',{domProps:{\"value\":4}},[_vm._v(\"4\")])])])]),_vm._v(\" \"),_c('div',[_c('input-checkbox',{staticClass:\"control--bradifferent\",attrs:{\"value\":_vm.bra.isDifferent},on:{\"input\":function($event){return _vm.onChange($event, 'isDifferent')}}},[_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Different high/low danger?\")])])],1)])]),_vm._v(\" \"),_c('dropdown-content',{scopedSlots:_vm._u([{key:\"content\",fn:function(){return [(_vm.showVisibleMountains)?_c('div',[_c('div',{staticClass:\"mb-2\"},[_c('input-checkbox',{attrs:{\"value\":_vm.showAvalancheBulletins},on:{\"input\":_vm.onShowAvalancheBulletins}},[_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Visible on map\")])])],1),_vm._v(\" \"),_c('dl',_vm._l((_vm.visibleMountains),function(mountainsForMassif,massif){return _c('div',{key:massif},[_c('dt',[_vm._v(\"\\n              \"+_vm._s(massif)+\"\\n            \")]),_vm._v(\" \"),_c('div',{staticClass:\"yetimountains-list px-4 py-3\"},_vm._l((mountainsForMassif),function(mountain){return _c('dd',{key:mountain.name},[_c('a',{attrs:{\"href\":mountain.urls[0].url,\"target\":\"_blank\"}},[_c('fa-icon',{attrs:{\"icon\":\"external-link-alt\"}}),_vm._v(\"\\n                  \"+_vm._s(mountain.name)+\"\\n                \")],1)])}),0)])}),0)]):_c('div',[_c('info',{directives:[{name:\"translate\",rawName:\"v-translate\"}],staticClass:\"column\"},[_vm._v(\"Massifs could not be loaded\")])],1)]},proxy:true}])},[_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Avalanche bulletins\")]),_vm._v(\" \"),(_vm.showVisibleMountains)?_c('counter',[_vm._v(_vm._s(_vm.countVisibleMountains))]):_vm._e(),_vm._v(\" \"),(_vm.showAvalancheBulletins)?_c('fa-icon',{staticClass:\"has-text-primary\",attrs:{\"icon\":\"check-circle\",\"title\":_vm.$gettext('Visible on map')}}):_vm._e()],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('span',{staticClass:\"yeti-counter\",class:{ 'has-background-primary': _vm.isPrimary }},[_vm._t(\"default\")],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <span class=\"yeti-counter\" :class=\"{ 'has-background-primary': isPrimary }\">\n    <slot />\n  </span>\n</template>\n\n<script>\nexport default {\n  props: {\n    isPrimary: {\n      type: Boolean,\n      default: false,\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import '@/assets/sass/variables';\n\n.yeti-counter {\n  display: inline-block;\n  width: 1.1rem;\n  height: 1.1rem;\n  vertical-align: 0.1rem;\n  margin-left: 0.25rem;\n  background: $grey-lighter;\n  color: $grey-darker;\n  border-radius: 50%;\n  font-size: 0.72em;\n  font-weight: normal;\n  text-align: center;\n\n  &.has-background-primary {\n    color: $white;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./Counter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./Counter.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Counter.vue?vue&type=template&id=3bba027c&scoped=true&\"\nimport script from \"./Counter.vue?vue&type=script&lang=js&\"\nexport * from \"./Counter.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Counter.vue?vue&type=style&index=0&id=3bba027c&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3bba027c\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"dropdown-content\"},[_c('div',[_c('h3',{staticClass:\"dropdown-content-title\",class:{ 'is-open': _vm.opened },on:{\"click\":_vm.switchOpen}},[_vm._t(\"default\"),_vm._v(\" \"),_c('fa-icon',{staticClass:\"dropdown-content-arrow is-size-6 is-pulled-right has-cursor-pointer no-print\",attrs:{\"icon\":\"angle-down\",\"rotation\":_vm.opened ? 180 : undefined}})],2)]),_vm._v(\" \"),(_vm.opened)?_c('div',{staticClass:\"p-3\"},[_vm._t(\"content\")],2):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"dropdown-content\">\n    <div>\n      <h3 class=\"dropdown-content-title\" :class=\"{ 'is-open': opened }\" @click=\"switchOpen\">\n        <slot />\n        <fa-icon\n          class=\"dropdown-content-arrow is-size-6 is-pulled-right has-cursor-pointer no-print\"\n          icon=\"angle-down\"\n          :rotation=\"opened ? 180 : undefined\"\n        />\n      </h3>\n    </div>\n    <div v-if=\"opened\" class=\"p-3\">\n      <slot name=\"content\" />\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      opened: false,\n    };\n  },\n  methods: {\n    switchOpen() {\n      this.opened = !this.opened;\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import '@/assets/sass/variables';\n\n.dropdown-content {\n  border: 1px solid #dbdbdb;\n  padding: 0;\n  box-shadow: none;\n\n  &:hover {\n    border-color: #b5b5b5;\n  }\n}\n.dropdown-content-title {\n  cursor: pointer;\n  padding: 0.25rem 0.75rem;\n  border-radius: 4px;\n}\n.is-open {\n  font-weight: bold;\n  border-radius: 4px 4px 0 0;\n}\n.dropdown-content-title:hover {\n  background: $grey-lightest;\n}\n.dropdown-content-arrow {\n  color: $primary;\n  margin-top: 0.25rem;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./DropdownContent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./DropdownContent.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DropdownContent.vue?vue&type=template&id=59f2d074&scoped=true&\"\nimport script from \"./DropdownContent.vue?vue&type=script&lang=js&\"\nexport * from \"./DropdownContent.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DropdownContent.vue?vue&type=style&index=0&id=59f2d074&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"59f2d074\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"info-text mt-3 mb-3 px-3\",class:'is-' + _vm.type},[_c('fa-icon',{staticClass:\"info-icon mt-1 ml-1\",attrs:{\"icon\":_vm.icon}}),_vm._v(\" \"),_c('div',{staticClass:\"info-content\"},[_vm._t(\"default\")],2)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"info-text mt-3 mb-3 px-3\" :class=\"'is-' + type\">\n    <fa-icon :icon=\"icon\" class=\"info-icon mt-1 ml-1\" />\n    <div class=\"info-content\">\n      <slot />\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    type: {\n      type: String,\n      default: 'info',\n    },\n  },\n  data() {\n    return {\n      icons: {\n        info: 'info-circle',\n        warning: 'exclamation-circle',\n        help: 'question-circle',\n      },\n    };\n  },\n  computed: {\n    icon() {\n      return this.icons[this.type];\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import '@/assets/sass/variables';\n\n.info-text {\n  font-size: 0.85em;\n}\n.is-info {\n  color: $primary;\n}\n.is-warning {\n  color: $red;\n}\n.is-help {\n  background: $grey-lightest;\n  color: $grey-dark;\n  border-radius: 4px;\n  padding: 0.75rem;\n  margin-bottom: 1.5rem !important;\n}\n.info-icon {\n  float: left;\n}\n.info-content {\n  margin-left: 2rem;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./Info.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./Info.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Info.vue?vue&type=template&id=4ec827a4&scoped=true&\"\nimport script from \"./Info.vue?vue&type=script&lang=js&\"\nexport * from \"./Info.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Info.vue?vue&type=style&index=0&id=4ec827a4&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4ec827a4\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"yeti-subpanel\">\n    <sub-panel-title><span v-translate>Danger level</span></sub-panel-title>\n    <div class=\"columns is-mobile\">\n      <div class=\"column\">\n        <div class=\"inputs-bra\" :class=\"{ 'inputs-bra-different': bra.isDifferent }\">\n          <svg viewBox=\"0 0 100 100\" width=\"120\" height=\"120\">\n            <polygon\n              style=\"fill: none; stroke: #000; stroke-miterlimit: 10\"\n              points=\"2.2,89.5 97.5,89.5 62.7,11.9 48,32.9 31.8,25.5 \"\n            />\n            <line\n              v-show=\"bra.isDifferent\"\n              style=\"fill: none; stroke: #000; stroke-miterlimit: 10\"\n              x1=\"10\"\n              y1=\"61.5\"\n              x2=\"90\"\n              y2=\"61.5\"\n            />\n          </svg>\n          <div class=\"input-bra-high select is-small\">\n            <select\n              id=\"selectBra\"\n              @change=\"onChange($event, 'high')\"\n              :value=\"bra.high\"\n              :aria-label=\"$gettext('High danger level from the avalanche bulletin')\"\n            >\n              <option :value=\"null\" selected />\n              <option :value=\"1\">1</option>\n              <option :value=\"2\">2</option>\n              <option :value=\"3\">3</option>\n              <option :value=\"4\">4</option>\n            </select>\n          </div>\n          <div v-show=\"bra.isDifferent\" class=\"input-bra-threshold control\">\n            <label for=\"inputThreshold\" v-translate>Altitude</label>\n            <input\n              id=\"inputThreshold\"\n              class=\"input is-small\"\n              type=\"number\"\n              min=\"0\"\n              max=\"4800\"\n              step=\"100\"\n              maxlength=\"4\"\n              @change=\"onChange($event, 'altiThreshold')\"\n              :value=\"bra.altiThreshold\"\n            />\n          </div>\n\n          <div v-show=\"bra.isDifferent\" class=\"input-bra-low select is-small\">\n            <select\n              @change=\"onChange($event, 'low')\"\n              :value=\"bra.low\"\n              aria-label=\"$gettext('Low danger level from the avalanche bulletin')\"\n            >\n              <option :value=\"null\" selected />\n              <option :value=\"1\">1</option>\n              <option :value=\"2\">2</option>\n              <option :value=\"3\">3</option>\n              <option :value=\"4\">4</option>\n            </select>\n          </div>\n        </div>\n\n        <div>\n          <input-checkbox\n            @input=\"onChange($event, 'isDifferent')\"\n            :value=\"bra.isDifferent\"\n            class=\"control--bradifferent\"\n          >\n            <span v-translate>Different high/low danger?</span>\n          </input-checkbox>\n        </div>\n      </div>\n    </div>\n\n    <dropdown-content>\n      <span v-translate>Avalanche bulletins</span>\n      <counter v-if=\"showVisibleMountains\">{{ countVisibleMountains }}</counter>\n      <fa-icon\n        icon=\"check-circle\"\n        v-if=\"showAvalancheBulletins\"\n        class=\"has-text-primary\"\n        :title=\"$gettext('Visible on map')\"\n      />\n      <template #content>\n        <div v-if=\"showVisibleMountains\">\n          <div class=\"mb-2\">\n            <input-checkbox @input=\"onShowAvalancheBulletins\" :value=\"showAvalancheBulletins\">\n              <span v-translate>Visible on map</span>\n            </input-checkbox>\n          </div>\n          <dl>\n            <div v-for=\"(mountainsForMassif, massif) of visibleMountains\" :key=\"massif\">\n              <dt>\n                {{ massif }}\n              </dt>\n              <div class=\"yetimountains-list px-4 py-3\">\n                <dd v-for=\"mountain of mountainsForMassif\" :key=\"mountain.name\">\n                  <a :href=\"mountain.urls[0].url\" target=\"_blank\">\n                    <fa-icon icon=\"external-link-alt\" />\n                    {{ mountain.name }}\n                  </a>\n                </dd>\n              </div>\n            </div>\n          </dl>\n        </div>\n        <div v-else>\n          <info class=\"column\" v-translate>Massifs could not be loaded</info>\n        </div>\n      </template>\n    </dropdown-content>\n  </div>\n</template>\n\n<script>\nimport Counter from '@/components/yeti/Counter.vue';\nimport DropdownContent from '@/components/yeti/DropdownContent.vue';\nimport Info from '@/components/yeti/Info.vue';\nimport SubPanelTitle from '@/components/yeti/SubPanelTitle.vue';\nimport Yetix from '@/components/yeti/Yetix';\n\nexport default {\n  components: { Counter, DropdownContent, Info, SubPanelTitle },\n  data() {\n    return {\n      showMountainsList: false,\n    };\n  },\n  computed: {\n    bra() {\n      return Yetix.bra;\n    },\n    visibleMountains() {\n      return Yetix.mountains.visible;\n    },\n    showAvalancheBulletins() {\n      return Yetix.showAvalancheBulletins;\n    },\n    showVisibleMountains() {\n      return this.countVisibleMountains >= 0;\n    },\n    countVisibleMountains() {\n      // if visibleMountains are set\n      if (this.visibleMountains) {\n        return Object.values(this.visibleMountains).reduce((a, b) => a + b.length, 0);\n      }\n      // else, return -1 (because 0 is not an error)\n      return -1;\n    },\n  },\n  watch: {\n    'bra.isDifferent': 'checkBraIsDifferent',\n  },\n  methods: {\n    onChange(event, prop) {\n      const value = prop === 'isDifferent' ? event : event.target.value;\n      Yetix.setBra(prop, value);\n    },\n    checkBraIsDifferent() {\n      if (!this.bra.isDifferent) {\n        Yetix.setBra('low', null);\n        Yetix.setBra('altiThreshold', null);\n      }\n    },\n    onShowAvalancheBulletins(value) {\n      Yetix.setShowAvalancheBulletins(value);\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import '@/assets/sass/variables';\n\n.inputs-bra {\n  margin-left: 2rem;\n  position: relative;\n\n  .input-bra-high {\n    position: absolute;\n    left: 39px;\n    top: 62px;\n  }\n\n  .input-bra-threshold {\n    position: absolute;\n    left: 115px;\n    top: 40px;\n    width: 85px;\n  }\n\n  .input-bra-low {\n    position: absolute;\n    left: 39px;\n    top: 78px;\n  }\n}\n\n.inputs-bra-different {\n  .input-bra-high {\n    top: 45px;\n  }\n}\n\n.yetimountains-list {\n  columns: 3 170px;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./SubPanelBra.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./SubPanelBra.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SubPanelBra.vue?vue&type=template&id=e8e4ddb2&scoped=true&\"\nimport script from \"./SubPanelBra.vue?vue&type=script&lang=js&\"\nexport * from \"./SubPanelBra.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SubPanelBra.vue?vue&type=style&index=0&id=e8e4ddb2&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e8e4ddb2\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"yeti-subpanel\"},[_c('sub-panel-title',[_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Route\")])]),_vm._v(\" \"),(_vm.features.length)?_c('div',[_c('div',{staticClass:\"columns is-mobile\"},[_c('div',{staticClass:\"column\"},[_c('p',{staticClass:\"features-title\"},[_c('icon-route',{staticClass:\"icon document-icon\"}),_vm._v(\" \"),_c('fa-icon',{staticClass:\"icon edit-icon\",attrs:{\"icon\":\"pen\"}}),_vm._v(\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.hasFeaturesTitle),expression:\"!hasFeaturesTitle\"},{name:\"translate\",rawName:\"v-translate\"}],staticClass:\"features-title-text features-title-placeholder\",on:{\"click\":_vm.onEditNewFeaturesTitle}},[_vm._v(\"\\n            Add title…\\n          \")]),_vm._v(\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hasFeaturesTitle),expression:\"hasFeaturesTitle\"}],ref:\"featuresTitle\",staticClass:\"features-title-text features-title-content\",attrs:{\"tabindex\":\"0\",\"contenteditable\":\"\",\"spellcheck\":\"false\"},on:{\"blur\":_vm.onEditFeaturesTitle,\"keypress\":function($event){if(!$event.type.indexOf('key')&&$event.keyCode!==13)return null;$event.preventDefault();}}},[_vm._v(_vm._s(_vm.featuresTitle))])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"column is-narrow\"},[_c('button',{staticClass:\"button is-secondary is-small\",on:{\"click\":_vm.onRemoveFeatures}},[_c('fa-icon',{staticClass:\"trash-icon\",attrs:{\"icon\":\"trash\"}}),_vm._v(\" \"),_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Delete route\")])],1)])]),_vm._v(\" \"),_c('div',{staticClass:\"ml-5 mb-5\"},[_c('p',{directives:[{name:\"translate\",rawName:\"v-translate\"}],staticClass:\"is-size-7 is-italic mb-1 has-text-grey\"},[_vm._v(\"Lines chunks\")]),_vm._v(\" \"),_c('features-list',{attrs:{\"features\":_vm.features}})],1),_vm._v(\" \"),_c('simplify-tool',{ref:\"simplifyTool\"}),_vm._v(\" \"),_c('info',{attrs:{\"type\":\"help\"}},[_c('p',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Drawing tips\")]),_vm._v(\" \"),_c('ul',{staticClass:\"content-ul\"},[_c('li',[_c('strong',{directives:[{name:\"translate\",rawName:\"v-translate\"}],attrs:{\"translate-context\":\"yeti\"}},[_vm._v(\"Draw\")]),_vm._v(\" \"),_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"new lines chunks\")])]),_vm._v(\" \"),_c('li',[_c('strong',{directives:[{name:\"translate\",rawName:\"v-translate\"}],attrs:{\"translate-context\":\"yeti\"}},[_vm._v(\"Delete\")]),_vm._v(\" \"),_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"last point with the Backspace key\")])])]),_vm._v(\" \"),_c('p',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"On a drawn line\")]),_vm._v(\" \"),_c('ul',{staticClass:\"content-ul\"},[_c('li',[_c('strong',{directives:[{name:\"translate\",rawName:\"v-translate\"}],attrs:{\"translate-context\":\"yeti\"}},[_vm._v(\"Edit\")]),_vm._v(\" \"),_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"points by moving them\")])]),_vm._v(\" \"),_c('li',[_c('strong',{directives:[{name:\"translate\",rawName:\"v-translate\"}],attrs:{\"translate-context\":\"yeti\"}},[_vm._v(\"Create\")]),_vm._v(\" \"),_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"a new point on an existing line\")])]),_vm._v(\" \"),_c('li',[_c('strong',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Delete a point\")]),_vm._v(\" \"),_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"with Alt + clic\")])])]),_vm._v(\" \"),_c('p',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"From the interface\")]),_vm._v(\" \"),_c('ul',{staticClass:\"content-ul\"},[_c('li',[_c('strong',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Delete a line chunk\")])]),_vm._v(\" \"),_c('li',[_c('strong',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Delete route\")]),_vm._v(\" \"),_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"to start or load a new one\")])])])]),_vm._v(\" \"),_c('sub-panel-title',[_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Export\")])]),_vm._v(\" \"),_c('div',{staticClass:\"columns is-vcentered is-mobile\"},[_c('div',{staticClass:\"column\"},[_c('ul',{staticClass:\"form-export\"},_vm._l((_vm.formats),function(type){return _c('li',{key:type,staticClass:\"control is-flex\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.format),expression:\"format\"}],staticClass:\"is-checkradio is-primary\",attrs:{\"id\":'format' + type,\"type\":\"radio\",\"name\":\"exportFormat\"},domProps:{\"value\":type,\"checked\":_vm._q(_vm.format,type)},on:{\"change\":function($event){_vm.format=type}}}),_vm._v(\" \"),_c('label',{attrs:{\"for\":'format' + type}},[_vm._v(_vm._s(type))])])}),0)]),_vm._v(\" \"),_c('div',{staticClass:\"column is-narrow\"},[_c('button',{directives:[{name:\"translate\",rawName:\"v-translate\"}],staticClass:\"button is-primary\",class:{ 'is-disabled': _vm.validSimplifyTolerance },on:{\"click\":_vm.downloadCourse}},[_vm._v(\"\\n          Export route\\n        \")])])])],1):_c('div',[_c('p',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"No route right now\")]),_vm._v(\" \"),_c('div',{staticClass:\"load-gpx\"},[_c('button',{directives:[{name:\"translate\",rawName:\"v-translate\"}],staticClass:\"button is-primary\",class:{ 'is-loading': _vm.loading },attrs:{\"disabled\":_vm.loading},on:{\"click\":_vm.onLoadGpx}},[_vm._v(\"\\n        Upload a GPS track\\n      \")]),_vm._v(\" \"),_c('div',{staticClass:\"control upload-button\"},[_c('input',{ref:\"gpxFileInput\",attrs:{\"type\":\"file\",\"accept\":\".gpx\"},on:{\"change\":_vm.uploadGpx}})]),_vm._v(\" \"),_c('info',{staticClass:\"mt-5\",attrs:{\"type\":\"help\"}},[_c('p',[_c('strong',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"To draw (and edit) directly on the map\")]),_vm._v(\" \"),_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"you need to activate drawing mode\")])])])],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('ul',{staticClass:\"featureslist\"},_vm._l((_vm.features),function(feature,i){return _c('li',{key:i,staticClass:\"featureslist-item tag\",on:{\"mouseenter\":function($event){return _vm.showFeature(feature)},\"mouseleave\":function($event){return _vm.hideFeature(feature)}}},[_c('span',[_vm._v(_vm._s(_vm.nbPointsOnFeature(feature))+\" points\")]),_vm._v(\" \"),_c('button',{staticClass:\"delete is-small\",on:{\"click\":function($event){return _vm.removeFeature(feature)}}},[_vm._v(\"x\")])])}),0)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <ul class=\"featureslist\">\n    <li\n      v-for=\"(feature, i) of features\"\n      :key=\"i\"\n      class=\"featureslist-item tag\"\n      @mouseenter=\"showFeature(feature)\"\n      @mouseleave=\"hideFeature(feature)\"\n    >\n      <span>{{ nbPointsOnFeature(feature) }} points</span>\n      <button class=\"delete is-small\" @click=\"removeFeature(feature)\">x</button>\n    </li>\n  </ul>\n</template>\n\n<script>\nimport Yetix from '@/components/yeti/Yetix';\n\nexport default {\n  props: {\n    features: {\n      type: Array,\n      required: true,\n    },\n  },\n  methods: {\n    removeFeature(feature) {\n      Yetix.$emit('removeFeature', feature);\n    },\n    showFeature(feature) {\n      feature.setStyle(feature.get('highlightedStyle'));\n    },\n    hideFeature(feature) {\n      feature.setStyle(feature.get('normalStyle'));\n    },\n    nbPointsOnFeature(feature) {\n      return feature.getGeometry().getCoordinates().length;\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import '@/assets/sass/variables';\n\n.featureslist {\n  margin: 0 -0.5rem;\n\n  &-item {\n    margin: 0.25rem;\n    font-size: 0.7em;\n\n    &:hover,\n    &:focus {\n      background: $grey-lighter;\n      cursor: default;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./FeaturesList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./FeaturesList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FeaturesList.vue?vue&type=template&id=1abb2607&scoped=true&\"\nimport script from \"./FeaturesList.vue?vue&type=script&lang=js&\"\nexport * from \"./FeaturesList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FeaturesList.vue?vue&type=style&index=0&id=1abb2607&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1abb2607\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('dropdown-content',{staticClass:\"mb-5\",scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('p',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Select tolerance (preview result on map)\")]),_vm._v(\" \"),_c('div',{staticClass:\"is-flex is-justify-content-center is-flex-wrap-wrap mt-3 mb-4\"},_vm._l((_vm.tolerances),function(tolerance,i){return _c('div',{key:tolerance,staticClass:\"mb-2 is-flex-grow-1\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.toleranceDistance),expression:\"toleranceDistance\"}],staticClass:\"is-checkradio is-primary\",attrs:{\"id\":'tolerance' + i,\"type\":\"radio\",\"name\":\"tolerances\"},domProps:{\"value\":tolerance,\"checked\":_vm._q(_vm.toleranceDistance,tolerance)},on:{\"change\":[function($event){_vm.toleranceDistance=tolerance},_vm.onPreviewSimplify]}}),_vm._v(\" \"),_c('label',{staticClass:\"mr-0\",attrs:{\"for\":'tolerance' + i}},[_vm._v(_vm._s(_vm.tolerancesText[i]))])])}),0),_vm._v(\" \"),_c('div',{staticClass:\"is-flex is-justify-content-flex-end is-align-items-center\"},[_c('div',[_c('button',{directives:[{name:\"translate\",rawName:\"v-translate\"}],staticClass:\"button\",attrs:{\"disabled\":!_vm.validToleranceDistance},on:{\"click\":_vm.initialize}},[_vm._v(\"Cancel\")]),_vm._v(\" \"),_c('button',{directives:[{name:\"translate\",rawName:\"v-translate\"}],staticClass:\"button is-primary\",attrs:{\"disabled\":!_vm.validToleranceDistance},on:{\"click\":_vm.onSimplify}},[_vm._v(\"\\n          Simplify\\n        \")])])]),_vm._v(\" \"),_c('info',[_vm._v(\"\\n      \"+_vm._s(_vm.featuresLength)+\" \"),_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"points\")]),_vm._v(\" \"),(_vm.validToleranceDistance)?_c('strong',[_vm._v(\"\\n        (\"),_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"after:\")]),_vm._v(\" \"+_vm._s(_vm.featuresSimplifiedLength)+\" \"),_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"points\")]),_vm._v(\")\\n      \")]):_vm._e()]),_vm._v(\" \"),(_vm.validToleranceDistance)?_c('info',{attrs:{\"type\":\"warning\"}},[_c('strong',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Be careful,\")]),_vm._v(\" \"),_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"\\n        this is a preview. Geometry is not simplified yet. Map interactions and export are disabled.\\n      \")])]):_vm._e(),_vm._v(\" \"),_c('info',{staticClass:\"mt-5\",attrs:{\"type\":\"help\"}},[_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Create a simplified version of the geometry by reducing the amount of points\")])])]},proxy:true}])},[_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Simplify\")]),_vm._v(\" \"),(_vm.validToleranceDistance)?_c('fa-icon',{staticClass:\"has-text-danger ml-1\",attrs:{\"icon\":\"exclamation-circle\",\"title\":_vm.$gettext('Not simplified yet')}}):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <dropdown-content class=\"mb-5\">\n    <span v-translate>Simplify</span>\n    <fa-icon\n      icon=\"exclamation-circle\"\n      v-if=\"validToleranceDistance\"\n      class=\"has-text-danger ml-1\"\n      :title=\"$gettext('Not simplified yet')\"\n    />\n    <template #content>\n      <p v-translate>Select tolerance (preview result on map)</p>\n      <div class=\"is-flex is-justify-content-center is-flex-wrap-wrap mt-3 mb-4\">\n        <div v-for=\"(tolerance, i) of tolerances\" :key=\"tolerance\" class=\"mb-2 is-flex-grow-1\">\n          <input\n            :id=\"'tolerance' + i\"\n            class=\"is-checkradio is-primary\"\n            type=\"radio\"\n            name=\"tolerances\"\n            :value=\"tolerance\"\n            v-model=\"toleranceDistance\"\n            @change=\"onPreviewSimplify\"\n          />\n          <label :for=\"'tolerance' + i\" class=\"mr-0\">{{ tolerancesText[i] }}</label>\n        </div>\n      </div>\n      <div class=\"is-flex is-justify-content-flex-end is-align-items-center\">\n        <div>\n          <button class=\"button\" :disabled=\"!validToleranceDistance\" @click=\"initialize\" v-translate>Cancel</button>\n          <button class=\"button is-primary\" :disabled=\"!validToleranceDistance\" @click=\"onSimplify\" v-translate>\n            Simplify\n          </button>\n        </div>\n      </div>\n      <info>\n        {{ featuresLength }} <span v-translate>points</span>\n        <strong v-if=\"validToleranceDistance\">\n          (<span v-translate>after:</span> {{ featuresSimplifiedLength }} <span v-translate>points</span>)\n        </strong>\n      </info>\n      <info type=\"warning\" v-if=\"validToleranceDistance\">\n        <strong v-translate>Be careful,</strong>\n        <span v-translate>\n          this is a preview. Geometry is not simplified yet. Map interactions and export are disabled.\n        </span>\n      </info>\n      <info type=\"help\" class=\"mt-5\">\n        <span v-translate>Create a simplified version of the geometry by reducing the amount of points</span>\n      </info>\n    </template>\n  </dropdown-content>\n</template>\n\n<script>\nimport DropdownContent from '@/components/yeti/DropdownContent.vue';\nimport Info from '@/components/yeti/Info.vue';\nimport Yetix from '@/components/yeti/Yetix';\n\nexport default {\n  components: { DropdownContent, Info },\n  data() {\n    return {\n      tolerances: [0, 25, 50, 100, 200],\n      tolerancesText: [this.$gettext('No'), '25m', '50m', '100m', '200m'],\n      toleranceDistance: 0,\n    };\n  },\n  computed: {\n    features() {\n      return Yetix.features;\n    },\n    featuresLength() {\n      return Yetix.featuresLength;\n    },\n    featuresSimplifiedLength() {\n      return this.features\n        .map((feature) => {\n          return feature.getGeometry().getCoordinates().length;\n        })\n        .reduce((acc, value) => acc + value);\n    },\n    validToleranceDistance() {\n      return this.toleranceDistance !== 0;\n    },\n  },\n  watch: {\n    toleranceDistance() {\n      if (this.validToleranceDistance) {\n        Yetix.setValidSimplifyTolerance(true);\n      } else {\n        Yetix.setValidSimplifyTolerance(false);\n      }\n    },\n  },\n  destroyed() {\n    // set validSimplifyTolerance to false\n    // go back to normal case for simplify tool\n    // and retrieve default value for drawing mode\n    Yetix.setValidSimplifyTolerance(false);\n  },\n  methods: {\n    onPreviewSimplify() {\n      Yetix.$emit('previewSimplify', this.toleranceDistance);\n    },\n    onSimplify() {\n      Yetix.$emit('simplify');\n      // go back to init\n      this.initialize();\n    },\n    initialize() {\n      this.toleranceDistance = 0;\n      this.onPreviewSimplify();\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./SimplifyTool.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./SimplifyTool.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SimplifyTool.vue?vue&type=template&id=3de4e67b&\"\nimport script from \"./SimplifyTool.vue?vue&type=script&lang=js&\"\nexport * from \"./SimplifyTool.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"yeti-subpanel\">\n    <sub-panel-title><span v-translate>Route</span></sub-panel-title>\n    <div v-if=\"features.length\">\n      <div class=\"columns is-mobile\">\n        <div class=\"column\">\n          <p class=\"features-title\">\n            <icon-route class=\"icon document-icon\" />\n            <fa-icon icon=\"pen\" class=\"icon edit-icon\" />\n            <span\n              v-show=\"!hasFeaturesTitle\"\n              class=\"features-title-text features-title-placeholder\"\n              @click=\"onEditNewFeaturesTitle\"\n              v-translate\n            >\n              Add title…\n            </span>\n            <span\n              v-show=\"hasFeaturesTitle\"\n              class=\"features-title-text features-title-content\"\n              ref=\"featuresTitle\"\n              tabindex=\"0\"\n              contenteditable\n              spellcheck=\"false\"\n              @blur=\"onEditFeaturesTitle\"\n              @keypress.13.prevent\n              >{{ featuresTitle }}</span\n            >\n          </p>\n        </div>\n        <div class=\"column is-narrow\">\n          <button class=\"button is-secondary is-small\" @click=\"onRemoveFeatures\">\n            <fa-icon icon=\"trash\" class=\"trash-icon\" />\n            <span v-translate>Delete route</span>\n          </button>\n        </div>\n      </div>\n      <div class=\"ml-5 mb-5\">\n        <p class=\"is-size-7 is-italic mb-1 has-text-grey\" v-translate>Lines chunks</p>\n        <features-list :features=\"features\" />\n      </div>\n      <simplify-tool ref=\"simplifyTool\" />\n      <info type=\"help\">\n        <p v-translate>Drawing tips</p>\n        <ul class=\"content-ul\">\n          <li><strong v-translate translate-context=\"yeti\">Draw</strong> <span v-translate>new lines chunks</span></li>\n          <li>\n            <strong v-translate translate-context=\"yeti\">Delete</strong>\n            <span v-translate>last point with the Backspace key</span>\n          </li>\n        </ul>\n        <p v-translate>On a drawn line</p>\n        <ul class=\"content-ul\">\n          <li>\n            <strong v-translate translate-context=\"yeti\">Edit</strong> <span v-translate>points by moving them</span>\n          </li>\n          <li>\n            <strong v-translate translate-context=\"yeti\">Create</strong>\n            <span v-translate>a new point on an existing line</span>\n          </li>\n          <li><strong v-translate>Delete a point</strong> <span v-translate>with Alt + clic</span></li>\n        </ul>\n        <p v-translate>From the interface</p>\n        <ul class=\"content-ul\">\n          <li><strong v-translate>Delete a line chunk</strong></li>\n          <li><strong v-translate>Delete route</strong> <span v-translate>to start or load a new one</span></li>\n        </ul>\n      </info>\n      <sub-panel-title><span v-translate>Export</span></sub-panel-title>\n      <div class=\"columns is-vcentered is-mobile\">\n        <div class=\"column\">\n          <ul class=\"form-export\">\n            <li v-for=\"type of formats\" :key=\"type\" class=\"control is-flex\">\n              <input\n                :id=\"'format' + type\"\n                type=\"radio\"\n                name=\"exportFormat\"\n                class=\"is-checkradio is-primary\"\n                :value=\"type\"\n                v-model=\"format\"\n              />\n              <label :for=\"'format' + type\">{{ type }}</label>\n            </li>\n          </ul>\n        </div>\n        <div class=\"column is-narrow\">\n          <button\n            class=\"button is-primary\"\n            :class=\"{ 'is-disabled': validSimplifyTolerance }\"\n            @click=\"downloadCourse\"\n            v-translate\n          >\n            Export route\n          </button>\n        </div>\n      </div>\n    </div>\n    <div v-else>\n      <p v-translate>No route right now</p>\n      <div class=\"load-gpx\">\n        <button\n          class=\"button is-primary\"\n          :class=\"{ 'is-loading': loading }\"\n          :disabled=\"loading\"\n          @click=\"onLoadGpx\"\n          v-translate\n        >\n          Upload a GPS track\n        </button>\n        <div class=\"control upload-button\">\n          <input ref=\"gpxFileInput\" type=\"file\" @change=\"uploadGpx\" accept=\".gpx\" />\n        </div>\n        <info type=\"help\" class=\"mt-5\">\n          <p>\n            <strong v-translate>To draw (and edit) directly on the map</strong>\n            <span v-translate>you need to activate drawing mode</span>\n          </p>\n        </info>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { format } from 'date-fns';\n\nimport FeaturesList from '@/components/yeti/FeaturesList.vue';\nimport Info from '@/components/yeti/Info.vue';\nimport SimplifyTool from '@/components/yeti/SimplifyTool.vue';\nimport SubPanelTitle from '@/components/yeti/SubPanelTitle.vue';\nimport Yetix from '@/components/yeti/Yetix';\nimport ol from '@/js/libs/ol';\nimport utils from '@/js/utils';\n\nexport default {\n  components: { FeaturesList, Info, SimplifyTool, SubPanelTitle },\n  data() {\n    return {\n      newFeaturesTitle: false,\n      loading: false,\n      formats: ['GPX', 'KML'],\n      format: 'GPX',\n    };\n  },\n  computed: {\n    features() {\n      return Yetix.features;\n    },\n    featuresTitle() {\n      return Yetix.featuresTitle;\n    },\n    validSimplifyTolerance() {\n      return Yetix.validSimplifyTolerance;\n    },\n    hasFeaturesTitle() {\n      return !(!this.featuresTitle.length && !this.newFeaturesTitle);\n    },\n  },\n  methods: {\n    onEditFeaturesTitle(e) {\n      if (!e.target.innerText.length) {\n        this.newFeaturesTitle = false;\n      }\n      Yetix.setFeaturesTitle(e.target.innerText);\n    },\n    onEditNewFeaturesTitle() {\n      this.newFeaturesTitle = true;\n      this.$nextTick(() => {\n        this.$refs.featuresTitle.focus();\n      });\n    },\n    onLoadGpx() {\n      this.$refs.gpxFileInput.click();\n    },\n    onRemoveFeatures() {\n      if (confirm(this.$gettext('Confirm delete'))) {\n        Yetix.$emit('removeFeatures');\n        // initialize simplify tool (go back to init state)\n        this.$refs.simplifyTool.initialize();\n      }\n    },\n    uploadGpx(event) {\n      this.loading = true;\n\n      const reader = new FileReader();\n\n      reader.onload = () => {\n        this.loading = false;\n        Yetix.$emit('gpx', reader.result);\n      };\n\n      reader.readAsText(event.target.files[0]);\n\n      // empty the input, because if user wan't to upload same trace\n      // change event is not fired\n      // and emit gpx event\n      this.$refs.gpxFileInput.value = '';\n      Yetix.$emit('gpx', null);\n    },\n    downloadCourse() {\n      if (this.validSimplifyTolerance) {\n        return window.alert('Export is disabled. You must confirm simplified geometry first.');\n      }\n      if (this.format === 'GPX') {\n        this.downloadFeatures(new ol.format.GPX(), '.gpx', 'application/gpx+xml');\n      } else if (this.format === 'KML') {\n        this.downloadFeatures(new ol.format.KML(), '.kml', 'application/vnd.google-earth.kml+xml');\n      }\n    },\n    downloadFeatures(olFormat, extension, mimetype) {\n      const features = this.features;\n      features[0].set('name', this.featuresTitle);\n\n      const filename = this.setFilename(extension);\n\n      const content = olFormat.writeFeatures(features, {\n        featureProjection: 'EPSG:3857',\n      });\n\n      utils.download(content, filename, mimetype + ';charset=utf-8');\n    },\n    setFilename(ext) {\n      return format(new Date(), 'yyyy-MM-dd_HH-mm-ss') + ext;\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.features-title {\n  display: flex;\n  line-height: 1.4;\n\n  &-text {\n    min-width: 100px;\n    border: solid 1px transparent;\n    border-radius: 2px;\n    padding: 2px 2em 2px 2px;\n    box-decoration-break: clone;\n\n    &:hover,\n    &:focus {\n      border-color: #b5b5b5;\n    }\n  }\n\n  &-placeholder {\n    font-style: italic;\n  }\n\n  &-content {\n    font-weight: bold;\n  }\n}\n\n.icon {\n  margin-top: 2px;\n}\n\n.edit-icon {\n  order: 1;\n  opacity: 0;\n  margin-left: -1.5em;\n  pointer-events: none;\n  transform: scale(0.75);\n}\n\n.features-title:hover .edit-icon {\n  opacity: 0.75;\n}\n\n.document-icon {\n  margin-right: 3px;\n}\n\n.trash-icon {\n  margin-right: 3px;\n}\n\n.upload-button {\n  position: relative;\n}\n\ninput[type='file'] {\n  opacity: 0; /* invisible but it's there! */\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  cursor: pointer;\n}\n\n.load-gpx {\n  margin-top: 2rem;\n}\n\n.form-export {\n  display: flex;\n}\n\n.control {\n  align-items: center;\n\n  .is-checkradio[type='radio'] + label {\n    line-height: 1.2rem;\n  }\n}\n\n.is-disabled {\n  cursor: not-allowed;\n  opacity: 0.5;\n}\n\n@media screen and (max-width: 350px) {\n  .form-export {\n    display: block;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./SubPanelCourse.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./SubPanelCourse.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SubPanelCourse.vue?vue&type=template&id=3739719b&scoped=true&\"\nimport script from \"./SubPanelCourse.vue?vue&type=script&lang=js&\"\nexport * from \"./SubPanelCourse.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SubPanelCourse.vue?vue&type=style&index=0&id=3739719b&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3739719b\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"yeti-subpanel\"},[_c('sub-panel-title',[_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Methods\")])]),_vm._v(\" \"),_c('div',{staticClass:\"columns is-mobile yetitabs\"},_vm._l((Object.keys(_vm.methods)),function(item){return _c('div',{key:item,staticClass:\"column yetitab\"},[_c('div',{staticClass:\"control yetitab-control\",class:{ 'yetitab-control--selected': _vm.method.type === item }},[_c('input',{staticClass:\"is-checkradio is-primary\",attrs:{\"id\":'c2c-method-' + item,\"type\":\"radio\",\"name\":\"method\",\"disabled\":item === 'mrd' ? _vm.bra.high == 4 || _vm.bra.low == 4 : false},domProps:{\"value\":item,\"checked\":item === _vm.method.type},on:{\"change\":function($event){return _vm.onChange($event, 'type')}}}),_vm._v(\" \"),_c('label',{staticClass:\"yetitab-label\",attrs:{\"for\":'c2c-method-' + item},on:{\"click\":function($event){return _vm.warnAboutMethodBra(item)}}},[_vm._v(\"\\n          \"+_vm._s(_vm.methods[item][0])+\"\\n          \"),_c('span',{staticClass:\"is-size-7\",class:{ 'has-text-grey': item !== _vm.method.type }},[_vm._v(_vm._s(_vm.methods[item][1]))])])])])}),0),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.method.type == 'mrd'),expression:\"method.type == 'mrd'\"}]},[_c('p',[_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"With the\")]),_vm._v(\" \"),_c('strong',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Beginner Reduction Method\")]),_vm._v(\" \"),_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"\\n        (MRD), you do not have to enter any parameters other than the danger level(s) given by the avalanche bulletin.\\n      \")])]),_vm._v(\" \"),_c('info',{attrs:{\"type\":\"help\"}},[_c('p',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"\\n        As the name suggests, this method is intended for beginners. Therefore, the safety margin must be particularly\\n        important. No parameter other than the danger level is specified. Orientation is ignored.\\n      \")])]),_vm._v(\" \"),_c('table',{staticClass:\"yetiform-danger\"},[_c('tr',[_vm._m(0),_vm._v(\" \"),_c('td',[_c('strong',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Danger rating - low\")])]),_vm._v(\" \"),_c('td',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"I must not use slopes > 40°\")])]),_vm._v(\" \"),_c('tr',[_vm._m(1),_vm._v(\" \"),_c('td',[_c('strong',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Danger rating - moderate\")])]),_vm._v(\" \"),_c('td',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"I must not use slopes > 35°\")])]),_vm._v(\" \"),_c('tr',{staticClass:\"multiline\"},[_vm._m(2),_vm._v(\" \"),_c('td',[_c('strong',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Danger rating - considerable\")])]),_vm._v(\" \"),_c('td',[_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"I must not use slopes > 30°\")]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('small',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"including dominant slopes\")])])]),_vm._v(\" \"),_c('tr',[_vm._m(3),_vm._v(\" \"),_c('td',[_c('strong',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Danger rating - high to very high\")])]),_vm._v(\" \"),_c('td',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"I choose to cancel the outing\")])])])],1),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.method.type == 'mre'),expression:\"method.type == 'mre'\"}]},[_c('p',[_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"With the\")]),_vm._v(\" \"),_c('strong',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Elementary Reduction Method\")]),_vm._v(\" \"),_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"\\n        (MRE), you can enter the sectors of the compass rose that are reported as critical in the avalanche bulletin.\\n      \")])]),_vm._v(\" \"),_c('input-orientation',{staticClass:\"has-text-centered mb-2\",attrs:{\"value\":_vm.method.orientation},on:{\"input\":function($event){return _vm.onChange($event, 'orientation')}}}),_vm._v(\" \"),(_vm.method.orientation.length != 0)?_c('info',[_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}],key:\"tr1\"},[_vm._v(\"Orientations\")]),_vm._v(\": \"+_vm._s(_vm.method.orientation.join(', '))+\"\\n    \")]):_c('info',{attrs:{\"type\":\"warning\"}},[_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}],key:\"tr2\"},[_vm._v(\"No orientation selected\")])]),_vm._v(\" \"),_c('info',{attrs:{\"type\":\"help\"}},[_c('p',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"\\n        Danger level from the avalanche bulletin applies to all orientations. The compass rose distinguishes the most\\n        critical sectors presenting an increased risk.\\n      \")])]),_vm._v(\" \"),_c('table',{staticClass:\"yetiform-danger\"},[_c('tr',{staticClass:\"multiline\"},[_vm._m(4),_vm._v(\" \"),_c('td',[_c('strong',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Danger rating - low\")])]),_vm._v(\" \"),_c('td',[_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Stay careful while skiing\")]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('small',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"risk of a rough fall on hard snow\")])])]),_vm._v(\" \"),_c('tr',[_vm._m(5),_vm._v(\" \"),_c('td',[_c('strong',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Danger rating - moderate\")])]),_vm._v(\" \"),_c('td',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"I must not use slopes > 40°\")])]),_vm._v(\" \"),_c('tr',{staticClass:\"multiline\"},[_vm._m(6),_vm._v(\" \"),_c('td',[_c('strong',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Danger rating - considerable\")])]),_vm._v(\" \"),_c('td',[_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"I must not use slopes > 35°\")]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('small',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"including dominant slopes\")])])]),_vm._v(\" \"),_c('tr',{staticClass:\"multiline\"},[_vm._m(7),_vm._v(\" \"),_c('td',[_c('strong',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Danger rating - high\")])]),_vm._v(\" \"),_c('td',[_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"I must not use slopes > 30°\")]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('small',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"including dominant slopes\")])])]),_vm._v(\" \"),_c('tr',[_vm._m(8),_vm._v(\" \"),_c('td',[_c('strong',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Danger rating - very high\")])]),_vm._v(\" \"),_c('td',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"I choose to cancel the outing\")])])])],1),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.method.type == 'mrp'),expression:\"method.type == 'mrp'\"}]},[_c('p',[_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"With the\")]),_vm._v(\" \"),_c('strong',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Professional Reduction Method\")]),_vm._v(\" \"),_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"\\n        (MRP), you can refine the hazard potential, set group size and any precautionary measures being considered.\\n      \")])]),_vm._v(\" \"),_c('h3',{directives:[{name:\"translate\",rawName:\"v-translate\"}],staticClass:\"title is-3\"},[_vm._v(\"Hazard potential\")]),_vm._v(\" \"),_c('ul',{staticClass:\"potential-danger-labels has-text-black\"},_vm._l((_vm.potentialDangerLabels),function(label){return _c('li',{key:label.text,staticClass:\"potential-danger-label is-size-5\",attrs:{\"disabled\":!_vm.bra.high || label.text < _vm.potentialDangerOptions.min || label.text > _vm.potentialDangerOptions.max,\"selected\":_vm.method.potentialDanger == label.text},on:{\"click\":function($event){return _vm.onChange(label.text, 'potentialDanger')}}},[_c('span',{class:{ 'is-size-3 has-text-weight-bold': label.val }},[_vm._v(\"\\n          \"+_vm._s(label.text)+\"\\n        \")])])}),0),_vm._v(\" \"),(_vm.method.potentialDanger)?_c('info',[_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}],key:\"tr1\"},[_vm._v(\"Hazard potential:\")]),_vm._v(\"\\n      \"+_vm._s(_vm.method.potentialDanger)+\"\\n      (\"),_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Danger level:\")]),_vm._v(\" \"+_vm._s(_vm.bra.high)+\")\\n    \")]):_c('info',{attrs:{\"type\":\"warning\"}},[_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}],key:\"tr2\"},[_vm._v(\"No selected hazard potential. Set danger level first.\")])]),_vm._v(\" \"),_c('info',{attrs:{\"type\":\"help\"}},[_c('p',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"\\n        The hazard potential is calculated from the danger level of the avalanche bulletin. It can be fine-tuned by\\n        selecting a potential within the danger level’s corresponding range. For example: the avalanche bulletin\\n        evokes a danger 3 just after a period in danger 4. We can then indicate a hazard potential of 12 instead of 8.\\n      \")])]),_vm._v(\" \"),_c('p',[_c('input-checkbox',{attrs:{\"value\":_vm.method.wetSnow},on:{\"input\":function($event){return _vm.onChange($event, 'wetSnow')}}},[_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Wet snow: orientation not taken into account\")])])],1),_vm._v(\" \"),_c('info',{attrs:{\"type\":\"help\"}},[_c('p',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Be careful, in wet snow, no factor to reduce orientation or attendance can be applied.\")])]),_vm._v(\" \"),_c('h3',{directives:[{name:\"translate\",rawName:\"v-translate\"}],staticClass:\"title is-3\"},[_vm._v(\"Group\")]),_vm._v(\" \"),_c('ul',_vm._l((_vm.groupSizes),function(item,i){return _c('li',{key:i,staticClass:\"control\"},[_c('input',{staticClass:\"is-checkradio is-primary\",attrs:{\"id\":'c2c-group-size-' + i,\"type\":\"radio\",\"name\":\"groupSize\"},domProps:{\"value\":item.value,\"checked\":item.value === _vm.method.groupSize},on:{\"change\":function($event){return _vm.onChange($event, 'groupSize')}}}),_vm._v(\" \"),_c('label',{attrs:{\"for\":'c2c-group-size-' + i}},[_vm._v(_vm._s(item.text))])])}),0),_vm._v(\" \"),_c('info',{attrs:{\"type\":\"help\"}},[_c('p',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Group size\")]),_vm._v(\" \"),_c('ul',{staticClass:\"content-ul\"},[_c('li',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Large group = 5 people and more\")]),_vm._v(\" \"),_c('li',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Small group = 2 to 4 people\")])]),_vm._v(\" \"),_c('p',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Load shedding distance\")]),_vm._v(\" \"),_c('ul',{staticClass:\"content-ul\"},[_c('li',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"10 meters minimum while ascending\")]),_vm._v(\" \"),_c('li',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"50 meters while descending\")])])]),_vm._v(\" \"),_c('p',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"\\n      The “slope traveled frequently” factor is not taken into account by the application, as it is often difficult to\\n      ascertain when preparing for an outing.\\n    \")])],1)],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('td',[_c('img',{attrs:{\"src\":require(\"@/assets/img/yeti/levels-danger.svg\") + \"#level1\",\"loading\":\"lazy\"}})])\n},function (){var _vm=this,_c=_vm._self._c;return _c('td',[_c('img',{attrs:{\"src\":require(\"@/assets/img/yeti/levels-danger.svg\") + \"#level2\",\"loading\":\"lazy\"}})])\n},function (){var _vm=this,_c=_vm._self._c;return _c('td',[_c('img',{attrs:{\"src\":require(\"@/assets/img/yeti/levels-danger.svg\") + \"#level3\",\"loading\":\"lazy\"}})])\n},function (){var _vm=this,_c=_vm._self._c;return _c('td',[_c('img',{attrs:{\"src\":require(\"@/assets/img/yeti/levels-danger.svg\") + \"#level4\",\"loading\":\"lazy\"}})])\n},function (){var _vm=this,_c=_vm._self._c;return _c('td',[_c('img',{attrs:{\"src\":require(\"@/assets/img/yeti/levels-danger.svg\") + \"#level1\",\"loading\":\"lazy\"}})])\n},function (){var _vm=this,_c=_vm._self._c;return _c('td',[_c('img',{attrs:{\"src\":require(\"@/assets/img/yeti/levels-danger.svg\") + \"#level2\",\"loading\":\"lazy\"}})])\n},function (){var _vm=this,_c=_vm._self._c;return _c('td',[_c('img',{attrs:{\"src\":require(\"@/assets/img/yeti/levels-danger.svg\") + \"#level3\",\"loading\":\"lazy\"}})])\n},function (){var _vm=this,_c=_vm._self._c;return _c('td',[_c('img',{attrs:{\"src\":require(\"@/assets/img/yeti/levels-danger.svg\") + \"#level4\",\"loading\":\"lazy\"}})])\n},function (){var _vm=this,_c=_vm._self._c;return _c('td',[_c('img',{attrs:{\"src\":require(\"@/assets/img/yeti/levels-danger.svg\") + \"#level4\",\"loading\":\"lazy\"}})])\n}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"yeti-subpanel\">\n    <sub-panel-title><span v-translate>Methods</span></sub-panel-title>\n    <div class=\"columns is-mobile yetitabs\">\n      <div v-for=\"item of Object.keys(methods)\" :key=\"item\" class=\"column yetitab\">\n        <div class=\"control yetitab-control\" :class=\"{ 'yetitab-control--selected': method.type === item }\">\n          <input\n            :id=\"'c2c-method-' + item\"\n            type=\"radio\"\n            name=\"method\"\n            class=\"is-checkradio is-primary\"\n            :value=\"item\"\n            :checked=\"item === method.type\"\n            :disabled=\"item === 'mrd' ? bra.high == 4 || bra.low == 4 : false\"\n            @change=\"onChange($event, 'type')\"\n          />\n          <label :for=\"'c2c-method-' + item\" class=\"yetitab-label\" @click=\"warnAboutMethodBra(item)\">\n            {{ methods[item][0] }}\n            <span class=\"is-size-7\" :class=\"{ 'has-text-grey': item !== method.type }\">{{ methods[item][1] }}</span>\n          </label>\n        </div>\n      </div>\n    </div>\n\n    <div v-show=\"method.type == 'mrd'\">\n      <p>\n        <span v-translate>With the</span>\n        <strong v-translate>Beginner Reduction Method</strong>\n        <span v-translate>\n          (MRD), you do not have to enter any parameters other than the danger level(s) given by the avalanche bulletin.\n        </span>\n      </p>\n      <info type=\"help\">\n        <p v-translate>\n          As the name suggests, this method is intended for beginners. Therefore, the safety margin must be particularly\n          important. No parameter other than the danger level is specified. Orientation is ignored.\n        </p>\n      </info>\n\n      <table class=\"yetiform-danger\">\n        <tr>\n          <td><img src=\"@/assets/img/yeti/levels-danger.svg#level1\" loading=\"lazy\" /></td>\n          <td><strong v-translate>Danger rating - low</strong></td>\n          <td v-translate>I must not use slopes > 40°</td>\n        </tr>\n        <tr>\n          <td><img src=\"@/assets/img/yeti/levels-danger.svg#level2\" loading=\"lazy\" /></td>\n          <td><strong v-translate>Danger rating - moderate</strong></td>\n          <td v-translate>I must not use slopes > 35°</td>\n        </tr>\n        <tr class=\"multiline\">\n          <td><img src=\"@/assets/img/yeti/levels-danger.svg#level3\" loading=\"lazy\" /></td>\n          <td><strong v-translate>Danger rating - considerable</strong></td>\n          <td>\n            <span v-translate>I must not use slopes > 30°</span>\n            <br />\n            <small v-translate>including dominant slopes</small>\n          </td>\n        </tr>\n        <tr>\n          <td><img src=\"@/assets/img/yeti/levels-danger.svg#level4\" loading=\"lazy\" /></td>\n          <td><strong v-translate>Danger rating - high to very high</strong></td>\n          <td v-translate>I choose to cancel the outing</td>\n        </tr>\n      </table>\n    </div>\n\n    <div v-show=\"method.type == 'mre'\">\n      <p>\n        <span v-translate>With the</span>\n        <strong v-translate>Elementary Reduction Method</strong>\n        <span v-translate>\n          (MRE), you can enter the sectors of the compass rose that are reported as critical in the avalanche bulletin.\n        </span>\n      </p>\n\n      <input-orientation\n        :value=\"method.orientation\"\n        @input=\"onChange($event, 'orientation')\"\n        class=\"has-text-centered mb-2\"\n      />\n\n      <info v-if=\"method.orientation.length != 0\">\n        <span v-translate key=\"tr1\">Orientations</span>: {{ method.orientation.join(', ') }}\n      </info>\n      <info type=\"warning\" v-else>\n        <span v-translate key=\"tr2\">No orientation selected</span>\n      </info>\n\n      <info type=\"help\">\n        <p v-translate>\n          Danger level from the avalanche bulletin applies to all orientations. The compass rose distinguishes the most\n          critical sectors presenting an increased risk.\n        </p>\n      </info>\n\n      <table class=\"yetiform-danger\">\n        <tr class=\"multiline\">\n          <td><img src=\"@/assets/img/yeti/levels-danger.svg#level1\" loading=\"lazy\" /></td>\n          <td><strong v-translate>Danger rating - low</strong></td>\n          <td>\n            <span v-translate>Stay careful while skiing</span>\n            <br />\n            <small v-translate>risk of a rough fall on hard snow</small>\n          </td>\n        </tr>\n        <tr>\n          <td><img src=\"@/assets/img/yeti/levels-danger.svg#level2\" loading=\"lazy\" /></td>\n          <td><strong v-translate>Danger rating - moderate</strong></td>\n          <td v-translate>I must not use slopes > 40°</td>\n        </tr>\n        <tr class=\"multiline\">\n          <td><img src=\"@/assets/img/yeti/levels-danger.svg#level3\" loading=\"lazy\" /></td>\n          <td><strong v-translate>Danger rating - considerable</strong></td>\n          <td>\n            <span v-translate>I must not use slopes > 35°</span>\n            <br />\n            <small v-translate>including dominant slopes</small>\n          </td>\n        </tr>\n        <tr class=\"multiline\">\n          <td><img src=\"@/assets/img/yeti/levels-danger.svg#level4\" loading=\"lazy\" /></td>\n          <td><strong v-translate>Danger rating - high</strong></td>\n          <td>\n            <span v-translate>I must not use slopes > 30°</span>\n            <br />\n            <small v-translate>including dominant slopes</small>\n          </td>\n        </tr>\n        <tr>\n          <td><img src=\"@/assets/img/yeti/levels-danger.svg#level4\" loading=\"lazy\" /></td>\n          <td><strong v-translate>Danger rating - very high</strong></td>\n          <td v-translate>I choose to cancel the outing</td>\n        </tr>\n      </table>\n    </div>\n\n    <div v-show=\"method.type == 'mrp'\">\n      <p>\n        <span v-translate>With the</span>\n        <strong v-translate>Professional Reduction Method</strong>\n        <span v-translate>\n          (MRP), you can refine the hazard potential, set group size and any precautionary measures being considered.\n        </span>\n      </p>\n\n      <h3 class=\"title is-3\" v-translate>Hazard potential</h3>\n      <ul class=\"potential-danger-labels has-text-black\">\n        <li\n          v-for=\"label of potentialDangerLabels\"\n          :key=\"label.text\"\n          :disabled=\"!bra.high || label.text < potentialDangerOptions.min || label.text > potentialDangerOptions.max\"\n          :selected=\"method.potentialDanger == label.text\"\n          class=\"potential-danger-label is-size-5\"\n          @click=\"onChange(label.text, 'potentialDanger')\"\n        >\n          <span :class=\"{ 'is-size-3 has-text-weight-bold': label.val }\">\n            {{ label.text }}\n          </span>\n        </li>\n      </ul>\n\n      <info v-if=\"method.potentialDanger\">\n        <span v-translate key=\"tr1\">Hazard potential:</span>\n        {{ method.potentialDanger }}\n        (<span v-translate>Danger level:</span> {{ bra.high }})\n      </info>\n      <info type=\"warning\" v-else>\n        <span v-translate key=\"tr2\">No selected hazard potential. Set danger level first.</span>\n      </info>\n\n      <info type=\"help\">\n        <p v-translate>\n          The hazard potential is calculated from the danger level of the avalanche bulletin. It can be fine-tuned by\n          selecting a potential within the danger level’s corresponding range. For example: the avalanche bulletin\n          evokes a danger 3 just after a period in danger 4. We can then indicate a hazard potential of 12 instead of 8.\n        </p>\n      </info>\n\n      <p>\n        <input-checkbox :value=\"method.wetSnow\" @input=\"onChange($event, 'wetSnow')\">\n          <span v-translate>Wet snow: orientation not taken into account</span>\n        </input-checkbox>\n      </p>\n\n      <info type=\"help\">\n        <p v-translate>Be careful, in wet snow, no factor to reduce orientation or attendance can be applied.</p>\n      </info>\n\n      <h3 class=\"title is-3\" v-translate>Group</h3>\n\n      <ul>\n        <li class=\"control\" v-for=\"(item, i) of groupSizes\" :key=\"i\">\n          <input\n            :id=\"'c2c-group-size-' + i\"\n            type=\"radio\"\n            name=\"groupSize\"\n            class=\"is-checkradio is-primary\"\n            :value=\"item.value\"\n            :checked=\"item.value === method.groupSize\"\n            @change=\"onChange($event, 'groupSize')\"\n          />\n          <label :for=\"'c2c-group-size-' + i\">{{ item.text }}</label>\n        </li>\n      </ul>\n\n      <info type=\"help\">\n        <p v-translate>Group size</p>\n        <ul class=\"content-ul\">\n          <li v-translate>Large group = 5 people and more</li>\n          <li v-translate>Small group = 2 to 4 people</li>\n        </ul>\n        <p v-translate>Load shedding distance</p>\n        <ul class=\"content-ul\">\n          <li v-translate>10 meters minimum while ascending</li>\n          <li v-translate>50 meters while descending</li>\n        </ul>\n      </info>\n\n      <p v-translate>\n        The “slope traveled frequently” factor is not taken into account by the application, as it is often difficult to\n        ascertain when preparing for an outing.\n      </p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Info from '@/components/yeti/Info.vue';\nimport SubPanelTitle from '@/components/yeti/SubPanelTitle.vue';\nimport Yetix from '@/components/yeti/Yetix';\n\nconst DANGER = {\n  min: 1,\n  max: 16,\n  bra: [\n    { min: 1, max: 2, val: 2 },\n    { min: 3, max: 6, val: 4 },\n    { min: 6, max: 12, val: 8 },\n    { min: 13, max: 16, val: 16 },\n  ],\n};\n\nexport default {\n  components: { Info, SubPanelTitle },\n  data() {\n    return {\n      methods: {\n        mrd: ['MRD', this.$gettext('Beginner')],\n        mre: ['MRE', this.$gettext('Elementary')],\n        mrp: ['MRP', this.$gettext('Expert')],\n      },\n      groupSizes: [\n        {\n          value: 1,\n          text: this.$gettext('No reduction factor'),\n        },\n        {\n          value: 2.1,\n          text: this.$gettext('Large group with load shedding distance'),\n        },\n        {\n          value: 2.2,\n          text: this.$gettext('Small group without distance'),\n        },\n        {\n          value: 3,\n          text: this.$gettext('Small group with load shedding distance'),\n        },\n      ],\n    };\n  },\n  computed: {\n    bra() {\n      return Yetix.bra;\n    },\n    method() {\n      return Yetix.method;\n    },\n    potentialDangerLabels() {\n      const result = [];\n      for (let i = DANGER.min; i <= DANGER.max; i++) {\n        const data = { text: i };\n        if (i === 2 || i === 4 || i === 8 || i === 16) {\n          data.val = i;\n        }\n        result.push(data);\n      }\n\n      return result;\n    },\n    potentialDangerOptions() {\n      if (!this.bra.high) {\n        return { val: undefined, min: 1, max: 16 };\n      }\n\n      return DANGER.bra[this.bra.high - 1];\n    },\n  },\n  watch: {\n    'bra.high': 'onBraChange',\n  },\n  methods: {\n    onChange(event, prop) {\n      let value = null;\n      if (prop === 'orientation' || prop === 'wetSnow' || prop === 'potentialDanger') {\n        value = event;\n      } else {\n        value = event.target.value;\n      }\n      Yetix.setMethod(prop, value);\n    },\n    warnAboutMethodBra(item) {\n      this.$emit('warn-about-method-bra', item);\n    },\n    onBraChange() {\n      this.onChange(this.potentialDangerOptions.val, 'potentialDanger');\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import '@/assets/sass/variables';\n\np:not(:last-child),\nul:not(:last-child),\ntable:not(:last-child) {\n  margin-bottom: 1rem;\n}\n\n.yetiform-danger {\n  width: 100%;\n  table-layout: fixed;\n  color: $dark;\n\n  tr + tr {\n    border-top: 1px solid $grey-lighter;\n  }\n\n  td {\n    vertical-align: middle;\n    height: 45px;\n  }\n\n  .multiline td {\n    vertical-align: baseline;\n  }\n\n  td:first-child {\n    width: 60px;\n  }\n\n  td:first-child + td {\n    width: 40%;\n  }\n\n  td img {\n    vertical-align: -12px;\n    height: 35px;\n  }\n}\n\n.yetitabs {\n  margin: 0;\n  padding: 0.75rem 0;\n}\n\n.yetitab {\n  padding: 0;\n}\n\n.yetitab-control {\n  .yetitab-label {\n    display: block;\n    margin: 0;\n    padding: 0.25rem;\n    padding-left: 2rem;\n    border: 1px solid transparent;\n    border-radius: 4px;\n\n    &:hover,\n    &:focus {\n      border-color: $grey-lighter;\n    }\n\n    &.yetitab-label:before {\n      top: 0.25rem !important;\n      left: 0.25rem !important;\n    }\n    &.yetitab-label:after {\n      top: 1em !important;\n      left: 1em !important;\n    }\n  }\n\n  .is-checkradio:checked + label:after {\n    top: 0.25rem !important;\n    left: 0.25rem !important;\n  }\n}\n\n.yetitab-control--selected {\n  .yetitab-label {\n    color: $primary;\n    border-color: $primary;\n\n    &:hover,\n    &:focus {\n      border-color: $primary;\n    }\n  }\n}\n\n@media screen and (max-width: 490px),\n  screen and (min-width: $tablet) and (max-width: 970px),\n  screen and (min-width: $desktop) and (max-width: 1180px),\n  screen and (min-width: $widescreen) and (max-width: 1370px),\n  screen and (min-width: $fullhd) and (max-width: 1650px) {\n  .yetitabs {\n    flex-wrap: wrap;\n  }\n  .yetitab {\n    flex: 0 0 50%;\n  }\n  .yetiform-danger {\n    tr,\n    td {\n      display: block;\n    }\n    tr {\n      padding: 0.5em 0;\n    }\n    td:first-child {\n      float: left;\n    }\n    td:first-child ~ td {\n      height: auto;\n      width: calc(100% - 60px);\n      margin-left: 60px;\n    }\n  }\n}\n\n.potential-danger-labels {\n  display: flex;\n  align-items: stretch;\n  user-select: none;\n  background: linear-gradient(\n    to right,\n    #bfe12b,\n    #bfe12b 12%,\n    #fff200 20%,\n    #fff200 32%,\n    #f68712 40%,\n    #f68712 72%,\n    #ed1c24 80%,\n    #ed1c24 95%,\n    #c01a2c\n  );\n\n  .potential-danger-label {\n    cursor: pointer;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex: 1 1 20px;\n    text-align: center;\n    border: 3px solid transparent;\n\n    &[disabled] {\n      cursor: not-allowed;\n      pointer-events: none;\n      background-color: rgba(255, 255, 255, 0.8);\n      color: grey;\n    }\n\n    &[selected] {\n      border-color: black;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./SubPanelMethods.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./SubPanelMethods.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SubPanelMethods.vue?vue&type=template&id=19d5d555&scoped=true&\"\nimport script from \"./SubPanelMethods.vue?vue&type=script&lang=js&\"\nexport * from \"./SubPanelMethods.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SubPanelMethods.vue?vue&type=style&index=0&id=19d5d555&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"19d5d555\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"column pb-0 mb-0 tabs is-boxed yetitabs\"},[_c('ul',{attrs:{\"role\":\"tablist\"}},_vm._l((_vm.tabs),function(tab,i){return _c('li',{key:tab,class:{ 'is-active': _vm.activeTab === i },attrs:{\"role\":\"presentation\"}},[_c('a',{ref:\"tab\",refInFor:true,staticClass:\"yetitabs-link\",attrs:{\"role\":\"tab\",\"href\":'#panel' + i,\"id\":'tab' + i,\"aria-selected\":_vm.activeTab === i,\"tabindex\":_vm.activeTab === i ? false : -1},on:{\"click\":function($event){$event.preventDefault();return _vm.setActiveTab(i)},\"keydown\":function($event){return _vm.setActiveTabKeyboard($event, i)}}},[_vm._v(\"\\n        \"+_vm._s(tab)+\"\\n        \"),(i === 1 && _vm.hasFeatures && !_vm.validSimplifyTolerance)?_c('fa-icon',{staticClass:\"ml-1\",attrs:{\"icon\":\"check-circle\"}}):_vm._e(),_vm._v(\" \"),(i === 1 && _vm.validSimplifyTolerance)?_c('fa-icon',{staticClass:\"has-text-danger ml-1\",attrs:{\"icon\":\"exclamation-circle\",\"title\":_vm.$gettext('Not simplified yet')}}):_vm._e()],1)])}),0)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"column pb-0 mb-0 tabs is-boxed yetitabs\">\n    <ul role=\"tablist\">\n      <li v-for=\"(tab, i) in tabs\" role=\"presentation\" :key=\"tab\" :class=\"{ 'is-active': activeTab === i }\">\n        <a\n          class=\"yetitabs-link\"\n          role=\"tab\"\n          :href=\"'#panel' + i\"\n          :id=\"'tab' + i\"\n          ref=\"tab\"\n          :aria-selected=\"activeTab === i\"\n          :tabindex=\"activeTab === i ? false : -1\"\n          @click.prevent=\"setActiveTab(i)\"\n          @keydown=\"setActiveTabKeyboard($event, i)\"\n        >\n          {{ tab }}\n          <fa-icon icon=\"check-circle\" v-if=\"i === 1 && hasFeatures && !validSimplifyTolerance\" class=\"ml-1\" />\n          <fa-icon\n            icon=\"exclamation-circle\"\n            v-if=\"i === 1 && validSimplifyTolerance\"\n            class=\"has-text-danger ml-1\"\n            :title=\"$gettext('Not simplified yet')\"\n          />\n        </a>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script>\nimport Yetix from '@/components/yeti/Yetix';\n\nexport default {\n  props: {\n    tabs: {\n      type: Array,\n      required: true,\n    },\n  },\n  computed: {\n    activeTab() {\n      return Yetix.activeTab;\n    },\n    hasFeatures() {\n      return Yetix.hasFeatures;\n    },\n    validSimplifyTolerance() {\n      return Yetix.validSimplifyTolerance;\n    },\n  },\n  methods: {\n    setActiveTab(index) {\n      // focus active tab\n      this.$refs.tab[index].focus();\n      // then set\n      Yetix.setActiveTab(index);\n    },\n    setActiveTabKeyboard(event, index) {\n      // Set arrow keys: left/right = switch active tabs / down = focus panel\n      const ARROW_LEFT = 37;\n      const ARROW_RIGHT = 39;\n      const ARROW_DOWN = 40;\n      let dir =\n        event.which === ARROW_LEFT\n          ? index - 1\n          : event.which === ARROW_RIGHT\n          ? index + 1\n          : event.which === ARROW_DOWN\n          ? 'down'\n          : null;\n\n      if (dir !== null) {\n        event.preventDefault();\n\n        // If the down key is pressed, move focus to the open panel,\n        // otherwise switch to the adjacent tab\n        dir === 'down'\n          ? this.$parent.$refs['panel' + index].$el.focus()\n          : this.tabs[dir]\n          ? this.setActiveTab(dir)\n          : void 0;\n      }\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.yetitabs {\n  margin: 0 0 0 -1px !important;\n  overflow: visible;\n\n  &-link {\n    font-size: 0.9em;\n    padding: 0.25em 1em;\n  }\n\n  li,\n  a {\n    height: 100%;\n  }\n\n  li {\n    margin-right: 1px;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./Tabs.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./Tabs.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Tabs.vue?vue&type=template&id=64dc426c&scoped=true&\"\nimport script from \"./Tabs.vue?vue&type=script&lang=js&\"\nexport * from \"./Tabs.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Tabs.vue?vue&type=style&index=0&id=64dc426c&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"64dc426c\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column has-text-right\"},[_c('button',{directives:[{name:\"translate\",rawName:\"v-translate\"}],staticClass:\"button is-primary\",class:{ 'is-loading': _vm.loading },attrs:{\"disabled\":_vm.loading,\"tabindex\":_vm.tabindex},on:{\"click\":function($event){return _vm.$emit('click')}}},[_vm._v(\"\\n      Compute risk\\n    \")]),_vm._v(\" \"),(_vm.currentError)?_c('p',{staticClass:\"yetiform-error\"},[_c('span',[_vm._v(\"\\n        \"+_vm._s(_vm.currentError)+\"\\n      \")])]):_vm._e()])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"columns\">\n    <div class=\"column has-text-right\">\n      <button\n        class=\"button is-primary\"\n        :class=\"{ 'is-loading': loading }\"\n        :disabled=\"loading\"\n        :tabindex=\"tabindex\"\n        @click=\"$emit('click')\"\n        v-translate\n      >\n        Compute risk\n      </button>\n      <p class=\"yetiform-error\" v-if=\"currentError\">\n        <span>\n          {{ currentError }}\n        </span>\n      </p>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    currentError: {\n      type: String,\n      default: '',\n    },\n    loading: {\n      type: [Promise, Object],\n      default: null,\n    },\n    tabindex: {\n      type: String,\n      default: '0',\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.yetiform-error {\n  font-size: 0.8em;\n  font-style: italic;\n  margin-top: 10px;\n  text-align: right;\n  opacity: 0.75;\n\n  span::before {\n    content: 'i';\n    display: inline-block;\n    width: 1rem;\n    height: 1rem;\n    background: rgba(0, 60, 136, 0.5);\n    color: #fff;\n    border-radius: 50%;\n    font-size: 0.71rem;\n    font-weight: bold;\n    text-align: center;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./ValidationButton.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./ValidationButton.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ValidationButton.vue?vue&type=template&id=ad96ba08&scoped=true&\"\nimport script from \"./ValidationButton.vue?vue&type=script&lang=js&\"\nexport * from \"./ValidationButton.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ValidationButton.vue?vue&type=style&index=0&id=ad96ba08&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ad96ba08\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"column map-container\"},[_c('div',{staticStyle:{\"width\":\"100%\",\"height\":\"100%\"}},[_c('div',{ref:\"map\",staticStyle:{\"width\":\"100%\",\"height\":\"100%\"}}),_vm._v(\" \"),_c('area-layer'),_vm._v(\" \"),_c('avalanche-bulletins-layer'),_vm._v(\" \"),_c('flowcapt-layer'),_vm._v(\" \"),_c('nivoses-layer'),_vm._v(\" \"),_c('romma-layer'),_vm._v(\" \"),_c('yeti-layer',{attrs:{\"data\":_vm.yetiData,\"extent\":_vm.yetiExtent}}),_vm._v(\" \"),_c('route-layer'),_vm._v(\" \"),_c('div',{ref:\"layerSwitcherButton\",staticClass:\"ol-control ol-control-layer-switcher-button\",attrs:{\"title\":_vm.$gettext('Layers', 'Map controls')}},[_c('button',{on:{\"click\":function($event){$event.stopPropagation();_vm.showLayerSwitcher = !_vm.showLayerSwitcher}}},[_c('fa-layers',[_c('fa-icon',{attrs:{\"icon\":\"layer-group\"}}),_vm._v(\" \"),(_vm.atLeastOneYetiLayerIsShown)?_c('fa-icon',{attrs:{\"icon\":\"circle\",\"transform\":\"shrink-2 up-10 right-10\"}}):_vm._e(),_vm._v(\" \"),(_vm.atLeastOneYetiLayerIsShown)?_c('fa-icon',{staticClass:\"icon-notification\",attrs:{\"icon\":\"check-circle\",\"inverse\":\"\",\"transform\":\"shrink-2 up-10 right-10\"}}):_vm._e()],1)],1)]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showLayerSwitcher),expression:\"showLayerSwitcher\"}],ref:\"layerSwitcher\",staticClass:\"ol-control ol-control-layer-switcher\",on:{\"click\":function($event){$event.stopPropagation();}}},[_c('div',[_c('header',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Base layer\")]),_vm._v(\" \"),_vm._l((_vm.reactiveCartoLayers),function(layer,i){return _c('div',{key:layer.title,staticClass:\"map-control-listitem\"},[_c('input',{attrs:{\"id\":'carto-checkbox' + i,\"type\":\"radio\"},domProps:{\"checked\":layer.id == _vm.visibleCartoLayerId},on:{\"change\":function($event){_vm.visibleCartoLayerId = layer.id}}}),_vm._v(\" \"),_c('label',{attrs:{\"for\":'carto-checkbox' + i}},[_vm._v(_vm._s(_vm.$gettext(layer.title, 'Map layer')))])])})],2),_vm._v(\" \"),_c('div',[_c('header',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Slopes\")]),_vm._v(\" \"),_vm._l((_vm.reactiveDataLayers),function(layer,i){return _c('div',{key:layer.title,staticClass:\"map-control-listitem\"},[_c('input',{attrs:{\"id\":'data-checkbox' + i,\"type\":\"checkbox\"},domProps:{\"checked\":layer.visible},on:{\"change\":function($event){return _vm.toggleMapDataLayer(layer)}}}),_vm._v(\" \"),_c('label',{attrs:{\"for\":'data-checkbox' + i}},[_vm._v(_vm._s(_vm.$gettext(layer.title, 'Map slopes layer')))])])}),_vm._v(\" \"),_c('header',[_vm._v(\"YETI\")]),_vm._v(\" \"),_vm._l((_vm.yetiLayers),function(layer,i){return _c('div',{key:layer.title,staticClass:\"map-control-listitem\"},[_c('input',{attrs:{\"id\":'yeti-checkbox' + i,\"type\":\"checkbox\"},domProps:{\"checked\":layer.checked},on:{\"change\":layer.action}}),_vm._v(\" \"),_c('label',{attrs:{\"for\":'yeti-checkbox' + i}},[_vm._v(_vm._s(layer.title))])])})],2)]),_vm._v(\" \"),_c('div',{ref:\"recenterOnControl\",staticClass:\"ol-control ol-control-recenter-on\"},[_c('input',{attrs:{\"type\":\"text\",\"placeholder\":_vm.$gettext('Recenter on...')},on:{\"input\":_vm.searchRecenterPropositions}})]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showRecenterOnPropositions),expression:\"showRecenterOnPropositions\"}],ref:\"recenterOnPropositions\",staticClass:\"ol-control ol-control-recenter-on-propositions\"},[(_vm.recenterPropositions && _vm.recenterPropositions.data && _vm.recenterPropositions.data.features)?_c('ul',_vm._l((_vm.recenterPropositions.data.features),function(item,i){return _c('li',{key:i,on:{\"click\":function($event){return _vm.recenterOn(item)}}},[_vm._v(\"\\n          \"+_vm._s(item.properties.name)+\",\\n          \"),_c('small',[_vm._v(_vm._s(item.properties.state)+\", \"+_vm._s(item.properties.country))])])}),0):_vm._e()]),_vm._v(\" \"),_c('div',{ref:\"drawingMode\",staticClass:\"ol-control ol-control-drawing-mode\",class:{ 'is-primary': _vm.drawingMode }},[_c('div',{staticClass:\"ol-control-drawing-mode-inner\"},[_c('input-checkbox',{attrs:{\"value\":_vm.drawingMode,\"disabled\":_vm.validSimplifyTolerance},on:{\"input\":_vm.onDrawingMode}},[_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}],attrs:{\"title\":\"Enable drawing and editing features on map\"}},[_vm._v(\"Drawing mode\")]),_vm._v(\" \"),_c('span',{staticClass:\"yeti-tag\"},[(_vm.validSimplifyTolerance)?_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"DISABLED\")]):(_vm.drawingMode)?_c('span',[_vm._v(\"ON\")]):_c('span',[_vm._v(\"OFF\")])])])],1)])],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import ol from '@/js/libs/ol';\n\nexport default {\n  computed: {\n    map() {\n      // store parent map\n      return this.$parent.map || this.$parent.$parent.map;\n    },\n    view() {\n      return this.map.getView();\n    },\n  },\n  methods: {\n    getExtent(projection) {\n      return this.$parent.getExtent(projection);\n    },\n    getFeaturesFromData(data) {\n      let features = data.data;\n      // read geoJSON, and project to 3857 (geoJSON is 4326 by default)\n      return new ol.format.GeoJSON().readFeatures(features, { featureProjection: 'EPSG:3857' });\n    },\n    getPropertiesFromFeatures(features) {\n      return features.map((feature) => {\n        return feature.getProperties();\n      });\n    },\n  },\n};\n","<script>\nimport layerMixin from './layer';\n\nimport Yetix from '@/components/yeti/Yetix';\nimport ol from '@/js/libs/ol';\n\nlet areasLayerStyle = (mapZoom) => {\n  const MIN_ZOOM = 8;\n  const MAX_ZOOM = 10;\n  const MIN_OPACITY = 0;\n  const MAX_OPACITY = 0.8;\n\n  let opacity = MAX_OPACITY;\n  let strokeWidth = 1;\n\n  if (mapZoom) {\n    // opacity should be\n    // 0.8 (default)\n    // gradually decreasing between min and max zooms\n    // 0 when zoom is > max\n    if (mapZoom >= MIN_ZOOM && mapZoom <= MAX_ZOOM) {\n      opacity = (MAX_ZOOM - mapZoom) * (MAX_OPACITY / (MAX_ZOOM - MIN_ZOOM));\n    } else if (mapZoom > MAX_ZOOM) {\n      opacity = MIN_OPACITY;\n    }\n\n    // increase stroke when zoom > max\n    if (mapZoom > MAX_ZOOM) {\n      strokeWidth = 2;\n    }\n  }\n\n  return new ol.style.Style({\n    stroke: new ol.style.Stroke({\n      color: `hsla(20, 90%, 45%, .85)`,\n      width: strokeWidth,\n    }),\n    fill: new ol.style.Fill({\n      color: `hsla(20, 90%, 55%, ${opacity})`,\n    }),\n  });\n};\n\nexport default {\n  mixins: [layerMixin],\n  computed: {\n    mapZoom() {\n      return Yetix.mapZoom;\n    },\n    areas() {\n      return Yetix.areas;\n    },\n    showAreas() {\n      return Yetix.showAreas;\n    },\n  },\n  watch: {\n    showAreas() {\n      this.onShowAreas();\n    },\n  },\n  mounted() {\n    this.areasLayer = new ol.layer.Vector({\n      renderMode: 'image',\n      source: new ol.source.Vector(),\n      style: areasLayerStyle(),\n    });\n    this.map.addLayer(this.areasLayer);\n\n    // showAreas checked?\n    this.areasLayer.setVisible(this.showAreas);\n\n    // only in first mount\n    if (this.areas.length === 0) {\n      // set areas (yeti valid areas)\n      Yetix.fetchAreas().then(this.onAreasResult);\n      // event\n      Yetix.$on('mapMoveEnd', this.onMapMoveEnd);\n    }\n  },\n  methods: {\n    onAreasResult(data) {\n      let areasFeatures = this.getFeaturesFromData(data);\n      let areas = this.getPropertiesFromFeatures(areasFeatures);\n\n      // set areas in state\n      Yetix.setAreas(areas);\n\n      // add features\n      this.areasLayer.getSource().addFeatures(areasFeatures);\n      // check is area OK\n      this.isAreaOK();\n    },\n    isAreaOK() {\n      let mapExtent = this.getExtent('EPSG:3857');\n\n      let areaOk = true;\n\n      for (let area in this.areas) {\n        let polygon = this.areas[area].geometry;\n        if (polygon.intersectsExtent(mapExtent)) {\n          break;\n        } else {\n          areaOk = false;\n        }\n      }\n      Yetix.setAreaOk(areaOk);\n    },\n    onShowAreas() {\n      this.areasLayer.setVisible(this.showAreas);\n    },\n    onMapMoveEnd() {\n      // is area OK ?\n      this.isAreaOK();\n      // update areas layer style\n      this.areasLayer.setStyle(areasLayerStyle(this.mapZoom));\n    },\n  },\n  render() {\n    return null;\n  },\n};\n</script>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./AreaLayer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./AreaLayer.vue?vue&type=script&lang=js&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{ref:\"bulletinsOverlay\",staticClass:\"bulletins-overlay\"},[_c('button',{staticClass:\"delete is-small button-close\",on:{\"click\":_vm.closeOverlay}},[_vm._v(\"x\")]),_vm._v(\" \"),_c('div',{staticClass:\"bulletins-header pt-5 pb-3 has-text-centered\"},[_c('p',{staticClass:\"title is-5\"},[_vm._v(_vm._s(_vm.overlayData.mountainName))])]),_vm._v(\" \"),(_vm.overlayData.danger.low)?_c('div',{staticClass:\"py-2\"},[_c('p',{staticClass:\"is-size-7 px-3 pb-5\"},[_c('span',{staticClass:\"bulletins-date\"},[_c('strong',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Validity date:\")]),_vm._v(\" \"+_vm._s(_vm.overlayValidUntil))]),_vm._v(\" \"),(_vm.overlayValidUntilExpired)?_c('strong',{staticClass:\"is-block has-text-danger\"},[_c('fa-icon',{attrs:{\"icon\":\"exclamation-circle\"}}),_vm._v(\" \"),_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}],key:\"id1\"},[_vm._v(\"Validity date expired\")])],1):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"is-flex is-justify-content-space-around is-align-items-center px-3\"},[_c('div',[_c('svg',{attrs:{\"viewBox\":_vm.overlayData.danger.altitude ? '0 0 155 100' : '0 0 100 100',\"width\":_vm.overlayData.danger.altitude ? 130 : 80,\"height\":\"80\"}},[_c('polygon',{staticStyle:{\"fill\":\"none\",\"stroke\":\"#000\",\"stroke-miterlimit\":\"10\",\"stroke-width\":\"1.5\"},attrs:{\"points\":\"2.2,89.5 97.5,89.5 62.7,11.9 48,32.9 31.8,25.5 \"}}),_vm._v(\" \"),_c('text',{attrs:{\"x\":\"50\",\"y\":_vm.overlayData.danger.high ? 82 : 65,\"text-anchor\":\"middle\",\"font-family\":\"sans-serif\",\"font-size\":\"20px\",\"font-weight\":\"bold\"}},[_c('tspan',[_vm._v(_vm._s(_vm.overlayData.danger.low))]),_vm._v(\" \"),(_vm.overlayData.danger.lowEvol)?_c('tspan',[_vm._v(\" \")]):_vm._e(),_vm._v(\" \"),(_vm.overlayData.danger.lowEvol)?_c('tspan',[_vm._v(_vm._s(_vm.overlayData.danger.lowEvol))]):_vm._e()]),_vm._v(\" \"),(_vm.overlayData.danger.lowEvol)?_c('g',{staticStyle:{\"fill\":\"none\",\"stroke\":\"#000\",\"stroke-width\":\"2\"}},[_c('line',{attrs:{\"x1\":\"45\",\"x2\":\"55\",\"y1\":_vm.overlayData.danger.high ? 75 : 58,\"y2\":_vm.overlayData.danger.high ? 75 : 58}}),_vm._v(\" \"),_c('line',{attrs:{\"x1\":\"50\",\"x2\":\"55\",\"y1\":_vm.overlayData.danger.high ? 70 : 53,\"y2\":_vm.overlayData.danger.high ? 75 : 58}}),_vm._v(\" \"),_c('line',{attrs:{\"x1\":\"50\",\"x2\":\"55\",\"y1\":_vm.overlayData.danger.high ? 80 : 63,\"y2\":_vm.overlayData.danger.high ? 75 : 58}})]):_vm._e(),_vm._v(\" \"),_c('g',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.overlayData.danger.high),expression:\"overlayData.danger.high\"}]},[_c('line',{staticStyle:{\"fill\":\"none\",\"stroke\":\"#000\",\"stroke-miterlimit\":\"10\",\"stroke-width\":\"1.5\"},attrs:{\"x1\":\"10\",\"y1\":\"61.5\",\"x2\":\"90\",\"y2\":\"61.5\"}}),_vm._v(\" \"),_c('text',{attrs:{\"x\":\"50\",\"y\":\"54\",\"text-anchor\":\"middle\",\"font-family\":\"sans-serif\",\"font-size\":\"20px\",\"font-weight\":\"bold\"}},[_c('tspan',[_vm._v(_vm._s(_vm.overlayData.danger.high))]),_vm._v(\" \"),(_vm.overlayData.danger.highEvol)?_c('tspan',[_vm._v(\" \")]):_vm._e(),_vm._v(\" \"),(_vm.overlayData.danger.highEvol)?_c('tspan',[_vm._v(_vm._s(_vm.overlayData.danger.highEvol))]):_vm._e()]),_vm._v(\" \"),(_vm.overlayData.danger.highEvol)?_c('g',{staticStyle:{\"fill\":\"none\",\"stroke\":\"#000\",\"stroke-width\":\"2\"}},[_c('line',{attrs:{\"x1\":\"45\",\"x2\":\"55\",\"y1\":\"46\",\"y2\":\"46\"}}),_vm._v(\" \"),_c('line',{attrs:{\"x1\":\"50\",\"x2\":\"55\",\"y1\":\"41\",\"y2\":\"46\"}}),_vm._v(\" \"),_c('line',{attrs:{\"x1\":\"50\",\"x2\":\"55\",\"y1\":\"51\",\"y2\":\"46\"}})]):_vm._e()]),_vm._v(\" \"),(_vm.overlayData.danger.altitude)?_c('text',{attrs:{\"x\":\"92\",\"y\":\"65\",\"font-family\":\"sans-serif\",\"font-size\":\"16px\",\"font-weight\":\"bold\"}},[_vm._v(\"\\n            \"+_vm._s(_vm.overlayData.danger.altitude)+\"m\\n          \")]):_vm._e()])]),_vm._v(\" \"),_c('input-orientation',{attrs:{\"value\":_vm.overlayOrientations}})],1),_vm._v(\" \"),(_vm.overlayDangerComment || _vm.overlayOrientationsComment)?_c('dl',{staticClass:\"is-size-6 px-3 pt-3\"},[(_vm.overlayDangerComment)?_c('div',[_c('dt',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Danger:\")]),_vm._v(\" \"),_c('dd',[_vm._v(_vm._s(_vm.overlayDangerComment))])]):_vm._e(),_vm._v(\" \"),(_vm.overlayOrientationsComment)?_c('div',[_c('dt',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Orientations:\")]),_vm._v(\" \"),_c('dd',[_vm._v(_vm._s(_vm.overlayOrientationsComment))])]):_vm._e()]):_vm._e()]):_c('div',{staticClass:\"py-2\"},[_c('p',{staticClass:\"is-size-6 p-3\"},[_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}],key:\"id2\"},[_vm._v(\"No avalanche bulletin right now\")])])]),_vm._v(\" \"),(_vm.overlayData.urls.length)?_c('p',{staticClass:\"is-size-7 px-3 pt-2 pb-2 bulletins-footer\"},[_c('strong',[_vm._v(\"©\"+_vm._s(_vm.overlayData.urls[0].title))]),_vm._v(\" \"),_vm._l((_vm.overlayData.urls),function(url,i){return _c('span',{key:i,staticClass:\"pl-1\"},[_c('a',{attrs:{\"href\":url.url,\"target\":\"_blank\"}},[_c('fa-icon',{attrs:{\"icon\":\"external-link-alt\"}}),_vm._v(\" \"),_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Full bulletin\")])],1)])})],2):_vm._e(),_vm._v(\" \"),_c('img',{staticClass:\"bulletins-overlay-danger-icon\",attrs:{\"src\":_vm.overlayDangerIcon,\"alt\":\"\"}})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * @module helpers\n */\n/**\n * Earth Radius used with the Harvesine formula and approximates using a spherical (non-ellipsoid) Earth.\n *\n * @memberof helpers\n * @type {number}\n */\nexport var earthRadius = 6371008.8;\n/**\n * Unit of measurement factors using a spherical (non-ellipsoid) earth radius.\n *\n * @memberof helpers\n * @type {Object}\n */\nexport var factors = {\n    centimeters: earthRadius * 100,\n    centimetres: earthRadius * 100,\n    degrees: earthRadius / 111325,\n    feet: earthRadius * 3.28084,\n    inches: earthRadius * 39.37,\n    kilometers: earthRadius / 1000,\n    kilometres: earthRadius / 1000,\n    meters: earthRadius,\n    metres: earthRadius,\n    miles: earthRadius / 1609.344,\n    millimeters: earthRadius * 1000,\n    millimetres: earthRadius * 1000,\n    nauticalmiles: earthRadius / 1852,\n    radians: 1,\n    yards: earthRadius * 1.0936,\n};\n/**\n * Units of measurement factors based on 1 meter.\n *\n * @memberof helpers\n * @type {Object}\n */\nexport var unitsFactors = {\n    centimeters: 100,\n    centimetres: 100,\n    degrees: 1 / 111325,\n    feet: 3.28084,\n    inches: 39.37,\n    kilometers: 1 / 1000,\n    kilometres: 1 / 1000,\n    meters: 1,\n    metres: 1,\n    miles: 1 / 1609.344,\n    millimeters: 1000,\n    millimetres: 1000,\n    nauticalmiles: 1 / 1852,\n    radians: 1 / earthRadius,\n    yards: 1.0936133,\n};\n/**\n * Area of measurement factors based on 1 square meter.\n *\n * @memberof helpers\n * @type {Object}\n */\nexport var areaFactors = {\n    acres: 0.000247105,\n    centimeters: 10000,\n    centimetres: 10000,\n    feet: 10.763910417,\n    hectares: 0.0001,\n    inches: 1550.003100006,\n    kilometers: 0.000001,\n    kilometres: 0.000001,\n    meters: 1,\n    metres: 1,\n    miles: 3.86e-7,\n    millimeters: 1000000,\n    millimetres: 1000000,\n    yards: 1.195990046,\n};\n/**\n * Wraps a GeoJSON {@link Geometry} in a GeoJSON {@link Feature}.\n *\n * @name feature\n * @param {Geometry} geometry input geometry\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature} a GeoJSON Feature\n * @example\n * var geometry = {\n *   \"type\": \"Point\",\n *   \"coordinates\": [110, 50]\n * };\n *\n * var feature = turf.feature(geometry);\n *\n * //=feature\n */\nexport function feature(geom, properties, options) {\n    if (options === void 0) { options = {}; }\n    var feat = { type: \"Feature\" };\n    if (options.id === 0 || options.id) {\n        feat.id = options.id;\n    }\n    if (options.bbox) {\n        feat.bbox = options.bbox;\n    }\n    feat.properties = properties || {};\n    feat.geometry = geom;\n    return feat;\n}\n/**\n * Creates a GeoJSON {@link Geometry} from a Geometry string type & coordinates.\n * For GeometryCollection type use `helpers.geometryCollection`\n *\n * @name geometry\n * @param {string} type Geometry Type\n * @param {Array<any>} coordinates Coordinates\n * @param {Object} [options={}] Optional Parameters\n * @returns {Geometry} a GeoJSON Geometry\n * @example\n * var type = \"Point\";\n * var coordinates = [110, 50];\n * var geometry = turf.geometry(type, coordinates);\n * // => geometry\n */\nexport function geometry(type, coordinates, _options) {\n    if (_options === void 0) { _options = {}; }\n    switch (type) {\n        case \"Point\":\n            return point(coordinates).geometry;\n        case \"LineString\":\n            return lineString(coordinates).geometry;\n        case \"Polygon\":\n            return polygon(coordinates).geometry;\n        case \"MultiPoint\":\n            return multiPoint(coordinates).geometry;\n        case \"MultiLineString\":\n            return multiLineString(coordinates).geometry;\n        case \"MultiPolygon\":\n            return multiPolygon(coordinates).geometry;\n        default:\n            throw new Error(type + \" is invalid\");\n    }\n}\n/**\n * Creates a {@link Point} {@link Feature} from a Position.\n *\n * @name point\n * @param {Array<number>} coordinates longitude, latitude position (each in decimal degrees)\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature<Point>} a Point feature\n * @example\n * var point = turf.point([-75.343, 39.984]);\n *\n * //=point\n */\nexport function point(coordinates, properties, options) {\n    if (options === void 0) { options = {}; }\n    if (!coordinates) {\n        throw new Error(\"coordinates is required\");\n    }\n    if (!Array.isArray(coordinates)) {\n        throw new Error(\"coordinates must be an Array\");\n    }\n    if (coordinates.length < 2) {\n        throw new Error(\"coordinates must be at least 2 numbers long\");\n    }\n    if (!isNumber(coordinates[0]) || !isNumber(coordinates[1])) {\n        throw new Error(\"coordinates must contain numbers\");\n    }\n    var geom = {\n        type: \"Point\",\n        coordinates: coordinates,\n    };\n    return feature(geom, properties, options);\n}\n/**\n * Creates a {@link Point} {@link FeatureCollection} from an Array of Point coordinates.\n *\n * @name points\n * @param {Array<Array<number>>} coordinates an array of Points\n * @param {Object} [properties={}] Translate these properties to each Feature\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north]\n * associated with the FeatureCollection\n * @param {string|number} [options.id] Identifier associated with the FeatureCollection\n * @returns {FeatureCollection<Point>} Point Feature\n * @example\n * var points = turf.points([\n *   [-75, 39],\n *   [-80, 45],\n *   [-78, 50]\n * ]);\n *\n * //=points\n */\nexport function points(coordinates, properties, options) {\n    if (options === void 0) { options = {}; }\n    return featureCollection(coordinates.map(function (coords) {\n        return point(coords, properties);\n    }), options);\n}\n/**\n * Creates a {@link Polygon} {@link Feature} from an Array of LinearRings.\n *\n * @name polygon\n * @param {Array<Array<Array<number>>>} coordinates an array of LinearRings\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature<Polygon>} Polygon Feature\n * @example\n * var polygon = turf.polygon([[[-5, 52], [-4, 56], [-2, 51], [-7, 54], [-5, 52]]], { name: 'poly1' });\n *\n * //=polygon\n */\nexport function polygon(coordinates, properties, options) {\n    if (options === void 0) { options = {}; }\n    for (var _i = 0, coordinates_1 = coordinates; _i < coordinates_1.length; _i++) {\n        var ring = coordinates_1[_i];\n        if (ring.length < 4) {\n            throw new Error(\"Each LinearRing of a Polygon must have 4 or more Positions.\");\n        }\n        for (var j = 0; j < ring[ring.length - 1].length; j++) {\n            // Check if first point of Polygon contains two numbers\n            if (ring[ring.length - 1][j] !== ring[0][j]) {\n                throw new Error(\"First and last Position are not equivalent.\");\n            }\n        }\n    }\n    var geom = {\n        type: \"Polygon\",\n        coordinates: coordinates,\n    };\n    return feature(geom, properties, options);\n}\n/**\n * Creates a {@link Polygon} {@link FeatureCollection} from an Array of Polygon coordinates.\n *\n * @name polygons\n * @param {Array<Array<Array<Array<number>>>>} coordinates an array of Polygon coordinates\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the FeatureCollection\n * @returns {FeatureCollection<Polygon>} Polygon FeatureCollection\n * @example\n * var polygons = turf.polygons([\n *   [[[-5, 52], [-4, 56], [-2, 51], [-7, 54], [-5, 52]]],\n *   [[[-15, 42], [-14, 46], [-12, 41], [-17, 44], [-15, 42]]],\n * ]);\n *\n * //=polygons\n */\nexport function polygons(coordinates, properties, options) {\n    if (options === void 0) { options = {}; }\n    return featureCollection(coordinates.map(function (coords) {\n        return polygon(coords, properties);\n    }), options);\n}\n/**\n * Creates a {@link LineString} {@link Feature} from an Array of Positions.\n *\n * @name lineString\n * @param {Array<Array<number>>} coordinates an array of Positions\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature<LineString>} LineString Feature\n * @example\n * var linestring1 = turf.lineString([[-24, 63], [-23, 60], [-25, 65], [-20, 69]], {name: 'line 1'});\n * var linestring2 = turf.lineString([[-14, 43], [-13, 40], [-15, 45], [-10, 49]], {name: 'line 2'});\n *\n * //=linestring1\n * //=linestring2\n */\nexport function lineString(coordinates, properties, options) {\n    if (options === void 0) { options = {}; }\n    if (coordinates.length < 2) {\n        throw new Error(\"coordinates must be an array of two or more positions\");\n    }\n    var geom = {\n        type: \"LineString\",\n        coordinates: coordinates,\n    };\n    return feature(geom, properties, options);\n}\n/**\n * Creates a {@link LineString} {@link FeatureCollection} from an Array of LineString coordinates.\n *\n * @name lineStrings\n * @param {Array<Array<Array<number>>>} coordinates an array of LinearRings\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north]\n * associated with the FeatureCollection\n * @param {string|number} [options.id] Identifier associated with the FeatureCollection\n * @returns {FeatureCollection<LineString>} LineString FeatureCollection\n * @example\n * var linestrings = turf.lineStrings([\n *   [[-24, 63], [-23, 60], [-25, 65], [-20, 69]],\n *   [[-14, 43], [-13, 40], [-15, 45], [-10, 49]]\n * ]);\n *\n * //=linestrings\n */\nexport function lineStrings(coordinates, properties, options) {\n    if (options === void 0) { options = {}; }\n    return featureCollection(coordinates.map(function (coords) {\n        return lineString(coords, properties);\n    }), options);\n}\n/**\n * Takes one or more {@link Feature|Features} and creates a {@link FeatureCollection}.\n *\n * @name featureCollection\n * @param {Feature[]} features input features\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {FeatureCollection} FeatureCollection of Features\n * @example\n * var locationA = turf.point([-75.343, 39.984], {name: 'Location A'});\n * var locationB = turf.point([-75.833, 39.284], {name: 'Location B'});\n * var locationC = turf.point([-75.534, 39.123], {name: 'Location C'});\n *\n * var collection = turf.featureCollection([\n *   locationA,\n *   locationB,\n *   locationC\n * ]);\n *\n * //=collection\n */\nexport function featureCollection(features, options) {\n    if (options === void 0) { options = {}; }\n    var fc = { type: \"FeatureCollection\" };\n    if (options.id) {\n        fc.id = options.id;\n    }\n    if (options.bbox) {\n        fc.bbox = options.bbox;\n    }\n    fc.features = features;\n    return fc;\n}\n/**\n * Creates a {@link Feature<MultiLineString>} based on a\n * coordinate array. Properties can be added optionally.\n *\n * @name multiLineString\n * @param {Array<Array<Array<number>>>} coordinates an array of LineStrings\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature<MultiLineString>} a MultiLineString feature\n * @throws {Error} if no coordinates are passed\n * @example\n * var multiLine = turf.multiLineString([[[0,0],[10,10]]]);\n *\n * //=multiLine\n */\nexport function multiLineString(coordinates, properties, options) {\n    if (options === void 0) { options = {}; }\n    var geom = {\n        type: \"MultiLineString\",\n        coordinates: coordinates,\n    };\n    return feature(geom, properties, options);\n}\n/**\n * Creates a {@link Feature<MultiPoint>} based on a\n * coordinate array. Properties can be added optionally.\n *\n * @name multiPoint\n * @param {Array<Array<number>>} coordinates an array of Positions\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature<MultiPoint>} a MultiPoint feature\n * @throws {Error} if no coordinates are passed\n * @example\n * var multiPt = turf.multiPoint([[0,0],[10,10]]);\n *\n * //=multiPt\n */\nexport function multiPoint(coordinates, properties, options) {\n    if (options === void 0) { options = {}; }\n    var geom = {\n        type: \"MultiPoint\",\n        coordinates: coordinates,\n    };\n    return feature(geom, properties, options);\n}\n/**\n * Creates a {@link Feature<MultiPolygon>} based on a\n * coordinate array. Properties can be added optionally.\n *\n * @name multiPolygon\n * @param {Array<Array<Array<Array<number>>>>} coordinates an array of Polygons\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature<MultiPolygon>} a multipolygon feature\n * @throws {Error} if no coordinates are passed\n * @example\n * var multiPoly = turf.multiPolygon([[[[0,0],[0,10],[10,10],[10,0],[0,0]]]]);\n *\n * //=multiPoly\n *\n */\nexport function multiPolygon(coordinates, properties, options) {\n    if (options === void 0) { options = {}; }\n    var geom = {\n        type: \"MultiPolygon\",\n        coordinates: coordinates,\n    };\n    return feature(geom, properties, options);\n}\n/**\n * Creates a {@link Feature<GeometryCollection>} based on a\n * coordinate array. Properties can be added optionally.\n *\n * @name geometryCollection\n * @param {Array<Geometry>} geometries an array of GeoJSON Geometries\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature<GeometryCollection>} a GeoJSON GeometryCollection Feature\n * @example\n * var pt = turf.geometry(\"Point\", [100, 0]);\n * var line = turf.geometry(\"LineString\", [[101, 0], [102, 1]]);\n * var collection = turf.geometryCollection([pt, line]);\n *\n * // => collection\n */\nexport function geometryCollection(geometries, properties, options) {\n    if (options === void 0) { options = {}; }\n    var geom = {\n        type: \"GeometryCollection\",\n        geometries: geometries,\n    };\n    return feature(geom, properties, options);\n}\n/**\n * Round number to precision\n *\n * @param {number} num Number\n * @param {number} [precision=0] Precision\n * @returns {number} rounded number\n * @example\n * turf.round(120.4321)\n * //=120\n *\n * turf.round(120.4321, 2)\n * //=120.43\n */\nexport function round(num, precision) {\n    if (precision === void 0) { precision = 0; }\n    if (precision && !(precision >= 0)) {\n        throw new Error(\"precision must be a positive number\");\n    }\n    var multiplier = Math.pow(10, precision || 0);\n    return Math.round(num * multiplier) / multiplier;\n}\n/**\n * Convert a distance measurement (assuming a spherical Earth) from radians to a more friendly unit.\n * Valid units: miles, nauticalmiles, inches, yards, meters, metres, kilometers, centimeters, feet\n *\n * @name radiansToLength\n * @param {number} radians in radians across the sphere\n * @param {string} [units=\"kilometers\"] can be degrees, radians, miles, inches, yards, metres,\n * meters, kilometres, kilometers.\n * @returns {number} distance\n */\nexport function radiansToLength(radians, units) {\n    if (units === void 0) { units = \"kilometers\"; }\n    var factor = factors[units];\n    if (!factor) {\n        throw new Error(units + \" units is invalid\");\n    }\n    return radians * factor;\n}\n/**\n * Convert a distance measurement (assuming a spherical Earth) from a real-world unit into radians\n * Valid units: miles, nauticalmiles, inches, yards, meters, metres, kilometers, centimeters, feet\n *\n * @name lengthToRadians\n * @param {number} distance in real units\n * @param {string} [units=\"kilometers\"] can be degrees, radians, miles, inches, yards, metres,\n * meters, kilometres, kilometers.\n * @returns {number} radians\n */\nexport function lengthToRadians(distance, units) {\n    if (units === void 0) { units = \"kilometers\"; }\n    var factor = factors[units];\n    if (!factor) {\n        throw new Error(units + \" units is invalid\");\n    }\n    return distance / factor;\n}\n/**\n * Convert a distance measurement (assuming a spherical Earth) from a real-world unit into degrees\n * Valid units: miles, nauticalmiles, inches, yards, meters, metres, centimeters, kilometres, feet\n *\n * @name lengthToDegrees\n * @param {number} distance in real units\n * @param {string} [units=\"kilometers\"] can be degrees, radians, miles, inches, yards, metres,\n * meters, kilometres, kilometers.\n * @returns {number} degrees\n */\nexport function lengthToDegrees(distance, units) {\n    return radiansToDegrees(lengthToRadians(distance, units));\n}\n/**\n * Converts any bearing angle from the north line direction (positive clockwise)\n * and returns an angle between 0-360 degrees (positive clockwise), 0 being the north line\n *\n * @name bearingToAzimuth\n * @param {number} bearing angle, between -180 and +180 degrees\n * @returns {number} angle between 0 and 360 degrees\n */\nexport function bearingToAzimuth(bearing) {\n    var angle = bearing % 360;\n    if (angle < 0) {\n        angle += 360;\n    }\n    return angle;\n}\n/**\n * Converts an angle in radians to degrees\n *\n * @name radiansToDegrees\n * @param {number} radians angle in radians\n * @returns {number} degrees between 0 and 360 degrees\n */\nexport function radiansToDegrees(radians) {\n    var degrees = radians % (2 * Math.PI);\n    return (degrees * 180) / Math.PI;\n}\n/**\n * Converts an angle in degrees to radians\n *\n * @name degreesToRadians\n * @param {number} degrees angle between 0 and 360 degrees\n * @returns {number} angle in radians\n */\nexport function degreesToRadians(degrees) {\n    var radians = degrees % 360;\n    return (radians * Math.PI) / 180;\n}\n/**\n * Converts a length to the requested unit.\n * Valid units: miles, nauticalmiles, inches, yards, meters, metres, kilometers, centimeters, feet\n *\n * @param {number} length to be converted\n * @param {Units} [originalUnit=\"kilometers\"] of the length\n * @param {Units} [finalUnit=\"kilometers\"] returned unit\n * @returns {number} the converted length\n */\nexport function convertLength(length, originalUnit, finalUnit) {\n    if (originalUnit === void 0) { originalUnit = \"kilometers\"; }\n    if (finalUnit === void 0) { finalUnit = \"kilometers\"; }\n    if (!(length >= 0)) {\n        throw new Error(\"length must be a positive number\");\n    }\n    return radiansToLength(lengthToRadians(length, originalUnit), finalUnit);\n}\n/**\n * Converts a area to the requested unit.\n * Valid units: kilometers, kilometres, meters, metres, centimetres, millimeters, acres, miles, yards, feet, inches, hectares\n * @param {number} area to be converted\n * @param {Units} [originalUnit=\"meters\"] of the distance\n * @param {Units} [finalUnit=\"kilometers\"] returned unit\n * @returns {number} the converted area\n */\nexport function convertArea(area, originalUnit, finalUnit) {\n    if (originalUnit === void 0) { originalUnit = \"meters\"; }\n    if (finalUnit === void 0) { finalUnit = \"kilometers\"; }\n    if (!(area >= 0)) {\n        throw new Error(\"area must be a positive number\");\n    }\n    var startFactor = areaFactors[originalUnit];\n    if (!startFactor) {\n        throw new Error(\"invalid original units\");\n    }\n    var finalFactor = areaFactors[finalUnit];\n    if (!finalFactor) {\n        throw new Error(\"invalid final units\");\n    }\n    return (area / startFactor) * finalFactor;\n}\n/**\n * isNumber\n *\n * @param {*} num Number to validate\n * @returns {boolean} true/false\n * @example\n * turf.isNumber(123)\n * //=true\n * turf.isNumber('foo')\n * //=false\n */\nexport function isNumber(num) {\n    return !isNaN(num) && num !== null && !Array.isArray(num);\n}\n/**\n * isObject\n *\n * @param {*} input variable to validate\n * @returns {boolean} true/false\n * @example\n * turf.isObject({elevation: 10})\n * //=true\n * turf.isObject('foo')\n * //=false\n */\nexport function isObject(input) {\n    return !!input && input.constructor === Object;\n}\n/**\n * Validate BBox\n *\n * @private\n * @param {Array<number>} bbox BBox to validate\n * @returns {void}\n * @throws Error if BBox is not valid\n * @example\n * validateBBox([-180, -40, 110, 50])\n * //=OK\n * validateBBox([-180, -40])\n * //=Error\n * validateBBox('Foo')\n * //=Error\n * validateBBox(5)\n * //=Error\n * validateBBox(null)\n * //=Error\n * validateBBox(undefined)\n * //=Error\n */\nexport function validateBBox(bbox) {\n    if (!bbox) {\n        throw new Error(\"bbox is required\");\n    }\n    if (!Array.isArray(bbox)) {\n        throw new Error(\"bbox must be an Array\");\n    }\n    if (bbox.length !== 4 && bbox.length !== 6) {\n        throw new Error(\"bbox must be an Array of 4 or 6 numbers\");\n    }\n    bbox.forEach(function (num) {\n        if (!isNumber(num)) {\n            throw new Error(\"bbox must only contain numbers\");\n        }\n    });\n}\n/**\n * Validate Id\n *\n * @private\n * @param {string|number} id Id to validate\n * @returns {void}\n * @throws Error if Id is not valid\n * @example\n * validateId([-180, -40, 110, 50])\n * //=Error\n * validateId([-180, -40])\n * //=Error\n * validateId('Foo')\n * //=OK\n * validateId(5)\n * //=OK\n * validateId(null)\n * //=Error\n * validateId(undefined)\n * //=Error\n */\nexport function validateId(id) {\n    if (!id) {\n        throw new Error(\"id is required\");\n    }\n    if ([\"string\", \"number\"].indexOf(typeof id) === -1) {\n        throw new Error(\"id must be a number or a string\");\n    }\n}\n","import { isNumber, } from \"@turf/helpers\";\n/**\n * Unwrap a coordinate from a Point Feature, Geometry or a single coordinate.\n *\n * @name getCoord\n * @param {Array<number>|Geometry<Point>|Feature<Point>} coord GeoJSON Point or an Array of numbers\n * @returns {Array<number>} coordinates\n * @example\n * var pt = turf.point([10, 10]);\n *\n * var coord = turf.getCoord(pt);\n * //= [10, 10]\n */\nexport function getCoord(coord) {\n    if (!coord) {\n        throw new Error(\"coord is required\");\n    }\n    if (!Array.isArray(coord)) {\n        if (coord.type === \"Feature\" &&\n            coord.geometry !== null &&\n            coord.geometry.type === \"Point\") {\n            return coord.geometry.coordinates;\n        }\n        if (coord.type === \"Point\") {\n            return coord.coordinates;\n        }\n    }\n    if (Array.isArray(coord) &&\n        coord.length >= 2 &&\n        !Array.isArray(coord[0]) &&\n        !Array.isArray(coord[1])) {\n        return coord;\n    }\n    throw new Error(\"coord must be GeoJSON Point or an Array of numbers\");\n}\n/**\n * Unwrap coordinates from a Feature, Geometry Object or an Array\n *\n * @name getCoords\n * @param {Array<any>|Geometry|Feature} coords Feature, Geometry Object or an Array\n * @returns {Array<any>} coordinates\n * @example\n * var poly = turf.polygon([[[119.32, -8.7], [119.55, -8.69], [119.51, -8.54], [119.32, -8.7]]]);\n *\n * var coords = turf.getCoords(poly);\n * //= [[[119.32, -8.7], [119.55, -8.69], [119.51, -8.54], [119.32, -8.7]]]\n */\nexport function getCoords(coords) {\n    if (Array.isArray(coords)) {\n        return coords;\n    }\n    // Feature\n    if (coords.type === \"Feature\") {\n        if (coords.geometry !== null) {\n            return coords.geometry.coordinates;\n        }\n    }\n    else {\n        // Geometry\n        if (coords.coordinates) {\n            return coords.coordinates;\n        }\n    }\n    throw new Error(\"coords must be GeoJSON Feature, Geometry Object or an Array\");\n}\n/**\n * Checks if coordinates contains a number\n *\n * @name containsNumber\n * @param {Array<any>} coordinates GeoJSON Coordinates\n * @returns {boolean} true if Array contains a number\n */\nexport function containsNumber(coordinates) {\n    if (coordinates.length > 1 &&\n        isNumber(coordinates[0]) &&\n        isNumber(coordinates[1])) {\n        return true;\n    }\n    if (Array.isArray(coordinates[0]) && coordinates[0].length) {\n        return containsNumber(coordinates[0]);\n    }\n    throw new Error(\"coordinates must only contain numbers\");\n}\n/**\n * Enforce expectations about types of GeoJSON objects for Turf.\n *\n * @name geojsonType\n * @param {GeoJSON} value any GeoJSON object\n * @param {string} type expected GeoJSON type\n * @param {string} name name of calling function\n * @throws {Error} if value is not the expected type.\n */\nexport function geojsonType(value, type, name) {\n    if (!type || !name) {\n        throw new Error(\"type and name required\");\n    }\n    if (!value || value.type !== type) {\n        throw new Error(\"Invalid input to \" +\n            name +\n            \": must be a \" +\n            type +\n            \", given \" +\n            value.type);\n    }\n}\n/**\n * Enforce expectations about types of {@link Feature} inputs for Turf.\n * Internally this uses {@link geojsonType} to judge geometry types.\n *\n * @name featureOf\n * @param {Feature} feature a feature with an expected geometry type\n * @param {string} type expected GeoJSON type\n * @param {string} name name of calling function\n * @throws {Error} error if value is not the expected type.\n */\nexport function featureOf(feature, type, name) {\n    if (!feature) {\n        throw new Error(\"No feature passed\");\n    }\n    if (!name) {\n        throw new Error(\".featureOf() requires a name\");\n    }\n    if (!feature || feature.type !== \"Feature\" || !feature.geometry) {\n        throw new Error(\"Invalid input to \" + name + \", Feature with geometry required\");\n    }\n    if (!feature.geometry || feature.geometry.type !== type) {\n        throw new Error(\"Invalid input to \" +\n            name +\n            \": must be a \" +\n            type +\n            \", given \" +\n            feature.geometry.type);\n    }\n}\n/**\n * Enforce expectations about types of {@link FeatureCollection} inputs for Turf.\n * Internally this uses {@link geojsonType} to judge geometry types.\n *\n * @name collectionOf\n * @param {FeatureCollection} featureCollection a FeatureCollection for which features will be judged\n * @param {string} type expected GeoJSON type\n * @param {string} name name of calling function\n * @throws {Error} if value is not the expected type.\n */\nexport function collectionOf(featureCollection, type, name) {\n    if (!featureCollection) {\n        throw new Error(\"No featureCollection passed\");\n    }\n    if (!name) {\n        throw new Error(\".collectionOf() requires a name\");\n    }\n    if (!featureCollection || featureCollection.type !== \"FeatureCollection\") {\n        throw new Error(\"Invalid input to \" + name + \", FeatureCollection required\");\n    }\n    for (var _i = 0, _a = featureCollection.features; _i < _a.length; _i++) {\n        var feature = _a[_i];\n        if (!feature || feature.type !== \"Feature\" || !feature.geometry) {\n            throw new Error(\"Invalid input to \" + name + \", Feature with geometry required\");\n        }\n        if (!feature.geometry || feature.geometry.type !== type) {\n            throw new Error(\"Invalid input to \" +\n                name +\n                \": must be a \" +\n                type +\n                \", given \" +\n                feature.geometry.type);\n        }\n    }\n}\n/**\n * Get Geometry from Feature or Geometry Object\n *\n * @param {Feature|Geometry} geojson GeoJSON Feature or Geometry Object\n * @returns {Geometry|null} GeoJSON Geometry Object\n * @throws {Error} if geojson is not a Feature or Geometry Object\n * @example\n * var point = {\n *   \"type\": \"Feature\",\n *   \"properties\": {},\n *   \"geometry\": {\n *     \"type\": \"Point\",\n *     \"coordinates\": [110, 40]\n *   }\n * }\n * var geom = turf.getGeom(point)\n * //={\"type\": \"Point\", \"coordinates\": [110, 40]}\n */\nexport function getGeom(geojson) {\n    if (geojson.type === \"Feature\") {\n        return geojson.geometry;\n    }\n    return geojson;\n}\n/**\n * Get GeoJSON object's type, Geometry type is prioritize.\n *\n * @param {GeoJSON} geojson GeoJSON object\n * @param {string} [name=\"geojson\"] name of the variable to display in error message (unused)\n * @returns {string} GeoJSON type\n * @example\n * var point = {\n *   \"type\": \"Feature\",\n *   \"properties\": {},\n *   \"geometry\": {\n *     \"type\": \"Point\",\n *     \"coordinates\": [110, 40]\n *   }\n * }\n * var geom = turf.getType(point)\n * //=\"Point\"\n */\nexport function getType(geojson, _name) {\n    if (geojson.type === \"FeatureCollection\") {\n        return \"FeatureCollection\";\n    }\n    if (geojson.type === \"GeometryCollection\") {\n        return \"GeometryCollection\";\n    }\n    if (geojson.type === \"Feature\" && geojson.geometry !== null) {\n        return geojson.geometry.type;\n    }\n    return geojson.type;\n}\n","import { multiPolygon, polygon, } from \"@turf/helpers\";\nimport { getGeom } from \"@turf/invariant\";\nimport polygonClipping from \"polygon-clipping\";\n/**\n * Takes two {@link Polygon|polygon} or {@link MultiPolygon|multi-polygon} geometries and\n * finds their polygonal intersection. If they don't intersect, returns null.\n *\n * @name intersect\n * @param {Feature<Polygon | MultiPolygon>} poly1 the first polygon or multipolygon\n * @param {Feature<Polygon | MultiPolygon>} poly2 the second polygon or multipolygon\n * @param {Object} [options={}] Optional Parameters\n * @param {Object} [options.properties={}] Translate GeoJSON Properties to Feature\n * @returns {Feature|null} returns a feature representing the area they share (either a {@link Polygon} or\n * {@link MultiPolygon}). If they do not share any area, returns `null`.\n * @example\n * var poly1 = turf.polygon([[\n *   [-122.801742, 45.48565],\n *   [-122.801742, 45.60491],\n *   [-122.584762, 45.60491],\n *   [-122.584762, 45.48565],\n *   [-122.801742, 45.48565]\n * ]]);\n *\n * var poly2 = turf.polygon([[\n *   [-122.520217, 45.535693],\n *   [-122.64038, 45.553967],\n *   [-122.720031, 45.526554],\n *   [-122.669906, 45.507309],\n *   [-122.723464, 45.446643],\n *   [-122.532577, 45.408574],\n *   [-122.487258, 45.477466],\n *   [-122.520217, 45.535693]\n * ]]);\n *\n * var intersection = turf.intersect(poly1, poly2);\n *\n * //addToMap\n * var addToMap = [poly1, poly2, intersection];\n */\nexport default function intersect(poly1, poly2, options) {\n    if (options === void 0) { options = {}; }\n    var geom1 = getGeom(poly1);\n    var geom2 = getGeom(poly2);\n    var intersection = polygonClipping.intersection(geom1.coordinates, geom2.coordinates);\n    if (intersection.length === 0)\n        return null;\n    if (intersection.length === 1)\n        return polygon(intersection[0], options.properties);\n    return multiPolygon(intersection, options.properties);\n}\n","<template>\n  <div ref=\"bulletinsOverlay\" class=\"bulletins-overlay\">\n    <button class=\"delete is-small button-close\" @click=\"closeOverlay\">x</button>\n    <div class=\"bulletins-header pt-5 pb-3 has-text-centered\">\n      <p class=\"title is-5\">{{ overlayData.mountainName }}</p>\n    </div>\n    <div v-if=\"overlayData.danger.low\" class=\"py-2\">\n      <p class=\"is-size-7 px-3 pb-5\">\n        <span class=\"bulletins-date\"><strong v-translate>Validity date:</strong> {{ overlayValidUntil }}</span>\n        <strong v-if=\"overlayValidUntilExpired\" class=\"is-block has-text-danger\">\n          <fa-icon icon=\"exclamation-circle\" />\n          <span v-translate key=\"id1\">Validity date expired</span>\n        </strong>\n      </p>\n      <div class=\"is-flex is-justify-content-space-around is-align-items-center px-3\">\n        <div>\n          <svg\n            :viewBox=\"overlayData.danger.altitude ? '0 0 155 100' : '0 0 100 100'\"\n            :width=\"overlayData.danger.altitude ? 130 : 80\"\n            height=\"80\"\n          >\n            <polygon\n              style=\"fill: none; stroke: #000; stroke-miterlimit: 10; stroke-width: 1.5\"\n              points=\"2.2,89.5 97.5,89.5 62.7,11.9 48,32.9 31.8,25.5 \"\n            />\n            <text\n              x=\"50\"\n              :y=\"overlayData.danger.high ? 82 : 65\"\n              text-anchor=\"middle\"\n              font-family=\"sans-serif\"\n              font-size=\"20px\"\n              font-weight=\"bold\"\n            >\n              <tspan>{{ overlayData.danger.low }}</tspan>\n              <tspan v-if=\"overlayData.danger.lowEvol\">&ensp;</tspan>\n              <tspan v-if=\"overlayData.danger.lowEvol\">{{ overlayData.danger.lowEvol }}</tspan>\n            </text>\n            <g v-if=\"overlayData.danger.lowEvol\" style=\"fill: none; stroke: #000; stroke-width: 2\">\n              <line x1=\"45\" x2=\"55\" :y1=\"overlayData.danger.high ? 75 : 58\" :y2=\"overlayData.danger.high ? 75 : 58\" />\n              <line x1=\"50\" x2=\"55\" :y1=\"overlayData.danger.high ? 70 : 53\" :y2=\"overlayData.danger.high ? 75 : 58\" />\n              <line x1=\"50\" x2=\"55\" :y1=\"overlayData.danger.high ? 80 : 63\" :y2=\"overlayData.danger.high ? 75 : 58\" />\n            </g>\n            <g v-show=\"overlayData.danger.high\">\n              <line\n                style=\"fill: none; stroke: #000; stroke-miterlimit: 10; stroke-width: 1.5\"\n                x1=\"10\"\n                y1=\"61.5\"\n                x2=\"90\"\n                y2=\"61.5\"\n              />\n              <text x=\"50\" y=\"54\" text-anchor=\"middle\" font-family=\"sans-serif\" font-size=\"20px\" font-weight=\"bold\">\n                <tspan>{{ overlayData.danger.high }}</tspan>\n                <tspan v-if=\"overlayData.danger.highEvol\">&ensp;</tspan>\n                <tspan v-if=\"overlayData.danger.highEvol\">{{ overlayData.danger.highEvol }}</tspan>\n              </text>\n              <g v-if=\"overlayData.danger.highEvol\" style=\"fill: none; stroke: #000; stroke-width: 2\">\n                <line x1=\"45\" x2=\"55\" y1=\"46\" y2=\"46\" />\n                <line x1=\"50\" x2=\"55\" y1=\"41\" y2=\"46\" />\n                <line x1=\"50\" x2=\"55\" y1=\"51\" y2=\"46\" />\n              </g>\n            </g>\n            <text\n              v-if=\"overlayData.danger.altitude\"\n              x=\"92\"\n              y=\"65\"\n              font-family=\"sans-serif\"\n              font-size=\"16px\"\n              font-weight=\"bold\"\n            >\n              {{ overlayData.danger.altitude }}m\n            </text>\n          </svg>\n        </div>\n        <input-orientation :value=\"overlayOrientations\" />\n      </div>\n      <dl v-if=\"overlayDangerComment || overlayOrientationsComment\" class=\"is-size-6 px-3 pt-3\">\n        <div v-if=\"overlayDangerComment\">\n          <dt v-translate>Danger:</dt>\n          <dd>{{ overlayDangerComment }}</dd>\n        </div>\n        <div v-if=\"overlayOrientationsComment\">\n          <dt v-translate>Orientations:</dt>\n          <dd>{{ overlayOrientationsComment }}</dd>\n        </div>\n      </dl>\n    </div>\n    <div v-else class=\"py-2\">\n      <p class=\"is-size-6 p-3\"><span v-translate key=\"id2\">No avalanche bulletin right now</span></p>\n    </div>\n    <p class=\"is-size-7 px-3 pt-2 pb-2 bulletins-footer\" v-if=\"overlayData.urls.length\">\n      <strong>©{{overlayData.urls[0].title}}</strong>\n      <span v-for=\"(url, i) in overlayData.urls\" :key=\"i\" class=\"pl-1\">\n        <a :href=\"url.url\" target=\"_blank\">\n          <fa-icon icon=\"external-link-alt\" />\n          <span v-translate>Full bulletin</span>\n        </a>\n      </span>\n    </p>\n    <img :src=\"overlayDangerIcon\" alt=\"\" class=\"bulletins-overlay-danger-icon\" />\n  </div>\n</template>\n<script>\nimport turfIntersect from '@turf/intersect';\nimport { format } from 'date-fns';\n\nimport layerMixin from './layer';\n\nimport Yetix from '@/components/yeti/Yetix';\nimport ol from '@/js/libs/ol';\n\nlet mountainsStyle = (mapZoom) => {\n  const MIN_ZOOM = 8;\n  const MAX_ZOOM = 10;\n  const MIN_OPACITY = 0;\n  const MAX_OPACITY = 0.8;\n\n  let opacity = MAX_OPACITY;\n  let strokeWidth = 1;\n\n  if (mapZoom) {\n    // opacity should be\n    // 0.8 (default)\n    // gradually decreasing between min and max zooms\n    // 0 when zoom is > max\n    if (mapZoom >= MIN_ZOOM && mapZoom <= MAX_ZOOM) {\n      opacity = (MAX_ZOOM - mapZoom) * (MAX_OPACITY / (MAX_ZOOM - MIN_ZOOM));\n    } else if (mapZoom > MAX_ZOOM) {\n      opacity = MIN_OPACITY;\n    }\n\n    // increase stroke when zoom > max\n    if (mapZoom > MAX_ZOOM) {\n      strokeWidth = 2;\n    }\n  }\n\n  return new ol.style.Style({\n    stroke: new ol.style.Stroke({\n      color: 'rgba(0, 0, 0, .85)',\n      width: strokeWidth,\n    }),\n    fill: new ol.style.Fill({\n      color: `rgba(255, 255, 255, ${opacity})`,\n    }),\n  });\n};\n\nlet iconSize = 80;\n\nlet bulletinsIcon = (danger) => {\n  danger = danger || 0;\n\n  let dangerFill = ['#999', '#cbdb45', '#fff100', '#f6921e', '#ec1c24', '#ec1c24'];\n\n  let svg = `\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${iconSize}\" height=\"${iconSize}\" viewBox=\"-50 0 200 100\">\n      <path d=\"M5,50L50,5L95,50\" fill=\"white\" />\n      <path d=\"M5,50L50,95L95,50\" fill=\"${dangerFill[danger]}\" />\n      <path d=\"m50,0l50,50-50,50-50-50zv5L21,33l19-10L50,26l9-8L80,38l2-1L50,5M5,50L50,95L95,50\" />\n  `;\n\n  if (danger !== 0) {\n    svg += `\n      <text x=\"50\" y=\"83\" text-anchor=\"middle\" font-family=\"sans-serif\" font-size=\"40px\" font-weight=\"bold\">${danger}</text>\n    `;\n  } else {\n    svg += `\n      <g stroke-width=\"5\" stroke=\"black\">\n        <line x1=\"40\" x2=\"60\" y1=\"58\" y2=\"78\" />\n        <line x1=\"40\" x2=\"60\" y1=\"78\" y2=\"58\" />\n      </g>\n    `;\n  }\n\n  if (danger === 2) {\n    svg += `\n      <path d=\"M86,45a7,7,0,106.5-13.5a7,7,0,00-10.5-8a5.4,5.4,0,00-10.2,3\" />\n      <path d=\"M69,27L86,44a5,5,0,104-12a5,5,0,10-9-5a3,3,0,10-8,0\" fill=\"white\" />\n      <path d=\"M85,32a1,1,0,110,8v-2a1,1,0,100-4\" />\n    `;\n  } else if (danger === 3) {\n    svg += `\n      <path d=\"M54,22L79,50h33a5,5,0,10-4-22.3a11.3,11.3,0,00-20,0q-8-2,-14,6\" />\n      <path d=\"M55,21L82,48h30a5,5,0,10-5-18a9.7,9.7,0,00-18,0q-7-2,-11,3L60,16\" fill=\"white\" />\n      <path d=\"M59,18l25,25-1.5,1.5-25-25M87,38a1,1,0,1110,5l-2-1a1,1,0,10-6-3\" />\n    `;\n  } else if (danger === 4 || danger === 5) {\n    svg += `\n      <path d=\"M54,22L79,50h52a12.5,12.5,0,001.5-24.4a7,7,0,00-8.2-7a11.9,11.9,0,00-22.5-2q-11-1,-14,7q-10-2-14,4\" />\n      <path d=\"M52,24L77,48h50a5,5,0,103-21a5,5,0,00-7-6a10.3,10.3,0,00-20-2q-11-2,-14,7q-10-3-14,4L60,16\" fill=\"white\" />\n      <path d=\"M59,18l25,25-1.5,1.5-25-25m-1.5,1.5l22.5,22.5-1.5,1.5-22.5-22.5M87,38a1,1,0,1110,5l-2-1a1,1,0,10-6-3M96,29a1,1,0,1115,14l-1.7-1.7A1,1,0,1097.7,30.7\" />\n    `;\n  }\n\n  svg += '</svg>';\n\n  return 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(svg);\n};\n\nlet bulletinsStyle = (danger) => {\n  return new ol.style.Style({\n    image: new ol.style.Icon({\n      src: bulletinsIcon(danger),\n      size: [iconSize, iconSize],\n    }),\n  });\n};\n\nlet mountainsLayer = new ol.layer.Vector({\n  source: new ol.source.Vector(),\n  style: mountainsStyle(),\n});\nlet bulletinsLayer = new ol.layer.Vector({\n  source: new ol.source.Vector(),\n});\nlet mountainsLayerGroup = new ol.layer.Group({\n  layers: [mountainsLayer, bulletinsLayer],\n});\nlet bulletinsOverlay = new ol.Overlay({\n  positioning: 'top-center',\n  offset: [0, 0],\n  className: 'bulletins-overlay-container',\n});\nlet bulletinsOverlayPanOptions = {\n  animation: {\n    duration: 250,\n  },\n  margin: 10,\n};\n\nexport default {\n  mixins: [layerMixin],\n  data() {\n    return {\n      overlayData: {\n        mountainName: null,\n        validUntil: null,\n        danger: {},\n        orientations: [],\n        urls: [],\n      },\n      panIntoView: false,\n    };\n  },\n  computed: {\n    mapZoom() {\n      return Yetix.mapZoom;\n    },\n    showAvalancheBulletins() {\n      return Yetix.showAvalancheBulletins;\n    },\n    bulletinsLoaded() {\n      return Yetix.bulletinsLoaded;\n    },\n    drawingMode() {\n      return Yetix.drawingMode;\n    },\n    overlayOrientations() {\n      // return truthy orientations, in uppercase\n      return Object.keys(this.overlayData.orientations)\n        .filter((key) => key !== 'comment')\n        .filter((key) => this.overlayData.orientations[key])\n        .map((val) => val.toUpperCase());\n    },\n    overlayValidUntil() {\n      return format(new Date(this.overlayData.validUntil), 'dd/MM/yyyy HH:mm');\n    },\n    overlayValidUntilExpired() {\n      // expire delay is 48h\n      return (new Date() - new Date(this.overlayData.validUntil)) / 1000 > 60 * 60 * 24 * 2;\n    },\n    overlayDangerIcon() {\n      return bulletinsIcon(this.overlayData.danger.max);\n    },\n    overlayDangerComment() {\n      return this.overlayData.danger.low ? this.overlayData.danger.comment : null;\n    },\n    overlayOrientationsComment() {\n      return this.overlayData.orientations.comment;\n    },\n  },\n  watch: {\n    showAvalancheBulletins() {\n      this.onShowAvalancheBulletins();\n    },\n  },\n  mounted() {\n    // data\n    this.activeBulletins = null;\n\n    // bulletins overlay\n    bulletinsOverlay.setElement(this.$refs.bulletinsOverlay);\n    this.map.addOverlay(bulletinsOverlay);\n\n    this.map.addLayer(mountainsLayerGroup);\n    // layers are not visible on load\n    mountainsLayerGroup.setVisible(false);\n\n    // only on first mount, if mountains already loaded\n    if (Yetix.mountains.all.length === 0) {\n      Yetix.fetchMountains().then(this.onMountainsResult);\n\n      Yetix.$on('mapMoveEnd', this.onMapMoveEnd);\n      Yetix.$on('mapClick', this.onMapClick);\n    }\n  },\n  methods: {\n    onMountainsResult(data) {\n      let mountainsFeatures = this.getFeaturesFromData(data);\n      // TMP: filter only France for now\n      mountainsFeatures = mountainsFeatures.filter((feature) => {\n        return feature.get('country') === 'France';\n      });\n\n      // add to mountains layer\n      mountainsLayer.getSource().addFeatures(mountainsFeatures);\n\n      let mountains = this.getPropertiesFromFeatures(mountainsFeatures);\n      mountains = this.sortMountainsByMassif(mountains);\n\n      Yetix.setAllMountains(mountains);\n\n      this.setVisibleMountains();\n    },\n    sortMountainsByMassif(mountains) {\n      // first, order mountains by massifs\n      let sortedMountains = {};\n      for (let i = 0; i < mountains.length; i++) {\n        if (!sortedMountains[mountains[i].mountain]) {\n          sortedMountains[mountains[i].mountain] = [];\n        }\n        sortedMountains[mountains[i].mountain].push(mountains[i]);\n      }\n\n      // then sort by massif\n      mountains = Object.keys(sortedMountains)\n        .sort()\n        .reduce((obj, key) => {\n          obj[key] = sortedMountains[key];\n          return obj;\n        }, {});\n\n      // then sort mountains inside each massif\n      let key = 'name';\n      for (let i in mountains) {\n        mountains[i].sort((a, b) => {\n          if (a[key] < b[key]) return -1;\n          if (a[key] > b[key]) return 1;\n          return 0;\n        });\n      }\n\n      return mountains;\n    },\n    setVisibleMountains() {\n      let mapExtent = this.getExtent('EPSG:3857');\n      // clone this.mountains first, with no reference\n      let visibleMountains = Object.assign({}, Yetix.mountains.all);\n\n      // then filter if polygon isn’t in view\n      for (let massif in visibleMountains) {\n        visibleMountains[massif] = visibleMountains[massif].filter((mountain) => {\n          let polygon = mountain.geometry;\n          return polygon.intersectsExtent(mapExtent);\n        });\n        // unset massif if empty\n        if (visibleMountains[massif].length === 0) {\n          delete visibleMountains[massif];\n        }\n      }\n      // set mountains in visible\n      Yetix.setVisibleMountains(visibleMountains);\n    },\n    updateMountainsStyle() {\n      mountainsLayer.setStyle(mountainsStyle(this.mapZoom));\n    },\n    onMapMoveEnd() {\n      // set visible mountains\n      this.setVisibleMountains();\n\n      if (this.showAvalancheBulletins) {\n        this.updateMountainsStyle();\n        this.updateBulletinsGeometry();\n      }\n    },\n    onMapClick(evt, clickedFeature) {\n      // this will set bulletins overlay, only when showAvalancheBulletins is true\n      // and drawing mode is off\n      if (this.showAvalancheBulletins && !this.drawingMode) {\n        this.setBulletinsOverlay(evt, clickedFeature);\n      }\n    },\n    onShowAvalancheBulletins() {\n      // first time, bulletins are not loaded yet\n      if (!this.bulletinsLoaded) {\n        Yetix.setBulletinsLoaded(true);\n        // so load them\n        Yetix.fetchBulletins().then(this.onBulletinsResult);\n      }\n      // show mountains layer group if needed\n      mountainsLayerGroup.setVisible(this.showAvalancheBulletins);\n      // update styles\n      this.updateMountainsStyle();\n      this.updateBulletinsGeometry();\n    },\n    onBulletinsResult(data) {\n      let bulletinsFeatures = data.data;\n      let mountainsFeatures = mountainsLayer.getSource().getFeatures();\n\n      bulletinsFeatures.zones.forEach((zone) => {\n        mountainsFeatures.find((mountain) => {\n          if (mountain.get('name') === zone.zone) {\n            // check validity first\n            // if no longer valid (expires 48h), set danger to null\n            if ((new Date() - new Date(zone.validUntil)) / 1000 > 60 * 60 * 24 * 2) {\n              zone.danger = {\n                low: null,\n                max: null,\n              };\n            }\n            let mountainGeometry = mountain.getGeometry();\n            let mountainGeometryType = mountainGeometry.getType();\n\n            let bulletinsGeometry = null;\n\n            if (mountainGeometryType === 'MultiPolygon') {\n              bulletinsGeometry = mountainGeometry.getInteriorPoints();\n            } else {\n              throw new Error('Mountain geometry have to be MultiPolygon.');\n            }\n\n            // create feature (bulletin icons)\n            // geometry have to be MultiPoint\n            let bulletinsFeature = new ol.Feature({\n              geometry: bulletinsGeometry,\n              initialGeometry: bulletinsGeometry,\n              overlayData: {\n                mountainName: mountain.get('name'),\n                validUntil: zone.validUntil,\n                danger: zone.danger,\n                orientations: zone.orientations,\n                urls: mountain.get('urls'),\n              },\n            });\n            bulletinsLayer.getSource().addFeature(bulletinsFeature);\n\n            bulletinsFeature.setStyle(bulletinsStyle(zone.danger.max));\n\n            mountain.setProperties({ bulletinsFeature });\n\n            // break\n            return true;\n          }\n        });\n      });\n      // update in case we're already zoomed in\n      this.updateBulletinsGeometry();\n    },\n    updateBulletinsGeometry() {\n      // return, if bulletins are not loaded\n      if (!this.bulletinsLoaded) {\n        return;\n      }\n\n      // no update if overlay is animating into view when opens\n      // = prevent overlay from moving\n      if (this.panIntoView) {\n        this.panIntoView = false;\n        // update bulletin overlay though (hide/show if needed)\n        this.updateBulletinsOverlay();\n        return;\n      }\n\n      // if zoom > 10\n      //   we will intersect every polygon with the map extent, and update geometry of avalanche bulletin icons (icons will always be visible, even when zoomed)\n      // else\n      //   we set geometry of all points to be the initial geometry (stored during the request)\n      if (this.mapZoom > 10) {\n        let mapExtent = this.getExtent('EPSG:3857');\n        let mapExtentFeature = new ol.Feature(ol.geom.polygonFromExtent(mapExtent));\n\n        let mountainsFeatures = mountainsLayer.getSource().getFeatures();\n\n        mountainsFeatures.forEach((feature) => {\n          let intersect = turfIntersect(\n            new ol.format.GeoJSON().writeFeatureObject(feature),\n            new ol.format.GeoJSON().writeFeatureObject(mapExtentFeature)\n          );\n          if (intersect) {\n            let intersectFeature = new ol.format.GeoJSON().readFeature(intersect);\n\n            let intersectGeometry = intersectFeature.getGeometry();\n            let intersectType = intersectGeometry.getType();\n\n            // if polygon, should be MultiPolygon\n            if (intersectType === 'Polygon') {\n              intersectFeature = new ol.Feature({\n                geometry: new ol.geom.MultiPolygon([intersectGeometry]),\n              });\n            }\n\n            let newBulletinsFeature = intersectFeature.getGeometry().getInteriorPoints();\n\n            let bulletinsFeature = feature.get('bulletinsFeature');\n            if (bulletinsFeature) {\n              bulletinsFeature.setGeometry(newBulletinsFeature);\n            }\n          }\n        });\n      } else {\n        let bulletinsFeatures = bulletinsLayer.getSource().getFeatures();\n        bulletinsFeatures.forEach((feature) => {\n          feature.setGeometry(feature.get('initialGeometry'));\n        });\n      }\n\n      // update bulletin overlay\n      this.updateBulletinsOverlay();\n    },\n    setBulletinsOverlay(evt, clickedFeature) {\n      // first, get all features from bulletins layer where clicked\n      let clickedBulletinFeatures = this.map.getFeaturesAtPixel(evt.pixel, {\n        layerFilter: function (layer) {\n          return layer === bulletinsLayer;\n        },\n      });\n      let clickedBulletinFeature = clickedBulletinFeatures.length ? clickedBulletinFeatures[0] : undefined;\n      // if a feature is found\n      // and feature is the clicked feature from map (overlap)\n      if (clickedBulletinFeature && clickedBulletinFeature === clickedFeature) {\n        // set mountain name\n        this.overlayData = clickedBulletinFeature.get('overlayData');\n        // find the closest point (because it's a MultiPoint)\n        let closestPointCoordinate = clickedBulletinFeature.getGeometry().getClosestPoint(evt.coordinate);\n        // set overlay position\n        this.openOverlay(closestPointCoordinate, true);\n        // store this point\n        this.activeBulletins = {\n          feature: clickedBulletinFeature,\n        };\n        // if there are more than one point in multipoint\n        // find the closest one and store index too\n        let points = clickedBulletinFeature.getGeometry().getPoints();\n        if (points.length > 1) {\n          points.forEach((point, index) => {\n            if (point.getCoordinates().every((coord, i) => coord === closestPointCoordinate[i])) {\n              this.activeBulletins.index = index;\n            }\n          });\n        }\n      } else {\n        // remove when no feature found (click on map)\n        this.closeOverlay(true);\n      }\n    },\n    updateBulletinsOverlay() {\n      if (this.activeBulletins && this.showAvalancheBulletins) {\n        let activeFeature = this.activeBulletins.feature;\n        let activeIndex = this.activeBulletins.index || 0;\n        // try to get point\n        let activePoint = activeFeature.getGeometry().getPoint(activeIndex);\n        if (!activePoint) {\n          activePoint = activeFeature.getGeometry().getPoint(0);\n        }\n        this.openOverlay(activePoint.getCoordinates());\n      } else {\n        this.closeOverlay();\n      }\n    },\n    openOverlay(coordinates, panIntoView = false) {\n      this.$nextTick(() => {\n        bulletinsOverlay.setPosition(coordinates);\n\n        if (panIntoView) {\n          this.panIntoView = true;\n          bulletinsOverlay.panIntoView(bulletinsOverlayPanOptions);\n        }\n      });\n    },\n    closeOverlay(force = false) {\n      bulletinsOverlay.setPosition(undefined);\n\n      if (force) {\n        this.activeBulletins = null;\n      }\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import '@/assets/sass/variables';\n\n.bulletins-overlay {\n  width: 250px;\n  max-width: 100%;\n  background: #fff;\n  border-radius: 4px;\n  box-shadow: 0 0 3px rgba($black, 0.5), 0 3px 8px rgba($black, 0.5);\n  overflow: hidden;\n}\n.bulletins-header {\n  background: $primary;\n}\n.bulletins-header * {\n  color: white;\n}\n.bulletins-footer {\n  background: $grey-lighter;\n}\n.bulletins-overlay-danger-icon {\n  position: absolute;\n  top: -40px; /* iconSize / 2 */\n  left: 0;\n  right: 0;\n  margin: auto;\n  z-index: 2;\n  pointer-events: none;\n}\n.bulletins-date {\n  opacity: 0.75;\n}\ndt,\ndd {\n  display: inline;\n}\ndt {\n  font-weight: bold;\n}\n.button-close {\n  position: absolute;\n  top: 4px;\n  right: 4px;\n}\n</style>\n\n<style lang=\"scss\">\n/* Not scoped styles */\n.yeti-app {\n  .bulletins-overlay-container {\n    max-width: 90%;\n  }\n  .bulletins-overlay {\n    .input-orientation {\n      width: 70px;\n      height: 70px;\n    }\n  }\n}\n</style>\n","var render, staticRenderFns\nimport script from \"./RouteLayer.vue?vue&type=script&lang=js&\"\nexport * from \"./RouteLayer.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./AvalancheBulletinsLayer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./AvalancheBulletinsLayer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AvalancheBulletinsLayer.vue?vue&type=template&id=4dda1eea&scoped=true&\"\nimport script from \"./AvalancheBulletinsLayer.vue?vue&type=script&lang=js&\"\nexport * from \"./AvalancheBulletinsLayer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AvalancheBulletinsLayer.vue?vue&type=style&index=0&id=4dda1eea&prod&scoped=true&lang=scss&\"\nimport style1 from \"./AvalancheBulletinsLayer.vue?vue&type=style&index=1&id=4dda1eea&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4dda1eea\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('icon-layer',{attrs:{\"name\":_vm.name,\"color\":_vm.color},scopedSlots:_vm._u([{key:\"overlay\",fn:function(){return [_c('a',{attrs:{\"href\":_vm.overlay.url,\"target\":\"_blank\"}},[_vm._v(\"\\n      \"+_vm._s(_vm.overlay.title)+\"\\n      \"),_c('fa-icon',{staticClass:\"overlay-link-icon\",attrs:{\"icon\":\"external-link-alt\"}})],1)]},proxy:true}])},[_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"FlowCapt sensor\")])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{ref:\"overlay\",staticClass:\"overlay\"},[_c('p',{staticClass:\"overlay-header\",style:({ background: _vm.color })},[_vm._t(\"default\")],2),_vm._v(\" \"),_c('div',{staticClass:\"overlay-content\"},[_vm._t(\"overlay\")],2),_vm._v(\" \"),_c('img',{staticClass:\"overlay-icon\",attrs:{\"src\":_vm.icon('#4a4a4a'),\"alt\":\"\"}})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div ref=\"overlay\" class=\"overlay\">\n    <p class=\"overlay-header\" :style=\"{ background: color }\">\n      <slot></slot>\n    </p>\n    <div class=\"overlay-content\">\n      <slot name=\"overlay\"></slot>\n    </div>\n    <img :src=\"icon('#4a4a4a')\" alt=\"\" class=\"overlay-icon\">\n  </div>\n</template>\n\n<script>\nimport layerMixin from './layer';\n\nimport Yetix from '@/components/yeti/Yetix';\nimport ol from '@/js/libs/ol';\n\nexport default {\n  mixins: [layerMixin],\n  props: {\n    name: {\n      type: String,\n      required: true,\n    },\n    color: {\n      type: String,\n      required: true,\n    },\n  },\n  computed: {\n    letter() {\n      return this.name.charAt(0).toUpperCase();\n    },\n    capitalizedName() {\n      return this.letter + this.name.slice(1);\n    },\n    dataLayer() {\n      return Yetix[this.name];\n    },\n    showLayer() {\n      return Yetix['show' + this.capitalizedName];\n    },\n    fetch() {\n      return Yetix['fetch' + this.capitalizedName];\n    },\n    setState() {\n      return Yetix['set' + this.capitalizedName];\n    },\n    mapZoom() {\n      return Yetix.mapZoom;\n    },\n  },\n  watch: {\n    showLayer() {\n      // on first load\n      if (this.dataLayer.length === 0) {\n        // set data\n        this.fetch().then(this.onResult);\n      }\n      // then, switch visibility\n      this.onShowLayer();\n    },\n  },\n  created() {\n    this.icon = (color) => {\n      let svg = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"-10 -10 20 20\">\n          <circle r=\"9\" fill=\"${color}\" />\n          <text y=\"5\" text-anchor=\"middle\" font-family=\"sans-serif\" font-size=\"14px\" font-weight=\"bold\" fill=\"white\">${this.letter}</text>\n        </svg>`;\n      return 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(svg);\n    };\n\n    this.style = new ol.style.Style({\n      image: new ol.style.Icon({\n        src: this.icon(this.color),\n        size: [20, 20],\n      }),\n    });\n\n    this.overlay = new ol.Overlay({\n      positioning: 'top-left',\n      offset: [-4,-6],\n      className: 'overlay-container',\n    });\n  },\n  mounted() {\n    this.layer = new ol.layer.Vector({\n      source: new ol.source.Vector(),\n      style: this.style,\n    });\n    this.map.addLayer(this.layer);\n\n    this.overlay.setElement(this.$refs.overlay);\n    this.map.addOverlay(this.overlay);\n    this.activeFeature = false;\n\n    // showLayer checked?\n    this.layer.setVisible(this.showLayer);\n\n    // only in first mount\n    if (this.dataLayer.length === 0) {\n      // events\n      Yetix.$on('mapClick', this.onMapClick);\n    }\n  },\n  methods: {\n    onResult(data) {\n      let features = this.getFeaturesFromData(data);\n      let props = this.getPropertiesFromFeatures(features);\n\n      // set data in state\n      this.setState(props);\n\n      // add features\n      this.layer.getSource().addFeatures(features);\n    },\n    onShowLayer() {\n      // set layer visibility\n      this.layer.setVisible(this.showLayer);\n      // if a feature is active (selected) and layer is visible\n      // open overlay, else close\n      if (this.activeFeature && this.showLayer) {\n        this.openOverlay(this.activeFeature);\n      } else {\n        this.closeOverlay();\n      }\n    },\n    onMapClick(e, clickedFeature) {\n      this.closeOverlay(true);\n      if (this.layer.getVisible()) {\n        this.map.forEachFeatureAtPixel(e.pixel, (feature) => {\n          if (feature !== clickedFeature) {\n            return false;\n          }\n          this.$parent.setOverlay(feature);\n          this.activeFeature = feature;\n          this.openOverlay(feature);\n          return true;\n        }, {\n          layerFilter: (layer) => {\n            return layer === this.layer\n          }\n        });\n      }\n    },\n    openOverlay(feature) {\n      let coordinates = feature.getGeometry().getCoordinates();\n      this.overlay.setPosition(coordinates);\n    },\n    closeOverlay(force = false) {\n      this.overlay.setPosition(undefined);\n\n      if (force) {\n        this.$parent.unsetOverlay();\n        this.activeFeature = false;\n      }\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import '@/assets/sass/variables';\n\n.overlay {\n  min-width: 150px;\n  max-width: 100%;\n  background: $white;\n  border-radius: 4px;\n  box-shadow: 0 0 3px rgba($black, 0.5), 0 3px 8px rgba($black, 0.5);\n  overflow: hidden;\n}\n.overlay-header {\n  font-size: .9em;\n  padding: 5px 0;\n  text-align: center;\n  color: $white;\n}\n.overlay-content {\n  text-align: center;\n  padding: 5px;\n  vertical-align: 1px;\n}\n.overlay-content a:hover,\n.overlay-content a:focus {\n  text-decoration: underline;\n}\n.overlay-link-icon {\n  margin-left: 5px;\n}\n.overlay-icon {\n  position: absolute;\n  transform: scale(1.3);\n  top: -4px;\n  left: -6px; /* iconSize / 2 */\n  margin: auto;\n  z-index: 2;\n  pointer-events: none;\n}\n</style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./IconLayer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./IconLayer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./IconLayer.vue?vue&type=template&id=784b2e92&scoped=true&\"\nimport script from \"./IconLayer.vue?vue&type=script&lang=js&\"\nexport * from \"./IconLayer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./IconLayer.vue?vue&type=style&index=0&id=784b2e92&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"784b2e92\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <icon-layer\n    :name=\"name\"\n    :color=\"color\"\n  >\n    <span v-translate>FlowCapt sensor</span>\n    <template #overlay>\n      <a :href=\"overlay.url\" target=\"_blank\">\n        {{ overlay.title }}\n        <fa-icon icon=\"external-link-alt\" class=\"overlay-link-icon\" />\n      </a>\n    </template>\n  </icon-layer>\n</template>\n\n<script>\nimport IconLayer from './IconLayer.vue';\n\nexport default {\n  components: {\n    IconLayer,\n  },\n  data() {\n    return {\n      name: 'flowcapt',\n      color: 'hsl(112, 55%, 42%)',\n      overlay: {\n        title: null,\n        url: null,\n      },\n    };\n  },\n  methods: {\n    setOverlay(feature) {\n      this.overlay.title = feature.get('name') + ' - ' + feature.get('city');\n      this.overlay.url = feature.get('url');\n    },\n    unsetOverlay() {\n      this.overlay.title = null;\n      this.overlay.url = null;\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./FlowcaptLayer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./FlowcaptLayer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FlowcaptLayer.vue?vue&type=template&id=e2cb77ca&\"\nimport script from \"./FlowcaptLayer.vue?vue&type=script&lang=js&\"\nexport * from \"./FlowcaptLayer.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('icon-layer',{attrs:{\"name\":_vm.name,\"color\":_vm.color},scopedSlots:_vm._u([{key:\"overlay\",fn:function(){return [_c('p',{staticClass:\"overlay-title\"},[_c('strong',[_vm._v(_vm._s(_vm.overlay.title))]),_vm._v(\" - \"),_c('em',[_vm._v(_vm._s(_vm.overlay.massif))])]),_vm._v(\" \"),_c('div',{staticClass:\"overlay-nivoses-icons\"},[_c('a',{attrs:{\"href\":_vm.overlay.url1,\"target\":\"_blank\"}},[_c('div',{staticClass:\"overlay-nivoses-icons-imgs\"},[_c('img',{attrs:{\"src\":_vm.icon,\"alt\":\"\"}}),_vm._v(\" \"),_c('fa-icon',{staticClass:\"overlay-link-icon\",attrs:{\"icon\":\"external-link-alt\"}})],1),_vm._v(\" \"),_c('p',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"5 months\")])]),_vm._v(\" \"),_c('a',{attrs:{\"href\":_vm.overlay.url2,\"target\":\"_blank\"}},[_c('div',{staticClass:\"overlay-nivoses-icons-imgs\"},[_c('img',{attrs:{\"src\":_vm.icon,\"alt\":\"\"}}),_vm._v(\" \"),_c('fa-icon',{staticClass:\"overlay-link-icon\",attrs:{\"icon\":\"external-link-alt\"}})],1),_vm._v(\" \"),_c('p',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"8 days\")])])])]},proxy:true}])},[_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Nivose beacon\")])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <icon-layer\n    :name=\"name\"\n    :color=\"color\"\n  >\n    <span v-translate>Nivose beacon</span>\n    <template #overlay>\n      <p class=\"overlay-title\">\n        <strong>{{ overlay.title }}</strong> - <em>{{ overlay.massif }}</em>\n      </p>\n      <div class=\"overlay-nivoses-icons\">\n        <a :href=\"overlay.url1\" target=\"_blank\">\n          <div class=\"overlay-nivoses-icons-imgs\">\n            <img :src=\"icon\" alt=\"\">\n            <fa-icon icon=\"external-link-alt\" class=\"overlay-link-icon\" />\n          </div>\n          <p v-translate>5 months</p>\n        </a>\n        <a :href=\"overlay.url2\" target=\"_blank\">\n          <div class=\"overlay-nivoses-icons-imgs\">\n            <img :src=\"icon\" alt=\"\">\n            <fa-icon icon=\"external-link-alt\" class=\"overlay-link-icon\" />\n          </div>\n          <p v-translate>8 days</p>\n        </a>\n      </div>\n    </template>\n  </icon-layer>\n</template>\n\n<script>\nimport IconLayer from './IconLayer.vue';\n\nexport default {\n  components: {\n    IconLayer,\n  },\n  data() {\n    return {\n      name: 'nivoses',\n      color: 'hsl(328, 95%, 50%)',\n      overlay: {\n        title: null,\n        massif: null,\n        url1: null,\n        url2: null,\n      },\n    };\n  },\n  created() {\n    let svg = `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 50 37\" width=\"50\" height=\"37\">\n      <path d=\"m2 2h34v2h-34z\" fill-opacity=\"0.5\" />\n      <path d=\"m2 14l4-7 3 5 3-3 4 5 7-8 2 4 2-3 3 6 1-2 2 3 2-4 6 3 6-7 1 3v6h-46z\" fill=\"#fe8f00\" />\n      <path d=\"m2 17l4 4 3-3 2 2 3-4 3 4 2-2 6 6-23-0zm37 23l3-3 2 3z\" fill=\"#fe0000\" />\n      <path d=\"m48 23l-1 1-3 2-3-3h-2l-4 3-5-1-4-1-3-1z\" fill=\"#0000fe\" />\n      <path d=\"m2 33l7-1 9 1h6l2-1 3-3 4-1 4 1 5 1 3-2 3 2v5h-46z\" fill=\"#03c776\" />\n    </svg>`;\n    this.icon = 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(svg);\n  },\n  methods: {\n    setOverlay(feature) {\n      this.overlay.title = feature.get('name');\n      this.overlay.massif = feature.get('massif');\n      this.overlay.url1 = feature.get('url1');\n      this.overlay.url2 = feature.get('url2');\n    },\n    unsetOverlay() {\n      this.overlay.title = null;\n      this.overlay.massif = null;\n      this.overlay.url1 = null;\n      this.overlay.url2 = null;\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.overlay-title em {\n  font-size: 0.9em;\n  opacity: 0.8;\n}\n.overlay-nivoses-icons {\n  display: flex;\n  justify-content: center;\n  margin: 10px;\n}\n.overlay-nivoses-icons a {\n  margin: 0 5px;\n  font-size: 0.9em;\n  line-height: 1;\n}\n.overlay-nivoses-icons img {\n  border: solid 1px rgba($black, 0.5);\n}\n.overlay-nivoses-icons-imgs {\n  position: relative;\n}\n.overlay-link-icon {\n  position: absolute;\n  top: 1px;\n  right: 1px;\n  background: white;\n  padding: 2px;\n}\n</style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./NivosesLayer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./NivosesLayer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NivosesLayer.vue?vue&type=template&id=6981167a&scoped=true&\"\nimport script from \"./NivosesLayer.vue?vue&type=script&lang=js&\"\nexport * from \"./NivosesLayer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NivosesLayer.vue?vue&type=style&index=0&id=6981167a&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6981167a\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('icon-layer',{attrs:{\"name\":_vm.name,\"color\":_vm.color},scopedSlots:_vm._u([{key:\"overlay\",fn:function(){return [_c('a',{attrs:{\"href\":_vm.overlay.url,\"target\":\"_blank\"}},[_vm._v(\"\\n      \"+_vm._s(_vm.overlay.title)+\"\\n      \"),_c('fa-icon',{staticClass:\"overlay-link-icon\",attrs:{\"icon\":\"external-link-alt\"}})],1)]},proxy:true}])},[_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"ROMMA station\")])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <icon-layer\n    :name=\"name\"\n    :color=\"color\"\n  >\n    <span v-translate>ROMMA station</span>\n    <template #overlay>\n      <a :href=\"overlay.url\" target=\"_blank\">\n        {{ overlay.title }}\n        <fa-icon icon=\"external-link-alt\" class=\"overlay-link-icon\" />\n      </a>\n    </template>\n  </icon-layer>\n</template>\n\n<script>\nimport IconLayer from './IconLayer.vue';\n\nexport default {\n  components: {\n    IconLayer,\n  },\n  data() {\n    return {\n      name: 'romma',\n      color: 'hsl(185, 45%, 40%)',\n      overlay: {\n        title: null,\n        url: null,\n      },\n    };\n  },\n  methods: {\n    setOverlay(feature) {\n      this.overlay.title = feature.get('name');\n      this.overlay.url = feature.get('url');\n    },\n    unsetOverlay() {\n      this.overlay.title = null;\n      this.overlay.url = null;\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./RommaLayer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./RommaLayer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RommaLayer.vue?vue&type=template&id=6d663f36&\"\nimport script from \"./RommaLayer.vue?vue&type=script&lang=js&\"\nexport * from \"./RommaLayer.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<script>\nimport layerMixin from './layer';\n\nimport Yetix from '@/components/yeti/Yetix';\nimport c2c from '@/js/apis/c2c';\nimport ol from '@/js/libs/ol';\n\nlet normalLineStyle = [\n  new ol.style.Style({\n    stroke: new ol.style.Stroke({\n      color: 'rgba(0, 0, 0, 0.4)',\n      width: 5,\n    }),\n  }),\n  new ol.style.Style({\n    stroke: new ol.style.Stroke({\n      color: 'yellow',\n      width: 3,\n    }),\n  }),\n];\n\nlet simplifiedLineStyle = [\n  new ol.style.Style({\n    stroke: new ol.style.Stroke({\n      color: 'white',\n      width: 5,\n    }),\n  }),\n  new ol.style.Style({\n    stroke: new ol.style.Stroke({\n      color: 'rgba(0, 0, 0, 0.7)',\n      width: 3,\n    }),\n  }),\n];\n\nlet highlightedLineStyle = [\n  new ol.style.Style({\n    stroke: new ol.style.Stroke({\n      color: 'yellow',\n      width: 9,\n    }),\n    zIndex: 1,\n  }),\n  new ol.style.Style({\n    stroke: new ol.style.Stroke({\n      color: 'red',\n      width: 3,\n    }),\n    zIndex: 1,\n  }),\n];\n\nexport default {\n  mixins: [layerMixin],\n  data() {\n    return {\n      visibleSimplifiedLayer: false,\n    };\n  },\n  computed: {\n    features() {\n      return Yetix.features;\n    },\n    featuresLength() {\n      return Yetix.featuresLength;\n    },\n    validMinimumMapZoom() {\n      return Yetix.VALID_MINIMUM_MAP_ZOOM;\n    },\n    drawingMode() {\n      return Yetix.drawingMode;\n    },\n  },\n  watch: {\n    drawingMode() {\n      if (!this.drawingMode) {\n        this.disableInteractions();\n      } else {\n        this.enableInteractions();\n      }\n    },\n  },\n  mounted() {\n    // features layer\n    this.featuresLayer = new ol.layer.Vector({\n      source: new ol.source.Vector(),\n      style: normalLineStyle,\n    });\n    this.featuresLayerSource = this.featuresLayer.getSource();\n\n    this.map.addLayer(this.featuresLayer);\n\n    // simplified layer (preview)\n    this.simplifiedLayer = new ol.layer.Vector({\n      source: new ol.source.Vector(),\n      style: simplifiedLineStyle,\n    });\n    // get source\n    this.simplifiedSource = this.simplifiedLayer.getSource();\n    // add layer, and hide it\n    this.map.addLayer(this.simplifiedLayer);\n    this.simplifiedLayer.setVisible(false);\n\n    // set default featuresTitle\n    Yetix.setFeaturesTitle(this.$gettext(Yetix.featuresTitle));\n\n    // load camptocamp document\n    let doc = this.$route.params.document_id;\n    let lang = this.$language.current;\n    if (doc) {\n      c2c['route'].getCooked(doc, lang).then(this.addFeaturesFromDocument);\n    }\n\n    // features events (added feature)\n    this.featuresLayerSource.on('addfeature', this.onFeature);\n    this.simplifiedSource.on('addfeature', this.onFeature);\n\n    this.addInteractions();\n\n    Yetix.$on('removeFeature', this.removeFeature);\n    Yetix.$on('removeFeatures', this.removeFeatures);\n    Yetix.$on('gpx', this.addFeaturesFromGpx);\n    Yetix.$on('previewSimplify', this.previewSimplify);\n    Yetix.$on('simplify', this.simplify);\n  },\n  methods: {\n    addInteractions() {\n      let source = this.featuresLayerSource;\n\n      this.modifyInteraction = new ol.interaction.Modify({ source });\n      this.map.addInteraction(this.modifyInteraction);\n\n      this.drawInteraction = new ol.interaction.Draw({\n        source,\n        type: 'LineString',\n      });\n      this.map.addInteraction(this.drawInteraction);\n\n      this.snapInteraction = new ol.interaction.Snap({ source });\n      this.map.addInteraction(this.snapInteraction);\n\n      this.drawInteraction.on('drawstart', this.onDrawStart);\n      this.drawInteraction.on('drawend', this.onDrawEnd);\n      this.modifyInteraction.on('modifyend', this.onModifyEnd);\n\n      this.disableInteractions();\n    },\n    enableInteractions() {\n      this.drawInteraction.setActive(true);\n      this.modifyInteraction.setActive(true);\n      this.snapInteraction.setActive(true);\n    },\n    disableInteractions() {\n      this.drawInteraction.setActive(false);\n      this.modifyInteraction.setActive(false);\n      this.snapInteraction.setActive(false);\n    },\n    onDrawStart() {\n      document.addEventListener('keydown', this.onKeyWhileDrawing);\n      document.addEventListener('keypress', this.onKeyWhileDrawing);\n    },\n    onDrawEnd() {\n      document.removeEventListener('keydown', this.onKeyWhileDrawing);\n      document.removeEventListener('keypress', this.onKeyWhileDrawing);\n    },\n    onModifyEnd() {\n      this.updateFeaturesFromStore();\n    },\n    onKeyWhileDrawing(event) {\n      event.preventDefault();\n      // backspace key\n      if (event.key === 'Backspace') {\n        this.drawInteraction.removeLastPoint();\n      }\n    },\n    onFeature(event) {\n      // set features styles\n      event.feature.set('highlightedStyle', highlightedLineStyle);\n      // emit new features, only in normal case (drawing)\n      // not in gpx/document case (prevent multiple update for each lines)\n      if (!this.loadingExternalFeatures) {\n        this.updateFeaturesFromStore();\n      }\n    },\n    updateFeaturesFromStore() {\n      // updates features\n      let features = this.visibleSimplifiedLayer ? this.getSimplifiedFeatures() : this.getFeaturesLayerFeatures();\n      Yetix.setFeatures(features);\n      // update length\n      let featuresLength = this.getFeaturesLayerFeatures()\n        .map((feature) => {\n          return feature.getGeometry().getCoordinates().length;\n        })\n        .reduce((acc, value) => acc + value, 0);\n      Yetix.setFeaturesLength(featuresLength);\n\n      if (features.length === 0) {\n        // if user come from a document url, remove url\n        if (this.$route.params.document_id) {\n          this.$router.replace({ path: '/' + this.$route.name });\n        }\n      }\n    },\n    getFeaturesLayerFeatures() {\n      return this.featuresLayerSource.getFeatures();\n    },\n    getSimplifiedFeatures() {\n      return this.simplifiedSource.getFeatures();\n    },\n    removeFeature(feature) {\n      // remove feature\n      // when only one left, ask for user to confirm\n      let toBeRemoved = !(\n        this.featuresLayerSource.getFeatures().length === 1 && !confirm(this.$gettext('Confirm delete'))\n      );\n      if (toBeRemoved) {\n        if (this.visibleSimplifiedLayer) {\n          this.simplifiedSource.removeFeature(feature);\n          // remove corresponding feature\n          this.getFeaturesLayerFeatures().forEach((f) => {\n            if (feature.get('id') === f.ol_uid) {\n              this.featuresLayerSource.removeFeature(f);\n            }\n          });\n        } else {\n          this.featuresLayerSource.removeFeature(feature);\n        }\n        this.updateFeaturesFromStore();\n      }\n    },\n    removeFeatures() {\n      // clear both layers\n      this.featuresLayerSource.clear();\n      this.simplifiedSource.clear(true);\n      // set default layer to be visible\n      this.hideSimplifiedLayer();\n      // update features\n      this.updateFeaturesFromStore();\n    },\n    addFeaturesFromGpx(gpx) {\n      // return if no gpx\n      if (!gpx) {\n        return;\n      }\n      // first, clear geometry\n      this.featuresLayerSource.clear();\n\n      // before reading gpx, set what we are doing\n      this.loadingExternalFeatures = true;\n\n      let gpxFormat = new ol.format.GPX();\n      let features = gpxFormat.readFeatures(gpx, { featureProjection: 'EPSG:3857' });\n      features.forEach(this.addFeature);\n      // update store\n      Yetix.setFeaturesTitle(this.getFeaturesTitleFromGpx(features));\n\n      // gpx is loaded, go back to normal case\n      this.loadingExternalFeatures = false;\n      // and emit new features\n      this.updateFeaturesFromStore();\n      // fit map to new features\n      this.fitMapToFeatures();\n    },\n    getFeaturesTitleFromGpx(features) {\n      if (features && features.length) {\n        let properties = features[0].getProperties();\n        if (properties.name) {\n          return properties.name;\n        } else {\n          return this.$gettext('GPX file');\n        }\n      }\n    },\n    addFeaturesFromDocument(doc) {\n      // before reading document, set what we are doing\n      this.loadingExternalFeatures = true;\n\n      let documentGeometry = doc.data.geometry.geom_detail;\n      let feature = new ol.format.GeoJSON().readFeature(documentGeometry);\n      this.addFeature(feature);\n      // update store\n      Yetix.setFeaturesTitle(this.getFeaturesTitleFromDocument(doc));\n\n      // document is loaded, go back to normal case\n      this.loadingExternalFeatures = false;\n      // and emit new features\n      this.updateFeaturesFromStore();\n      // fit map to new features\n      this.fitMapToFeatures();\n    },\n    addFeature(feature) {\n      // split multilinestrings into linestrings\n      if (feature.getGeometry().getType() === 'MultiLineString') {\n        let lines = feature.getGeometry().getLineStrings();\n        lines.map((line) => new ol.Feature({ geometry: line })).forEach(this.addFeature);\n      } else {\n        let nbPointsOnFeature = feature.getGeometry().getCoordinates().length;\n        if (nbPointsOnFeature >= 2) {\n          this.featuresLayerSource.addFeature(feature);\n        }\n      }\n    },\n    getFeaturesTitleFromDocument(document) {\n      return this.$documentUtils.getDocumentTitle(document.data);\n    },\n    fitMapToFeatures() {\n      let extent = ol.extent.createEmpty();\n\n      ol.extent.extend(extent, this.featuresLayerSource.getExtent());\n\n      this.view.fit(extent, { size: this.map.getSize() });\n\n      // set a minimum zoom level\n      this.view.setZoom(Math.max(this.validMinimumMapZoom, this.view.getZoom()));\n    },\n    hideSimplifiedLayer() {\n      this.featuresLayer.setVisible(true);\n      this.simplifiedLayer.setVisible(false);\n      this.visibleSimplifiedLayer = false;\n    },\n    showSimplifiedLayer() {\n      this.featuresLayer.setVisible(false);\n      this.simplifiedLayer.setVisible(true);\n      this.visibleSimplifiedLayer = true;\n    },\n    previewSimplify(tolerance) {\n      // every preview, clear the layer first\n      this.simplifiedSource.clear(true);\n      // show/hide layers based on tolerance\n      if (tolerance === 0) {\n        this.hideSimplifiedLayer();\n      } else {\n        this.showSimplifiedLayer();\n        // get each features, simplify them, and add to simplified layer\n        let features = this.getFeaturesLayerFeatures();\n        features.forEach((feature) => {\n          let geometry = feature.getGeometry();\n          let simplifiedGeometry = geometry;\n          // check if tolerance is 0 == no simplification\n          if (tolerance !== 0) {\n            simplifiedGeometry = simplifiedGeometry.simplify(tolerance);\n          }\n          // create feature (store reference of actual feature thanks to ol_uid)\n          let simplifiedFeature = new ol.Feature({ geometry: simplifiedGeometry, id: feature.ol_uid });\n          this.simplifiedSource.addFeature(simplifiedFeature);\n        });\n      }\n      this.updateFeaturesFromStore();\n    },\n    simplify() {\n      // clear features layer\n      this.featuresLayerSource.clear();\n      // get simplified features\n      let simplifiedFeatures = this.getSimplifiedFeatures();\n      // and move them one by one (to keep order of line chunks) in features layer\n      simplifiedFeatures.forEach((feature) => {\n        this.featuresLayerSource.addFeature(feature);\n      });\n      // hide simplified/show features\n      this.hideSimplifiedLayer();\n    },\n  },\n  render() {\n    return null;\n  },\n};\n</script>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./RouteLayer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./RouteLayer.vue?vue&type=script&lang=js&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{staticClass:\"legend\"},[_c('div',[_c('div',{staticClass:\"legend-button is-pulled-right ol-control\"},[_c('button',{attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.showLegend = !_vm.showLegend}}},[_c('span',{directives:[{name:\"translate\",rawName:\"v-translate\"}]},[_vm._v(\"Legend\")])])])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showLegend === true),expression:\"showLegend === true\"}],staticClass:\"legend-content\"},[(!_vm.mapLegend)?_c('p',{directives:[{name:\"translate\",rawName:\"v-translate\"}],staticClass:\"is-italic\"},[_vm._v(\"Legend will appear automatically with the generated image\")]):_c('div',[_c('ul',_vm._l((_vm.mapLegend.items),function(item,i){return _c('li',{key:i},[_c('span',{staticClass:\"legend-color\",style:('background:' + item.color)}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.$gettext(item.text['en'])))])])}),0),_vm._v(\" \"),_c('p',{staticClass:\"is-size-6 is-italic\"},[_vm._v(_vm._s(_vm.$gettext(_vm.mapLegend.comment['en'])))])])])]),_vm._v(\" \"),(_vm.isLayerLoaded)?_c('div',{staticClass:\"ol-control opacity\"},[_c('div',{staticClass:\"opacity-slider\"},[_c('vue-slider',{attrs:{\"min\":0,\"max\":1,\"interval\":0.01,\"tooltip\":\"none\",\"direction\":\"btt\",\"rail-style\":{ background: 'rgba(0,0,0,.25)' },\"process-style\":{ background: 'white' }},on:{\"change\":_vm.onUpdateOpacity},model:{value:(_vm.opacity),callback:function ($$v) {_vm.opacity=$$v},expression:\"opacity\"}})],1)]):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div class=\"legend\">\n      <div>\n        <div class=\"legend-button is-pulled-right ol-control\">\n          <button type=\"button\" @click=\"showLegend = !showLegend\">\n            <span v-translate>Legend</span>\n          </button>\n        </div>\n      </div>\n      <div class=\"legend-content\" v-show=\"showLegend === true\">\n        <p class=\"is-italic\" v-if=\"!mapLegend\" v-translate>Legend will appear automatically with the generated image</p>\n        <div v-else>\n          <ul>\n            <li v-for=\"(item, i) of mapLegend.items\" :key=\"i\">\n              <span class=\"legend-color\" :style=\"'background:' + item.color\" />\n              <!-- $gettext('Risky slopes') -->\n              <!-- $gettext('Risky slopes, increased risk due to orientation') -->\n              <!-- $gettext('Residual risk >1') -->\n              <!-- $gettext('Residual risk >1.3') -->\n              <!-- $gettext('Residual risk >1.5') -->\n              <span>{{ $gettext(item.text['en']) }}</span>\n            </li>\n          </ul>\n          <!-- $gettext('From danger 3, consider the slopes which dominate the route') -->\n          <p class=\"is-size-6 is-italic\">{{ $gettext(mapLegend.comment['en']) }}</p>\n        </div>\n      </div>\n    </div>\n    <div class=\"ol-control opacity\" v-if=\"isLayerLoaded\">\n      <div class=\"opacity-slider\">\n        <vue-slider\n          v-model=\"opacity\"\n          :min=\"0\"\n          :max=\"1\"\n          :interval=\"0.01\"\n          tooltip=\"none\"\n          direction=\"btt\"\n          :rail-style=\"{ background: 'rgba(0,0,0,.25)' }\"\n          :process-style=\"{ background: 'white' }\"\n          @change=\"onUpdateOpacity\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport layerMixin from './layer';\n\nimport 'vue-slider-component/theme/default.css';\n\nimport ol from '@/js/libs/ol';\n\nconst OPACITY = 0.75;\n\nexport default {\n  components: {\n    VueSlider: () => import(/* webpackChunkName: \"slider\" */ 'vue-slider-component'),\n  },\n  mixins: [layerMixin],\n  props: {\n    data: {\n      type: String,\n      default: null,\n    },\n    extent: {\n      type: Array,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      isLayerLoaded: false,\n      opacity: OPACITY,\n      showLegend: undefined,\n      mapLegend: null,\n    };\n  },\n  watch: {\n    data() {\n      if (!this.data) {\n        this.clearLayers();\n        return;\n      }\n      this.drawImage();\n    },\n    extent() {\n      this.drawExtent(this.extent);\n    },\n  },\n  created() {\n    this.layer = new ol.layer.Image({\n      source: new ol.source.ImageStatic({\n        url: null,\n        imageExtent: ol.extent.createEmpty(),\n      }),\n      opacity: this.opacity,\n    });\n    this.extentLayer = new ol.layer.Vector({\n      source: new ol.source.Vector(),\n      style: [\n        new ol.style.Style({\n          fill: new ol.style.Fill({\n            color: 'hsla(30, 100%, 60%, .45)',\n          }),\n        }),\n        new ol.style.Style({\n          stroke: new ol.style.Stroke({\n            color: 'hsla(30, 100%, 40%, 1)',\n            width: 2,\n          }),\n          geometry: (feature) => {\n            return new ol.geom.Polygon([feature.getGeometry().getCoordinates()[1]]);\n          },\n        }),\n      ],\n    });\n  },\n  mounted() {\n    this.map.addLayer(this.layer);\n    this.map.addLayer(this.extentLayer);\n  },\n  methods: {\n    clearLayers() {\n      this.layer.setSource(null);\n      this.isLayerLoaded = false;\n\n      this.extentLayer.getSource().clear();\n    },\n    drawExtent(extent) {\n      // extend extent\n      let extentFill = ol.extent.buffer(extent, Math.max(extent[2] - extent[0], extent[3] - extent[1]) / 10);\n      // then, create a donut polygon\n      let feature = new ol.Feature(new ol.geom.Polygon([this.toLinearRing(extentFill), this.toLinearRing(extent)]));\n      // add feature to extentlayer\n      this.extentLayer.getSource().addFeature(feature);\n    },\n    drawImage() {\n      let xml = new DOMParser().parseFromString(this.data, 'application/xml');\n      let imageBase64 = xml.getElementsByTagName('wps:ComplexData')[0].textContent;\n      let imageBbox = xml.getElementsByTagName('wps:ComplexData')[1].textContent;\n      let imageExtent = ol.proj.transformExtent(imageBbox.split(',').map(Number), 'EPSG:4326', 'EPSG:3857');\n\n      this.layer.setSource(\n        new ol.source.ImageStatic({\n          imageLoadFunction(image) {\n            image.getImage().src = 'data:image/png;base64,' + imageBase64;\n          },\n          imageExtent,\n        })\n      );\n      // source is set\n      this.isLayerLoaded = true;\n      // set map legend\n      this.setLegend(xml);\n    },\n    onUpdateOpacity() {\n      this.layer.setOpacity(this.opacity);\n    },\n    setLegend(xml) {\n      this.mapLegend = JSON.parse(xml.getElementsByTagName('wps:ComplexData')[2].textContent);\n      this.mapLegend.items.forEach((item) => {\n        item.color = `rgb(${item.color[0]}, ${item.color[1]}, ${item.color[2]})`;\n      });\n      // add attribution (each attribution on its own line)\n      this.layer.getSource().setAttributions(this.mapLegend.attributions);\n    },\n    toLinearRing(extent) {\n      let minX = extent[0];\n      let minY = extent[1];\n      let maxX = extent[2];\n      let maxY = extent[3];\n      return [\n        [minX, minY],\n        [minX, maxY],\n        [maxX, maxY],\n        [maxX, minY],\n        [minX, minY],\n      ];\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import '@/assets/sass/variables';\n\n.legend {\n  position: absolute;\n  z-index: 6;\n  top: 1.25rem;\n  right: 1.25rem;\n\n  .legend-button {\n    position: static;\n\n    button {\n      width: auto;\n      padding: 0 0.5em;\n    }\n  }\n\n  .legend-content {\n    margin-top: 0.5rem;\n    margin-left: 1.25rem;\n    border-radius: 2px;\n    border: 1px solid lightgray;\n    padding: 0.5rem;\n    background: white;\n    clear: both;\n  }\n\n  .legend-color {\n    vertical-align: bottom;\n    display: inline-block;\n    width: 21px;\n    height: 21px;\n    margin-right: 5px;\n  }\n}\n\n.opacity {\n  position: absolute;\n  z-index: 5;\n  top: 3.5rem;\n  right: 1.25rem;\n\n  .opacity-slider {\n    font-size: 1.14em;\n    margin: 1px;\n    width: 1.375em;\n    padding: 1rem 0;\n    background: $grey-dark;\n    border-radius: 2px;\n\n    &:hover {\n      background: $grey;\n    }\n  }\n\n  .vue-slider {\n    padding: 0 9px !important;\n    height: 300px !important;\n    max-height: 30vh;\n  }\n\n  .vue-slider-process {\n    background: $white;\n  }\n\n  .vue-slider-rail {\n    background: $black;\n  }\n}\n\n@media screen and (max-width: $tablet) {\n  .legend {\n    top: 0.5rem;\n\n    .legend-content {\n      margin-left: 0.5rem;\n    }\n  }\n\n  .opacity {\n    top: 2.75rem;\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./YetiLayer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./YetiLayer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./YetiLayer.vue?vue&type=template&id=32da6580&scoped=true&\"\nimport script from \"./YetiLayer.vue?vue&type=script&lang=js&\"\nexport * from \"./YetiLayer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./YetiLayer.vue?vue&type=style&index=0&id=32da6580&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"32da6580\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"column map-container\">\n    <div style=\"width: 100%; height: 100%\">\n      <div ref=\"map\" style=\"width: 100%; height: 100%\" />\n      <area-layer />\n      <avalanche-bulletins-layer />\n      <flowcapt-layer />\n      <nivoses-layer />\n      <romma-layer />\n      <yeti-layer :data=\"yetiData\" :extent=\"yetiExtent\" />\n      <route-layer />\n      <div\n        ref=\"layerSwitcherButton\"\n        class=\"ol-control ol-control-layer-switcher-button\"\n        :title=\"$gettext('Layers', 'Map controls')\"\n      >\n        <button @click.stop=\"showLayerSwitcher = !showLayerSwitcher\">\n          <fa-layers>\n            <fa-icon icon=\"layer-group\" />\n            <fa-icon v-if=\"atLeastOneYetiLayerIsShown\" icon=\"circle\" transform=\"shrink-2 up-10 right-10\" />\n            <fa-icon\n              v-if=\"atLeastOneYetiLayerIsShown\"\n              icon=\"check-circle\"\n              inverse\n              transform=\"shrink-2 up-10 right-10\"\n              class=\"icon-notification\"\n            />\n          </fa-layers>\n        </button>\n      </div>\n\n      <div v-show=\"showLayerSwitcher\" ref=\"layerSwitcher\" class=\"ol-control ol-control-layer-switcher\" @click.stop=\"\">\n        <div>\n          <header v-translate>Base layer</header>\n          <div v-for=\"(layer, i) of reactiveCartoLayers\" :key=\"layer.title\" class=\"map-control-listitem\">\n            <input\n              :id=\"'carto-checkbox' + i\"\n              :checked=\"layer.id == visibleCartoLayerId\"\n              type=\"radio\"\n              @change=\"visibleCartoLayerId = layer.id\"\n            />\n            <label :for=\"'carto-checkbox' + i\">{{ $gettext(layer.title, 'Map layer') }}</label>\n          </div>\n        </div>\n        <div>\n          <header v-translate>Slopes</header>\n          <div v-for=\"(layer, i) of reactiveDataLayers\" :key=\"layer.title\" class=\"map-control-listitem\">\n            <input\n              :id=\"'data-checkbox' + i\"\n              :checked=\"layer.visible\"\n              type=\"checkbox\"\n              @change=\"toggleMapDataLayer(layer)\"\n            />\n            <label :for=\"'data-checkbox' + i\">{{ $gettext(layer.title, 'Map slopes layer') }}</label>\n          </div>\n          <header>YETI</header>\n          <div v-for=\"(layer, i) of yetiLayers\" :key=\"layer.title\" class=\"map-control-listitem\">\n            <input :id=\"'yeti-checkbox' + i\" :checked=\"layer.checked\" type=\"checkbox\" @change=\"layer.action\" />\n            <label :for=\"'yeti-checkbox' + i\">{{ layer.title }}</label>\n          </div>\n        </div>\n      </div>\n\n      <div ref=\"recenterOnControl\" class=\"ol-control ol-control-recenter-on\">\n        <input type=\"text\" :placeholder=\"$gettext('Recenter on...')\" @input=\"searchRecenterPropositions\" />\n      </div>\n\n      <div\n        v-show=\"showRecenterOnPropositions\"\n        ref=\"recenterOnPropositions\"\n        class=\"ol-control ol-control-recenter-on-propositions\"\n      >\n        <ul v-if=\"recenterPropositions && recenterPropositions.data && recenterPropositions.data.features\">\n          <li v-for=\"(item, i) of recenterPropositions.data.features\" :key=\"i\" @click=\"recenterOn(item)\">\n            {{ item.properties.name }},\n            <small>{{ item.properties.state }}, {{ item.properties.country }}</small>\n          </li>\n        </ul>\n      </div>\n\n      <div ref=\"drawingMode\" class=\"ol-control ol-control-drawing-mode\" :class=\"{ 'is-primary': drawingMode }\">\n        <div class=\"ol-control-drawing-mode-inner\">\n          <input-checkbox @input=\"onDrawingMode\" :value=\"drawingMode\" :disabled=\"validSimplifyTolerance\">\n            <span v-translate title=\"Enable drawing and editing features on map\">Drawing mode</span>\n            <span class=\"yeti-tag\">\n              <span v-if=\"validSimplifyTolerance\" v-translate>DISABLED</span>\n              <span v-else-if=\"drawingMode\">ON</span>\n              <span v-else>OFF</span>\n            </span>\n          </input-checkbox>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { cartoLayers, dataLayers } from '../map/map-layers';\nlet c2c_cartoLayers = cartoLayers();\nlet c2c_dataLayers = dataLayers();\n\nimport AreaLayer from './map-layers/AreaLayer.vue';\nimport AvalancheBulletinsLayer from './map-layers/AvalancheBulletinsLayer.vue';\nimport FlowcaptLayer from './map-layers/FlowcaptLayer.vue';\nimport NivosesLayer from './map-layers/NivosesLayer.vue';\nimport RommaLayer from './map-layers/RommaLayer.vue';\nimport RouteLayer from './map-layers/RouteLayer.vue';\nimport YetiLayer from './map-layers/YetiLayer.vue';\n\nimport Yetix from '@/components/yeti/Yetix';\nimport photon from '@/js/apis/photon';\nimport ol from '@/js/libs/ol';\n\nconst DEFAULT_CENTER = [6.25, 45.15];\nconst DEFAULT_ZOOM = 6;\nconst MAX_ZOOM = 19;\n\nexport default {\n  components: {\n    AreaLayer,\n    AvalancheBulletinsLayer,\n    FlowcaptLayer,\n    NivosesLayer,\n    RommaLayer,\n    RouteLayer,\n    YetiLayer,\n  },\n  props: {\n    yetiExtent: {\n      type: Array,\n      required: true,\n    },\n    yetiData: {\n      type: String,\n      default: null,\n    },\n  },\n  data() {\n    return {\n      showLayerSwitcher: false,\n      recenterPropositions: null,\n      showRecenterOnPropositions: false,\n      visibleCartoLayerId: null,\n      reactiveCartoLayers: [],\n      reactiveDataLayers: [],\n    };\n  },\n  computed: {\n    mapZoom() {\n      return Yetix.mapZoom;\n    },\n    showAvalancheBulletins() {\n      return Yetix.showAvalancheBulletins;\n    },\n    showAreas() {\n      return Yetix.showAreas;\n    },\n    showNivoses() {\n      return Yetix.showNivoses;\n    },\n    showRomma() {\n      return Yetix.showRomma;\n    },\n    showFlowcapt() {\n      return Yetix.showFlowcapt;\n    },\n    drawingMode() {\n      return Yetix.drawingMode;\n    },\n    validSimplifyTolerance() {\n      return Yetix.validSimplifyTolerance;\n    },\n    yetiLayers() {\n      return [\n        {\n          title: this.$gettext('YETI extent'),\n          checked: this.showAreas,\n          action: this.onShowAreas,\n        },\n        {\n          title: this.$gettext('Avalanche bulletins'),\n          checked: this.showAvalancheBulletins,\n          action: this.onShowAvalancheBulletins,\n        },\n        {\n          title: this.$gettext('Nivose beacons'),\n          checked: this.showNivoses,\n          action: this.onShowNivoses,\n        },\n        {\n          title: this.$gettext('ROMMA stations'),\n          checked: this.showRomma,\n          action: this.onShowRomma,\n        },\n        {\n          title: this.$gettext('FlowCapt sensors'),\n          checked: this.showFlowcapt,\n          action: this.onShowFlowcapt,\n        },\n      ];\n    },\n    atLeastOneYetiLayerIsShown() {\n      return !!this.yetiLayers.filter((layer) => layer.checked).length;\n    },\n  },\n  watch: {\n    atLeastOneYetiLayerIsShown() {\n      this.updateCartoLayersOpacity();\n    },\n    visibleCartoLayerId(id) {\n      // first, make visible layer invisible\n      let visibleLayer = c2c_cartoLayers.find((layer) => layer.getVisible() === true);\n      visibleLayer.setVisible(false);\n\n      // then, make new layer visible\n      visibleLayer = c2c_cartoLayers.find((layer) => layer.ol_uid === id);\n      visibleLayer.setVisible(true);\n    },\n  },\n  created() {\n    // build map\n    this.map = new ol.Map({\n      controls: [\n        new ol.control.Zoom({\n          zoomInTipLabel: this.$gettext('Zoom in', 'Map controls'),\n          zoomOutTipLabel: this.$gettext('Zoom out', 'Map controls'),\n        }),\n        new ol.control.ScaleLine(),\n        new ol.control.Attribution({ tipLabel: this.$gettext('Attributions', 'Map controls') }),\n      ],\n\n      layers: [\n        // c2c layers\n        ...c2c_cartoLayers,\n        ...c2c_dataLayers,\n      ],\n\n      view: new ol.View({\n        center: ol.proj.transform(DEFAULT_CENTER, 'EPSG:4326', 'EPSG:3857'),\n        zoom: DEFAULT_ZOOM,\n        maxZoom: MAX_ZOOM,\n      }),\n    });\n    this.view = this.map.getView();\n\n    // map carto and data layers to reactive ones\n    this.reactiveCartoLayers = c2c_cartoLayers.map(layer => {\n      return {\n        title: layer.get('title'),\n        id: layer.ol_uid,\n      };\n    });\n    this.visibleCartoLayerId = c2c_cartoLayers.find((layer) => layer.getVisible() === true).ol_uid;\n\n    this.reactiveDataLayers = c2c_dataLayers.map(layer => {\n      return {\n        title: layer.get('title'),\n        visible: layer.getVisible(),\n        id: layer.ol_uid,\n      };\n    });\n  },\n  mounted() {\n    // when mounted, bind map to element\n    this.map.setTarget(this.$refs.map);\n    // add specific controls\n    let controls = [\n      new ol.control.FullScreen({ source: this.$el, tipLabel: this.$gettext('Toggle full-screen', 'Map Controls') }),\n      new ol.control.Control({ element: this.$refs.layerSwitcherButton }),\n      new ol.control.Control({ element: this.$refs.layerSwitcher }),\n      new ol.control.Control({ element: this.$refs.drawingMode }),\n      new ol.control.Control({ element: this.$refs.recenterOnControl }),\n      new ol.control.Control({ element: this.$refs.recenterOnPropositions }),\n    ];\n    controls.map((control) => this.map.addControl(control));\n\n    // events\n    this.map.on('moveend', this.onMapMoveEnd);\n    this.map.on('click', this.onMapClick);\n  },\n  methods: {\n    getExtent(projection) {\n      let extent = this.view.calculateExtent(this.map.getSize() || null);\n      if (projection) {\n        extent = ol.proj.transformExtent(extent, ol.proj.get('EPSG:3857'), ol.proj.get(projection));\n      }\n      return extent;\n    },\n    toggleMapDataLayer(reactiveLayer) {\n      let layer = c2c_dataLayers.find((layer) => layer.ol_uid === reactiveLayer.id);\n      let ok = layer.setVisible(!layer.getVisible());\n      if (ok) {\n        reactiveLayer.visible = !reactiveLayer.visible;\n      }\n    },\n    searchRecenterPropositions(event) {\n      let query = event.target.value;\n\n      if (query && query.length >= 3) {\n        let center = this.view.getCenter();\n        let centerWgs84 = ol.proj.toLonLat(center);\n\n        this.recenterPropositions = photon.getPropositions(query, this.$language.current, centerWgs84);\n        this.showRecenterOnPropositions = true;\n      }\n    },\n    recenterOn(item) {\n      let feature = new ol.format.GeoJSON().readFeature(item);\n      let extent = feature.get('extent');\n      let coordinates = feature.getGeometry().flatCoordinates;\n\n      if (extent) {\n        extent = ol.proj.transformExtent(extent, 'EPSG:4326', 'EPSG:3857');\n        this.view.fit(extent, { size: this.map.getSize(), maxZoom: 12 });\n      } else {\n        coordinates = ol.proj.transform(coordinates, 'EPSG:4326', 'EPSG:3857');\n        this.view.setCenter(coordinates);\n        this.view.setZoom(16);\n      }\n\n      this.showRecenterOnPropositions = false;\n    },\n    getMapZoom() {\n      return Math.floor(this.view.getZoom() * 10) / 10;\n    },\n    onMapMoveEnd() {\n      let mapZoom = this.getMapZoom();\n      // emit map zoom, only if zoom changed\n      if (this.mapZoom !== mapZoom) {\n        Yetix.setMapZoom(mapZoom);\n      }\n      // if one of Yeti layers is here, update (on zooming for example)\n      if (this.atLeastOneYetiLayerIsShown) {\n        this.updateCartoLayersOpacity();\n      }\n      // emit an event for map layers\n      Yetix.$emit('mapMoveEnd');\n    },\n    onMapClick(evt) {\n      // close controls\n      this.showLayerSwitcher = false;\n      this.showRecenterOnPropositions = false;\n\n      // get clicked feature (the visible one on top)\n      let clickedFeature = this.map.getFeaturesAtPixel(evt.pixel)[0];\n\n      // emit an event for map layers\n      // pass clicked feature\n      Yetix.$emit('mapClick', evt, clickedFeature);\n    },\n    updateCartoLayersOpacity() {\n      const LIMIT_ZOOM = 9;\n      c2c_cartoLayers.forEach((layer) => {\n        layer.setOpacity(this.atLeastOneYetiLayerIsShown && this.mapZoom < LIMIT_ZOOM ? 0.5 : 1);\n      });\n    },\n    onShowAvalancheBulletins() {\n      Yetix.setShowAvalancheBulletins(!this.showAvalancheBulletins);\n    },\n    onShowAreas() {\n      Yetix.setShowAreas(!this.showAreas);\n    },\n    onShowNivoses() {\n      Yetix.setShowNivoses(!this.showNivoses);\n    },\n    onShowRomma() {\n      Yetix.setShowRomma(!this.showRomma);\n    },\n    onShowFlowcapt() {\n      Yetix.setShowFlowcapt(!this.showFlowcapt);\n    },\n    onDrawingMode() {\n      Yetix.setDrawingMode(!this.drawingMode);\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import '~ol/ol.css';\n@import '@/assets/sass/variables';\n\n$control-margin: 0.5em;\n\n.ol-control-layer-switcher {\n  bottom: 3em;\n  left: $control-margin;\n  right: $control-margin;\n  max-width: 400px;\n  text-decoration: none;\n  background-color: white;\n  border: 1px solid lightgray;\n  border-radius: 2px;\n  padding: 0 10px 10px 10px;\n  display: flex;\n\n  & > div {\n    flex: 1;\n\n    header {\n      font-weight: bold;\n      padding-top: 10px;\n    }\n  }\n}\n\n.ol-control-layer-switcher-button {\n  bottom: $control-margin;\n  left: $control-margin;\n}\n\n.ol-control-recenter-on {\n  top: $control-margin;\n  left: 3em;\n  background: $white;\n  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.2);\n\n  input {\n    width: 14.75rem;\n    border: none;\n    padding: 0.3rem;\n    border-radius: 2px;\n  }\n}\n\n.ol-control-recenter-on-propositions {\n  top: 35px;\n  left: 3em;\n  background: white;\n  border-radius: 2px;\n  border: 1px solid lightgray;\n  padding: 5px;\n\n  li:hover {\n    background: lightgrey;\n    cursor: pointer;\n  }\n}\n\n.map-control-listitem {\n  display: flex;\n}\n.map-control-listitem label {\n  padding-left: 0.25rem;\n}\n\n$section-padding: 1.5rem; //TODO find this variable\n$box-padding: 1.25rem; //TODO find this variable\n$header-height: 34px;\n$box-margin: 1.5rem; //TODO find this variable\n$yeti-height: calc(\n  100vh - #{$navbar-height} - #{$section-padding} - 2 * #{$box-padding} - #{$header-height} - #{$box-margin} - #{$box-margin}\n);\n\n.map-container {\n  position: relative;\n}\n@media screen and (max-width: $tablet) {\n  .map-container {\n    height: $yeti-height;\n    padding-left: 0;\n    padding-top: 0;\n    padding-bottom: 0;\n  }\n}\n\n@media screen and (min-width: $tablet) {\n  .yeti-content {\n    .map-container {\n      min-height: 100%;\n    }\n  }\n}\n\n.ol-control-drawing-mode {\n  top: $control-margin;\n  left: 18.75rem;\n  padding: 0;\n  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.2);\n\n  .ol-control-drawing-mode-inner {\n    padding: 0.15rem 0.25rem 0;\n    border-radius: 4px;\n    background: $white;\n  }\n\n  &.is-primary .ol-control-drawing-mode-inner {\n    background: $primary;\n    color: $white;\n  }\n\n  .yeti-tag {\n    font-size: 0.8em;\n    background: rgba(0, 0, 0, 0.25);\n    padding: 0.25em;\n    border-radius: 2px;\n    margin-left: 0.5rem;\n    vertical-align: text-top;\n  }\n\n  &.is-primary .yeti-tag {\n    color: $white;\n  }\n}\n\n@media screen and (max-width: $widescreen) {\n  .ol-control-drawing-mode {\n    top: 3rem;\n    left: 3rem;\n  }\n}\n\n.icon-notification {\n  color: $primary;\n}\n</style>\n\n<style lang=\"scss\">\n.yeti-app {\n  .ol-control {\n    background: $white;\n    padding: 2px;\n    box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.2);\n  }\n  .ol-control button {\n    background: $grey-dark;\n    color: $white;\n\n    &:hover,\n    &:focus {\n      background: $grey;\n      outline: none;\n    }\n  }\n\n  .ol-attribution {\n    max-width: 75%;\n  }\n\n  .ol-control-drawing-mode {\n    padding: 0;\n\n    .is-checkradio[type='checkbox'] + label {\n      font-size: 0.95em;\n      margin-right: 0;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./YetiMap.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./YetiMap.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./YetiMap.vue?vue&type=template&id=57b49b63&scoped=true&\"\nimport script from \"./YetiMap.vue?vue&type=script&lang=js&\"\nexport * from \"./YetiMap.vue?vue&type=script&lang=js&\"\nimport style0 from \"./YetiMap.vue?vue&type=style&index=0&id=57b49b63&prod&scoped=true&lang=scss&\"\nimport style1 from \"./YetiMap.vue?vue&type=style&index=1&id=57b49b63&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"57b49b63\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <!-- eslint-disable no-irregular-whitespace -->\n  <div class=\"section\">\n    <html-header title=\"Yeti\" />\n    <div class=\"box\">\n      <h1 class=\"title is-1\">\n        <div class=\"yeti-icon is-inline-block\">\n          <icon-yeti />\n        </div>\n        <span v-translate>YETI - A preparation tool for your outing</span>\n      </h1>\n    </div>\n\n    <div class=\"yeti-app\">\n      <div class=\"box yeti-overlay\" v-if=\"showDisclaimer\">\n        <yeti-article class=\"yeti-article--disclaimer\" :article=\"articles.disclaimer\"></yeti-article>\n        <form action=\"#\" @submit=\"onSubmitDisclaimer\">\n          <input-checkbox v-model=\"checkDisclaimer\" v-translate>\n            I read and understood the interest and limitations of YETI\n          </input-checkbox>\n          <button class=\"button is-primary\" :disabled=\"!checkDisclaimer\" v-translate>Launch YETI</button>\n        </form>\n      </div>\n\n      <div class=\"box yeti-overlay\" v-if=\"$route.params.page === 'faq'\">\n        <p><router-link to=\".\" v-translate>Go back to YETI</router-link></p>\n        <yeti-article class=\"yeti-article--disclaimer\" :article=\"articles.disclaimer\"></yeti-article>\n        <yeti-article :article=\"articles.faq\"></yeti-article>\n      </div>\n\n      <div class=\"columns yeti-content\">\n        <div class=\"column is-6-tablet is-6-desktop is-5-widescreen is-4-fullhd form-container\">\n          <div class=\"columns mb-0 yeti-columns--reverse is-mobile\">\n            <ul class=\"column is-narrow pb-0\">\n              <li>\n                <router-link class=\"is-block yetitabs-link\" :to=\"$route.fullPath + '/faq'\" v-translate>\n                  FAQ?\n                </router-link>\n              </li>\n            </ul>\n            <tabs :tabs=\"tabs\" />\n          </div>\n          <div class=\"box\">\n            <panel ref=\"panel0\" :index=\"0\" class=\"is-relative\">\n              <validation-button\n                class=\"is-hidden-mobile yeti-validation--top\"\n                :current-error=\"currentError\"\n                :loading=\"promise\"\n                @click=\"compute\"\n                tabindex=\"-1\"\n              />\n              <sub-panel-bra />\n              <sub-panel-methods @warn-about-method-bra=\"warnAboutMethodBra\" />\n              <validation-button\n                v-show=\"method.type\"\n                class=\"yeti-validation--bottom\"\n                :current-error=\"currentError\"\n                :loading=\"promise\"\n                @click=\"compute\"\n              />\n            </panel>\n\n            <panel ref=\"panel1\" :index=\"1\">\n              <sub-panel-course />\n            </panel>\n          </div>\n\n          <div class=\"box yeti-logos\">\n            <div class=\"columns is-mobile is-vcentered\">\n              <div class=\"column has-text-centered\">\n                <a href=\"http://www.ensg.eu\">\n                  <picture>\n                    <source srcset=\"@/assets/img/yeti/logo-ensg.webp\" type=\"image/webp\" />\n                    <source srcset=\"@/assets/img/yeti/logo-ensg.avif\" type=\"image/avif\" />\n                    <img src=\"@/assets/img/yeti/logo-ensg.jpg\" alt=\"Logo ENSG\" width=\"120\" loading=\"lazy\" />\n                  </picture>\n                </a>\n              </div>\n              <div class=\"column has-text-centered\">\n                <a href=\"https://www.petzl.com/fondation/fondation-petzl?language=fr\">\n                  <picture>\n                    <source srcset=\"@/assets/img/yeti/logo-fondation-petzl.webp\" type=\"image/webp\" />\n                    <source srcset=\"@/assets/img/yeti/logo-fondation-petzl.avif\" type=\"image/avif\" />\n                    <img\n                      src=\"@/assets/img/yeti/logo-fondation-petzl.jpg\"\n                      alt=\"Logo Fondation Petzl\"\n                      width=\"90\"\n                      loading=\"lazy\"\n                    />\n                  </picture>\n                </a>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <yeti-map ref=\"map\" :yeti-data=\"yetiData\" :yeti-extent=\"yetiExtent\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nimport YetiArticle from '@/components/yeti/Article';\nimport Panel from '@/components/yeti/Panel';\nimport SubPanelBra from '@/components/yeti/SubPanelBra';\nimport SubPanelCourse from '@/components/yeti/SubPanelCourse';\nimport SubPanelMethods from '@/components/yeti/SubPanelMethods';\nimport Tabs from '@/components/yeti/Tabs';\nimport ValidationButton from '@/components/yeti/ValidationButton';\nimport YetiMap from '@/components/yeti/YetiMap';\nimport Yetix from '@/components/yeti/Yetix';\nimport ol from '@/js/libs/ol';\n\nconst YETI_URL_BASE =\n  'https://api.ensg.eu/yeti-wps?request=Execute&service=WPS&version=1.0.0&identifier=Yeti&datainputs=';\n\nexport default {\n  name: 'Yeti',\n\n  components: {\n    YetiArticle,\n    Panel,\n    SubPanelBra,\n    SubPanelCourse,\n    SubPanelMethods,\n    Tabs,\n    ValidationButton,\n    YetiMap,\n  },\n\n  data() {\n    return {\n      showDisclaimer: false,\n      checkDisclaimer: false,\n\n      articles: {\n        faq: {\n          id: 1257569,\n          title: 'FAQ',\n        },\n        disclaimer: {\n          id: 1257571,\n          title: this.$gettext('Disclaimer'),\n        },\n      },\n\n      tabs: [this.$gettext('Compute'), this.$gettext('Outing')],\n\n      formError: undefined,\n      currentError: undefined,\n\n      promise: null,\n      yetiData: null,\n      yetiExtent: [],\n    };\n  },\n\n  computed: {\n    validMinimumMapZoom() {\n      return Yetix.VALID_MINIMUM_MAP_ZOOM;\n    },\n    dangerMaxWhenMrd() {\n      return Yetix.DANGER_MAX_WHEN_MRD;\n    },\n    bra() {\n      return Yetix.bra;\n    },\n    method() {\n      return Yetix.method;\n    },\n    mapZoom() {\n      return Yetix.mapZoom;\n    },\n    areaOk() {\n      return Yetix.areaOk;\n    },\n    errors() {\n      return {\n        area: {\n          simple: this.$gettext('Area not covered'),\n          full: this.$gettext(\n            'Current map view is not covered by YETI. Only french mountains are as of now (determined by a dashed stroke).'\n          ),\n        },\n        method: {\n          simple: this.$gettext('Missing method'),\n          full: this.$gettext('Please select a method before computing.'),\n        },\n        method_bra: {\n          simple: this.$gettext('Conflicting method and danger'),\n          full: this.$gettext(\n            'The MRD method (beginner) is allowed when danger is 3 maximum. Choose another method: MRE or MRP.'\n          ),\n        },\n        bra: {\n          simple: this.$gettext('Missing danger level'),\n          full: this.$gettext('Please set danger level as specified on avalanche bulletin for the specific area.'),\n        },\n        altitude: {\n          simple: this.$gettext('Missing altitude'),\n          full: this.$gettext(\n            'Altitude is mandatory when danger high and low are different. Please set altitude as specified on avalanche bulletin for the specific area.'\n          ),\n        },\n        zoom: {\n          simple: this.$gettext('Area too large'),\n          full: this.$gettext('Current map view is too large. Please zoom to level') + ' ' + this.validMinimumMapZoom,\n        },\n        ok: this.$gettext('Seems fine! :)'),\n        yeti: this.$gettext('Service is inactive right now'),\n        yeti_prefix: 'YETI Service: ',\n        yeti_unauthorized: this.$gettext(\n          'You have to be authorized. Please contact administrators of the service if interested.'\n        ),\n      };\n    },\n    mrdIsNotApplicable() {\n      return this.isBraMax && this.method.type === 'mrd';\n    },\n    isBraMax() {\n      return this.bra.high > this.dangerMaxWhenMrd || this.bra.low > this.dangerMaxWhenMrd;\n    },\n    isValidMapZoom() {\n      return this.mapZoom >= this.validMinimumMapZoom;\n    },\n  },\n\n  watch: {\n    'bra.low': 'check',\n    'bra.altiThreshold': 'check',\n    'bra.isDifferent': 'check',\n    'method.type': 'check',\n    'method.potentialDanger': 'check',\n    mapZoom: 'check',\n    areaOk: 'check',\n  },\n\n  created() {\n    // show disclaimer if not already validated\n    if (!this.$localStorage.get('yeti-disclaimer')) {\n      this.showDisclaimer = true;\n    }\n    // tmp: set default values for persistent state\n    Yetix.setDefault();\n  },\n\n  mounted() {\n    this.check();\n  },\n\n  methods: {\n    check() {\n      if (!this.areaOk) {\n        this.formError = 'area';\n      } else if (!this.isValidMapZoom) {\n        this.formError = 'zoom';\n      } else if (!this.bra.high) {\n        this.formError = 'bra';\n      } else if (this.bra.low && this.bra.high !== this.bra.low && !this.bra.altiThreshold) {\n        this.formError = 'altitude';\n      } else if (!this.method.type) {\n        this.formError = 'method';\n      } else if (this.mrdIsNotApplicable) {\n        this.formError = 'method_bra';\n      } else if (this.bra.isDifferent && (!this.bra.low || !this.bra.high)) {\n        this.formError = 'bra';\n      } else {\n        this.formError = null;\n      }\n      // also\n      // verif if bra = 4, method MRD forbidden\n      if (this.mrdIsNotApplicable) {\n        this.method.type = null;\n      }\n\n      // then set errors\n      this.setCurrentError();\n    },\n\n    warnAboutMethodBra(item) {\n      if (item === 'mrd' && this.isBraMax) {\n        window.alert(this.errors.method_bra.full);\n      }\n    },\n\n    setCurrentError() {\n      if (this.formError) {\n        this.currentError = this.errors[this.formError]['simple'];\n        if (this.formError === 'zoom') {\n          this.currentError +=\n            ' (' +\n            this.$gettext('current zoom:') +\n            ' ' +\n            this.mapZoom +\n            ' ' +\n            this.$gettext('on') +\n            ' ' +\n            this.validMinimumMapZoom +\n            ')';\n        }\n      } else {\n        this.currentError = this.errors['ok'];\n      }\n    },\n\n    compute() {\n      if (this.formError) {\n        window.alert(this.errors[this.formError]['full']);\n        return;\n      }\n\n      const extent = this.$refs.map.getExtent('EPSG:3857');\n      const extendedExtent = this.extendExtent(extent);\n\n      const yetiUrl = this.getYetiUrl(extendedExtent);\n\n      // first, set data to null (will remove last one)\n      this.yetiData = null;\n\n      // fetch img\n      this.promise = axios\n        .get(yetiUrl)\n        .then((result) => this.onYetiResult(result, extendedExtent))\n        .catch(this.onYetiError);\n    },\n\n    extendExtent(extent) {\n      const extendedFactor = Math.min(0.5, (this.mapZoom - this.validMinimumMapZoom) / 6);\n      const extendedValue = Math.max(extent[2] - extent[0], extent[3] - extent[1]) * extendedFactor;\n      return ol.extent.buffer(extent, extendedValue);\n    },\n\n    onYetiResult(result, extendedExtent) {\n      this.yetiData = result.data;\n      this.yetiExtent = extendedExtent;\n\n      this.promise = null;\n    },\n\n    onYetiError(err) {\n      this.promise = null;\n\n      let errorText = this.errors['yeti'];\n\n      if (err.response.status === 400) {\n        const xml = new DOMParser().parseFromString(err.response.data, 'text/xml');\n        errorText = [...xml.getElementsByTagName('ExceptionText')].map((_) => _.textContent).join(' ');\n      }\n\n      if (err.response.status === 403) {\n        errorText = this.errors['yeti_unauthorized'];\n      }\n\n      window.alert(this.errors['yeti_prefix'] + errorText);\n    },\n\n    getYetiUrl(extent) {\n      // project extent\n      const bbox = ol.proj.transformExtent(extent, 'EPSG:3857', 'EPSG:4326');\n\n      // set bra.low / altiThreshold\n      const braLow = this.bra.isDifferent ? this.bra.low : this.bra.high;\n      const braAltiThreshold = this.bra.isDifferent ? this.bra.altiThreshold : 0;\n\n      // mre\n      const compass =\n        this.method.type === 'mre' && this.method.orientation.length !== 0\n          ? 'none,' + this.method.orientation.join(',').toLowerCase()\n          : 'none';\n\n      // mrp\n      const potentialDanger = this.method.type === 'mrp' ? this.method.potentialDanger : 0;\n      const wetSnow = this.method.type === 'mrp' ? this.method.wetSnow : false;\n      const groupSize = this.method.type === 'mrp' ? Math.floor(this.method.groupSize) : 0;\n\n      // create url\n      let result = YETI_URL_BASE;\n      result += `methode=${this.method.type};`;\n      result += `bbox=${bbox[0]},${bbox[1]},${bbox[2]},${bbox[3]};`;\n      result += `risque_haut=${this.bra.high};`;\n      result += `risque_bas=${braLow};`;\n      result += `seuil_alti=${braAltiThreshold}`;\n\n      // specific parameters based on method\n      if (this.method.type === 'mre') {\n        result += `;rdv=${compass}`;\n      } else if (this.method.type === 'mrp') {\n        result += `;potentiel_danger=${potentialDanger};`;\n        result += `neige_mouillee=${wetSnow};`;\n        result += `taille_groupe=${groupSize}`;\n      }\n\n      return result;\n    },\n\n    onSubmitDisclaimer() {\n      this.showDisclaimer = false;\n      this.$localStorage.set('yeti-disclaimer', 'validated');\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n$section-padding: 1.5rem; //TODO find this variable\n$box-padding: 1.25rem; //TODO find this variable\n$header-height: 34px;\n$box-margin: 1.5rem; //TODO find this variable\n$yeti-height: calc(\n  100vh - #{$navbar-height} - #{$section-padding} - 2 * #{$box-padding} - #{$header-height} - #{$box-margin} - #{$box-margin}\n);\n\n.yeti-app {\n  position: relative;\n}\n\n.yeti-icon {\n  transform: scale(0.9);\n}\n\n.yeti-columns--reverse {\n  flex-direction: row-reverse;\n}\n\n@media screen and (max-width: $tablet) {\n  .mobile-result-map {\n    margin-top: 0;\n    height: $yeti-height;\n\n    .documents-container {\n      display: None;\n    }\n  }\n\n  .mobile-result-card {\n    .map-container {\n      visibility: hidden; // map does not like to be in a display none...\n    }\n  }\n}\n\n@media screen and (min-width: $tablet) {\n  .yeti-content {\n    height: $yeti-height;\n\n    .form-container {\n      height: 100%;\n      overflow: auto;\n    }\n  }\n}\n\n.yeti-validation--top {\n  position: absolute;\n  right: 0;\n  top: 0.75rem;\n  width: 50%;\n  z-index: 1;\n}\n\n.yeti-validation--bottom {\n  margin-top: 1rem;\n}\n\n.yeti-logos {\n  box-shadow: none;\n  background: none;\n  mix-blend-mode: multiply;\n\n  img {\n    max-width: 65%;\n  }\n}\n\n.yeti-overlay {\n  position: absolute;\n  z-index: 10;\n  top: 0.75rem;\n  right: 0;\n  left: 0;\n  min-height: 100%;\n\n  & ~ .yeti-content {\n    visibility: hidden;\n  }\n}\n</style>\n\n<style lang=\"scss\">\n/* Not scoped styles */\n.yeti-app {\n  .input-orientation {\n    width: 120px;\n    height: 120px;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./YetiView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/lib/config/vue-loader-v15-resolve-compat/vue-loader.js??vue-loader-options!./YetiView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./YetiView.vue?vue&type=template&id=614cbaf4&scoped=true&\"\nimport script from \"./YetiView.vue?vue&type=script&lang=js&\"\nexport * from \"./YetiView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./YetiView.vue?vue&type=style&index=0&id=614cbaf4&prod&scoped=true&lang=scss&\"\nimport style1 from \"./YetiView.vue?vue&type=style&index=1&id=614cbaf4&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"614cbaf4\",\n  null\n  \n)\n\nexport default component.exports","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.polygonClipping = factory());\n}(this, (function () { 'use strict';\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  /**\n   * splaytree v3.1.0\n   * Fast Splay tree for Node and browser\n   *\n   * @author Alexander Milevski <info@w8r.name>\n   * @license MIT\n   * @preserve\n   */\n  var Node =\n  /** @class */\n  function () {\n    function Node(key, data) {\n      this.next = null;\n      this.key = key;\n      this.data = data;\n      this.left = null;\n      this.right = null;\n    }\n\n    return Node;\n  }();\n  /* follows \"An implementation of top-down splaying\"\r\n   * by D. Sleator <sleator@cs.cmu.edu> March 1992\r\n   */\n\n\n  function DEFAULT_COMPARE(a, b) {\n    return a > b ? 1 : a < b ? -1 : 0;\n  }\n  /**\r\n   * Simple top down splay, not requiring i to be in the tree t.\r\n   */\n\n\n  function splay(i, t, comparator) {\n    var N = new Node(null, null);\n    var l = N;\n    var r = N;\n\n    while (true) {\n      var cmp = comparator(i, t.key); //if (i < t.key) {\n\n      if (cmp < 0) {\n        if (t.left === null) break; //if (i < t.left.key) {\n\n        if (comparator(i, t.left.key) < 0) {\n          var y = t.left;\n          /* rotate right */\n\n          t.left = y.right;\n          y.right = t;\n          t = y;\n          if (t.left === null) break;\n        }\n\n        r.left = t;\n        /* link right */\n\n        r = t;\n        t = t.left; //} else if (i > t.key) {\n      } else if (cmp > 0) {\n        if (t.right === null) break; //if (i > t.right.key) {\n\n        if (comparator(i, t.right.key) > 0) {\n          var y = t.right;\n          /* rotate left */\n\n          t.right = y.left;\n          y.left = t;\n          t = y;\n          if (t.right === null) break;\n        }\n\n        l.right = t;\n        /* link left */\n\n        l = t;\n        t = t.right;\n      } else break;\n    }\n    /* assemble */\n\n\n    l.right = t.left;\n    r.left = t.right;\n    t.left = N.right;\n    t.right = N.left;\n    return t;\n  }\n\n  function insert(i, data, t, comparator) {\n    var node = new Node(i, data);\n\n    if (t === null) {\n      node.left = node.right = null;\n      return node;\n    }\n\n    t = splay(i, t, comparator);\n    var cmp = comparator(i, t.key);\n\n    if (cmp < 0) {\n      node.left = t.left;\n      node.right = t;\n      t.left = null;\n    } else if (cmp >= 0) {\n      node.right = t.right;\n      node.left = t;\n      t.right = null;\n    }\n\n    return node;\n  }\n\n  function split(key, v, comparator) {\n    var left = null;\n    var right = null;\n\n    if (v) {\n      v = splay(key, v, comparator);\n      var cmp = comparator(v.key, key);\n\n      if (cmp === 0) {\n        left = v.left;\n        right = v.right;\n      } else if (cmp < 0) {\n        right = v.right;\n        v.right = null;\n        left = v;\n      } else {\n        left = v.left;\n        v.left = null;\n        right = v;\n      }\n    }\n\n    return {\n      left: left,\n      right: right\n    };\n  }\n\n  function merge(left, right, comparator) {\n    if (right === null) return left;\n    if (left === null) return right;\n    right = splay(left.key, right, comparator);\n    right.left = left;\n    return right;\n  }\n  /**\r\n   * Prints level of the tree\r\n   */\n\n\n  function printRow(root, prefix, isTail, out, printNode) {\n    if (root) {\n      out(\"\" + prefix + (isTail ? '└── ' : '├── ') + printNode(root) + \"\\n\");\n      var indent = prefix + (isTail ? '    ' : '│   ');\n      if (root.left) printRow(root.left, indent, false, out, printNode);\n      if (root.right) printRow(root.right, indent, true, out, printNode);\n    }\n  }\n\n  var Tree =\n  /** @class */\n  function () {\n    function Tree(comparator) {\n      if (comparator === void 0) {\n        comparator = DEFAULT_COMPARE;\n      }\n\n      this._root = null;\n      this._size = 0;\n      this._comparator = comparator;\n    }\n    /**\r\n     * Inserts a key, allows duplicates\r\n     */\n\n\n    Tree.prototype.insert = function (key, data) {\n      this._size++;\n      return this._root = insert(key, data, this._root, this._comparator);\n    };\n    /**\r\n     * Adds a key, if it is not present in the tree\r\n     */\n\n\n    Tree.prototype.add = function (key, data) {\n      var node = new Node(key, data);\n\n      if (this._root === null) {\n        node.left = node.right = null;\n        this._size++;\n        this._root = node;\n      }\n\n      var comparator = this._comparator;\n      var t = splay(key, this._root, comparator);\n      var cmp = comparator(key, t.key);\n      if (cmp === 0) this._root = t;else {\n        if (cmp < 0) {\n          node.left = t.left;\n          node.right = t;\n          t.left = null;\n        } else if (cmp > 0) {\n          node.right = t.right;\n          node.left = t;\n          t.right = null;\n        }\n\n        this._size++;\n        this._root = node;\n      }\n      return this._root;\n    };\n    /**\r\n     * @param  {Key} key\r\n     * @return {Node|null}\r\n     */\n\n\n    Tree.prototype.remove = function (key) {\n      this._root = this._remove(key, this._root, this._comparator);\n    };\n    /**\r\n     * Deletes i from the tree if it's there\r\n     */\n\n\n    Tree.prototype._remove = function (i, t, comparator) {\n      var x;\n      if (t === null) return null;\n      t = splay(i, t, comparator);\n      var cmp = comparator(i, t.key);\n\n      if (cmp === 0) {\n        /* found it */\n        if (t.left === null) {\n          x = t.right;\n        } else {\n          x = splay(i, t.left, comparator);\n          x.right = t.right;\n        }\n\n        this._size--;\n        return x;\n      }\n\n      return t;\n      /* It wasn't there */\n    };\n    /**\r\n     * Removes and returns the node with smallest key\r\n     */\n\n\n    Tree.prototype.pop = function () {\n      var node = this._root;\n\n      if (node) {\n        while (node.left) {\n          node = node.left;\n        }\n\n        this._root = splay(node.key, this._root, this._comparator);\n        this._root = this._remove(node.key, this._root, this._comparator);\n        return {\n          key: node.key,\n          data: node.data\n        };\n      }\n\n      return null;\n    };\n    /**\r\n     * Find without splaying\r\n     */\n\n\n    Tree.prototype.findStatic = function (key) {\n      var current = this._root;\n      var compare = this._comparator;\n\n      while (current) {\n        var cmp = compare(key, current.key);\n        if (cmp === 0) return current;else if (cmp < 0) current = current.left;else current = current.right;\n      }\n\n      return null;\n    };\n\n    Tree.prototype.find = function (key) {\n      if (this._root) {\n        this._root = splay(key, this._root, this._comparator);\n        if (this._comparator(key, this._root.key) !== 0) return null;\n      }\n\n      return this._root;\n    };\n\n    Tree.prototype.contains = function (key) {\n      var current = this._root;\n      var compare = this._comparator;\n\n      while (current) {\n        var cmp = compare(key, current.key);\n        if (cmp === 0) return true;else if (cmp < 0) current = current.left;else current = current.right;\n      }\n\n      return false;\n    };\n\n    Tree.prototype.forEach = function (visitor, ctx) {\n      var current = this._root;\n      var Q = [];\n      /* Initialize stack s */\n\n      var done = false;\n\n      while (!done) {\n        if (current !== null) {\n          Q.push(current);\n          current = current.left;\n        } else {\n          if (Q.length !== 0) {\n            current = Q.pop();\n            visitor.call(ctx, current);\n            current = current.right;\n          } else done = true;\n        }\n      }\n\n      return this;\n    };\n    /**\r\n     * Walk key range from `low` to `high`. Stops if `fn` returns a value.\r\n     */\n\n\n    Tree.prototype.range = function (low, high, fn, ctx) {\n      var Q = [];\n      var compare = this._comparator;\n      var node = this._root;\n      var cmp;\n\n      while (Q.length !== 0 || node) {\n        if (node) {\n          Q.push(node);\n          node = node.left;\n        } else {\n          node = Q.pop();\n          cmp = compare(node.key, high);\n\n          if (cmp > 0) {\n            break;\n          } else if (compare(node.key, low) >= 0) {\n            if (fn.call(ctx, node)) return this; // stop if smth is returned\n          }\n\n          node = node.right;\n        }\n      }\n\n      return this;\n    };\n    /**\r\n     * Returns array of keys\r\n     */\n\n\n    Tree.prototype.keys = function () {\n      var keys = [];\n      this.forEach(function (_a) {\n        var key = _a.key;\n        return keys.push(key);\n      });\n      return keys;\n    };\n    /**\r\n     * Returns array of all the data in the nodes\r\n     */\n\n\n    Tree.prototype.values = function () {\n      var values = [];\n      this.forEach(function (_a) {\n        var data = _a.data;\n        return values.push(data);\n      });\n      return values;\n    };\n\n    Tree.prototype.min = function () {\n      if (this._root) return this.minNode(this._root).key;\n      return null;\n    };\n\n    Tree.prototype.max = function () {\n      if (this._root) return this.maxNode(this._root).key;\n      return null;\n    };\n\n    Tree.prototype.minNode = function (t) {\n      if (t === void 0) {\n        t = this._root;\n      }\n\n      if (t) while (t.left) {\n        t = t.left;\n      }\n      return t;\n    };\n\n    Tree.prototype.maxNode = function (t) {\n      if (t === void 0) {\n        t = this._root;\n      }\n\n      if (t) while (t.right) {\n        t = t.right;\n      }\n      return t;\n    };\n    /**\r\n     * Returns node at given index\r\n     */\n\n\n    Tree.prototype.at = function (index) {\n      var current = this._root;\n      var done = false;\n      var i = 0;\n      var Q = [];\n\n      while (!done) {\n        if (current) {\n          Q.push(current);\n          current = current.left;\n        } else {\n          if (Q.length > 0) {\n            current = Q.pop();\n            if (i === index) return current;\n            i++;\n            current = current.right;\n          } else done = true;\n        }\n      }\n\n      return null;\n    };\n\n    Tree.prototype.next = function (d) {\n      var root = this._root;\n      var successor = null;\n\n      if (d.right) {\n        successor = d.right;\n\n        while (successor.left) {\n          successor = successor.left;\n        }\n\n        return successor;\n      }\n\n      var comparator = this._comparator;\n\n      while (root) {\n        var cmp = comparator(d.key, root.key);\n        if (cmp === 0) break;else if (cmp < 0) {\n          successor = root;\n          root = root.left;\n        } else root = root.right;\n      }\n\n      return successor;\n    };\n\n    Tree.prototype.prev = function (d) {\n      var root = this._root;\n      var predecessor = null;\n\n      if (d.left !== null) {\n        predecessor = d.left;\n\n        while (predecessor.right) {\n          predecessor = predecessor.right;\n        }\n\n        return predecessor;\n      }\n\n      var comparator = this._comparator;\n\n      while (root) {\n        var cmp = comparator(d.key, root.key);\n        if (cmp === 0) break;else if (cmp < 0) root = root.left;else {\n          predecessor = root;\n          root = root.right;\n        }\n      }\n\n      return predecessor;\n    };\n\n    Tree.prototype.clear = function () {\n      this._root = null;\n      this._size = 0;\n      return this;\n    };\n\n    Tree.prototype.toList = function () {\n      return toList(this._root);\n    };\n    /**\r\n     * Bulk-load items. Both array have to be same size\r\n     */\n\n\n    Tree.prototype.load = function (keys, values, presort) {\n      if (values === void 0) {\n        values = [];\n      }\n\n      if (presort === void 0) {\n        presort = false;\n      }\n\n      var size = keys.length;\n      var comparator = this._comparator; // sort if needed\n\n      if (presort) sort(keys, values, 0, size - 1, comparator);\n\n      if (this._root === null) {\n        // empty tree\n        this._root = loadRecursive(keys, values, 0, size);\n        this._size = size;\n      } else {\n        // that re-builds the whole tree from two in-order traversals\n        var mergedList = mergeLists(this.toList(), createList(keys, values), comparator);\n        size = this._size + size;\n        this._root = sortedListToBST({\n          head: mergedList\n        }, 0, size);\n      }\n\n      return this;\n    };\n\n    Tree.prototype.isEmpty = function () {\n      return this._root === null;\n    };\n\n    Object.defineProperty(Tree.prototype, \"size\", {\n      get: function get() {\n        return this._size;\n      },\n      enumerable: true,\n      configurable: true\n    });\n    Object.defineProperty(Tree.prototype, \"root\", {\n      get: function get() {\n        return this._root;\n      },\n      enumerable: true,\n      configurable: true\n    });\n\n    Tree.prototype.toString = function (printNode) {\n      if (printNode === void 0) {\n        printNode = function printNode(n) {\n          return String(n.key);\n        };\n      }\n\n      var out = [];\n      printRow(this._root, '', true, function (v) {\n        return out.push(v);\n      }, printNode);\n      return out.join('');\n    };\n\n    Tree.prototype.update = function (key, newKey, newData) {\n      var comparator = this._comparator;\n\n      var _a = split(key, this._root, comparator),\n          left = _a.left,\n          right = _a.right;\n\n      if (comparator(key, newKey) < 0) {\n        right = insert(newKey, newData, right, comparator);\n      } else {\n        left = insert(newKey, newData, left, comparator);\n      }\n\n      this._root = merge(left, right, comparator);\n    };\n\n    Tree.prototype.split = function (key) {\n      return split(key, this._root, this._comparator);\n    };\n\n    return Tree;\n  }();\n\n  function loadRecursive(keys, values, start, end) {\n    var size = end - start;\n\n    if (size > 0) {\n      var middle = start + Math.floor(size / 2);\n      var key = keys[middle];\n      var data = values[middle];\n      var node = new Node(key, data);\n      node.left = loadRecursive(keys, values, start, middle);\n      node.right = loadRecursive(keys, values, middle + 1, end);\n      return node;\n    }\n\n    return null;\n  }\n\n  function createList(keys, values) {\n    var head = new Node(null, null);\n    var p = head;\n\n    for (var i = 0; i < keys.length; i++) {\n      p = p.next = new Node(keys[i], values[i]);\n    }\n\n    p.next = null;\n    return head.next;\n  }\n\n  function toList(root) {\n    var current = root;\n    var Q = [];\n    var done = false;\n    var head = new Node(null, null);\n    var p = head;\n\n    while (!done) {\n      if (current) {\n        Q.push(current);\n        current = current.left;\n      } else {\n        if (Q.length > 0) {\n          current = p = p.next = Q.pop();\n          current = current.right;\n        } else done = true;\n      }\n    }\n\n    p.next = null; // that'll work even if the tree was empty\n\n    return head.next;\n  }\n\n  function sortedListToBST(list, start, end) {\n    var size = end - start;\n\n    if (size > 0) {\n      var middle = start + Math.floor(size / 2);\n      var left = sortedListToBST(list, start, middle);\n      var root = list.head;\n      root.left = left;\n      list.head = list.head.next;\n      root.right = sortedListToBST(list, middle + 1, end);\n      return root;\n    }\n\n    return null;\n  }\n\n  function mergeLists(l1, l2, compare) {\n    var head = new Node(null, null); // dummy\n\n    var p = head;\n    var p1 = l1;\n    var p2 = l2;\n\n    while (p1 !== null && p2 !== null) {\n      if (compare(p1.key, p2.key) < 0) {\n        p.next = p1;\n        p1 = p1.next;\n      } else {\n        p.next = p2;\n        p2 = p2.next;\n      }\n\n      p = p.next;\n    }\n\n    if (p1 !== null) {\n      p.next = p1;\n    } else if (p2 !== null) {\n      p.next = p2;\n    }\n\n    return head.next;\n  }\n\n  function sort(keys, values, left, right, compare) {\n    if (left >= right) return;\n    var pivot = keys[left + right >> 1];\n    var i = left - 1;\n    var j = right + 1;\n\n    while (true) {\n      do {\n        i++;\n      } while (compare(keys[i], pivot) < 0);\n\n      do {\n        j--;\n      } while (compare(keys[j], pivot) > 0);\n\n      if (i >= j) break;\n      var tmp = keys[i];\n      keys[i] = keys[j];\n      keys[j] = tmp;\n      tmp = values[i];\n      values[i] = values[j];\n      values[j] = tmp;\n    }\n\n    sort(keys, values, left, j, compare);\n    sort(keys, values, j + 1, right, compare);\n  }\n\n  /**\n   * A bounding box has the format:\n   *\n   *  { ll: { x: xmin, y: ymin }, ur: { x: xmax, y: ymax } }\n   *\n   */\n  var isInBbox = function isInBbox(bbox, point) {\n    return bbox.ll.x <= point.x && point.x <= bbox.ur.x && bbox.ll.y <= point.y && point.y <= bbox.ur.y;\n  };\n  /* Returns either null, or a bbox (aka an ordered pair of points)\n   * If there is only one point of overlap, a bbox with identical points\n   * will be returned */\n\n  var getBboxOverlap = function getBboxOverlap(b1, b2) {\n    // check if the bboxes overlap at all\n    if (b2.ur.x < b1.ll.x || b1.ur.x < b2.ll.x || b2.ur.y < b1.ll.y || b1.ur.y < b2.ll.y) return null; // find the middle two X values\n\n    var lowerX = b1.ll.x < b2.ll.x ? b2.ll.x : b1.ll.x;\n    var upperX = b1.ur.x < b2.ur.x ? b1.ur.x : b2.ur.x; // find the middle two Y values\n\n    var lowerY = b1.ll.y < b2.ll.y ? b2.ll.y : b1.ll.y;\n    var upperY = b1.ur.y < b2.ur.y ? b1.ur.y : b2.ur.y; // put those middle values together to get the overlap\n\n    return {\n      ll: {\n        x: lowerX,\n        y: lowerY\n      },\n      ur: {\n        x: upperX,\n        y: upperY\n      }\n    };\n  };\n\n  /* Javascript doesn't do integer math. Everything is\n   * floating point with percision Number.EPSILON.\n   *\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/EPSILON\n   */\n  var epsilon = Number.EPSILON; // IE Polyfill\n\n  if (epsilon === undefined) epsilon = Math.pow(2, -52);\n  var EPSILON_SQ = epsilon * epsilon;\n  /* FLP comparator */\n\n  var cmp = function cmp(a, b) {\n    // check if they're both 0\n    if (-epsilon < a && a < epsilon) {\n      if (-epsilon < b && b < epsilon) {\n        return 0;\n      }\n    } // check if they're flp equal\n\n\n    var ab = a - b;\n\n    if (ab * ab < EPSILON_SQ * a * b) {\n      return 0;\n    } // normal comparison\n\n\n    return a < b ? -1 : 1;\n  };\n\n  /**\n   * This class rounds incoming values sufficiently so that\n   * floating points problems are, for the most part, avoided.\n   *\n   * Incoming points are have their x & y values tested against\n   * all previously seen x & y values. If either is 'too close'\n   * to a previously seen value, it's value is 'snapped' to the\n   * previously seen value.\n   *\n   * All points should be rounded by this class before being\n   * stored in any data structures in the rest of this algorithm.\n   */\n\n  var PtRounder = /*#__PURE__*/function () {\n    function PtRounder() {\n      _classCallCheck(this, PtRounder);\n\n      this.reset();\n    }\n\n    _createClass(PtRounder, [{\n      key: \"reset\",\n      value: function reset() {\n        this.xRounder = new CoordRounder();\n        this.yRounder = new CoordRounder();\n      }\n    }, {\n      key: \"round\",\n      value: function round(x, y) {\n        return {\n          x: this.xRounder.round(x),\n          y: this.yRounder.round(y)\n        };\n      }\n    }]);\n\n    return PtRounder;\n  }();\n\n  var CoordRounder = /*#__PURE__*/function () {\n    function CoordRounder() {\n      _classCallCheck(this, CoordRounder);\n\n      this.tree = new Tree(); // preseed with 0 so we don't end up with values < Number.EPSILON\n\n      this.round(0);\n    } // Note: this can rounds input values backwards or forwards.\n    //       You might ask, why not restrict this to just rounding\n    //       forwards? Wouldn't that allow left endpoints to always\n    //       remain left endpoints during splitting (never change to\n    //       right). No - it wouldn't, because we snap intersections\n    //       to endpoints (to establish independence from the segment\n    //       angle for t-intersections).\n\n\n    _createClass(CoordRounder, [{\n      key: \"round\",\n      value: function round(coord) {\n        var node = this.tree.add(coord);\n        var prevNode = this.tree.prev(node);\n\n        if (prevNode !== null && cmp(node.key, prevNode.key) === 0) {\n          this.tree.remove(coord);\n          return prevNode.key;\n        }\n\n        var nextNode = this.tree.next(node);\n\n        if (nextNode !== null && cmp(node.key, nextNode.key) === 0) {\n          this.tree.remove(coord);\n          return nextNode.key;\n        }\n\n        return coord;\n      }\n    }]);\n\n    return CoordRounder;\n  }(); // singleton available by import\n\n\n  var rounder = new PtRounder();\n\n  /* Cross Product of two vectors with first point at origin */\n\n  var crossProduct = function crossProduct(a, b) {\n    return a.x * b.y - a.y * b.x;\n  };\n  /* Dot Product of two vectors with first point at origin */\n\n  var dotProduct = function dotProduct(a, b) {\n    return a.x * b.x + a.y * b.y;\n  };\n  /* Comparator for two vectors with same starting point */\n\n  var compareVectorAngles = function compareVectorAngles(basePt, endPt1, endPt2) {\n    var v1 = {\n      x: endPt1.x - basePt.x,\n      y: endPt1.y - basePt.y\n    };\n    var v2 = {\n      x: endPt2.x - basePt.x,\n      y: endPt2.y - basePt.y\n    };\n    var kross = crossProduct(v1, v2);\n    return cmp(kross, 0);\n  };\n  var length = function length(v) {\n    return Math.sqrt(dotProduct(v, v));\n  };\n  /* Get the sine of the angle from pShared -> pAngle to pShaed -> pBase */\n\n  var sineOfAngle = function sineOfAngle(pShared, pBase, pAngle) {\n    var vBase = {\n      x: pBase.x - pShared.x,\n      y: pBase.y - pShared.y\n    };\n    var vAngle = {\n      x: pAngle.x - pShared.x,\n      y: pAngle.y - pShared.y\n    };\n    return crossProduct(vAngle, vBase) / length(vAngle) / length(vBase);\n  };\n  /* Get the cosine of the angle from pShared -> pAngle to pShaed -> pBase */\n\n  var cosineOfAngle = function cosineOfAngle(pShared, pBase, pAngle) {\n    var vBase = {\n      x: pBase.x - pShared.x,\n      y: pBase.y - pShared.y\n    };\n    var vAngle = {\n      x: pAngle.x - pShared.x,\n      y: pAngle.y - pShared.y\n    };\n    return dotProduct(vAngle, vBase) / length(vAngle) / length(vBase);\n  };\n  /* Get the x coordinate where the given line (defined by a point and vector)\n   * crosses the horizontal line with the given y coordiante.\n   * In the case of parrallel lines (including overlapping ones) returns null. */\n\n  var horizontalIntersection = function horizontalIntersection(pt, v, y) {\n    if (v.y === 0) return null;\n    return {\n      x: pt.x + v.x / v.y * (y - pt.y),\n      y: y\n    };\n  };\n  /* Get the y coordinate where the given line (defined by a point and vector)\n   * crosses the vertical line with the given x coordiante.\n   * In the case of parrallel lines (including overlapping ones) returns null. */\n\n  var verticalIntersection = function verticalIntersection(pt, v, x) {\n    if (v.x === 0) return null;\n    return {\n      x: x,\n      y: pt.y + v.y / v.x * (x - pt.x)\n    };\n  };\n  /* Get the intersection of two lines, each defined by a base point and a vector.\n   * In the case of parrallel lines (including overlapping ones) returns null. */\n\n  var intersection = function intersection(pt1, v1, pt2, v2) {\n    // take some shortcuts for vertical and horizontal lines\n    // this also ensures we don't calculate an intersection and then discover\n    // it's actually outside the bounding box of the line\n    if (v1.x === 0) return verticalIntersection(pt2, v2, pt1.x);\n    if (v2.x === 0) return verticalIntersection(pt1, v1, pt2.x);\n    if (v1.y === 0) return horizontalIntersection(pt2, v2, pt1.y);\n    if (v2.y === 0) return horizontalIntersection(pt1, v1, pt2.y); // General case for non-overlapping segments.\n    // This algorithm is based on Schneider and Eberly.\n    // http://www.cimec.org.ar/~ncalvo/Schneider_Eberly.pdf - pg 244\n\n    var kross = crossProduct(v1, v2);\n    if (kross == 0) return null;\n    var ve = {\n      x: pt2.x - pt1.x,\n      y: pt2.y - pt1.y\n    };\n    var d1 = crossProduct(ve, v1) / kross;\n    var d2 = crossProduct(ve, v2) / kross; // take the average of the two calculations to minimize rounding error\n\n    var x1 = pt1.x + d2 * v1.x,\n        x2 = pt2.x + d1 * v2.x;\n    var y1 = pt1.y + d2 * v1.y,\n        y2 = pt2.y + d1 * v2.y;\n    var x = (x1 + x2) / 2;\n    var y = (y1 + y2) / 2;\n    return {\n      x: x,\n      y: y\n    };\n  };\n\n  var SweepEvent = /*#__PURE__*/function () {\n    _createClass(SweepEvent, null, [{\n      key: \"compare\",\n      // for ordering sweep events in the sweep event queue\n      value: function compare(a, b) {\n        // favor event with a point that the sweep line hits first\n        var ptCmp = SweepEvent.comparePoints(a.point, b.point);\n        if (ptCmp !== 0) return ptCmp; // the points are the same, so link them if needed\n\n        if (a.point !== b.point) a.link(b); // favor right events over left\n\n        if (a.isLeft !== b.isLeft) return a.isLeft ? 1 : -1; // we have two matching left or right endpoints\n        // ordering of this case is the same as for their segments\n\n        return Segment.compare(a.segment, b.segment);\n      } // for ordering points in sweep line order\n\n    }, {\n      key: \"comparePoints\",\n      value: function comparePoints(aPt, bPt) {\n        if (aPt.x < bPt.x) return -1;\n        if (aPt.x > bPt.x) return 1;\n        if (aPt.y < bPt.y) return -1;\n        if (aPt.y > bPt.y) return 1;\n        return 0;\n      } // Warning: 'point' input will be modified and re-used (for performance)\n\n    }]);\n\n    function SweepEvent(point, isLeft) {\n      _classCallCheck(this, SweepEvent);\n\n      if (point.events === undefined) point.events = [this];else point.events.push(this);\n      this.point = point;\n      this.isLeft = isLeft; // this.segment, this.otherSE set by factory\n    }\n\n    _createClass(SweepEvent, [{\n      key: \"link\",\n      value: function link(other) {\n        if (other.point === this.point) {\n          throw new Error('Tried to link already linked events');\n        }\n\n        var otherEvents = other.point.events;\n\n        for (var i = 0, iMax = otherEvents.length; i < iMax; i++) {\n          var evt = otherEvents[i];\n          this.point.events.push(evt);\n          evt.point = this.point;\n        }\n\n        this.checkForConsuming();\n      }\n      /* Do a pass over our linked events and check to see if any pair\n       * of segments match, and should be consumed. */\n\n    }, {\n      key: \"checkForConsuming\",\n      value: function checkForConsuming() {\n        // FIXME: The loops in this method run O(n^2) => no good.\n        //        Maintain little ordered sweep event trees?\n        //        Can we maintaining an ordering that avoids the need\n        //        for the re-sorting with getLeftmostComparator in geom-out?\n        // Compare each pair of events to see if other events also match\n        var numEvents = this.point.events.length;\n\n        for (var i = 0; i < numEvents; i++) {\n          var evt1 = this.point.events[i];\n          if (evt1.segment.consumedBy !== undefined) continue;\n\n          for (var j = i + 1; j < numEvents; j++) {\n            var evt2 = this.point.events[j];\n            if (evt2.consumedBy !== undefined) continue;\n            if (evt1.otherSE.point.events !== evt2.otherSE.point.events) continue;\n            evt1.segment.consume(evt2.segment);\n          }\n        }\n      }\n    }, {\n      key: \"getAvailableLinkedEvents\",\n      value: function getAvailableLinkedEvents() {\n        // point.events is always of length 2 or greater\n        var events = [];\n\n        for (var i = 0, iMax = this.point.events.length; i < iMax; i++) {\n          var evt = this.point.events[i];\n\n          if (evt !== this && !evt.segment.ringOut && evt.segment.isInResult()) {\n            events.push(evt);\n          }\n        }\n\n        return events;\n      }\n      /**\n       * Returns a comparator function for sorting linked events that will\n       * favor the event that will give us the smallest left-side angle.\n       * All ring construction starts as low as possible heading to the right,\n       * so by always turning left as sharp as possible we'll get polygons\n       * without uncessary loops & holes.\n       *\n       * The comparator function has a compute cache such that it avoids\n       * re-computing already-computed values.\n       */\n\n    }, {\n      key: \"getLeftmostComparator\",\n      value: function getLeftmostComparator(baseEvent) {\n        var _this = this;\n\n        var cache = new Map();\n\n        var fillCache = function fillCache(linkedEvent) {\n          var nextEvent = linkedEvent.otherSE;\n          cache.set(linkedEvent, {\n            sine: sineOfAngle(_this.point, baseEvent.point, nextEvent.point),\n            cosine: cosineOfAngle(_this.point, baseEvent.point, nextEvent.point)\n          });\n        };\n\n        return function (a, b) {\n          if (!cache.has(a)) fillCache(a);\n          if (!cache.has(b)) fillCache(b);\n\n          var _cache$get = cache.get(a),\n              asine = _cache$get.sine,\n              acosine = _cache$get.cosine;\n\n          var _cache$get2 = cache.get(b),\n              bsine = _cache$get2.sine,\n              bcosine = _cache$get2.cosine; // both on or above x-axis\n\n\n          if (asine >= 0 && bsine >= 0) {\n            if (acosine < bcosine) return 1;\n            if (acosine > bcosine) return -1;\n            return 0;\n          } // both below x-axis\n\n\n          if (asine < 0 && bsine < 0) {\n            if (acosine < bcosine) return -1;\n            if (acosine > bcosine) return 1;\n            return 0;\n          } // one above x-axis, one below\n\n\n          if (bsine < asine) return -1;\n          if (bsine > asine) return 1;\n          return 0;\n        };\n      }\n    }]);\n\n    return SweepEvent;\n  }();\n\n  // segments and sweep events when all else is identical\n\n  var segmentId = 0;\n\n  var Segment = /*#__PURE__*/function () {\n    _createClass(Segment, null, [{\n      key: \"compare\",\n\n      /* This compare() function is for ordering segments in the sweep\n       * line tree, and does so according to the following criteria:\n       *\n       * Consider the vertical line that lies an infinestimal step to the\n       * right of the right-more of the two left endpoints of the input\n       * segments. Imagine slowly moving a point up from negative infinity\n       * in the increasing y direction. Which of the two segments will that\n       * point intersect first? That segment comes 'before' the other one.\n       *\n       * If neither segment would be intersected by such a line, (if one\n       * or more of the segments are vertical) then the line to be considered\n       * is directly on the right-more of the two left inputs.\n       */\n      value: function compare(a, b) {\n        var alx = a.leftSE.point.x;\n        var blx = b.leftSE.point.x;\n        var arx = a.rightSE.point.x;\n        var brx = b.rightSE.point.x; // check if they're even in the same vertical plane\n\n        if (brx < alx) return 1;\n        if (arx < blx) return -1;\n        var aly = a.leftSE.point.y;\n        var bly = b.leftSE.point.y;\n        var ary = a.rightSE.point.y;\n        var bry = b.rightSE.point.y; // is left endpoint of segment B the right-more?\n\n        if (alx < blx) {\n          // are the two segments in the same horizontal plane?\n          if (bly < aly && bly < ary) return 1;\n          if (bly > aly && bly > ary) return -1; // is the B left endpoint colinear to segment A?\n\n          var aCmpBLeft = a.comparePoint(b.leftSE.point);\n          if (aCmpBLeft < 0) return 1;\n          if (aCmpBLeft > 0) return -1; // is the A right endpoint colinear to segment B ?\n\n          var bCmpARight = b.comparePoint(a.rightSE.point);\n          if (bCmpARight !== 0) return bCmpARight; // colinear segments, consider the one with left-more\n          // left endpoint to be first (arbitrary?)\n\n          return -1;\n        } // is left endpoint of segment A the right-more?\n\n\n        if (alx > blx) {\n          if (aly < bly && aly < bry) return -1;\n          if (aly > bly && aly > bry) return 1; // is the A left endpoint colinear to segment B?\n\n          var bCmpALeft = b.comparePoint(a.leftSE.point);\n          if (bCmpALeft !== 0) return bCmpALeft; // is the B right endpoint colinear to segment A?\n\n          var aCmpBRight = a.comparePoint(b.rightSE.point);\n          if (aCmpBRight < 0) return 1;\n          if (aCmpBRight > 0) return -1; // colinear segments, consider the one with left-more\n          // left endpoint to be first (arbitrary?)\n\n          return 1;\n        } // if we get here, the two left endpoints are in the same\n        // vertical plane, ie alx === blx\n        // consider the lower left-endpoint to come first\n\n\n        if (aly < bly) return -1;\n        if (aly > bly) return 1; // left endpoints are identical\n        // check for colinearity by using the left-more right endpoint\n        // is the A right endpoint more left-more?\n\n        if (arx < brx) {\n          var _bCmpARight = b.comparePoint(a.rightSE.point);\n\n          if (_bCmpARight !== 0) return _bCmpARight;\n        } // is the B right endpoint more left-more?\n\n\n        if (arx > brx) {\n          var _aCmpBRight = a.comparePoint(b.rightSE.point);\n\n          if (_aCmpBRight < 0) return 1;\n          if (_aCmpBRight > 0) return -1;\n        }\n\n        if (arx !== brx) {\n          // are these two [almost] vertical segments with opposite orientation?\n          // if so, the one with the lower right endpoint comes first\n          var ay = ary - aly;\n          var ax = arx - alx;\n          var by = bry - bly;\n          var bx = brx - blx;\n          if (ay > ax && by < bx) return 1;\n          if (ay < ax && by > bx) return -1;\n        } // we have colinear segments with matching orientation\n        // consider the one with more left-more right endpoint to be first\n\n\n        if (arx > brx) return 1;\n        if (arx < brx) return -1; // if we get here, two two right endpoints are in the same\n        // vertical plane, ie arx === brx\n        // consider the lower right-endpoint to come first\n\n        if (ary < bry) return -1;\n        if (ary > bry) return 1; // right endpoints identical as well, so the segments are idential\n        // fall back on creation order as consistent tie-breaker\n\n        if (a.id < b.id) return -1;\n        if (a.id > b.id) return 1; // identical segment, ie a === b\n\n        return 0;\n      }\n      /* Warning: a reference to ringWindings input will be stored,\n       *  and possibly will be later modified */\n\n    }]);\n\n    function Segment(leftSE, rightSE, rings, windings) {\n      _classCallCheck(this, Segment);\n\n      this.id = ++segmentId;\n      this.leftSE = leftSE;\n      leftSE.segment = this;\n      leftSE.otherSE = rightSE;\n      this.rightSE = rightSE;\n      rightSE.segment = this;\n      rightSE.otherSE = leftSE;\n      this.rings = rings;\n      this.windings = windings; // left unset for performance, set later in algorithm\n      // this.ringOut, this.consumedBy, this.prev\n    }\n\n    _createClass(Segment, [{\n      key: \"replaceRightSE\",\n\n      /* When a segment is split, the rightSE is replaced with a new sweep event */\n      value: function replaceRightSE(newRightSE) {\n        this.rightSE = newRightSE;\n        this.rightSE.segment = this;\n        this.rightSE.otherSE = this.leftSE;\n        this.leftSE.otherSE = this.rightSE;\n      }\n    }, {\n      key: \"bbox\",\n      value: function bbox() {\n        var y1 = this.leftSE.point.y;\n        var y2 = this.rightSE.point.y;\n        return {\n          ll: {\n            x: this.leftSE.point.x,\n            y: y1 < y2 ? y1 : y2\n          },\n          ur: {\n            x: this.rightSE.point.x,\n            y: y1 > y2 ? y1 : y2\n          }\n        };\n      }\n      /* A vector from the left point to the right */\n\n    }, {\n      key: \"vector\",\n      value: function vector() {\n        return {\n          x: this.rightSE.point.x - this.leftSE.point.x,\n          y: this.rightSE.point.y - this.leftSE.point.y\n        };\n      }\n    }, {\n      key: \"isAnEndpoint\",\n      value: function isAnEndpoint(pt) {\n        return pt.x === this.leftSE.point.x && pt.y === this.leftSE.point.y || pt.x === this.rightSE.point.x && pt.y === this.rightSE.point.y;\n      }\n      /* Compare this segment with a point.\n       *\n       * A point P is considered to be colinear to a segment if there\n       * exists a distance D such that if we travel along the segment\n       * from one * endpoint towards the other a distance D, we find\n       * ourselves at point P.\n       *\n       * Return value indicates:\n       *\n       *   1: point lies above the segment (to the left of vertical)\n       *   0: point is colinear to segment\n       *  -1: point lies below the segment (to the right of vertical)\n       */\n\n    }, {\n      key: \"comparePoint\",\n      value: function comparePoint(point) {\n        if (this.isAnEndpoint(point)) return 0;\n        var lPt = this.leftSE.point;\n        var rPt = this.rightSE.point;\n        var v = this.vector(); // Exactly vertical segments.\n\n        if (lPt.x === rPt.x) {\n          if (point.x === lPt.x) return 0;\n          return point.x < lPt.x ? 1 : -1;\n        } // Nearly vertical segments with an intersection.\n        // Check to see where a point on the line with matching Y coordinate is.\n\n\n        var yDist = (point.y - lPt.y) / v.y;\n        var xFromYDist = lPt.x + yDist * v.x;\n        if (point.x === xFromYDist) return 0; // General case.\n        // Check to see where a point on the line with matching X coordinate is.\n\n        var xDist = (point.x - lPt.x) / v.x;\n        var yFromXDist = lPt.y + xDist * v.y;\n        if (point.y === yFromXDist) return 0;\n        return point.y < yFromXDist ? -1 : 1;\n      }\n      /**\n       * Given another segment, returns the first non-trivial intersection\n       * between the two segments (in terms of sweep line ordering), if it exists.\n       *\n       * A 'non-trivial' intersection is one that will cause one or both of the\n       * segments to be split(). As such, 'trivial' vs. 'non-trivial' intersection:\n       *\n       *   * endpoint of segA with endpoint of segB --> trivial\n       *   * endpoint of segA with point along segB --> non-trivial\n       *   * endpoint of segB with point along segA --> non-trivial\n       *   * point along segA with point along segB --> non-trivial\n       *\n       * If no non-trivial intersection exists, return null\n       * Else, return null.\n       */\n\n    }, {\n      key: \"getIntersection\",\n      value: function getIntersection(other) {\n        // If bboxes don't overlap, there can't be any intersections\n        var tBbox = this.bbox();\n        var oBbox = other.bbox();\n        var bboxOverlap = getBboxOverlap(tBbox, oBbox);\n        if (bboxOverlap === null) return null; // We first check to see if the endpoints can be considered intersections.\n        // This will 'snap' intersections to endpoints if possible, and will\n        // handle cases of colinearity.\n\n        var tlp = this.leftSE.point;\n        var trp = this.rightSE.point;\n        var olp = other.leftSE.point;\n        var orp = other.rightSE.point; // does each endpoint touch the other segment?\n        // note that we restrict the 'touching' definition to only allow segments\n        // to touch endpoints that lie forward from where we are in the sweep line pass\n\n        var touchesOtherLSE = isInBbox(tBbox, olp) && this.comparePoint(olp) === 0;\n        var touchesThisLSE = isInBbox(oBbox, tlp) && other.comparePoint(tlp) === 0;\n        var touchesOtherRSE = isInBbox(tBbox, orp) && this.comparePoint(orp) === 0;\n        var touchesThisRSE = isInBbox(oBbox, trp) && other.comparePoint(trp) === 0; // do left endpoints match?\n\n        if (touchesThisLSE && touchesOtherLSE) {\n          // these two cases are for colinear segments with matching left\n          // endpoints, and one segment being longer than the other\n          if (touchesThisRSE && !touchesOtherRSE) return trp;\n          if (!touchesThisRSE && touchesOtherRSE) return orp; // either the two segments match exactly (two trival intersections)\n          // or just on their left endpoint (one trivial intersection\n\n          return null;\n        } // does this left endpoint matches (other doesn't)\n\n\n        if (touchesThisLSE) {\n          // check for segments that just intersect on opposing endpoints\n          if (touchesOtherRSE) {\n            if (tlp.x === orp.x && tlp.y === orp.y) return null;\n          } // t-intersection on left endpoint\n\n\n          return tlp;\n        } // does other left endpoint matches (this doesn't)\n\n\n        if (touchesOtherLSE) {\n          // check for segments that just intersect on opposing endpoints\n          if (touchesThisRSE) {\n            if (trp.x === olp.x && trp.y === olp.y) return null;\n          } // t-intersection on left endpoint\n\n\n          return olp;\n        } // trivial intersection on right endpoints\n\n\n        if (touchesThisRSE && touchesOtherRSE) return null; // t-intersections on just one right endpoint\n\n        if (touchesThisRSE) return trp;\n        if (touchesOtherRSE) return orp; // None of our endpoints intersect. Look for a general intersection between\n        // infinite lines laid over the segments\n\n        var pt = intersection(tlp, this.vector(), olp, other.vector()); // are the segments parrallel? Note that if they were colinear with overlap,\n        // they would have an endpoint intersection and that case was already handled above\n\n        if (pt === null) return null; // is the intersection found between the lines not on the segments?\n\n        if (!isInBbox(bboxOverlap, pt)) return null; // round the the computed point if needed\n\n        return rounder.round(pt.x, pt.y);\n      }\n      /**\n       * Split the given segment into multiple segments on the given points.\n       *  * Each existing segment will retain its leftSE and a new rightSE will be\n       *    generated for it.\n       *  * A new segment will be generated which will adopt the original segment's\n       *    rightSE, and a new leftSE will be generated for it.\n       *  * If there are more than two points given to split on, new segments\n       *    in the middle will be generated with new leftSE and rightSE's.\n       *  * An array of the newly generated SweepEvents will be returned.\n       *\n       * Warning: input array of points is modified\n       */\n\n    }, {\n      key: \"split\",\n      value: function split(point) {\n        var newEvents = [];\n        var alreadyLinked = point.events !== undefined;\n        var newLeftSE = new SweepEvent(point, true);\n        var newRightSE = new SweepEvent(point, false);\n        var oldRightSE = this.rightSE;\n        this.replaceRightSE(newRightSE);\n        newEvents.push(newRightSE);\n        newEvents.push(newLeftSE);\n        var newSeg = new Segment(newLeftSE, oldRightSE, this.rings.slice(), this.windings.slice()); // when splitting a nearly vertical downward-facing segment,\n        // sometimes one of the resulting new segments is vertical, in which\n        // case its left and right events may need to be swapped\n\n        if (SweepEvent.comparePoints(newSeg.leftSE.point, newSeg.rightSE.point) > 0) {\n          newSeg.swapEvents();\n        }\n\n        if (SweepEvent.comparePoints(this.leftSE.point, this.rightSE.point) > 0) {\n          this.swapEvents();\n        } // in the point we just used to create new sweep events with was already\n        // linked to other events, we need to check if either of the affected\n        // segments should be consumed\n\n\n        if (alreadyLinked) {\n          newLeftSE.checkForConsuming();\n          newRightSE.checkForConsuming();\n        }\n\n        return newEvents;\n      }\n      /* Swap which event is left and right */\n\n    }, {\n      key: \"swapEvents\",\n      value: function swapEvents() {\n        var tmpEvt = this.rightSE;\n        this.rightSE = this.leftSE;\n        this.leftSE = tmpEvt;\n        this.leftSE.isLeft = true;\n        this.rightSE.isLeft = false;\n\n        for (var i = 0, iMax = this.windings.length; i < iMax; i++) {\n          this.windings[i] *= -1;\n        }\n      }\n      /* Consume another segment. We take their rings under our wing\n       * and mark them as consumed. Use for perfectly overlapping segments */\n\n    }, {\n      key: \"consume\",\n      value: function consume(other) {\n        var consumer = this;\n        var consumee = other;\n\n        while (consumer.consumedBy) {\n          consumer = consumer.consumedBy;\n        }\n\n        while (consumee.consumedBy) {\n          consumee = consumee.consumedBy;\n        }\n\n        var cmp = Segment.compare(consumer, consumee);\n        if (cmp === 0) return; // already consumed\n        // the winner of the consumption is the earlier segment\n        // according to sweep line ordering\n\n        if (cmp > 0) {\n          var tmp = consumer;\n          consumer = consumee;\n          consumee = tmp;\n        } // make sure a segment doesn't consume it's prev\n\n\n        if (consumer.prev === consumee) {\n          var _tmp = consumer;\n          consumer = consumee;\n          consumee = _tmp;\n        }\n\n        for (var i = 0, iMax = consumee.rings.length; i < iMax; i++) {\n          var ring = consumee.rings[i];\n          var winding = consumee.windings[i];\n          var index = consumer.rings.indexOf(ring);\n\n          if (index === -1) {\n            consumer.rings.push(ring);\n            consumer.windings.push(winding);\n          } else consumer.windings[index] += winding;\n        }\n\n        consumee.rings = null;\n        consumee.windings = null;\n        consumee.consumedBy = consumer; // mark sweep events consumed as to maintain ordering in sweep event queue\n\n        consumee.leftSE.consumedBy = consumer.leftSE;\n        consumee.rightSE.consumedBy = consumer.rightSE;\n      }\n      /* The first segment previous segment chain that is in the result */\n\n    }, {\n      key: \"prevInResult\",\n      value: function prevInResult() {\n        if (this._prevInResult !== undefined) return this._prevInResult;\n        if (!this.prev) this._prevInResult = null;else if (this.prev.isInResult()) this._prevInResult = this.prev;else this._prevInResult = this.prev.prevInResult();\n        return this._prevInResult;\n      }\n    }, {\n      key: \"beforeState\",\n      value: function beforeState() {\n        if (this._beforeState !== undefined) return this._beforeState;\n        if (!this.prev) this._beforeState = {\n          rings: [],\n          windings: [],\n          multiPolys: []\n        };else {\n          var seg = this.prev.consumedBy || this.prev;\n          this._beforeState = seg.afterState();\n        }\n        return this._beforeState;\n      }\n    }, {\n      key: \"afterState\",\n      value: function afterState() {\n        if (this._afterState !== undefined) return this._afterState;\n        var beforeState = this.beforeState();\n        this._afterState = {\n          rings: beforeState.rings.slice(0),\n          windings: beforeState.windings.slice(0),\n          multiPolys: []\n        };\n        var ringsAfter = this._afterState.rings;\n        var windingsAfter = this._afterState.windings;\n        var mpsAfter = this._afterState.multiPolys; // calculate ringsAfter, windingsAfter\n\n        for (var i = 0, iMax = this.rings.length; i < iMax; i++) {\n          var ring = this.rings[i];\n          var winding = this.windings[i];\n          var index = ringsAfter.indexOf(ring);\n\n          if (index === -1) {\n            ringsAfter.push(ring);\n            windingsAfter.push(winding);\n          } else windingsAfter[index] += winding;\n        } // calcualte polysAfter\n\n\n        var polysAfter = [];\n        var polysExclude = [];\n\n        for (var _i = 0, _iMax = ringsAfter.length; _i < _iMax; _i++) {\n          if (windingsAfter[_i] === 0) continue; // non-zero rule\n\n          var _ring = ringsAfter[_i];\n          var poly = _ring.poly;\n          if (polysExclude.indexOf(poly) !== -1) continue;\n          if (_ring.isExterior) polysAfter.push(poly);else {\n            if (polysExclude.indexOf(poly) === -1) polysExclude.push(poly);\n\n            var _index = polysAfter.indexOf(_ring.poly);\n\n            if (_index !== -1) polysAfter.splice(_index, 1);\n          }\n        } // calculate multiPolysAfter\n\n\n        for (var _i2 = 0, _iMax2 = polysAfter.length; _i2 < _iMax2; _i2++) {\n          var mp = polysAfter[_i2].multiPoly;\n          if (mpsAfter.indexOf(mp) === -1) mpsAfter.push(mp);\n        }\n\n        return this._afterState;\n      }\n      /* Is this segment part of the final result? */\n\n    }, {\n      key: \"isInResult\",\n      value: function isInResult() {\n        // if we've been consumed, we're not in the result\n        if (this.consumedBy) return false;\n        if (this._isInResult !== undefined) return this._isInResult;\n        var mpsBefore = this.beforeState().multiPolys;\n        var mpsAfter = this.afterState().multiPolys;\n\n        switch (operation.type) {\n          case 'union':\n            {\n              // UNION - included iff:\n              //  * On one side of us there is 0 poly interiors AND\n              //  * On the other side there is 1 or more.\n              var noBefores = mpsBefore.length === 0;\n              var noAfters = mpsAfter.length === 0;\n              this._isInResult = noBefores !== noAfters;\n              break;\n            }\n\n          case 'intersection':\n            {\n              // INTERSECTION - included iff:\n              //  * on one side of us all multipolys are rep. with poly interiors AND\n              //  * on the other side of us, not all multipolys are repsented\n              //    with poly interiors\n              var least;\n              var most;\n\n              if (mpsBefore.length < mpsAfter.length) {\n                least = mpsBefore.length;\n                most = mpsAfter.length;\n              } else {\n                least = mpsAfter.length;\n                most = mpsBefore.length;\n              }\n\n              this._isInResult = most === operation.numMultiPolys && least < most;\n              break;\n            }\n\n          case 'xor':\n            {\n              // XOR - included iff:\n              //  * the difference between the number of multipolys represented\n              //    with poly interiors on our two sides is an odd number\n              var diff = Math.abs(mpsBefore.length - mpsAfter.length);\n              this._isInResult = diff % 2 === 1;\n              break;\n            }\n\n          case 'difference':\n            {\n              // DIFFERENCE included iff:\n              //  * on exactly one side, we have just the subject\n              var isJustSubject = function isJustSubject(mps) {\n                return mps.length === 1 && mps[0].isSubject;\n              };\n\n              this._isInResult = isJustSubject(mpsBefore) !== isJustSubject(mpsAfter);\n              break;\n            }\n\n          default:\n            throw new Error(\"Unrecognized operation type found \".concat(operation.type));\n        }\n\n        return this._isInResult;\n      }\n    }], [{\n      key: \"fromRing\",\n      value: function fromRing(pt1, pt2, ring) {\n        var leftPt, rightPt, winding; // ordering the two points according to sweep line ordering\n\n        var cmpPts = SweepEvent.comparePoints(pt1, pt2);\n\n        if (cmpPts < 0) {\n          leftPt = pt1;\n          rightPt = pt2;\n          winding = 1;\n        } else if (cmpPts > 0) {\n          leftPt = pt2;\n          rightPt = pt1;\n          winding = -1;\n        } else throw new Error(\"Tried to create degenerate segment at [\".concat(pt1.x, \", \").concat(pt1.y, \"]\"));\n\n        var leftSE = new SweepEvent(leftPt, true);\n        var rightSE = new SweepEvent(rightPt, false);\n        return new Segment(leftSE, rightSE, [ring], [winding]);\n      }\n    }]);\n\n    return Segment;\n  }();\n\n  var RingIn = /*#__PURE__*/function () {\n    function RingIn(geomRing, poly, isExterior) {\n      _classCallCheck(this, RingIn);\n\n      if (!Array.isArray(geomRing) || geomRing.length === 0) {\n        throw new Error('Input geometry is not a valid Polygon or MultiPolygon');\n      }\n\n      this.poly = poly;\n      this.isExterior = isExterior;\n      this.segments = [];\n\n      if (typeof geomRing[0][0] !== 'number' || typeof geomRing[0][1] !== 'number') {\n        throw new Error('Input geometry is not a valid Polygon or MultiPolygon');\n      }\n\n      var firstPoint = rounder.round(geomRing[0][0], geomRing[0][1]);\n      this.bbox = {\n        ll: {\n          x: firstPoint.x,\n          y: firstPoint.y\n        },\n        ur: {\n          x: firstPoint.x,\n          y: firstPoint.y\n        }\n      };\n      var prevPoint = firstPoint;\n\n      for (var i = 1, iMax = geomRing.length; i < iMax; i++) {\n        if (typeof geomRing[i][0] !== 'number' || typeof geomRing[i][1] !== 'number') {\n          throw new Error('Input geometry is not a valid Polygon or MultiPolygon');\n        }\n\n        var point = rounder.round(geomRing[i][0], geomRing[i][1]); // skip repeated points\n\n        if (point.x === prevPoint.x && point.y === prevPoint.y) continue;\n        this.segments.push(Segment.fromRing(prevPoint, point, this));\n        if (point.x < this.bbox.ll.x) this.bbox.ll.x = point.x;\n        if (point.y < this.bbox.ll.y) this.bbox.ll.y = point.y;\n        if (point.x > this.bbox.ur.x) this.bbox.ur.x = point.x;\n        if (point.y > this.bbox.ur.y) this.bbox.ur.y = point.y;\n        prevPoint = point;\n      } // add segment from last to first if last is not the same as first\n\n\n      if (firstPoint.x !== prevPoint.x || firstPoint.y !== prevPoint.y) {\n        this.segments.push(Segment.fromRing(prevPoint, firstPoint, this));\n      }\n    }\n\n    _createClass(RingIn, [{\n      key: \"getSweepEvents\",\n      value: function getSweepEvents() {\n        var sweepEvents = [];\n\n        for (var i = 0, iMax = this.segments.length; i < iMax; i++) {\n          var segment = this.segments[i];\n          sweepEvents.push(segment.leftSE);\n          sweepEvents.push(segment.rightSE);\n        }\n\n        return sweepEvents;\n      }\n    }]);\n\n    return RingIn;\n  }();\n  var PolyIn = /*#__PURE__*/function () {\n    function PolyIn(geomPoly, multiPoly) {\n      _classCallCheck(this, PolyIn);\n\n      if (!Array.isArray(geomPoly)) {\n        throw new Error('Input geometry is not a valid Polygon or MultiPolygon');\n      }\n\n      this.exteriorRing = new RingIn(geomPoly[0], this, true); // copy by value\n\n      this.bbox = {\n        ll: {\n          x: this.exteriorRing.bbox.ll.x,\n          y: this.exteriorRing.bbox.ll.y\n        },\n        ur: {\n          x: this.exteriorRing.bbox.ur.x,\n          y: this.exteriorRing.bbox.ur.y\n        }\n      };\n      this.interiorRings = [];\n\n      for (var i = 1, iMax = geomPoly.length; i < iMax; i++) {\n        var ring = new RingIn(geomPoly[i], this, false);\n        if (ring.bbox.ll.x < this.bbox.ll.x) this.bbox.ll.x = ring.bbox.ll.x;\n        if (ring.bbox.ll.y < this.bbox.ll.y) this.bbox.ll.y = ring.bbox.ll.y;\n        if (ring.bbox.ur.x > this.bbox.ur.x) this.bbox.ur.x = ring.bbox.ur.x;\n        if (ring.bbox.ur.y > this.bbox.ur.y) this.bbox.ur.y = ring.bbox.ur.y;\n        this.interiorRings.push(ring);\n      }\n\n      this.multiPoly = multiPoly;\n    }\n\n    _createClass(PolyIn, [{\n      key: \"getSweepEvents\",\n      value: function getSweepEvents() {\n        var sweepEvents = this.exteriorRing.getSweepEvents();\n\n        for (var i = 0, iMax = this.interiorRings.length; i < iMax; i++) {\n          var ringSweepEvents = this.interiorRings[i].getSweepEvents();\n\n          for (var j = 0, jMax = ringSweepEvents.length; j < jMax; j++) {\n            sweepEvents.push(ringSweepEvents[j]);\n          }\n        }\n\n        return sweepEvents;\n      }\n    }]);\n\n    return PolyIn;\n  }();\n  var MultiPolyIn = /*#__PURE__*/function () {\n    function MultiPolyIn(geom, isSubject) {\n      _classCallCheck(this, MultiPolyIn);\n\n      if (!Array.isArray(geom)) {\n        throw new Error('Input geometry is not a valid Polygon or MultiPolygon');\n      }\n\n      try {\n        // if the input looks like a polygon, convert it to a multipolygon\n        if (typeof geom[0][0][0] === 'number') geom = [geom];\n      } catch (ex) {// The input is either malformed or has empty arrays.\n        // In either case, it will be handled later on.\n      }\n\n      this.polys = [];\n      this.bbox = {\n        ll: {\n          x: Number.POSITIVE_INFINITY,\n          y: Number.POSITIVE_INFINITY\n        },\n        ur: {\n          x: Number.NEGATIVE_INFINITY,\n          y: Number.NEGATIVE_INFINITY\n        }\n      };\n\n      for (var i = 0, iMax = geom.length; i < iMax; i++) {\n        var poly = new PolyIn(geom[i], this);\n        if (poly.bbox.ll.x < this.bbox.ll.x) this.bbox.ll.x = poly.bbox.ll.x;\n        if (poly.bbox.ll.y < this.bbox.ll.y) this.bbox.ll.y = poly.bbox.ll.y;\n        if (poly.bbox.ur.x > this.bbox.ur.x) this.bbox.ur.x = poly.bbox.ur.x;\n        if (poly.bbox.ur.y > this.bbox.ur.y) this.bbox.ur.y = poly.bbox.ur.y;\n        this.polys.push(poly);\n      }\n\n      this.isSubject = isSubject;\n    }\n\n    _createClass(MultiPolyIn, [{\n      key: \"getSweepEvents\",\n      value: function getSweepEvents() {\n        var sweepEvents = [];\n\n        for (var i = 0, iMax = this.polys.length; i < iMax; i++) {\n          var polySweepEvents = this.polys[i].getSweepEvents();\n\n          for (var j = 0, jMax = polySweepEvents.length; j < jMax; j++) {\n            sweepEvents.push(polySweepEvents[j]);\n          }\n        }\n\n        return sweepEvents;\n      }\n    }]);\n\n    return MultiPolyIn;\n  }();\n\n  var RingOut = /*#__PURE__*/function () {\n    _createClass(RingOut, null, [{\n      key: \"factory\",\n\n      /* Given the segments from the sweep line pass, compute & return a series\n       * of closed rings from all the segments marked to be part of the result */\n      value: function factory(allSegments) {\n        var ringsOut = [];\n\n        for (var i = 0, iMax = allSegments.length; i < iMax; i++) {\n          var segment = allSegments[i];\n          if (!segment.isInResult() || segment.ringOut) continue;\n          var prevEvent = null;\n          var event = segment.leftSE;\n          var nextEvent = segment.rightSE;\n          var events = [event];\n          var startingPoint = event.point;\n          var intersectionLEs = [];\n          /* Walk the chain of linked events to form a closed ring */\n\n          while (true) {\n            prevEvent = event;\n            event = nextEvent;\n            events.push(event);\n            /* Is the ring complete? */\n\n            if (event.point === startingPoint) break;\n\n            while (true) {\n              var availableLEs = event.getAvailableLinkedEvents();\n              /* Did we hit a dead end? This shouldn't happen. Indicates some earlier\n               * part of the algorithm malfunctioned... please file a bug report. */\n\n              if (availableLEs.length === 0) {\n                var firstPt = events[0].point;\n                var lastPt = events[events.length - 1].point;\n                throw new Error(\"Unable to complete output ring starting at [\".concat(firstPt.x, \",\") + \" \".concat(firstPt.y, \"]. Last matching segment found ends at\") + \" [\".concat(lastPt.x, \", \").concat(lastPt.y, \"].\"));\n              }\n              /* Only one way to go, so cotinue on the path */\n\n\n              if (availableLEs.length === 1) {\n                nextEvent = availableLEs[0].otherSE;\n                break;\n              }\n              /* We must have an intersection. Check for a completed loop */\n\n\n              var indexLE = null;\n\n              for (var j = 0, jMax = intersectionLEs.length; j < jMax; j++) {\n                if (intersectionLEs[j].point === event.point) {\n                  indexLE = j;\n                  break;\n                }\n              }\n              /* Found a completed loop. Cut that off and make a ring */\n\n\n              if (indexLE !== null) {\n                var intersectionLE = intersectionLEs.splice(indexLE)[0];\n                var ringEvents = events.splice(intersectionLE.index);\n                ringEvents.unshift(ringEvents[0].otherSE);\n                ringsOut.push(new RingOut(ringEvents.reverse()));\n                continue;\n              }\n              /* register the intersection */\n\n\n              intersectionLEs.push({\n                index: events.length,\n                point: event.point\n              });\n              /* Choose the left-most option to continue the walk */\n\n              var comparator = event.getLeftmostComparator(prevEvent);\n              nextEvent = availableLEs.sort(comparator)[0].otherSE;\n              break;\n            }\n          }\n\n          ringsOut.push(new RingOut(events));\n        }\n\n        return ringsOut;\n      }\n    }]);\n\n    function RingOut(events) {\n      _classCallCheck(this, RingOut);\n\n      this.events = events;\n\n      for (var i = 0, iMax = events.length; i < iMax; i++) {\n        events[i].segment.ringOut = this;\n      }\n\n      this.poly = null;\n    }\n\n    _createClass(RingOut, [{\n      key: \"getGeom\",\n      value: function getGeom() {\n        // Remove superfluous points (ie extra points along a straight line),\n        var prevPt = this.events[0].point;\n        var points = [prevPt];\n\n        for (var i = 1, iMax = this.events.length - 1; i < iMax; i++) {\n          var _pt = this.events[i].point;\n          var _nextPt = this.events[i + 1].point;\n          if (compareVectorAngles(_pt, prevPt, _nextPt) === 0) continue;\n          points.push(_pt);\n          prevPt = _pt;\n        } // ring was all (within rounding error of angle calc) colinear points\n\n\n        if (points.length === 1) return null; // check if the starting point is necessary\n\n        var pt = points[0];\n        var nextPt = points[1];\n        if (compareVectorAngles(pt, prevPt, nextPt) === 0) points.shift();\n        points.push(points[0]);\n        var step = this.isExteriorRing() ? 1 : -1;\n        var iStart = this.isExteriorRing() ? 0 : points.length - 1;\n        var iEnd = this.isExteriorRing() ? points.length : -1;\n        var orderedPoints = [];\n\n        for (var _i = iStart; _i != iEnd; _i += step) {\n          orderedPoints.push([points[_i].x, points[_i].y]);\n        }\n\n        return orderedPoints;\n      }\n    }, {\n      key: \"isExteriorRing\",\n      value: function isExteriorRing() {\n        if (this._isExteriorRing === undefined) {\n          var enclosing = this.enclosingRing();\n          this._isExteriorRing = enclosing ? !enclosing.isExteriorRing() : true;\n        }\n\n        return this._isExteriorRing;\n      }\n    }, {\n      key: \"enclosingRing\",\n      value: function enclosingRing() {\n        if (this._enclosingRing === undefined) {\n          this._enclosingRing = this._calcEnclosingRing();\n        }\n\n        return this._enclosingRing;\n      }\n      /* Returns the ring that encloses this one, if any */\n\n    }, {\n      key: \"_calcEnclosingRing\",\n      value: function _calcEnclosingRing() {\n        // start with the ealier sweep line event so that the prevSeg\n        // chain doesn't lead us inside of a loop of ours\n        var leftMostEvt = this.events[0];\n\n        for (var i = 1, iMax = this.events.length; i < iMax; i++) {\n          var evt = this.events[i];\n          if (SweepEvent.compare(leftMostEvt, evt) > 0) leftMostEvt = evt;\n        }\n\n        var prevSeg = leftMostEvt.segment.prevInResult();\n        var prevPrevSeg = prevSeg ? prevSeg.prevInResult() : null;\n\n        while (true) {\n          // no segment found, thus no ring can enclose us\n          if (!prevSeg) return null; // no segments below prev segment found, thus the ring of the prev\n          // segment must loop back around and enclose us\n\n          if (!prevPrevSeg) return prevSeg.ringOut; // if the two segments are of different rings, the ring of the prev\n          // segment must either loop around us or the ring of the prev prev\n          // seg, which would make us and the ring of the prev peers\n\n          if (prevPrevSeg.ringOut !== prevSeg.ringOut) {\n            if (prevPrevSeg.ringOut.enclosingRing() !== prevSeg.ringOut) {\n              return prevSeg.ringOut;\n            } else return prevSeg.ringOut.enclosingRing();\n          } // two segments are from the same ring, so this was a penisula\n          // of that ring. iterate downward, keep searching\n\n\n          prevSeg = prevPrevSeg.prevInResult();\n          prevPrevSeg = prevSeg ? prevSeg.prevInResult() : null;\n        }\n      }\n    }]);\n\n    return RingOut;\n  }();\n  var PolyOut = /*#__PURE__*/function () {\n    function PolyOut(exteriorRing) {\n      _classCallCheck(this, PolyOut);\n\n      this.exteriorRing = exteriorRing;\n      exteriorRing.poly = this;\n      this.interiorRings = [];\n    }\n\n    _createClass(PolyOut, [{\n      key: \"addInterior\",\n      value: function addInterior(ring) {\n        this.interiorRings.push(ring);\n        ring.poly = this;\n      }\n    }, {\n      key: \"getGeom\",\n      value: function getGeom() {\n        var geom = [this.exteriorRing.getGeom()]; // exterior ring was all (within rounding error of angle calc) colinear points\n\n        if (geom[0] === null) return null;\n\n        for (var i = 0, iMax = this.interiorRings.length; i < iMax; i++) {\n          var ringGeom = this.interiorRings[i].getGeom(); // interior ring was all (within rounding error of angle calc) colinear points\n\n          if (ringGeom === null) continue;\n          geom.push(ringGeom);\n        }\n\n        return geom;\n      }\n    }]);\n\n    return PolyOut;\n  }();\n  var MultiPolyOut = /*#__PURE__*/function () {\n    function MultiPolyOut(rings) {\n      _classCallCheck(this, MultiPolyOut);\n\n      this.rings = rings;\n      this.polys = this._composePolys(rings);\n    }\n\n    _createClass(MultiPolyOut, [{\n      key: \"getGeom\",\n      value: function getGeom() {\n        var geom = [];\n\n        for (var i = 0, iMax = this.polys.length; i < iMax; i++) {\n          var polyGeom = this.polys[i].getGeom(); // exterior ring was all (within rounding error of angle calc) colinear points\n\n          if (polyGeom === null) continue;\n          geom.push(polyGeom);\n        }\n\n        return geom;\n      }\n    }, {\n      key: \"_composePolys\",\n      value: function _composePolys(rings) {\n        var polys = [];\n\n        for (var i = 0, iMax = rings.length; i < iMax; i++) {\n          var ring = rings[i];\n          if (ring.poly) continue;\n          if (ring.isExteriorRing()) polys.push(new PolyOut(ring));else {\n            var enclosingRing = ring.enclosingRing();\n            if (!enclosingRing.poly) polys.push(new PolyOut(enclosingRing));\n            enclosingRing.poly.addInterior(ring);\n          }\n        }\n\n        return polys;\n      }\n    }]);\n\n    return MultiPolyOut;\n  }();\n\n  /**\n   * NOTE:  We must be careful not to change any segments while\n   *        they are in the SplayTree. AFAIK, there's no way to tell\n   *        the tree to rebalance itself - thus before splitting\n   *        a segment that's in the tree, we remove it from the tree,\n   *        do the split, then re-insert it. (Even though splitting a\n   *        segment *shouldn't* change its correct position in the\n   *        sweep line tree, the reality is because of rounding errors,\n   *        it sometimes does.)\n   */\n\n  var SweepLine = /*#__PURE__*/function () {\n    function SweepLine(queue) {\n      var comparator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Segment.compare;\n\n      _classCallCheck(this, SweepLine);\n\n      this.queue = queue;\n      this.tree = new Tree(comparator);\n      this.segments = [];\n    }\n\n    _createClass(SweepLine, [{\n      key: \"process\",\n      value: function process(event) {\n        var segment = event.segment;\n        var newEvents = []; // if we've already been consumed by another segment,\n        // clean up our body parts and get out\n\n        if (event.consumedBy) {\n          if (event.isLeft) this.queue.remove(event.otherSE);else this.tree.remove(segment);\n          return newEvents;\n        }\n\n        var node = event.isLeft ? this.tree.insert(segment) : this.tree.find(segment);\n        if (!node) throw new Error(\"Unable to find segment #\".concat(segment.id, \" \") + \"[\".concat(segment.leftSE.point.x, \", \").concat(segment.leftSE.point.y, \"] -> \") + \"[\".concat(segment.rightSE.point.x, \", \").concat(segment.rightSE.point.y, \"] \") + 'in SweepLine tree. Please submit a bug report.');\n        var prevNode = node;\n        var nextNode = node;\n        var prevSeg = undefined;\n        var nextSeg = undefined; // skip consumed segments still in tree\n\n        while (prevSeg === undefined) {\n          prevNode = this.tree.prev(prevNode);\n          if (prevNode === null) prevSeg = null;else if (prevNode.key.consumedBy === undefined) prevSeg = prevNode.key;\n        } // skip consumed segments still in tree\n\n\n        while (nextSeg === undefined) {\n          nextNode = this.tree.next(nextNode);\n          if (nextNode === null) nextSeg = null;else if (nextNode.key.consumedBy === undefined) nextSeg = nextNode.key;\n        }\n\n        if (event.isLeft) {\n          // Check for intersections against the previous segment in the sweep line\n          var prevMySplitter = null;\n\n          if (prevSeg) {\n            var prevInter = prevSeg.getIntersection(segment);\n\n            if (prevInter !== null) {\n              if (!segment.isAnEndpoint(prevInter)) prevMySplitter = prevInter;\n\n              if (!prevSeg.isAnEndpoint(prevInter)) {\n                var newEventsFromSplit = this._splitSafely(prevSeg, prevInter);\n\n                for (var i = 0, iMax = newEventsFromSplit.length; i < iMax; i++) {\n                  newEvents.push(newEventsFromSplit[i]);\n                }\n              }\n            }\n          } // Check for intersections against the next segment in the sweep line\n\n\n          var nextMySplitter = null;\n\n          if (nextSeg) {\n            var nextInter = nextSeg.getIntersection(segment);\n\n            if (nextInter !== null) {\n              if (!segment.isAnEndpoint(nextInter)) nextMySplitter = nextInter;\n\n              if (!nextSeg.isAnEndpoint(nextInter)) {\n                var _newEventsFromSplit = this._splitSafely(nextSeg, nextInter);\n\n                for (var _i = 0, _iMax = _newEventsFromSplit.length; _i < _iMax; _i++) {\n                  newEvents.push(_newEventsFromSplit[_i]);\n                }\n              }\n            }\n          } // For simplicity, even if we find more than one intersection we only\n          // spilt on the 'earliest' (sweep-line style) of the intersections.\n          // The other intersection will be handled in a future process().\n\n\n          if (prevMySplitter !== null || nextMySplitter !== null) {\n            var mySplitter = null;\n            if (prevMySplitter === null) mySplitter = nextMySplitter;else if (nextMySplitter === null) mySplitter = prevMySplitter;else {\n              var cmpSplitters = SweepEvent.comparePoints(prevMySplitter, nextMySplitter);\n              mySplitter = cmpSplitters <= 0 ? prevMySplitter : nextMySplitter;\n            } // Rounding errors can cause changes in ordering,\n            // so remove afected segments and right sweep events before splitting\n\n            this.queue.remove(segment.rightSE);\n            newEvents.push(segment.rightSE);\n\n            var _newEventsFromSplit2 = segment.split(mySplitter);\n\n            for (var _i2 = 0, _iMax2 = _newEventsFromSplit2.length; _i2 < _iMax2; _i2++) {\n              newEvents.push(_newEventsFromSplit2[_i2]);\n            }\n          }\n\n          if (newEvents.length > 0) {\n            // We found some intersections, so re-do the current event to\n            // make sure sweep line ordering is totally consistent for later\n            // use with the segment 'prev' pointers\n            this.tree.remove(segment);\n            newEvents.push(event);\n          } else {\n            // done with left event\n            this.segments.push(segment);\n            segment.prev = prevSeg;\n          }\n        } else {\n          // event.isRight\n          // since we're about to be removed from the sweep line, check for\n          // intersections between our previous and next segments\n          if (prevSeg && nextSeg) {\n            var inter = prevSeg.getIntersection(nextSeg);\n\n            if (inter !== null) {\n              if (!prevSeg.isAnEndpoint(inter)) {\n                var _newEventsFromSplit3 = this._splitSafely(prevSeg, inter);\n\n                for (var _i3 = 0, _iMax3 = _newEventsFromSplit3.length; _i3 < _iMax3; _i3++) {\n                  newEvents.push(_newEventsFromSplit3[_i3]);\n                }\n              }\n\n              if (!nextSeg.isAnEndpoint(inter)) {\n                var _newEventsFromSplit4 = this._splitSafely(nextSeg, inter);\n\n                for (var _i4 = 0, _iMax4 = _newEventsFromSplit4.length; _i4 < _iMax4; _i4++) {\n                  newEvents.push(_newEventsFromSplit4[_i4]);\n                }\n              }\n            }\n          }\n\n          this.tree.remove(segment);\n        }\n\n        return newEvents;\n      }\n      /* Safely split a segment that is currently in the datastructures\n       * IE - a segment other than the one that is currently being processed. */\n\n    }, {\n      key: \"_splitSafely\",\n      value: function _splitSafely(seg, pt) {\n        // Rounding errors can cause changes in ordering,\n        // so remove afected segments and right sweep events before splitting\n        // removeNode() doesn't work, so have re-find the seg\n        // https://github.com/w8r/splay-tree/pull/5\n        this.tree.remove(seg);\n        var rightSE = seg.rightSE;\n        this.queue.remove(rightSE);\n        var newEvents = seg.split(pt);\n        newEvents.push(rightSE); // splitting can trigger consumption\n\n        if (seg.consumedBy === undefined) this.tree.insert(seg);\n        return newEvents;\n      }\n    }]);\n\n    return SweepLine;\n  }();\n\n  var POLYGON_CLIPPING_MAX_QUEUE_SIZE = typeof process !== 'undefined' && process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE || 1000000;\n  var POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS = typeof process !== 'undefined' && process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS || 1000000;\n  var Operation = /*#__PURE__*/function () {\n    function Operation() {\n      _classCallCheck(this, Operation);\n    }\n\n    _createClass(Operation, [{\n      key: \"run\",\n      value: function run(type, geom, moreGeoms) {\n        operation.type = type;\n        rounder.reset();\n        /* Convert inputs to MultiPoly objects */\n\n        var multipolys = [new MultiPolyIn(geom, true)];\n\n        for (var i = 0, iMax = moreGeoms.length; i < iMax; i++) {\n          multipolys.push(new MultiPolyIn(moreGeoms[i], false));\n        }\n\n        operation.numMultiPolys = multipolys.length;\n        /* BBox optimization for difference operation\n         * If the bbox of a multipolygon that's part of the clipping doesn't\n         * intersect the bbox of the subject at all, we can just drop that\n         * multiploygon. */\n\n        if (operation.type === 'difference') {\n          // in place removal\n          var subject = multipolys[0];\n          var _i = 1;\n\n          while (_i < multipolys.length) {\n            if (getBboxOverlap(multipolys[_i].bbox, subject.bbox) !== null) _i++;else multipolys.splice(_i, 1);\n          }\n        }\n        /* BBox optimization for intersection operation\n         * If we can find any pair of multipolygons whose bbox does not overlap,\n         * then the result will be empty. */\n\n\n        if (operation.type === 'intersection') {\n          // TODO: this is O(n^2) in number of polygons. By sorting the bboxes,\n          //       it could be optimized to O(n * ln(n))\n          for (var _i2 = 0, _iMax = multipolys.length; _i2 < _iMax; _i2++) {\n            var mpA = multipolys[_i2];\n\n            for (var j = _i2 + 1, jMax = multipolys.length; j < jMax; j++) {\n              if (getBboxOverlap(mpA.bbox, multipolys[j].bbox) === null) return [];\n            }\n          }\n        }\n        /* Put segment endpoints in a priority queue */\n\n\n        var queue = new Tree(SweepEvent.compare);\n\n        for (var _i3 = 0, _iMax2 = multipolys.length; _i3 < _iMax2; _i3++) {\n          var sweepEvents = multipolys[_i3].getSweepEvents();\n\n          for (var _j = 0, _jMax = sweepEvents.length; _j < _jMax; _j++) {\n            queue.insert(sweepEvents[_j]);\n\n            if (queue.size > POLYGON_CLIPPING_MAX_QUEUE_SIZE) {\n              // prevents an infinite loop, an otherwise common manifestation of bugs\n              throw new Error('Infinite loop when putting segment endpoints in a priority queue ' + '(queue size too big). Please file a bug report.');\n            }\n          }\n        }\n        /* Pass the sweep line over those endpoints */\n\n\n        var sweepLine = new SweepLine(queue);\n        var prevQueueSize = queue.size;\n        var node = queue.pop();\n\n        while (node) {\n          var evt = node.key;\n\n          if (queue.size === prevQueueSize) {\n            // prevents an infinite loop, an otherwise common manifestation of bugs\n            var seg = evt.segment;\n            throw new Error(\"Unable to pop() \".concat(evt.isLeft ? 'left' : 'right', \" SweepEvent \") + \"[\".concat(evt.point.x, \", \").concat(evt.point.y, \"] from segment #\").concat(seg.id, \" \") + \"[\".concat(seg.leftSE.point.x, \", \").concat(seg.leftSE.point.y, \"] -> \") + \"[\".concat(seg.rightSE.point.x, \", \").concat(seg.rightSE.point.y, \"] from queue. \") + 'Please file a bug report.');\n          }\n\n          if (queue.size > POLYGON_CLIPPING_MAX_QUEUE_SIZE) {\n            // prevents an infinite loop, an otherwise common manifestation of bugs\n            throw new Error('Infinite loop when passing sweep line over endpoints ' + '(queue size too big). Please file a bug report.');\n          }\n\n          if (sweepLine.segments.length > POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS) {\n            // prevents an infinite loop, an otherwise common manifestation of bugs\n            throw new Error('Infinite loop when passing sweep line over endpoints ' + '(too many sweep line segments). Please file a bug report.');\n          }\n\n          var newEvents = sweepLine.process(evt);\n\n          for (var _i4 = 0, _iMax3 = newEvents.length; _i4 < _iMax3; _i4++) {\n            var _evt = newEvents[_i4];\n            if (_evt.consumedBy === undefined) queue.insert(_evt);\n          }\n\n          prevQueueSize = queue.size;\n          node = queue.pop();\n        } // free some memory we don't need anymore\n\n\n        rounder.reset();\n        /* Collect and compile segments we're keeping into a multipolygon */\n\n        var ringsOut = RingOut.factory(sweepLine.segments);\n        var result = new MultiPolyOut(ringsOut);\n        return result.getGeom();\n      }\n    }]);\n\n    return Operation;\n  }(); // singleton available by import\n\n  var operation = new Operation();\n\n  var union = function union(geom) {\n    for (var _len = arguments.length, moreGeoms = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      moreGeoms[_key - 1] = arguments[_key];\n    }\n\n    return operation.run('union', geom, moreGeoms);\n  };\n\n  var intersection$1 = function intersection(geom) {\n    for (var _len2 = arguments.length, moreGeoms = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      moreGeoms[_key2 - 1] = arguments[_key2];\n    }\n\n    return operation.run('intersection', geom, moreGeoms);\n  };\n\n  var xor = function xor(geom) {\n    for (var _len3 = arguments.length, moreGeoms = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      moreGeoms[_key3 - 1] = arguments[_key3];\n    }\n\n    return operation.run('xor', geom, moreGeoms);\n  };\n\n  var difference = function difference(subjectGeom) {\n    for (var _len4 = arguments.length, clippingGeoms = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n      clippingGeoms[_key4 - 1] = arguments[_key4];\n    }\n\n    return operation.run('difference', subjectGeom, clippingGeoms);\n  };\n\n  var index = {\n    union: union,\n    intersection: intersection$1,\n    xor: xor,\n    difference: difference\n  };\n\n  return index;\n\n})));\n"],"names":["render","_vm","this","_c","_self","staticClass","attrs","_v","directives","name","rawName","showDisclaimer","articles","disclaimer","on","onSubmitDisclaimer","model","value","checkDisclaimer","callback","$$v","expression","_e","$route","params","page","faq","fullPath","tabs","ref","currentError","promise","compute","warnAboutMethodBra","method","type","_m","yetiData","yetiExtent","staticRenderFns","require","document","_s","title","fields","description","_t","script","component","components","SubPanelTitle","MarkdownSection","props","article","required","data","computed","id","lang","watch","mounted","methods","cookDocument","c2c","index","activeTab","API_URL","DANGER_MAX_WHEN_MRD","VALID_MINIMUM_MAP_ZOOM","bra","high","low","altiThreshold","isDifferent","orientation","potentialDanger","wetSnow","groupSize","areas","areaOk","showAreas","features","featuresTitle","featuresLength","mountains","all","visible","bulletinsLoaded","showAvalancheBulletins","nivoses","showNivoses","romma","showRomma","flowcapt","showFlowcapt","mapZoom","drawingMode","validSimplifyTolerance","hasFeatures","setActiveTab","state","setBra","prop","setMethod","setAreas","setAreaOk","setShowAreas","setFeatures","setFeaturesTitle","setFeaturesLength","setAllMountains","setVisibleMountains","setShowAvalancheBulletins","setBulletinsLoaded","bool","setNivoses","setShowNivoses","setRomma","setShowRomma","setFlowcapt","setShowFlowcapt","setMapZoom","setDrawingMode","setValidSimplifyTolerance","setDefault","fetchApi","url","fetchAreas","fetchMountains","fetchBulletins","fetchNivoses","fetchRomma","fetchFlowcapt","class","staticStyle","$gettext","domProps","$event","onChange","scopedSlots","_u","key","fn","showVisibleMountains","onShowAvalancheBulletins","_l","visibleMountains","mountainsForMassif","massif","mountain","urls","proxy","countVisibleMountains","isPrimary","default","opened","switchOpen","undefined","icon","icons","info","warning","help","Counter","DropdownContent","Info","showMountainsList","event","Yetix","checkBraIsDifferent","length","hasFeaturesTitle","onEditNewFeaturesTitle","onEditFeaturesTitle","indexOf","keyCode","preventDefault","onRemoveFeatures","formats","format","_q","downloadCourse","loading","onLoadGpx","uploadGpx","feature","i","showFeature","hideFeature","nbPointsOnFeature","removeFeature","tolerances","tolerance","toleranceDistance","onPreviewSimplify","tolerancesText","validToleranceDistance","initialize","onSimplify","featuresSimplifiedLength","map","reduce","destroyed","FeaturesList","SimplifyTool","newFeaturesTitle","e","reader","downloadFeatures","olFormat","extension","mimetype","featureProjection","utils","setFilename","ext","Object","keys","item","join","potentialDangerLabels","label","text","potentialDangerOptions","min","max","val","groupSizes","mrd","mre","mrp","result","onBraChange","tab","refInFor","setActiveTabKeyboard","dir","tabindex","$emit","stopPropagation","showLayerSwitcher","atLeastOneYetiLayerIsShown","reactiveCartoLayers","layer","visibleCartoLayerId","reactiveDataLayers","toggleMapDataLayer","yetiLayers","checked","action","searchRecenterPropositions","showRecenterOnPropositions","recenterPropositions","recenterOn","properties","country","onDrawingMode","$parent","view","getView","getExtent","projection","getFeaturesFromData","ol","readFeatures","getPropertiesFromFeatures","getProperties","opacity","strokeWidth","stroke","color","width","fill","mixins","renderMode","source","style","onAreasResult","isAreaOK","onShowAreas","onMapMoveEnd","closeOverlay","overlayData","mountainName","danger","overlayValidUntil","overlayValidUntilExpired","altitude","lowEvol","highEvol","overlayOrientations","overlayDangerComment","overlayOrientationsComment","overlayDangerIcon","geom","options","feat","bbox","geometry","polygon","coordinates","_i","coordinates_1","ring","Error","j","multiPolygon","getGeom","geojson","poly1","poly2","geom1","geom2","intersection","iconSize","dangerFill","svg","image","src","size","layers","positioning","offset","className","animation","duration","margin","validUntil","orientations","panIntoView","filter","bulletinsOverlay","mountainsLayerGroup","onMountainsResult","mountainsFeatures","mountainsLayer","sortMountainsByMassif","sortedMountains","sort","obj","updateMountainsStyle","onMapClick","evt","clickedFeature","onBulletinsResult","bulletinsFeatures","zone","bulletinsGeometry","initialGeometry","bulletinsLayer","bulletinsFeature","updateBulletinsGeometry","intersectFeature","setBulletinsOverlay","layerFilter","points","updateBulletinsOverlay","activePoint","openOverlay","overlay","background","letter","capitalizedName","dataLayer","showLayer","fetch","setState","created","onResult","onShowLayer","IconLayer","setOverlay","unsetOverlay","url1","url2","zIndex","visibleSimplifiedLayer","validMinimumMapZoom","addInteractions","enableInteractions","disableInteractions","onDrawStart","onDrawEnd","onModifyEnd","onKeyWhileDrawing","onFeature","updateFeaturesFromStore","path","getFeaturesLayerFeatures","getSimplifiedFeatures","removeFeatures","addFeaturesFromGpx","gpx","getFeaturesTitleFromGpx","addFeaturesFromDocument","doc","addFeature","lines","getFeaturesTitleFromDocument","fitMapToFeatures","hideSimplifiedLayer","showSimplifiedLayer","previewSimplify","simplifiedGeometry","simplify","simplifiedFeatures","showLegend","mapLegend","items","comment","isLayerLoaded","onUpdateOpacity","VueSlider","extent","imageExtent","clearLayers","drawExtent","drawImage","imageLoadFunction","setLegend","xml","toLinearRing","AreaLayer","AvalancheBulletinsLayer","FlowcaptLayer","NivosesLayer","RommaLayer","RouteLayer","YetiLayer","visibleLayer","controls","zoomInTipLabel","zoomOutTipLabel","tipLabel","c2c_cartoLayers","c2c_dataLayers","center","zoom","maxZoom","element","reactiveLayer","getMapZoom","updateCartoLayersOpacity","onShowNivoses","onShowRomma","onShowFlowcapt","YetiArticle","Panel","SubPanelBra","SubPanelCourse","SubPanelMethods","Tabs","ValidationButton","YetiMap","formError","dangerMaxWhenMrd","errors","area","simple","full","method_bra","ok","yeti","yeti_prefix","yeti_unauthorized","mrdIsNotApplicable","isBraMax","isValidMapZoom","check","window","setCurrentError","yetiUrl","then","catch","extendExtent","onYetiResult","extendedExtent","onYetiError","err","errorText","getYetiUrl","global","factory","module","exports","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","descriptor","enumerable","configurable","writable","defineProperty","_createClass","protoProps","staticProps","prototype","Node","next","left","right","DEFAULT_COMPARE","a","b","splay","t","comparator","N","l","r","cmp","y","insert","node","split","v","merge","printRow","root","prefix","isTail","out","printNode","indent","Tree","_root","_size","_comparator","add","remove","_remove","x","pop","findStatic","current","compare","find","contains","forEach","visitor","ctx","Q","done","push","call","range","_a","values","minNode","maxNode","at","d","successor","prev","predecessor","clear","toList","load","presort","loadRecursive","mergedList","mergeLists","createList","sortedListToBST","head","isEmpty","get","toString","n","String","update","newKey","newData","start","end","middle","Math","floor","p","list","l1","l2","p1","p2","pivot","tmp","isInBbox","point","ll","ur","getBboxOverlap","b1","b2","lowerX","upperX","lowerY","upperY","epsilon","Number","EPSILON","pow","EPSILON_SQ","ab","PtRounder","reset","xRounder","CoordRounder","yRounder","round","tree","coord","prevNode","nextNode","rounder","crossProduct","dotProduct","compareVectorAngles","basePt","endPt1","endPt2","v1","v2","kross","sqrt","sineOfAngle","pShared","pBase","pAngle","vBase","vAngle","cosineOfAngle","horizontalIntersection","pt","verticalIntersection","pt1","pt2","ve","d1","d2","x1","x2","y1","y2","SweepEvent","isLeft","events","ptCmp","comparePoints","link","Segment","segment","aPt","bPt","other","otherEvents","iMax","checkForConsuming","numEvents","evt1","consumedBy","evt2","otherSE","consume","ringOut","isInResult","baseEvent","_this","cache","Map","fillCache","linkedEvent","nextEvent","set","sine","cosine","has","_cache$get","asine","acosine","_cache$get2","bsine","bcosine","segmentId","leftSE","rightSE","rings","windings","alx","blx","arx","brx","aly","bly","ary","bry","aCmpBLeft","comparePoint","bCmpARight","bCmpALeft","aCmpBRight","_bCmpARight","_aCmpBRight","ay","ax","by","bx","newRightSE","isAnEndpoint","lPt","rPt","vector","yDist","xFromYDist","xDist","yFromXDist","tBbox","oBbox","bboxOverlap","tlp","trp","olp","orp","touchesOtherLSE","touchesThisLSE","touchesOtherRSE","touchesThisRSE","newEvents","alreadyLinked","newLeftSE","oldRightSE","replaceRightSE","newSeg","slice","swapEvents","tmpEvt","consumer","consumee","_tmp","winding","_prevInResult","prevInResult","_beforeState","seg","afterState","multiPolys","_afterState","beforeState","ringsAfter","windingsAfter","mpsAfter","polysAfter","polysExclude","_iMax","_ring","poly","isExterior","_index","splice","_i2","_iMax2","mp","multiPoly","_isInResult","mpsBefore","operation","noBefores","noAfters","least","most","numMultiPolys","diff","abs","isJustSubject","mps","isSubject","concat","leftPt","rightPt","cmpPts","RingIn","geomRing","Array","isArray","segments","firstPoint","prevPoint","fromRing","sweepEvents","PolyIn","geomPoly","exteriorRing","interiorRings","getSweepEvents","ringSweepEvents","jMax","MultiPolyIn","ex","polys","POSITIVE_INFINITY","NEGATIVE_INFINITY","polySweepEvents","RingOut","allSegments","ringsOut","prevEvent","startingPoint","intersectionLEs","availableLEs","getAvailableLinkedEvents","firstPt","lastPt","indexLE","getLeftmostComparator","intersectionLE","ringEvents","unshift","reverse","prevPt","_pt","_nextPt","nextPt","shift","step","isExteriorRing","iStart","iEnd","orderedPoints","_isExteriorRing","enclosing","enclosingRing","_enclosingRing","_calcEnclosingRing","leftMostEvt","prevSeg","prevPrevSeg","PolyOut","ringGeom","MultiPolyOut","_composePolys","polyGeom","addInterior","SweepLine","queue","arguments","nextSeg","prevMySplitter","prevInter","getIntersection","newEventsFromSplit","_splitSafely","nextMySplitter","nextInter","_newEventsFromSplit","mySplitter","cmpSplitters","_newEventsFromSplit2","inter","_newEventsFromSplit3","_i3","_iMax3","_newEventsFromSplit4","_i4","_iMax4","POLYGON_CLIPPING_MAX_QUEUE_SIZE","process","POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS","Operation","moreGeoms","multipolys","subject","mpA","_j","_jMax","sweepLine","prevQueueSize","_evt","union","_len","_key","run","intersection$1","_len2","_key2","xor","_len3","_key3","difference","subjectGeom","_len4","clippingGeoms","_key4"],"sourceRoot":""}