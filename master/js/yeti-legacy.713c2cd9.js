(self["webpackChunkc2c_ui"]=self["webpackChunkc2c_ui"]||[]).push([[159],{45927:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return en}});var i,r,a,s,o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"section"},[e("html-header",{attrs:{title:"Yeti"}}),t._v(" "),e("div",{staticClass:"box"},[e("h1",{staticClass:"title is-1"},[e("div",{staticClass:"yeti-icon is-inline-block"},[e("icon-yeti")],1),t._v(" "),e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("YETI - A preparation tool for your outing")])])]),t._v(" "),e("div",{staticClass:"yeti-app"},[t.showDisclaimer?e("div",{staticClass:"box yeti-overlay"},[e("yeti-article",{staticClass:"yeti-article--disclaimer",attrs:{article:t.articles.disclaimer}}),t._v(" "),e("form",{attrs:{action:"#"},on:{submit:t.onSubmitDisclaimer}},[e("input-checkbox",{directives:[{name:"translate",rawName:"v-translate"}],model:{value:t.checkDisclaimer,callback:function(e){t.checkDisclaimer=e},expression:"checkDisclaimer"}},[t._v("\n          I read and understood the interest and limitations of YETI\n        ")]),t._v(" "),e("button",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button is-primary",attrs:{disabled:!t.checkDisclaimer}},[t._v("Launch YETI")])],1)],1):t._e(),t._v(" "),"faq"===t.$route.params.page?e("div",{staticClass:"box yeti-overlay"},[e("p",[e("router-link",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{to:"."}},[t._v("Go back to YETI")])],1),t._v(" "),e("yeti-article",{staticClass:"yeti-article--disclaimer",attrs:{article:t.articles.disclaimer}}),t._v(" "),e("yeti-article",{attrs:{article:t.articles.faq}})],1):t._e(),t._v(" "),e("div",{staticClass:"columns yeti-content"},[e("div",{staticClass:"column is-6-tablet is-6-desktop is-5-widescreen is-4-fullhd form-container"},[e("div",{staticClass:"columns mb-0 yeti-columns--reverse is-mobile"},[e("ul",{staticClass:"column is-narrow pb-0"},[e("li",[e("router-link",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"is-block yetitabs-link",attrs:{to:t.$route.fullPath+"/faq"}},[t._v("\n                FAQ?\n              ")])],1)]),t._v(" "),e("tabs",{attrs:{tabs:t.tabs}})],1),t._v(" "),e("div",{staticClass:"box"},[e("panel",{ref:"panel0",staticClass:"is-relative",attrs:{index:0}},[e("validation-button",{staticClass:"is-hidden-mobile yeti-validation--top",attrs:{"current-error":t.currentError,loading:t.promise,tabindex:"-1"},on:{click:t.compute}}),t._v(" "),e("sub-panel-bra"),t._v(" "),e("sub-panel-methods",{on:{"warn-about-method-bra":t.warnAboutMethodBra}}),t._v(" "),e("validation-button",{directives:[{name:"show",rawName:"v-show",value:t.method.type,expression:"method.type"}],staticClass:"yeti-validation--bottom",attrs:{"current-error":t.currentError,loading:t.promise},on:{click:t.compute}})],1),t._v(" "),e("panel",{ref:"panel1",attrs:{index:1}},[e("sub-panel-course")],1)],1),t._v(" "),t._m(0)]),t._v(" "),e("yeti-map",{ref:"map",attrs:{"yeti-data":t.yetiData,"yeti-extent":t.yetiExtent}})],1)])],1)},l=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"box yeti-logos"},[e("div",{staticClass:"columns is-mobile is-vcentered"},[e("div",{staticClass:"column has-text-centered"},[e("a",{attrs:{href:"http://www.ensg.eu"}},[e("picture",[e("source",{attrs:{srcset:n(16448),type:"image/webp"}}),t._v(" "),e("source",{attrs:{srcset:n(86236),type:"image/avif"}}),t._v(" "),e("img",{attrs:{src:n(61070),alt:"Logo ENSG",width:"120",loading:"lazy"}})])])]),t._v(" "),e("div",{staticClass:"column has-text-centered"},[e("a",{attrs:{href:"https://www.petzl.com/fondation/fondation-petzl?language=fr"}},[e("picture",[e("source",{attrs:{srcset:n(99576),type:"image/webp"}}),t._v(" "),e("source",{attrs:{srcset:n(7085),type:"image/avif"}}),t._v(" "),e("img",{attrs:{src:n(32102),alt:"Logo Fondation Petzl",width:"90",loading:"lazy"}})])])])])])}],u=n(88478),c=(n(21249),n(92222),n(9669)),h=n.n(c),v=(n(82526),n(41817),function(){var t=this,e=t._self._c;return t.document?e("div",{staticClass:"yeti-article"},[e("sub-panel-title",[t._v(t._s(t.title))]),t._v(" "),e("markdown-section",{attrs:{document:t.document,field:t.fields.description,"hide-title":""}})],1):t._e()}),d=[],f=function(){var t=this,e=t._self._c;return e("div",{staticClass:"columns is-mobile"},[e("div",{staticClass:"column"},[e("h2",{staticClass:"title is-3"},[t._t("default")],2)])])},m=[],p=n(1001),g={},y=(0,p.Z)(g,f,m,!1,null,"43c30758",null),w=y.exports,x=n(74577),b=n(73467),_=n(68884),A={components:{SubPanelTitle:w,MarkdownSection:_.Z},props:{article:{type:Object,required:!0}},data:function(){return{promise:null}},computed:{id:function(){return this.article.id},title:function(){return this.article.title},document:function(){var t,e;return null!==(t=null===(e=this.promise)||void 0===e?void 0:e.data)&&void 0!==t?t:null},fields:function(){return b.Z.objectDefinitions.article.fields},lang:function(){return this.$language.current}},watch:{lang:function(){this.cookDocument()}},mounted:function(){this.cookDocument()},methods:{cookDocument:function(){var t=this;x.Z.article.getCooked(this.id,this.$language.current).then((function(e){t.promise=e}))}}},S=A,k=(0,p.Z)(S,v,d,!1,null,"6c55e92e",null),E=k.exports,L=function(){var t=this,e=t._self._c;return e("div",{staticClass:"yeti-panel",attrs:{role:"tabpanel",id:"panel"+t.index,"aria-labelledby":"tab"+t.index,hidden:t.activeTab!==t.index}},[t._t("default")],2)},C=[],P=(n(9653),n(3336)),M=(n(38862),n(20144)),Z={API_URL:"https://api.ensg.eu/",DANGER_MAX_WHEN_MRD:3,VALID_MINIMUM_MAP_ZOOM:13,activeTab:0,bra:{high:null,low:null,altiThreshold:null,isDifferent:!1},method:{type:null,orientation:[],potentialDanger:null,wetSnow:!1,groupSize:1},areas:[],areaOk:!0,showAreas:!1,features:[],featuresTitle:"New route",featuresLength:0,mountains:{all:[],visible:[]},bulletinsLoaded:!1,showAvalancheBulletins:!1,mapZoom:0,drawingMode:!1,validSimplifyTolerance:!1},F=M["default"].observable(JSON.parse(JSON.stringify(Z))),D=new M["default"]({computed:{DANGER_MAX_WHEN_MRD:function(){return F.DANGER_MAX_WHEN_MRD},VALID_MINIMUM_MAP_ZOOM:function(){return F.VALID_MINIMUM_MAP_ZOOM},activeTab:function(){return F.activeTab},bra:function(){return F.bra},method:function(){return F.method},areas:function(){return F.areas},areaOk:function(){return F.areaOk},showAreas:function(){return F.showAreas},features:function(){return F.features},hasFeatures:function(){return!!F.features.length},featuresTitle:function(){return F.featuresTitle},featuresLength:function(){return F.featuresLength},mountains:function(){return F.mountains},bulletinsLoaded:function(){return F.bulletinsLoaded},showAvalancheBulletins:function(){return F.showAvalancheBulletins},mapZoom:function(){return F.mapZoom},drawingMode:function(){return F.drawingMode},validSimplifyTolerance:function(){return F.validSimplifyTolerance}},methods:{setActiveTab:function(t){F.activeTab=t},setBra:function(t,e){F.bra[t]=e},setMethod:function(t,e){F.method[t]=e},setAreas:function(t){F.areas=t},setAreaOk:function(t){F.areaOk=t},setShowAreas:function(t){F.showAreas=t},setFeatures:function(t){F.features=t},setFeaturesTitle:function(t){F.featuresTitle=t},setFeaturesLength:function(t){F.featuresLength=t},setAllMountains:function(t){F.mountains.all=t},setVisibleMountains:function(t){F.mountains.visible=t},setShowAvalancheBulletins:function(t){F.showAvalancheBulletins=t},setBulletinsLoaded:function(t){F.bulletinsLoaded=t},setMapZoom:function(t){F.mapZoom=t},setDrawingMode:function(t){F.drawingMode=t},setValidSimplifyTolerance:function(t){F.validSimplifyTolerance=t,t?F.drawingMode&&(F.tmpDrawingMode=!0,this.setDrawingMode(!1)):F.tmpDrawingMode&&(this.setDrawingMode(!0),delete F.tmpDrawingMode)},setDefault:function(){for(var t in F)if("object"!==(0,P.Z)(F[t])||Array.isArray(F[t]))F[t]=Z[t];else for(var e in F[t])F[t][e]=Z[t][e]},fetchApi:function(t){return h().get(F.API_URL+t)},fetchAreas:function(){return this.fetchApi("yeti-extent")},fetchMountains:function(){return this.fetchApi("zonesbra")},fetchBulletins:function(){return this.fetchApi("bra")}}}),N=D,I=(0,p.Z)(N,i,r,!1,null,null,null),T=I.exports,B={props:{index:{type:Number,required:!0}},computed:{activeTab:function(){return T.activeTab}}},O=B,R=(0,p.Z)(O,L,C,!1,null,"463f63b6",null),G=R.exports,V=function(){var t=this,e=t._self._c;return e("div",{staticClass:"yeti-subpanel"},[e("sub-panel-title",[e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Danger level")])]),t._v(" "),e("div",{staticClass:"columns is-mobile"},[e("div",{staticClass:"column"},[e("div",{staticClass:"inputs-bra",class:{"inputs-bra-different":t.bra.isDifferent}},[e("svg",{attrs:{viewBox:"0 0 100 100",width:"120",height:"120"}},[e("polygon",{staticStyle:{fill:"none",stroke:"#000","stroke-miterlimit":"10"},attrs:{points:"2.2,89.5 97.5,89.5 62.7,11.9 48,32.9 31.8,25.5 "}}),t._v(" "),e("line",{directives:[{name:"show",rawName:"v-show",value:t.bra.isDifferent,expression:"bra.isDifferent"}],staticStyle:{fill:"none",stroke:"#000","stroke-miterlimit":"10"},attrs:{x1:"10",y1:"61.5",x2:"90",y2:"61.5"}})]),t._v(" "),e("div",{staticClass:"input-bra-high select is-small"},[e("select",{attrs:{id:"selectBra","aria-label":t.$gettext("High danger level from the avalanche bulletin")},domProps:{value:t.bra.high},on:{change:function(e){return t.onChange(e,"high")}}},[e("option",{attrs:{selected:""},domProps:{value:null}}),t._v(" "),e("option",{domProps:{value:1}},[t._v("1")]),t._v(" "),e("option",{domProps:{value:2}},[t._v("2")]),t._v(" "),e("option",{domProps:{value:3}},[t._v("3")]),t._v(" "),e("option",{domProps:{value:4}},[t._v("4")])])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.bra.isDifferent,expression:"bra.isDifferent"}],staticClass:"input-bra-threshold control"},[e("label",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{for:"inputThreshold"}},[t._v("Altitude")]),t._v(" "),e("input",{staticClass:"input is-small",attrs:{id:"inputThreshold",type:"number",min:"0",max:"4800",step:"100",maxlength:"4"},domProps:{value:t.bra.altiThreshold},on:{change:function(e){return t.onChange(e,"altiThreshold")}}})]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.bra.isDifferent,expression:"bra.isDifferent"}],staticClass:"input-bra-low select is-small"},[e("select",{attrs:{"aria-label":"$gettext('Low danger level from the avalanche bulletin')"},domProps:{value:t.bra.low},on:{change:function(e){return t.onChange(e,"low")}}},[e("option",{attrs:{selected:""},domProps:{value:null}}),t._v(" "),e("option",{domProps:{value:1}},[t._v("1")]),t._v(" "),e("option",{domProps:{value:2}},[t._v("2")]),t._v(" "),e("option",{domProps:{value:3}},[t._v("3")]),t._v(" "),e("option",{domProps:{value:4}},[t._v("4")])])])]),t._v(" "),e("div",[e("input-checkbox",{staticClass:"control--bradifferent",attrs:{value:t.bra.isDifferent},on:{input:function(e){return t.onChange(e,"isDifferent")}}},[e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Different high/low danger?")])])],1)])]),t._v(" "),e("dropdown-content",{scopedSlots:t._u([{key:"content",fn:function(){return[t.showVisibleMountains?e("div",[e("div",{staticClass:"mb-2"},[e("input-checkbox",{attrs:{value:t.showAvalancheBulletins},on:{input:t.onShowAvalancheBulletins}},[e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Visible on map")])])],1),t._v(" "),e("dl",t._l(t.visibleMountains,(function(n,i){return e("div",{key:i},[e("dt",[t._v("\n              "+t._s(i)+"\n            ")]),t._v(" "),e("div",{staticClass:"yetimountains-list px-4 py-3"},t._l(n,(function(n){return e("dd",{key:n.name},[e("a",{attrs:{href:n.urls[0].url,target:"_blank"}},[e("fa-icon",{attrs:{icon:"external-link-alt"}}),t._v("\n                  "+t._s(n.name)+"\n                ")],1)])})),0)])})),0)]):e("div",[e("info",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"column"},[t._v("Massifs could not be loaded")])],1)]},proxy:!0}])},[e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Avalanche bulletins")]),t._v(" "),t.showVisibleMountains?e("counter",[t._v(t._s(t.countVisibleMountains))]):t._e(),t._v(" "),t.showAvalancheBulletins?e("fa-icon",{staticClass:"has-text-primary",attrs:{icon:"check-circle",title:t.$gettext("Visible on map")}}):t._e()],1)],1)},z=[],Y=(n(85827),n(41539),n(26833),function(){var t=this,e=t._self._c;return e("span",{staticClass:"yeti-counter",class:{"has-background-primary":t.isPrimary}},[t._t("default")],2)}),U=[],W={props:{isPrimary:{type:Boolean,default:!1}}},Q=W,J=(0,p.Z)(Q,Y,U,!1,null,"2cdf4d2c",null),j=J.exports,H=function(){var t=this,e=t._self._c;return e("div",{staticClass:"dropdown-content"},[e("div",[e("h3",{staticClass:"dropdown-content-title",class:{"is-open":t.opened},on:{click:t.switchOpen}},[t._t("default"),t._v(" "),e("fa-icon",{staticClass:"dropdown-content-arrow is-size-6 is-pulled-right has-cursor-pointer no-print",attrs:{icon:"angle-down",rotation:t.opened?180:void 0}})],2)]),t._v(" "),t.opened?e("div",{staticClass:"p-3"},[t._t("content")],2):t._e()])},q=[],X={data:function(){return{opened:!1}},methods:{switchOpen:function(){this.opened=!this.opened}}},K=X,$=(0,p.Z)(K,H,q,!1,null,"6d88c66c",null),tt=$.exports,et=function(){var t=this,e=t._self._c;return e("div",{staticClass:"info-text mt-3 mb-3 px-3",class:"is-"+t.type},[e("fa-icon",{staticClass:"info-icon mt-1 ml-1",attrs:{icon:t.icon}}),t._v(" "),e("div",{staticClass:"info-content"},[t._t("default")],2)],1)},nt=[],it={props:{type:{type:String,default:"info"}},data:function(){return{icons:{info:"info-circle",warning:"exclamation-circle",help:"question-circle"}}},computed:{icon:function(){return this.icons[this.type]}}},rt=it,at=(0,p.Z)(rt,et,nt,!1,null,"213fc47c",null),st=at.exports,ot={components:{Counter:j,DropdownContent:tt,Info:st,SubPanelTitle:w},data:function(){return{showMountainsList:!1}},computed:{bra:function(){return T.bra},visibleMountains:function(){return T.mountains.visible},showAvalancheBulletins:function(){return T.showAvalancheBulletins},showVisibleMountains:function(){return this.countVisibleMountains>=0},countVisibleMountains:function(){return this.visibleMountains?Object.values(this.visibleMountains).reduce((function(t,e){return t+e.length}),0):-1}},watch:{"bra.isDifferent":"checkBraIsDifferent"},methods:{onChange:function(t,e){var n="isDifferent"===e?t:t.target.value;T.setBra(e,n)},checkBraIsDifferent:function(){this.bra.isDifferent||(T.setBra("low",null),T.setBra("altiThreshold",null))},onShowAvalancheBulletins:function(t){T.setShowAvalancheBulletins(t)}}},lt=ot,ut=(0,p.Z)(lt,V,z,!1,null,"7b4246c9",null),ct=ut.exports,ht=(n(82772),function(){var t=this,e=t._self._c;return e("div",{staticClass:"yeti-subpanel"},[e("sub-panel-title",[e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Route")])]),t._v(" "),t.features.length?e("div",[e("div",{staticClass:"columns is-mobile"},[e("div",{staticClass:"column"},[e("p",{staticClass:"features-title"},[e("icon-route",{staticClass:"icon document-icon"}),t._v(" "),e("fa-icon",{staticClass:"icon edit-icon",attrs:{icon:"pen"}}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:!t.hasFeaturesTitle,expression:"!hasFeaturesTitle"},{name:"translate",rawName:"v-translate"}],staticClass:"features-title-text features-title-placeholder",on:{click:t.onEditNewFeaturesTitle}},[t._v("\n            Add title…\n          ")]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.hasFeaturesTitle,expression:"hasFeaturesTitle"}],ref:"featuresTitle",staticClass:"features-title-text features-title-content",attrs:{tabindex:"0",contenteditable:"",spellcheck:"false"},on:{blur:t.onEditFeaturesTitle,keypress:function(t){if(!t.type.indexOf("key")&&13!==t.keyCode)return null;t.preventDefault()}}},[t._v(t._s(t.featuresTitle))])],1)]),t._v(" "),e("div",{staticClass:"column is-narrow"},[e("button",{staticClass:"button is-secondary is-small",on:{click:t.onRemoveFeatures}},[e("fa-icon",{staticClass:"trash-icon",attrs:{icon:"trash"}}),t._v(" "),e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Delete route")])],1)])]),t._v(" "),e("div",{staticClass:"ml-5 mb-5"},[e("p",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"is-size-7 is-italic mb-1 has-text-grey"},[t._v("Lines chunks")]),t._v(" "),e("features-list",{attrs:{features:t.features}})],1),t._v(" "),e("simplify-tool",{ref:"simplifyTool"}),t._v(" "),e("info",{attrs:{type:"help"}},[e("p",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Drawing tips")]),t._v(" "),e("ul",{staticClass:"content-ul"},[e("li",[e("strong",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{"translate-context":"yeti"}},[t._v("Draw")]),t._v(" "),e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("new lines chunks")])]),t._v(" "),e("li",[e("strong",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{"translate-context":"yeti"}},[t._v("Delete")]),t._v(" "),e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("last point with the Backspace key")])])]),t._v(" "),e("p",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("On a drawn line")]),t._v(" "),e("ul",{staticClass:"content-ul"},[e("li",[e("strong",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{"translate-context":"yeti"}},[t._v("Edit")]),t._v(" "),e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("points by moving them")])]),t._v(" "),e("li",[e("strong",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{"translate-context":"yeti"}},[t._v("Create")]),t._v(" "),e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("a new point on an existing line")])]),t._v(" "),e("li",[e("strong",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Delete a point")]),t._v(" "),e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("with Alt + clic")])])]),t._v(" "),e("p",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("From the interface")]),t._v(" "),e("ul",{staticClass:"content-ul"},[e("li",[e("strong",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Delete a line chunk")])]),t._v(" "),e("li",[e("strong",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Delete route")]),t._v(" "),e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("to start or load a new one")])])])]),t._v(" "),e("sub-panel-title",[e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Export")])]),t._v(" "),e("div",{staticClass:"columns is-vcentered is-mobile"},[e("div",{staticClass:"column"},[e("ul",{staticClass:"form-export"},t._l(t.formats,(function(n){return e("li",{key:n,staticClass:"control is-flex"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.format,expression:"format"}],staticClass:"is-checkradio is-primary",attrs:{id:"format"+n,type:"radio",name:"exportFormat"},domProps:{value:n,checked:t._q(t.format,n)},on:{change:function(e){t.format=n}}}),t._v(" "),e("label",{attrs:{for:"format"+n}},[t._v(t._s(n))])])})),0)]),t._v(" "),e("div",{staticClass:"column is-narrow"},[e("button",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button is-primary",class:{"is-disabled":t.validSimplifyTolerance},on:{click:t.downloadCourse}},[t._v("\n          Export route\n        ")])])])],1):e("div",[e("p",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("No route right now")]),t._v(" "),e("div",{staticClass:"load-gpx"},[e("button",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button is-primary",class:{"is-loading":t.loading},attrs:{disabled:t.loading},on:{click:t.onLoadGpx}},[t._v("\n        Upload a GPS track\n      ")]),t._v(" "),e("div",{staticClass:"control upload-button"},[e("input",{ref:"gpxFileInput",attrs:{type:"file",accept:".gpx"},on:{change:t.uploadGpx}})]),t._v(" "),e("info",{staticClass:"mt-5",attrs:{type:"help"}},[e("p",[e("strong",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("To draw (and edit) directly on the map")]),t._v(" "),e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("you need to activate drawing mode")])])])],1)])],1)}),vt=[],dt=n(32912),ft=function(){var t=this,e=t._self._c;return e("ul",{staticClass:"featureslist"},t._l(t.features,(function(n,i){return e("li",{key:i,staticClass:"featureslist-item tag",on:{mouseenter:function(e){return t.showFeature(n)},mouseleave:function(e){return t.hideFeature(n)}}},[e("span",[t._v(t._s(t.nbPointsOnFeature(n))+" points")]),t._v(" "),e("button",{staticClass:"delete is-small",on:{click:function(e){return t.removeFeature(n)}}},[t._v("x")])])})),0)},mt=[],pt={props:{features:{type:Array,required:!0}},methods:{removeFeature:function(t){T.$emit("removeFeature",t)},showFeature:function(t){t.setStyle(t.get("highlightedStyle"))},hideFeature:function(t){t.setStyle(t.get("normalStyle"))},nbPointsOnFeature:function(t){return t.getGeometry().getCoordinates().length}}},gt=pt,yt=(0,p.Z)(gt,ft,mt,!1,null,"77f7ceed",null),wt=yt.exports,xt=function(){var t=this,e=t._self._c;return e("dropdown-content",{staticClass:"mb-5",scopedSlots:t._u([{key:"content",fn:function(){return[e("p",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Select tolerance (preview result on map)")]),t._v(" "),e("div",{staticClass:"is-flex is-justify-content-center is-flex-wrap-wrap mt-3 mb-4"},t._l(t.tolerances,(function(n,i){return e("div",{key:n,staticClass:"mb-2 is-flex-grow-1"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.toleranceDistance,expression:"toleranceDistance"}],staticClass:"is-checkradio is-primary",attrs:{id:"tolerance"+i,type:"radio",name:"tolerances"},domProps:{value:n,checked:t._q(t.toleranceDistance,n)},on:{change:[function(e){t.toleranceDistance=n},t.onPreviewSimplify]}}),t._v(" "),e("label",{staticClass:"mr-0",attrs:{for:"tolerance"+i}},[t._v(t._s(t.tolerancesText[i]))])])})),0),t._v(" "),e("div",{staticClass:"is-flex is-justify-content-flex-end is-align-items-center"},[e("div",[e("button",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button",attrs:{disabled:!t.validToleranceDistance},on:{click:t.initialize}},[t._v("Cancel")]),t._v(" "),e("button",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button is-primary",attrs:{disabled:!t.validToleranceDistance},on:{click:t.onSimplify}},[t._v("\n          Simplify\n        ")])])]),t._v(" "),e("info",[t._v("\n      "+t._s(t.featuresLength)+" "),e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("points")]),t._v(" "),t.validToleranceDistance?e("strong",[t._v("\n        ("),e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("after:")]),t._v(" "+t._s(t.featuresSimplifiedLength)+" "),e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("points")]),t._v(")\n      ")]):t._e()]),t._v(" "),t.validToleranceDistance?e("info",{attrs:{type:"warning"}},[e("strong",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Be careful,")]),t._v(" "),e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("\n        this is a preview. Geometry is not simplified yet. Map interactions and export are disabled.\n      ")])]):t._e(),t._v(" "),e("info",{staticClass:"mt-5",attrs:{type:"help"}},[e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Create a simplified version of the geometry by reducing the amount of points")])])]},proxy:!0}])},[e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Simplify")]),t._v(" "),t.validToleranceDistance?e("fa-icon",{staticClass:"has-text-danger ml-1",attrs:{icon:"exclamation-circle",title:t.$gettext("Not simplified yet")}}):t._e()],1)},bt=[],_t={components:{DropdownContent:tt,Info:st},data:function(){return{tolerances:[0,25,50,100,200],tolerancesText:[this.$gettext("No"),"25m","50m","100m","200m"],toleranceDistance:0}},computed:{features:function(){return T.features},featuresLength:function(){return T.featuresLength},featuresSimplifiedLength:function(){return this.features.map((function(t){return t.getGeometry().getCoordinates().length})).reduce((function(t,e){return t+e}))},validToleranceDistance:function(){return 0!==this.toleranceDistance}},watch:{toleranceDistance:function(){this.validToleranceDistance?T.setValidSimplifyTolerance(!0):T.setValidSimplifyTolerance(!1)}},destroyed:function(){T.setValidSimplifyTolerance(!1)},methods:{onPreviewSimplify:function(){T.$emit("previewSimplify",this.toleranceDistance)},onSimplify:function(){T.$emit("simplify"),this.initialize()},initialize:function(){this.toleranceDistance=0,this.onPreviewSimplify()}}},At=_t,St=(0,p.Z)(At,xt,bt,!1,null,null,null),kt=St.exports,Et=n(62869),Lt=n(38854),Ct={components:{FeaturesList:wt,Info:st,SimplifyTool:kt,SubPanelTitle:w},data:function(){return{newFeaturesTitle:!1,loading:!1,formats:["GPX","KML"],format:"GPX"}},computed:{features:function(){return T.features},featuresTitle:function(){return T.featuresTitle},validSimplifyTolerance:function(){return T.validSimplifyTolerance},hasFeaturesTitle:function(){return!(!this.featuresTitle.length&&!this.newFeaturesTitle)}},methods:{onEditFeaturesTitle:function(t){t.target.innerText.length||(this.newFeaturesTitle=!1),T.setFeaturesTitle(t.target.innerText)},onEditNewFeaturesTitle:function(){var t=this;this.newFeaturesTitle=!0,this.$nextTick((function(){t.$refs.featuresTitle.focus()}))},onLoadGpx:function(){this.$refs.gpxFileInput.click()},onRemoveFeatures:function(){confirm(this.$gettext("Confirm delete"))&&(T.$emit("removeFeatures"),this.$refs.simplifyTool.initialize())},uploadGpx:function(t){var e=this;this.loading=!0;var n=new FileReader;n.onload=function(){e.loading=!1,T.$emit("gpx",n.result)},n.readAsText(t.target.files[0]),this.$refs.gpxFileInput.value="",T.$emit("gpx",null)},downloadCourse:function(){if(this.validSimplifyTolerance)return window.alert("Export is disabled. You must confirm simplified geometry first.");"GPX"===this.format?this.downloadFeatures(new Et.Z.format.GPX,".gpx","application/gpx+xml"):"KML"===this.format&&this.downloadFeatures(new Et.Z.format.KML,".kml","application/vnd.google-earth.kml+xml")},downloadFeatures:function(t,e,n){var i=this.features;i[0].set("name",this.featuresTitle);var r=this.setFilename(e),a=t.writeFeatures(i,{featureProjection:"EPSG:3857"});Lt.Z.download(a,r,n+";charset=utf-8")},setFilename:function(t){return(0,dt.Z)(new Date,"yyyy-MM-dd_HH-mm-ss")+t}}},Pt=Ct,Mt=(0,p.Z)(Pt,ht,vt,!1,null,"3739719b",null),Zt=Mt.exports,Ft=(n(47941),function(){var t=this,e=t._self._c;return e("div",{staticClass:"yeti-subpanel"},[e("sub-panel-title",[e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Methods")])]),t._v(" "),e("div",{staticClass:"columns is-mobile yetitabs"},t._l(Object.keys(t.methods),(function(n){return e("div",{key:n,staticClass:"column yetitab"},[e("div",{staticClass:"control yetitab-control",class:{"yetitab-control--selected":t.method.type===n}},[e("input",{staticClass:"is-checkradio is-primary",attrs:{id:"c2c-method-"+n,type:"radio",name:"method",disabled:"mrd"===n&&(4==t.bra.high||4==t.bra.low)},domProps:{value:n,checked:n===t.method.type},on:{change:function(e){return t.onChange(e,"type")}}}),t._v(" "),e("label",{staticClass:"yetitab-label",attrs:{for:"c2c-method-"+n},on:{click:function(e){return t.warnAboutMethodBra(n)}}},[t._v("\n          "+t._s(t.methods[n][0])+"\n          "),e("span",{staticClass:"is-size-7",class:{"has-text-grey":n!==t.method.type}},[t._v(t._s(t.methods[n][1]))])])])])})),0),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"mrd"==t.method.type,expression:"method.type == 'mrd'"}]},[e("p",[e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("With the")]),t._v(" "),e("strong",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Beginner Reduction Method")]),t._v(" "),e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("\n        (MRD), you do not have to enter any parameters other than the danger level(s) given by the avalanche bulletin.\n      ")])]),t._v(" "),e("info",{attrs:{type:"help"}},[e("p",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("\n        As the name suggests, this method is intended for beginners. Therefore, the safety margin must be particularly\n        important. No parameter other than the danger level is specified. Orientation is ignored.\n      ")])]),t._v(" "),e("table",{staticClass:"yetiform-danger"},[e("tr",[t._m(0),t._v(" "),e("td",[e("strong",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Danger rating - low")])]),t._v(" "),e("td",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("I must not use slopes > 40°")])]),t._v(" "),e("tr",[t._m(1),t._v(" "),e("td",[e("strong",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Danger rating - moderate")])]),t._v(" "),e("td",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("I must not use slopes > 35°")])]),t._v(" "),e("tr",{staticClass:"multiline"},[t._m(2),t._v(" "),e("td",[e("strong",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Danger rating - considerable")])]),t._v(" "),e("td",[e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("I must not use slopes > 30°")]),t._v(" "),e("br"),t._v(" "),e("small",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("including dominant slopes")])])]),t._v(" "),e("tr",[t._m(3),t._v(" "),e("td",[e("strong",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Danger rating - high to very high")])]),t._v(" "),e("td",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("I choose to cancel the outing")])])])],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"mre"==t.method.type,expression:"method.type == 'mre'"}]},[e("p",[e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("With the")]),t._v(" "),e("strong",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Elementary Reduction Method")]),t._v(" "),e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("\n        (MRE), you can enter the sectors of the compass rose that are reported as critical in the avalanche bulletin.\n      ")])]),t._v(" "),e("input-orientation",{staticClass:"has-text-centered mb-2",attrs:{value:t.method.orientation},on:{input:function(e){return t.onChange(e,"orientation")}}}),t._v(" "),0!=t.method.orientation.length?e("info",[e("span",{directives:[{name:"translate",rawName:"v-translate"}],key:"tr1"},[t._v("Orientations")]),t._v(": "+t._s(t.method.orientation.join(", "))+"\n    ")]):e("info",{attrs:{type:"warning"}},[e("span",{directives:[{name:"translate",rawName:"v-translate"}],key:"tr2"},[t._v("No orientation selected")])]),t._v(" "),e("info",{attrs:{type:"help"}},[e("p",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("\n        Danger level from the avalanche bulletin applies to all orientations. The compass rose distinguishes the most\n        critical sectors presenting an increased risk.\n      ")])]),t._v(" "),e("table",{staticClass:"yetiform-danger"},[e("tr",{staticClass:"multiline"},[t._m(4),t._v(" "),e("td",[e("strong",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Danger rating - low")])]),t._v(" "),e("td",[e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Stay careful while skiing")]),t._v(" "),e("br"),t._v(" "),e("small",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("risk of a rough fall on hard snow")])])]),t._v(" "),e("tr",[t._m(5),t._v(" "),e("td",[e("strong",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Danger rating - moderate")])]),t._v(" "),e("td",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("I must not use slopes > 40°")])]),t._v(" "),e("tr",{staticClass:"multiline"},[t._m(6),t._v(" "),e("td",[e("strong",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Danger rating - considerable")])]),t._v(" "),e("td",[e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("I must not use slopes > 35°")]),t._v(" "),e("br"),t._v(" "),e("small",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("including dominant slopes")])])]),t._v(" "),e("tr",{staticClass:"multiline"},[t._m(7),t._v(" "),e("td",[e("strong",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Danger rating - high")])]),t._v(" "),e("td",[e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("I must not use slopes > 30°")]),t._v(" "),e("br"),t._v(" "),e("small",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("including dominant slopes")])])]),t._v(" "),e("tr",[t._m(8),t._v(" "),e("td",[e("strong",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Danger rating - very high")])]),t._v(" "),e("td",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("I choose to cancel the outing")])])])],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"mrp"==t.method.type,expression:"method.type == 'mrp'"}]},[e("p",[e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("With the")]),t._v(" "),e("strong",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Professional Reduction Method")]),t._v(" "),e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("\n        (MRP), you can refine the hazard potential, set group size and any precautionary measures being considered.\n      ")])]),t._v(" "),e("h3",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"title is-3"},[t._v("Hazard potential")]),t._v(" "),e("ul",{staticClass:"potential-danger-labels has-text-black"},t._l(t.potentialDangerLabels,(function(n){return e("li",{key:n.text,staticClass:"potential-danger-label is-size-5",attrs:{disabled:!t.bra.high||n.text<t.potentialDangerOptions.min||n.text>t.potentialDangerOptions.max,selected:t.method.potentialDanger==n.text},on:{click:function(e){return t.onChange(n.text,"potentialDanger")}}},[e("span",{class:{"is-size-3 has-text-weight-bold":n.val}},[t._v("\n          "+t._s(n.text)+"\n        ")])])})),0),t._v(" "),t.method.potentialDanger?e("info",[e("span",{directives:[{name:"translate",rawName:"v-translate"}],key:"tr1"},[t._v("Hazard potential:")]),t._v("\n      "+t._s(t.method.potentialDanger)+"\n      ("),e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Danger level:")]),t._v(" "+t._s(t.bra.high)+")\n    ")]):e("info",{attrs:{type:"warning"}},[e("span",{directives:[{name:"translate",rawName:"v-translate"}],key:"tr2"},[t._v("No selected hazard potential. Set danger level first.")])]),t._v(" "),e("info",{attrs:{type:"help"}},[e("p",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("\n        The hazard potential is calculated from the danger level of the avalanche bulletin. It can be fine-tuned by\n        selecting a potential within the danger level’s corresponding range. For example: the avalanche bulletin\n        evokes a danger 3 just after a period in danger 4. We can then indicate a hazard potential of 12 instead of 8.\n      ")])]),t._v(" "),e("p",[e("input-checkbox",{attrs:{value:t.method.wetSnow},on:{input:function(e){return t.onChange(e,"wetSnow")}}},[e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Wet snow: orientation not taken into account")])])],1),t._v(" "),e("info",{attrs:{type:"help"}},[e("p",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Be careful, in wet snow, no factor to reduce orientation or attendance can be applied.")])]),t._v(" "),e("h3",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"title is-3"},[t._v("Group")]),t._v(" "),e("ul",t._l(t.groupSizes,(function(n,i){return e("li",{key:i,staticClass:"control"},[e("input",{staticClass:"is-checkradio is-primary",attrs:{id:"c2c-group-size-"+i,type:"radio",name:"groupSize"},domProps:{value:n.value,checked:n.value===t.method.groupSize},on:{change:function(e){return t.onChange(e,"groupSize")}}}),t._v(" "),e("label",{attrs:{for:"c2c-group-size-"+i}},[t._v(t._s(n.text))])])})),0),t._v(" "),e("info",{attrs:{type:"help"}},[e("p",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Group size")]),t._v(" "),e("ul",{staticClass:"content-ul"},[e("li",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Large group = 5 people and more")]),t._v(" "),e("li",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Small group = 2 to 4 people")])]),t._v(" "),e("p",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Load shedding distance")]),t._v(" "),e("ul",{staticClass:"content-ul"},[e("li",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("10 meters minimum while ascending")]),t._v(" "),e("li",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("50 meters while descending")])])]),t._v(" "),e("p",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("\n      The “slope traveled frequently” factor is not taken into account by the application, as it is often difficult to\n      ascertain when preparing for an outing.\n    ")])],1)],1)}),Dt=[function(){var t=this,e=t._self._c;return e("td",[e("img",{attrs:{src:n(65857)+"#level1",loading:"lazy"}})])},function(){var t=this,e=t._self._c;return e("td",[e("img",{attrs:{src:n(65857)+"#level2",loading:"lazy"}})])},function(){var t=this,e=t._self._c;return e("td",[e("img",{attrs:{src:n(65857)+"#level3",loading:"lazy"}})])},function(){var t=this,e=t._self._c;return e("td",[e("img",{attrs:{src:n(65857)+"#level4",loading:"lazy"}})])},function(){var t=this,e=t._self._c;return e("td",[e("img",{attrs:{src:n(65857)+"#level1",loading:"lazy"}})])},function(){var t=this,e=t._self._c;return e("td",[e("img",{attrs:{src:n(65857)+"#level2",loading:"lazy"}})])},function(){var t=this,e=t._self._c;return e("td",[e("img",{attrs:{src:n(65857)+"#level3",loading:"lazy"}})])},function(){var t=this,e=t._self._c;return e("td",[e("img",{attrs:{src:n(65857)+"#level4",loading:"lazy"}})])},function(){var t=this,e=t._self._c;return e("td",[e("img",{attrs:{src:n(65857)+"#level4",loading:"lazy"}})])}],Nt={min:1,max:16,bra:[{min:1,max:2,val:2},{min:3,max:6,val:4},{min:6,max:12,val:8},{min:13,max:16,val:16}]},It={components:{Info:st,SubPanelTitle:w},data:function(){return{methods:{mrd:["MRD",this.$gettext("Beginner")],mre:["MRE",this.$gettext("Elementary")],mrp:["MRP",this.$gettext("Expert")]},groupSizes:[{value:1,text:this.$gettext("No reduction factor")},{value:2.1,text:this.$gettext("Large group with load shedding distance")},{value:2.2,text:this.$gettext("Small group without distance")},{value:3,text:this.$gettext("Small group with load shedding distance")}]}},computed:{bra:function(){return T.bra},method:function(){return T.method},potentialDangerLabels:function(){for(var t=[],e=Nt.min;e<=Nt.max;e++){var n={text:e};2!==e&&4!==e&&8!==e&&16!==e||(n.val=e),t.push(n)}return t},potentialDangerOptions:function(){return this.bra.high?Nt.bra[this.bra.high-1]:{val:void 0,min:1,max:16}}},watch:{"bra.high":"onBraChange"},methods:{onChange:function(t,e){var n=null;n="orientation"===e||"wetSnow"===e||"potentialDanger"===e?t:t.target.value,T.setMethod(e,n)},warnAboutMethodBra:function(t){this.$emit("warn-about-method-bra",t)},onBraChange:function(){this.onChange(this.potentialDangerOptions.val,"potentialDanger")}}},Tt=It,Bt=(0,p.Z)(Tt,Ft,Dt,!1,null,"4ec168e5",null),Ot=Bt.exports,Rt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"column pb-0 mb-0 tabs is-boxed yetitabs"},[e("ul",{attrs:{role:"tablist"}},t._l(t.tabs,(function(n,i){return e("li",{key:n,class:{"is-active":t.activeTab===i},attrs:{role:"presentation"}},[e("a",{ref:"tab",refInFor:!0,staticClass:"yetitabs-link",attrs:{role:"tab",href:"#panel"+i,id:"tab"+i,"aria-selected":t.activeTab===i,tabindex:t.activeTab!==i&&-1},on:{click:function(e){return e.preventDefault(),t.setActiveTab(i)},keydown:function(e){return t.setActiveTabKeyboard(e,i)}}},[t._v("\n        "+t._s(n)+"\n        "),1===i&&t.hasFeatures&&!t.validSimplifyTolerance?e("fa-icon",{staticClass:"ml-1",attrs:{icon:"check-circle"}}):t._e(),t._v(" "),1===i&&t.validSimplifyTolerance?e("fa-icon",{staticClass:"has-text-danger ml-1",attrs:{icon:"exclamation-circle",title:t.$gettext("Not simplified yet")}}):t._e()],1)])})),0)])},Gt=[],Vt={props:{tabs:{type:Array,required:!0}},computed:{activeTab:function(){return T.activeTab},hasFeatures:function(){return T.hasFeatures},validSimplifyTolerance:function(){return T.validSimplifyTolerance}},methods:{setActiveTab:function(t){this.$refs.tab[t].focus(),T.setActiveTab(t)},setActiveTabKeyboard:function(t,e){var n=37,i=39,r=40,a=t.which===n?e-1:t.which===i?e+1:t.which===r?"down":null;null!==a&&(t.preventDefault(),"down"===a?this.$parent.$refs["panel"+e].$el.focus():this.tabs[a]&&this.setActiveTab(a))}}},zt=Vt,Yt=(0,p.Z)(zt,Rt,Gt,!1,null,"64dc426c",null),Ut=Yt.exports,Wt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"columns"},[e("div",{staticClass:"column has-text-right"},[e("button",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button is-primary",class:{"is-loading":t.loading},attrs:{disabled:t.loading,tabindex:t.tabindex},on:{click:function(e){return t.$emit("click")}}},[t._v("\n      Compute risk\n    ")]),t._v(" "),t.currentError?e("p",{staticClass:"yetiform-error"},[e("span",[t._v("\n        "+t._s(t.currentError)+"\n      ")])]):t._e()])])},Qt=[],Jt={props:{currentError:{type:String,default:""},loading:{type:[Promise,Object],default:null},tabindex:{type:String,default:"0"}}},jt=Jt,Ht=(0,p.Z)(jt,Wt,Qt,!1,null,"ad96ba08",null),qt=Ht.exports,Xt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"column map-container"},[e("div",{staticStyle:{width:"100%",height:"100%"}},[e("div",{ref:"map",staticStyle:{width:"100%",height:"100%"}}),t._v(" "),e("area-layer"),t._v(" "),e("avalanche-bulletins-layer"),t._v(" "),e("yeti-layer",{attrs:{data:t.yetiData,extent:t.yetiExtent}}),t._v(" "),e("route-layer"),t._v(" "),e("div",{ref:"layerSwitcherButton",staticClass:"ol-control ol-control-layer-switcher-button",attrs:{title:t.$gettext("Layers","Map controls")}},[e("button",{on:{click:function(e){e.stopPropagation(),t.showLayerSwitcher=!t.showLayerSwitcher}}},[e("fa-layers",[e("fa-icon",{attrs:{icon:"layer-group"}}),t._v(" "),t.atLeastOneYetiLayerIsShown?e("fa-icon",{attrs:{icon:"circle",transform:"shrink-2 up-10 right-10"}}):t._e(),t._v(" "),t.atLeastOneYetiLayerIsShown?e("fa-icon",{staticClass:"icon-notification",attrs:{icon:"check-circle",inverse:"",transform:"shrink-2 up-10 right-10"}}):t._e()],1)],1)]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showLayerSwitcher,expression:"showLayerSwitcher"}],ref:"layerSwitcher",staticClass:"ol-control ol-control-layer-switcher",on:{click:function(t){t.stopPropagation()}}},[e("div",[e("header",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Base layer")]),t._v(" "),t._l(t.cartoLayers,(function(n,i){return e("div",{key:n.get("title"),staticClass:"map-control-listitem"},[e("input",{attrs:{id:"carto-checkbox"+i,type:"radio"},domProps:{checked:n==t.visibleCartoLayer},on:{change:function(e){t.visibleCartoLayer=n}}}),t._v(" "),e("label",{attrs:{for:"carto-checkbox"+i}},[t._v(t._s(t.$gettext(n.get("title"),"Map layer")))])])}))],2),t._v(" "),e("div",[e("header",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Slopes")]),t._v(" "),t._l(t.dataLayers,(function(n,i){return e("div",{key:n.get("title"),staticClass:"map-control-listitem"},[e("input",{attrs:{id:"data-checkbox"+i,type:"checkbox"},domProps:{checked:n.getVisible()},on:{change:function(e){return t.toggleMapDataLayer(n)}}}),t._v(" "),e("label",{attrs:{for:"data-checkbox"+i}},[t._v(t._s(t.$gettext(n.get("title"),"Map slopes layer")))])])})),t._v(" "),e("header",[t._v("YETI")]),t._v(" "),t._l(t.yetiLayers,(function(n,i){return e("div",{key:n.title,staticClass:"map-control-listitem"},[e("input",{attrs:{id:"yeti-checkbox"+i,type:"checkbox"},domProps:{checked:n.checked},on:{change:n.action}}),t._v(" "),e("label",{attrs:{for:"yeti-checkbox"+i}},[t._v(t._s(n.title))])])}))],2)]),t._v(" "),e("div",{ref:"recenterOnControl",staticClass:"ol-control ol-control-recenter-on"},[e("input",{attrs:{type:"text",placeholder:t.$gettext("Recenter on...")},on:{input:t.searchRecenterPropositions}})]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showRecenterOnPropositions,expression:"showRecenterOnPropositions"}],ref:"recenterOnPropositions",staticClass:"ol-control ol-control-recenter-on-propositions"},[t.recenterPropositions&&t.recenterPropositions.data&&t.recenterPropositions.data.features?e("ul",t._l(t.recenterPropositions.data.features,(function(n,i){return e("li",{key:i,on:{click:function(e){return t.recenterOn(n)}}},[t._v("\n          "+t._s(n.properties.name)+",\n          "),e("small",[t._v(t._s(n.properties.state)+", "+t._s(n.properties.country))])])})),0):t._e()]),t._v(" "),e("div",{ref:"drawingMode",staticClass:"ol-control ol-control-drawing-mode",class:{"is-primary":t.drawingMode}},[e("div",{staticClass:"ol-control-drawing-mode-inner"},[e("input-checkbox",{attrs:{value:t.drawingMode,disabled:t.validSimplifyTolerance},on:{input:t.onDrawingMode}},[e("span",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{title:"Enable drawing and editing features on map"}},[t._v("Drawing mode")]),t._v(" "),e("span",{staticClass:"yeti-tag"},[t.validSimplifyTolerance?e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("DISABLED")]):t.drawingMode?e("span",[t._v("ON")]):e("span",[t._v("OFF")])])])],1)])],1)])},Kt=[],$t=(n(69826),n(57327),n(54747),n(55864)),te={computed:{map:function(){return this.$parent.map},view:function(){return this.map.getView()}},methods:{getExtent:function(t){return this.$parent.getExtent(t)},getFeaturesFromData:function(t){var e=t.data;return(new Et.Z.format.GeoJSON).readFeatures(e,{featureProjection:"EPSG:3857"})},getPropertiesFromFeatures:function(t){return t.map((function(t){return t.getProperties()}))}}},ee=function(t){var e=8,n=10,i=0,r=.8,a=r,s=1;return t&&(t>=e&&t<=n?a=r/(n-e)*(n-t):t>n&&(a=i),t>n&&(s=2)),new Et.Z.style.Style({stroke:new Et.Z.style.Stroke({color:"hsla(20, 90%, 45%, .85)",width:s}),fill:new Et.Z.style.Fill({color:"hsla(20, 90%, 55%, ".concat(a,")")})})},ne={mixins:[te],computed:{mapZoom:function(){return T.mapZoom},areas:function(){return T.areas},showAreas:function(){return T.showAreas}},watch:{showAreas:function(){this.onShowAreas()}},mounted:function(){this.areasLayer=new Et.Z.layer.Vector({renderMode:"image",source:new Et.Z.source.Vector,style:ee()}),this.map.addLayer(this.areasLayer),this.areasLayer.setVisible(this.showAreas),0===this.areas.length&&(T.fetchAreas().then(this.onAreasResult),T.$on("mapMoveEnd",this.onMapMoveEnd))},methods:{onAreasResult:function(t){var e=this.getFeaturesFromData(t),n=this.getPropertiesFromFeatures(e);T.setAreas(n),this.areasLayer.getSource().addFeatures(e),this.isAreaOK()},isAreaOK:function(){var t=this.getExtent("EPSG:3857"),e=!0;for(var n in this.areas){var i=this.areas[n].geometry;if(i.intersectsExtent(t))break;e=!1}T.setAreaOk(e)},onShowAreas:function(){this.areasLayer.setVisible(this.showAreas)},onMapMoveEnd:function(){this.isAreaOK(),this.areasLayer.setStyle(ee(this.mapZoom))}},render:function(){return null}},ie=ne,re=(0,p.Z)(ie,a,s,!1,null,null,null),ae=re.exports,se=function(){var t=this,e=t._self._c;return e("div",{ref:"bulletinsOverlay",staticClass:"bulletins-overlay"},[e("button",{staticClass:"delete is-small button-close",on:{click:t.closeOverlay}},[t._v("x")]),t._v(" "),e("div",{staticClass:"bulletins-header pt-5 pb-3 has-text-centered"},[e("p",{staticClass:"title is-5"},[t._v(t._s(t.overlayData.mountainName))])]),t._v(" "),t.overlayData.danger.low?e("div",{staticClass:"py-2"},[e("p",{staticClass:"is-size-7 px-3 pb-5 bulletins-date"},[e("strong",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Validity date:")]),t._v(" "+t._s(t.overlayValidUntil)+"\n    ")]),t._v(" "),e("div",{staticClass:"is-flex is-justify-content-space-around is-align-items-center px-3"},[e("div",[e("svg",{attrs:{viewBox:t.overlayData.danger.altitude?"0 0 150 100":"0 0 100 100",width:t.overlayData.danger.altitude?120:80,height:"80"}},[e("polygon",{staticStyle:{fill:"none",stroke:"#000","stroke-miterlimit":"10","stroke-width":"1.5"},attrs:{points:"2.2,89.5 97.5,89.5 62.7,11.9 48,32.9 31.8,25.5 "}}),t._v(" "),e("text",{attrs:{x:"50",y:t.overlayData.danger.high?82:65,"text-anchor":"middle","font-family":"sans-serif","font-size":"20px","font-weight":"bold"}},[e("tspan",[t._v(t._s(t.overlayData.danger.low))]),t._v(" "),t.overlayData.danger.lowEvol?e("tspan",[t._v(" ")]):t._e(),t._v(" "),t.overlayData.danger.lowEvol?e("tspan",[t._v(t._s(t.overlayData.danger.lowEvol))]):t._e()]),t._v(" "),t.overlayData.danger.lowEvol?e("g",{staticStyle:{fill:"none",stroke:"#000","stroke-width":"2"}},[e("line",{attrs:{x1:"45",x2:"55",y1:t.overlayData.danger.high?75:58,y2:t.overlayData.danger.high?75:58}}),t._v(" "),e("line",{attrs:{x1:"50",x2:"55",y1:t.overlayData.danger.high?70:53,y2:t.overlayData.danger.high?75:58}}),t._v(" "),e("line",{attrs:{x1:"50",x2:"55",y1:t.overlayData.danger.high?80:63,y2:t.overlayData.danger.high?75:58}})]):t._e(),t._v(" "),e("g",{directives:[{name:"show",rawName:"v-show",value:t.overlayData.danger.high,expression:"overlayData.danger.high"}]},[e("line",{staticStyle:{fill:"none",stroke:"#000","stroke-miterlimit":"10","stroke-width":"1.5"},attrs:{x1:"10",y1:"61.5",x2:"90",y2:"61.5"}}),t._v(" "),e("text",{attrs:{x:"50",y:"54","text-anchor":"middle","font-family":"sans-serif","font-size":"20px","font-weight":"bold"}},[e("tspan",[t._v(t._s(t.overlayData.danger.high))]),t._v(" "),t.overlayData.danger.highEvol?e("tspan",[t._v(" ")]):t._e(),t._v(" "),t.overlayData.danger.highEvol?e("tspan",[t._v(t._s(t.overlayData.danger.highEvol))]):t._e()]),t._v(" "),t.overlayData.danger.highEvol?e("g",{staticStyle:{fill:"none",stroke:"#000","stroke-width":"2"}},[e("line",{attrs:{x1:"45",x2:"55",y1:"46",y2:"46"}}),t._v(" "),e("line",{attrs:{x1:"50",x2:"55",y1:"41",y2:"46"}}),t._v(" "),e("line",{attrs:{x1:"50",x2:"55",y1:"51",y2:"46"}})]):t._e()]),t._v(" "),t.overlayData.danger.altitude?e("text",{attrs:{x:"92",y:"65","font-family":"sans-serif","font-size":"16px","font-weight":"bold"}},[t._v("\n            "+t._s(t.overlayData.danger.altitude)+"m\n          ")]):t._e()])]),t._v(" "),e("input-orientation",{attrs:{value:t.overlayOrientations}})],1),t._v(" "),t.overlayDangerComment||t.overlayOrientationsComment?e("dl",{staticClass:"is-size-6 px-3 pt-3"},[t.overlayDangerComment?e("div",[e("dt",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Danger:")]),t._v(" "),e("dd",[t._v(t._s(t.overlayDangerComment))])]):t._e(),t._v(" "),t.overlayOrientationsComment?e("div",[e("dt",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Orientations:")]),t._v(" "),e("dd",[t._v(t._s(t.overlayOrientationsComment))])]):t._e()]):t._e()]):e("div",{staticClass:"py-2"},[e("p",{staticClass:"is-size-6 p-3"},[e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("No avalanche bulletin right now")])])]),t._v(" "),e("p",{staticClass:"is-size-7 px-3 pt-2 pb-2 bulletins-footer"},[e("strong",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Full bulletin:")]),t._v(" "),t._l(t.overlayData.urls,(function(n,i){return e("span",{key:i,staticClass:"pl-1"},[e("a",{attrs:{href:n.url,target:"_blank"}},[e("fa-icon",{attrs:{icon:"external-link-alt"}}),t._v(" "+t._s(n.title))],1)])}))],2),t._v(" "),e("img",{staticClass:"bulletins-overlay-danger-icon",attrs:{src:t.overlayDangerIcon,alt:""}})])},oe=[];n(2707),n(21703);function le(t,e,n){void 0===n&&(n={});var i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function ue(t,e,n){void 0===n&&(n={});for(var i=0,r=t;i<r.length;i++){var a=r[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}var o={type:"Polygon",coordinates:t};return le(o,e,n)}function ce(t,e,n){void 0===n&&(n={});var i={type:"MultiPolygon",coordinates:t};return le(i,e,n)}function he(t){return"Feature"===t.type?t.geometry:t}var ve=n(32676);function de(t,e,n){void 0===n&&(n={});var i=he(t),r=he(e),a=ve.intersection(i.coordinates,r.coordinates);return 0===a.length?null:1===a.length?ue(a[0],n.properties):ce(a,n.properties)}var fe,me,pe=function(t){var e=8,n=10,i=0,r=.8,a=r,s=1;return t&&(t>=e&&t<=n?a=r/(n-e)*(n-t):t>n&&(a=i),t>n&&(s=2)),new Et.Z.style.Style({stroke:new Et.Z.style.Stroke({color:"rgba(0, 0, 0, .85)",width:s}),fill:new Et.Z.style.Fill({color:"rgba(255, 255, 255, ".concat(a,")")})})},ge=80,ye=function(t){t=t||0;var e=["#999","#cbdb45","#fff100","#f6921e","#ec1c24","#ec1c24"],n='\n    <svg xmlns="http://www.w3.org/2000/svg" width="'.concat(ge,'" height="').concat(ge,'" viewBox="-50 0 200 100">\n      <path d="M5,50L50,5L95,50" fill="white" />\n      <path d="M5,50L50,95L95,50" fill="').concat(e[t],'" />\n      <path d="m50,0l50,50-50,50-50-50zv5L21,33l19-10L50,26l9-8L80,38l2-1L50,5M5,50L50,95L95,50" />\n  ');return n+=0!==t?'\n      <text x="50" y="83" text-anchor="middle" font-family="sans-serif" font-size="40px" font-weight="bold">'.concat(t,"</text>\n    "):'\n      <g stroke-width="5" stroke="black">\n        <line x1="40" x2="60" y1="58" y2="78" />\n        <line x1="40" x2="60" y1="78" y2="58" />\n      </g>\n    ',2===t?n+='\n      <path d="M86,45a7,7,0,106.5-13.5a7,7,0,00-10.5-8a5.4,5.4,0,00-10.2,3" />\n      <path d="M69,27L86,44a5,5,0,104-12a5,5,0,10-9-5a3,3,0,10-8,0" fill="white" />\n      <path d="M85,32a1,1,0,110,8v-2a1,1,0,100-4" />\n    ':3===t?n+='\n      <path d="M54,22L79,50h33a5,5,0,10-4-22.3a11.3,11.3,0,00-20,0q-8-2,-14,6" />\n      <path d="M55,21L82,48h30a5,5,0,10-5-18a9.7,9.7,0,00-18,0q-7-2,-11,3L60,16" fill="white" />\n      <path d="M59,18l25,25-1.5,1.5-25-25M87,38a1,1,0,1110,5l-2-1a1,1,0,10-6-3" />\n    ':4!==t&&5!==t||(n+='\n      <path d="M54,22L79,50h52a12.5,12.5,0,001.5-24.4a7,7,0,00-8.2-7a11.9,11.9,0,00-22.5-2q-11-1,-14,7q-10-2-14,4" />\n      <path d="M52,24L77,48h50a5,5,0,103-21a5,5,0,00-7-6a10.3,10.3,0,00-20-2q-11-2,-14,7q-10-3-14,4L60,16" fill="white" />\n      <path d="M59,18l25,25-1.5,1.5-25-25m-1.5,1.5l22.5,22.5-1.5,1.5-22.5-22.5M87,38a1,1,0,1110,5l-2-1a1,1,0,10-6-3M96,29a1,1,0,1115,14l-1.7-1.7A1,1,0,1097.7,30.7" />\n    '),n+="</svg>","data:image/svg+xml;charset=utf-8,"+encodeURIComponent(n)},we=function(t){return new Et.Z.style.Style({image:new Et.Z.style.Icon({src:ye(t),size:[ge,ge]})})},xe=new Et.Z.layer.Vector({source:new Et.Z.source.Vector,style:pe()}),be=new Et.Z.layer.Vector({source:new Et.Z.source.Vector}),_e=new Et.Z.layer.Group({layers:[xe,be]}),Ae=new Et.Z.Overlay({positioning:"top-center",offset:[0,0],className:"bulletins-overlay-container"}),Se={animation:{duration:250},margin:10},ke={mixins:[te],data:function(){return{overlayData:{mountainName:null,validUntil:null,danger:{},orientations:[],urls:[]},panIntoView:!1}},computed:{mapZoom:function(){return T.mapZoom},showAvalancheBulletins:function(){return T.showAvalancheBulletins},bulletinsLoaded:function(){return T.bulletinsLoaded},drawingMode:function(){return T.drawingMode},overlayOrientations:function(){var t=this;return Object.keys(this.overlayData.orientations).filter((function(t){return"comment"!==t})).filter((function(e){return t.overlayData.orientations[e]})).map((function(t){return t.toUpperCase()}))},overlayValidUntil:function(){return(0,dt.Z)(new Date(this.overlayData.validUntil),"dd/MM/yyyy HH:mm")},overlayDangerIcon:function(){return ye(this.overlayData.danger.max)},overlayDangerComment:function(){return this.overlayData.danger.low?this.overlayData.danger.comment:null},overlayOrientationsComment:function(){return this.overlayData.orientations.comment}},watch:{showAvalancheBulletins:function(){this.onShowAvalancheBulletins()}},mounted:function(){this.activeBulletins=null,Ae.setElement(this.$refs.bulletinsOverlay),this.map.addOverlay(Ae),this.map.addLayer(_e),_e.setVisible(!1),0===T.mountains.all.length&&(T.fetchMountains().then(this.onMountainsResult),T.$on("mapMoveEnd",this.onMapMoveEnd),T.$on("mapClick",this.onMapClick))},methods:{onMountainsResult:function(t){var e=this.getFeaturesFromData(t);e=e.filter((function(t){return"France"===t.get("country")})),xe.getSource().addFeatures(e);var n=this.getPropertiesFromFeatures(e);n=this.sortMountainsByMassif(n),T.setAllMountains(n),this.setVisibleMountains()},sortMountainsByMassif:function(t){for(var e={},n=0;n<t.length;n++)e[t[n].mountain]||(e[t[n].mountain]=[]),e[t[n].mountain].push(t[n]);t=Object.keys(e).sort().reduce((function(t,n){return t[n]=e[n],t}),{});var i="name";for(var r in t)t[r].sort((function(t,e){return t[i]<e[i]?-1:t[i]>e[i]?1:0}));return t},setVisibleMountains:function(){var t=this.getExtent("EPSG:3857"),e=Object.assign({},T.mountains.all);for(var n in e)e[n]=e[n].filter((function(e){var n=e.geometry;return n.intersectsExtent(t)})),0===e[n].length&&delete e[n];T.setVisibleMountains(e)},updateMountainsStyle:function(){xe.setStyle(pe(this.mapZoom))},onMapMoveEnd:function(){this.setVisibleMountains(),this.showAvalancheBulletins&&(this.updateMountainsStyle(),this.updateBulletinsGeometry())},onMapClick:function(t){this.showAvalancheBulletins&&!this.drawingMode&&this.setBulletinsOverlay(t)},onShowAvalancheBulletins:function(){this.bulletinsLoaded||(T.setBulletinsLoaded(!0),T.fetchBulletins().then(this.onBulletinsResult)),_e.setVisible(this.showAvalancheBulletins),this.updateMountainsStyle(),this.updateBulletinsGeometry()},onBulletinsResult:function(t){var e=t.data,n=xe.getSource().getFeatures();e.zones.forEach((function(t){n.find((function(e){if(e.get("name")===t.zone){var n=e.getGeometry(),i=n.getType(),r=null;if("MultiPolygon"!==i)throw new Error("Mountain geometry have to be MultiPolygon.");r=n.getInteriorPoints();var a=new Et.Z.Feature({geometry:r,initialGeometry:r,overlayData:{mountainName:e.get("name"),validUntil:t.validUntil,danger:t.danger,orientations:t.orientations,urls:e.get("urls")}});return be.getSource().addFeature(a),a.setStyle(we(t.danger.max)),e.setProperties({bulletinsFeature:a}),!0}}))})),this.updateBulletinsGeometry()},updateBulletinsGeometry:function(){if(this.bulletinsLoaded){if(this.panIntoView)return this.panIntoView=!1,void this.updateBulletinsOverlay();if(this.mapZoom>10){var t=this.getExtent("EPSG:3857"),e=new Et.Z.Feature(Et.Z.geom.polygonFromExtent(t)),n=xe.getSource().getFeatures();n.forEach((function(t){var n=de((new Et.Z.format.GeoJSON).writeFeatureObject(t),(new Et.Z.format.GeoJSON).writeFeatureObject(e));if(n){var i=(new Et.Z.format.GeoJSON).readFeature(n),r=i.getGeometry(),a=r.getType();"Polygon"===a&&(i=new Et.Z.Feature({geometry:new Et.Z.geom.MultiPolygon([r])}));var s=i.getGeometry().getInteriorPoints(),o=t.get("bulletinsFeature");o&&o.setGeometry(s)}}))}else{var i=be.getSource().getFeatures();i.forEach((function(t){t.setGeometry(t.get("initialGeometry"))}))}this.updateBulletinsOverlay()}},setBulletinsOverlay:function(t){var e=this,n=this.map.getFeaturesAtPixel(t.pixel,{layerFilter:function(t){return t===be}}),i=n.length?n[0]:void 0;if(i){this.overlayData=i.get("overlayData");var r=i.getGeometry().getClosestPoint(t.coordinate);this.openOverlay(r,!0),this.activeBulletins={feature:i};var a=i.getGeometry().getPoints();a.length>1&&a.forEach((function(t,n){t.getCoordinates().every((function(t,e){return t===r[e]}))&&(e.activeBulletins.index=n)}))}else this.closeOverlay(!0)},updateBulletinsOverlay:function(){if(this.activeBulletins&&this.showAvalancheBulletins){var t=this.activeBulletins.feature,e=this.activeBulletins.index||0,n=t.getGeometry().getPoint(e);n||(n=t.getGeometry().getPoint(0)),this.openOverlay(n.getCoordinates())}else this.closeOverlay()},openOverlay:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$nextTick((function(){Ae.setPosition(t),n&&(e.panIntoView=!0,Ae.panIntoView(Se))}))},closeOverlay:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Ae.setPosition(void 0),t&&(this.activeBulletins=null)}}},Ee=ke,Le=(0,p.Z)(Ee,se,oe,!1,null,"57c862e2",null),Ce=Le.exports,Pe=(n(74916),n(15306),[new Et.Z.style.Style({stroke:new Et.Z.style.Stroke({color:"rgba(0, 0, 0, 0.4)",width:5})}),new Et.Z.style.Style({stroke:new Et.Z.style.Stroke({color:"yellow",width:3})})]),Me=[new Et.Z.style.Style({stroke:new Et.Z.style.Stroke({color:"white",width:5})}),new Et.Z.style.Style({stroke:new Et.Z.style.Stroke({color:"rgba(0, 0, 0, 0.7)",width:3})})],Ze=[new Et.Z.style.Style({stroke:new Et.Z.style.Stroke({color:"yellow",width:9}),zIndex:1}),new Et.Z.style.Style({stroke:new Et.Z.style.Stroke({color:"red",width:3}),zIndex:1})],Fe={mixins:[te],data:function(){return{visibleSimplifiedLayer:!1}},computed:{features:function(){return T.features},featuresLength:function(){return T.featuresLength},validMinimumMapZoom:function(){return T.VALID_MINIMUM_MAP_ZOOM},drawingMode:function(){return T.drawingMode}},watch:{drawingMode:function(){this.drawingMode?this.enableInteractions():this.disableInteractions()}},mounted:function(){this.featuresLayer=new Et.Z.layer.Vector({source:new Et.Z.source.Vector,style:Pe}),this.featuresLayerSource=this.featuresLayer.getSource(),this.map.addLayer(this.featuresLayer),this.simplifiedLayer=new Et.Z.layer.Vector({source:new Et.Z.source.Vector,style:Me}),this.simplifiedSource=this.simplifiedLayer.getSource(),this.map.addLayer(this.simplifiedLayer),this.simplifiedLayer.setVisible(!1),T.setFeaturesTitle(this.$gettext(T.featuresTitle));var t=this.$route.params.document_id,e=this.$language.current;t&&x.Z.route.getCooked(t,e).then(this.addFeaturesFromDocument),this.featuresLayerSource.on("addfeature",this.onFeature),this.simplifiedSource.on("addfeature",this.onFeature),this.addInteractions(),T.$on("removeFeature",this.removeFeature),T.$on("removeFeatures",this.removeFeatures),T.$on("gpx",this.addFeaturesFromGpx),T.$on("previewSimplify",this.previewSimplify),T.$on("simplify",this.simplify)},methods:{addInteractions:function(){var t=this.featuresLayerSource;this.modifyInteraction=new Et.Z.interaction.Modify({source:t}),this.map.addInteraction(this.modifyInteraction),this.drawInteraction=new Et.Z.interaction.Draw({source:t,type:"LineString"}),this.map.addInteraction(this.drawInteraction),this.snapInteraction=new Et.Z.interaction.Snap({source:t}),this.map.addInteraction(this.snapInteraction),this.drawInteraction.on("drawstart",this.onDrawStart),this.drawInteraction.on("drawend",this.onDrawEnd),this.modifyInteraction.on("modifyend",this.onModifyEnd),this.disableInteractions()},enableInteractions:function(){this.drawInteraction.setActive(!0),this.modifyInteraction.setActive(!0),this.snapInteraction.setActive(!0)},disableInteractions:function(){this.drawInteraction.setActive(!1),this.modifyInteraction.setActive(!1),this.snapInteraction.setActive(!1)},onDrawStart:function(){document.addEventListener("keydown",this.onKeyWhileDrawing),document.addEventListener("keypress",this.onKeyWhileDrawing)},onDrawEnd:function(){document.removeEventListener("keydown",this.onKeyWhileDrawing),document.removeEventListener("keypress",this.onKeyWhileDrawing)},onModifyEnd:function(){this.updateFeaturesFromStore()},onKeyWhileDrawing:function(t){t.preventDefault(),"Backspace"===t.key&&this.drawInteraction.removeLastPoint()},onFeature:function(t){t.feature.set("highlightedStyle",Ze),this.loadingExternalFeatures||this.updateFeaturesFromStore()},updateFeaturesFromStore:function(){var t=this.visibleSimplifiedLayer?this.getSimplifiedFeatures():this.getFeaturesLayerFeatures();T.setFeatures(t);var e=this.getFeaturesLayerFeatures().map((function(t){return t.getGeometry().getCoordinates().length})).reduce((function(t,e){return t+e}),0);T.setFeaturesLength(e),0===t.length&&this.$route.params.document_id&&this.$router.replace({path:"/"+this.$route.name})},getFeaturesLayerFeatures:function(){return this.featuresLayerSource.getFeatures()},getSimplifiedFeatures:function(){return this.simplifiedSource.getFeatures()},removeFeature:function(t){var e=this,n=!(1===this.featuresLayerSource.getFeatures().length&&!confirm(this.$gettext("Confirm delete")));n&&(this.visibleSimplifiedLayer?(this.simplifiedSource.removeFeature(t),this.getFeaturesLayerFeatures().forEach((function(n){t.get("id")===n.ol_uid&&e.featuresLayerSource.removeFeature(n)}))):this.featuresLayerSource.removeFeature(t),this.updateFeaturesFromStore())},removeFeatures:function(){this.featuresLayerSource.clear(),this.simplifiedSource.clear(!0),this.hideSimplifiedLayer(),this.updateFeaturesFromStore()},addFeaturesFromGpx:function(t){if(t){this.featuresLayerSource.clear(),this.loadingExternalFeatures=!0;var e=new Et.Z.format.GPX,n=e.readFeatures(t,{featureProjection:"EPSG:3857"});n.forEach(this.addFeature),T.setFeaturesTitle(this.getFeaturesTitleFromGpx(n)),this.loadingExternalFeatures=!1,this.updateFeaturesFromStore(),this.fitMapToFeatures()}},getFeaturesTitleFromGpx:function(t){if(t&&t.length){var e=t[0].getProperties();return e.name?e.name:this.$gettext("GPX file")}},addFeaturesFromDocument:function(t){this.loadingExternalFeatures=!0;var e=t.data.geometry.geom_detail,n=(new Et.Z.format.GeoJSON).readFeature(e);this.addFeature(n),T.setFeaturesTitle(this.getFeaturesTitleFromDocument(t)),this.loadingExternalFeatures=!1,this.updateFeaturesFromStore(),this.fitMapToFeatures()},addFeature:function(t){if("MultiLineString"===t.getGeometry().getType()){var e=t.getGeometry().getLineStrings();e.map((function(t){return new Et.Z.Feature({geometry:t})})).forEach(this.addFeature)}else{var n=t.getGeometry().getCoordinates().length;n>=2&&this.featuresLayerSource.addFeature(t)}},getFeaturesTitleFromDocument:function(t){return this.$documentUtils.getDocumentTitle(t.data)},fitMapToFeatures:function(){var t=Et.Z.extent.createEmpty();Et.Z.extent.extend(t,this.featuresLayerSource.getExtent()),this.view.fit(t,{size:this.map.getSize()}),this.view.setZoom(Math.max(this.validMinimumMapZoom,this.view.getZoom()))},hideSimplifiedLayer:function(){this.featuresLayer.setVisible(!0),this.simplifiedLayer.setVisible(!1),this.visibleSimplifiedLayer=!1},showSimplifiedLayer:function(){this.featuresLayer.setVisible(!1),this.simplifiedLayer.setVisible(!0),this.visibleSimplifiedLayer=!0},previewSimplify:function(t){var e=this;if(this.simplifiedSource.clear(!0),0===t)this.hideSimplifiedLayer();else{this.showSimplifiedLayer();var n=this.getFeaturesLayerFeatures();n.forEach((function(n){var i=n.getGeometry(),r=i;0!==t&&(r=r.simplify(t));var a=new Et.Z.Feature({geometry:r,id:n.ol_uid});e.simplifiedSource.addFeature(a)}))}this.updateFeaturesFromStore()},simplify:function(){var t=this;this.featuresLayerSource.clear();var e=this.getSimplifiedFeatures();e.forEach((function(e){t.featuresLayerSource.addFeature(e)})),this.hideSimplifiedLayer()}},render:function(){return null}},De=Fe,Ne=(0,p.Z)(De,fe,me,!1,null,null,null),Ie=Ne.exports,Te=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"legend"},[e("div",[e("div",{staticClass:"legend-button is-pulled-right ol-control"},[e("button",{attrs:{type:"button"},on:{click:function(e){t.showLegend=!t.showLegend}}},[e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Legend")])])])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!0===t.showLegend,expression:"showLegend === true"}],staticClass:"legend-content"},[t.mapLegend?e("div",[e("ul",t._l(t.mapLegend.items,(function(n,i){return e("li",{key:i},[e("span",{staticClass:"legend-color",style:"background:"+n.color}),t._v(" "),e("span",[t._v(t._s(t.$gettext(n.text["en"])))])])})),0),t._v(" "),e("p",{staticClass:"is-size-6 is-italic"},[t._v(t._s(t.$gettext(t.mapLegend.comment["en"])))])]):e("p",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"is-italic"},[t._v("Legend will appear automatically with the generated image")])])]),t._v(" "),t.isLayerLoaded?e("div",{staticClass:"ol-control opacity"},[e("div",{staticClass:"opacity-slider"},[e("vue-slider",{attrs:{min:0,max:1,interval:.01,tooltip:"none",direction:"btt","rail-style":{background:"rgba(0,0,0,.25)"},"process-style":{background:"white"}},on:{change:t.onUpdateOpacity},model:{value:t.opacity,callback:function(e){t.opacity=e},expression:"opacity"}})],1)]):t._e()])},Be=[],Oe=(n(78783),n(33948),n(23123),.75),Re={components:{VueSlider:function(){return n.e(309).then(n.t.bind(n,79454,23))}},mixins:[te],props:{data:{type:String,default:null},extent:{type:Array,required:!0}},data:function(){return{isLayerLoaded:!1,opacity:Oe,showLegend:void 0,mapLegend:null}},watch:{data:function(){this.data?this.drawImage():this.clearLayers()},extent:function(){this.drawExtent(this.extent)}},created:function(){this.layer=new Et.Z.layer.Image({source:new Et.Z.source.ImageStatic({url:null,imageExtent:Et.Z.extent.createEmpty()}),opacity:this.opacity}),this.extentLayer=new Et.Z.layer.Vector({source:new Et.Z.source.Vector,style:[new Et.Z.style.Style({fill:new Et.Z.style.Fill({color:"hsla(30, 100%, 60%, .45)"})}),new Et.Z.style.Style({stroke:new Et.Z.style.Stroke({color:"hsla(30, 100%, 40%, 1)",width:2}),geometry:function(t){return new Et.Z.geom.Polygon([t.getGeometry().getCoordinates()[1]])}})]})},mounted:function(){this.map.addLayer(this.layer),this.map.addLayer(this.extentLayer)},methods:{clearLayers:function(){this.layer.setSource(null),this.isLayerLoaded=!1,this.extentLayer.getSource().clear()},drawExtent:function(t){var e=Et.Z.extent.buffer(t,Math.max(t[2]-t[0],t[3]-t[1])/10),n=new Et.Z.Feature(new Et.Z.geom.Polygon([this.toLinearRing(e),this.toLinearRing(t)]));this.extentLayer.getSource().addFeature(n)},drawImage:function(){var t=(new DOMParser).parseFromString(this.data,"application/xml"),e=t.getElementsByTagName("wps:ComplexData")[0].textContent,n=t.getElementsByTagName("wps:ComplexData")[1].textContent,i=Et.Z.proj.transformExtent(n.split(",").map(Number),"EPSG:4326","EPSG:3857");this.layer.setSource(new Et.Z.source.ImageStatic({imageLoadFunction:function(t){t.getImage().src="data:image/png;base64,"+e},imageExtent:i})),this.isLayerLoaded=!0,this.setLegend(t)},onUpdateOpacity:function(){this.layer.setOpacity(this.opacity)},setLegend:function(t){this.mapLegend=JSON.parse(t.getElementsByTagName("wps:ComplexData")[2].textContent),this.mapLegend.items.forEach((function(t){t.color="rgb(".concat(t.color[0],", ").concat(t.color[1],", ").concat(t.color[2],")")})),this.layer.getSource().setAttributions(this.mapLegend.attributions)},toLinearRing:function(t){var e=t[0],n=t[1],i=t[2],r=t[3];return[[e,n],[e,r],[i,r],[i,n],[e,n]]}}},Ge=Re,Ve=(0,p.Z)(Ge,Te,Be,!1,null,"42ee7258",null),ze=Ve.exports,Ye=n(22456),Ue=[6.25,45.15],We=6,Qe=19,Je={components:{AreaLayer:ae,AvalancheBulletinsLayer:Ce,RouteLayer:Ie,YetiLayer:ze},props:{yetiExtent:{type:Array,required:!0},yetiData:{type:String,default:null}},data:function(){return{cartoLayers:(0,$t.$i)(),dataLayers:(0,$t.o6)(),showLayerSwitcher:!1,recenterPropositions:null,showRecenterOnPropositions:!1}},computed:{mapZoom:function(){return T.mapZoom},showAvalancheBulletins:function(){return T.showAvalancheBulletins},showAreas:function(){return T.showAreas},drawingMode:function(){return T.drawingMode},validSimplifyTolerance:function(){return T.validSimplifyTolerance},yetiLayers:function(){return[{title:this.$gettext("YETI extent"),checked:this.showAreas,action:this.onShowAreas},{title:this.$gettext("Avalanche bulletins"),checked:this.showAvalancheBulletins,action:this.onShowAvalancheBulletins}]},visibleCartoLayer:{get:function(){return this.cartoLayers.find((function(t){return!0===t.getVisible()}))},set:function(t){this.visibleCartoLayer.setVisible(!1),t.setVisible(!0)}},atLeastOneYetiLayerIsShown:function(){return this.yetiLayers.filter((function(t){return t.checked})).length}},watch:{showAvalancheBulletins:function(){this.updateCartoLayersOpacity()},showAreas:function(){this.updateCartoLayersOpacity()}},created:function(){this.map=new Et.Z.Map({controls:[new Et.Z.control.Zoom({zoomInTipLabel:this.$gettext("Zoom in","Map controls"),zoomOutTipLabel:this.$gettext("Zoom out","Map controls")}),new Et.Z.control.ScaleLine,new Et.Z.control.Attribution({tipLabel:this.$gettext("Attributions","Map controls")})],layers:[].concat((0,u.Z)(this.cartoLayers),(0,u.Z)(this.dataLayers)),view:new Et.Z.View({center:Et.Z.proj.transform(Ue,"EPSG:4326","EPSG:3857"),zoom:We,maxZoom:Qe})}),this.view=this.map.getView()},mounted:function(){var t=this;this.map.setTarget(this.$refs.map);var e=[new Et.Z.control.FullScreen({source:this.$el,tipLabel:this.$gettext("Toggle full-screen","Map Controls")}),new Et.Z.control.Control({element:this.$refs.layerSwitcherButton}),new Et.Z.control.Control({element:this.$refs.layerSwitcher}),new Et.Z.control.Control({element:this.$refs.drawingMode}),new Et.Z.control.Control({element:this.$refs.recenterOnControl}),new Et.Z.control.Control({element:this.$refs.recenterOnPropositions})];e.map((function(e){return t.map.addControl(e)})),this.map.on("moveend",this.onMapMoveEnd),this.map.on("click",this.onMapClick)},methods:{getExtent:function(t){var e=this.view.calculateExtent(this.map.getSize()||null);return t&&(e=Et.Z.proj.transformExtent(e,Et.Z.proj.get("EPSG:3857"),Et.Z.proj.get(t))),e},toggleMapDataLayer:function(t){t.setVisible(!t.getVisible())},searchRecenterPropositions:function(t){var e=t.target.value;if(e&&e.length>=3){var n=this.view.getCenter(),i=Et.Z.proj.toLonLat(n);this.recenterPropositions=Ye.Z.getPropositions(e,this.$language.current,i),this.showRecenterOnPropositions=!0}},recenterOn:function(t){var e=(new Et.Z.format.GeoJSON).readFeature(t),n=e.get("extent"),i=e.getGeometry().flatCoordinates;n?(n=Et.Z.proj.transformExtent(n,"EPSG:4326","EPSG:3857"),this.view.fit(n,{size:this.map.getSize(),maxZoom:12})):(i=Et.Z.proj.transform(i,"EPSG:4326","EPSG:3857"),this.view.setCenter(i),this.view.setZoom(16)),this.showRecenterOnPropositions=!1},getMapZoom:function(){return Math.floor(10*this.view.getZoom())/10},onMapMoveEnd:function(){var t=this.getMapZoom();this.mapZoom!==t&&T.setMapZoom(t),(this.showAvalancheBulletins||this.showAreas)&&this.updateCartoLayersOpacity(),T.$emit("mapMoveEnd")},onMapClick:function(t){this.showLayerSwitcher=!1,this.showRecenterOnPropositions=!1,T.$emit("mapClick",t)},updateCartoLayersOpacity:function(){var t=this,e=9;this.cartoLayers.forEach((function(n){n.setOpacity((t.showAvalancheBulletins||t.showAreas)&&t.mapZoom<e?.5:1)}))},onShowAvalancheBulletins:function(){T.setShowAvalancheBulletins(!this.showAvalancheBulletins)},onShowAreas:function(){T.setShowAreas(!this.showAreas)},onDrawingMode:function(){T.setDrawingMode(!this.drawingMode)}}},je=Je,He=(0,p.Z)(je,Xt,Kt,!1,null,"eb255532",null),qe=He.exports,Xe="https://api.ensg.eu/yeti-wps?request=Execute&service=WPS&version=1.0.0&identifier=Yeti&datainputs=",Ke={name:"Yeti",components:{YetiArticle:E,Panel:G,SubPanelBra:ct,SubPanelCourse:Zt,SubPanelMethods:Ot,Tabs:Ut,ValidationButton:qt,YetiMap:qe},data:function(){return{showDisclaimer:!1,checkDisclaimer:!1,articles:{faq:{id:1257569,title:"FAQ"},disclaimer:{id:1257571,title:this.$gettext("Disclaimer")}},tabs:[this.$gettext("Compute"),this.$gettext("Outing")],formError:void 0,currentError:void 0,promise:null,yetiData:null,yetiExtent:[]}},computed:{validMinimumMapZoom:function(){return T.VALID_MINIMUM_MAP_ZOOM},dangerMaxWhenMrd:function(){return T.DANGER_MAX_WHEN_MRD},bra:function(){return T.bra},method:function(){return T.method},mapZoom:function(){return T.mapZoom},areaOk:function(){return T.areaOk},errors:function(){return{area:{simple:this.$gettext("Area not covered"),full:this.$gettext("Current map view is not covered by YETI. Only french mountains are as of now (determined by a dashed stroke).")},method:{simple:this.$gettext("Missing method"),full:this.$gettext("Please select a method before computing.")},method_bra:{simple:this.$gettext("Conflicting method and danger"),full:this.$gettext("The MRD method (beginner) is allowed when danger is 3 maximum. Choose another method: MRE or MRP.")},bra:{simple:this.$gettext("Missing danger level"),full:this.$gettext("Please set danger level as specified on avalanche bulletin for the specific area.")},altitude:{simple:this.$gettext("Missing altitude"),full:this.$gettext("Altitude is mandatory when danger high and low are different. Please set altitude as specified on avalanche bulletin for the specific area.")},zoom:{simple:this.$gettext("Area too large"),full:this.$gettext("Current map view is too large. Please zoom to level")+" "+this.validMinimumMapZoom},ok:this.$gettext("Seems fine! :)"),yeti:this.$gettext("Service is inactive right now"),yeti_prefix:"YETI Service: ",yeti_unauthorized:this.$gettext("You have to be authorized. Please contact administrators of the service if interested.")}},mrdIsNotApplicable:function(){return this.isBraMax&&"mrd"===this.method.type},isBraMax:function(){return this.bra.high>this.dangerMaxWhenMrd||this.bra.low>this.dangerMaxWhenMrd},isValidMapZoom:function(){return this.mapZoom>=this.validMinimumMapZoom}},watch:{"bra.low":"check","bra.altiThreshold":"check","bra.isDifferent":"check","method.type":"check","method.potentialDanger":"check",mapZoom:"check",areaOk:"check"},created:function(){this.$localStorage.get("yeti-disclaimer")||(this.showDisclaimer=!0),T.setDefault()},mounted:function(){this.check()},methods:{check:function(){this.areaOk?this.isValidMapZoom?this.bra.high?this.bra.low&&this.bra.high!==this.bra.low&&!this.bra.altiThreshold?this.formError="altitude":this.method.type?this.mrdIsNotApplicable?this.formError="method_bra":!this.bra.isDifferent||this.bra.low&&this.bra.high?this.formError=null:this.formError="bra":this.formError="method":this.formError="bra":this.formError="zoom":this.formError="area",this.mrdIsNotApplicable&&(this.method.type=null),this.setCurrentError()},warnAboutMethodBra:function(t){"mrd"===t&&this.isBraMax&&window.alert(this.errors.method_bra.full)},setCurrentError:function(){this.formError?(this.currentError=this.errors[this.formError]["simple"],"zoom"===this.formError&&(this.currentError+=" ("+this.$gettext("current zoom:")+" "+this.mapZoom+" "+this.$gettext("on")+" "+this.validMinimumMapZoom+")")):this.currentError=this.errors["ok"]},compute:function(){var t=this;if(this.formError)window.alert(this.errors[this.formError]["full"]);else{var e=this.$refs.map.getExtent("EPSG:3857"),n=this.extendExtent(e),i=this.getYetiUrl(n);this.yetiData=null,this.promise=h().get(i).then((function(e){return t.onYetiResult(e,n)})).catch(this.onYetiError)}},extendExtent:function(t){var e=Math.min(.5,(this.mapZoom-this.validMinimumMapZoom)/6),n=Math.max(t[2]-t[0],t[3]-t[1])*e;return Et.Z.extent.buffer(t,n)},onYetiResult:function(t,e){this.yetiData=t.data,this.yetiExtent=e,this.promise=null},onYetiError:function(t){this.promise=null;var e=this.errors["yeti"];if(400===t.response.status){var n=(new DOMParser).parseFromString(t.response.data,"text/xml");e=(0,u.Z)(n.getElementsByTagName("ExceptionText")).map((function(t){return t.textContent})).join(" ")}403===t.response.status&&(e=this.errors["yeti_unauthorized"]),window.alert(this.errors["yeti_prefix"]+e)},getYetiUrl:function(t){var e=Et.Z.proj.transformExtent(t,"EPSG:3857","EPSG:4326"),n=this.bra.isDifferent?this.bra.low:this.bra.high,i=this.bra.isDifferent?this.bra.altiThreshold:0,r="mre"===this.method.type&&0!==this.method.orientation.length?"none,"+this.method.orientation.join(",").toLowerCase():"none",a="mrp"===this.method.type?this.method.potentialDanger:0,s="mrp"===this.method.type&&this.method.wetSnow,o="mrp"===this.method.type?Math.floor(this.method.groupSize):0,l=Xe;return l+="methode=".concat(this.method.type,";"),l+="bbox=".concat(e[0],",").concat(e[1],",").concat(e[2],",").concat(e[3],";"),l+="risque_haut=".concat(this.bra.high,";"),l+="risque_bas=".concat(n,";"),l+="seuil_alti=".concat(i),"mre"===this.method.type?l+=";rdv=".concat(r):"mrp"===this.method.type&&(l+=";potentiel_danger=".concat(a,";"),l+="neige_mouillee=".concat(s,";"),l+="taille_groupe=".concat(o)),l},onSubmitDisclaimer:function(){this.showDisclaimer=!1,this.$localStorage.set("yeti-disclaimer","validated")}}},$e=Ke,tn=(0,p.Z)($e,o,l,!1,null,"0fd3759c",null),en=tn.exports},32676:function(t){(function(e,n){t.exports=n()})(0,(function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}
/**
   * splaytree v3.1.0
   * Fast Splay tree for Node and browser
   *
   * @author Alexander Milevski <info@w8r.name>
   * @license MIT
   * @preserve
   */var i=function(){function t(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null}return t}();function r(t,e){return t>e?1:t<e?-1:0}function a(t,e,n){var r=new i(null,null),a=r,s=r;while(1){var o=n(t,e.key);if(o<0){if(null===e.left)break;if(n(t,e.left.key)<0){var l=e.left;if(e.left=l.right,l.right=e,e=l,null===e.left)break}s.left=e,s=e,e=e.left}else{if(!(o>0))break;if(null===e.right)break;if(n(t,e.right.key)>0){l=e.right;if(e.right=l.left,l.left=e,e=l,null===e.right)break}a.right=e,a=e,e=e.right}}return a.right=e.left,s.left=e.right,e.left=r.right,e.right=r.left,e}function s(t,e,n,r){var s=new i(t,e);if(null===n)return s.left=s.right=null,s;n=a(t,n,r);var o=r(t,n.key);return o<0?(s.left=n.left,s.right=n,n.left=null):o>=0&&(s.right=n.right,s.left=n,n.right=null),s}function o(t,e,n){var i=null,r=null;if(e){e=a(t,e,n);var s=n(e.key,t);0===s?(i=e.left,r=e.right):s<0?(r=e.right,e.right=null,i=e):(i=e.left,e.left=null,r=e)}return{left:i,right:r}}function l(t,e,n){return null===e?t:(null===t||(e=a(t.key,e,n),e.left=t),e)}function u(t,e,n,i,r){if(t){i(e+(n?"└── ":"├── ")+r(t)+"\n");var a=e+(n?"    ":"│   ");t.left&&u(t.left,a,!1,i,r),t.right&&u(t.right,a,!0,i,r)}}var c=function(){function t(t){void 0===t&&(t=r),this._root=null,this._size=0,this._comparator=t}return t.prototype.insert=function(t,e){return this._size++,this._root=s(t,e,this._root,this._comparator)},t.prototype.add=function(t,e){var n=new i(t,e);null===this._root&&(n.left=n.right=null,this._size++,this._root=n);var r=this._comparator,s=a(t,this._root,r),o=r(t,s.key);return 0===o?this._root=s:(o<0?(n.left=s.left,n.right=s,s.left=null):o>0&&(n.right=s.right,n.left=s,s.right=null),this._size++,this._root=n),this._root},t.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},t.prototype._remove=function(t,e,n){var i;if(null===e)return null;e=a(t,e,n);var r=n(t,e.key);return 0===r?(null===e.left?i=e.right:(i=a(t,e.left,n),i.right=e.right),this._size--,i):e},t.prototype.pop=function(){var t=this._root;if(t){while(t.left)t=t.left;return this._root=a(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},t.prototype.findStatic=function(t){var e=this._root,n=this._comparator;while(e){var i=n(t,e.key);if(0===i)return e;e=i<0?e.left:e.right}return null},t.prototype.find=function(t){return this._root&&(this._root=a(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},t.prototype.contains=function(t){var e=this._root,n=this._comparator;while(e){var i=n(t,e.key);if(0===i)return!0;e=i<0?e.left:e.right}return!1},t.prototype.forEach=function(t,e){var n=this._root,i=[],r=!1;while(!r)null!==n?(i.push(n),n=n.left):0!==i.length?(n=i.pop(),t.call(e,n),n=n.right):r=!0;return this},t.prototype.range=function(t,e,n,i){var r,a=[],s=this._comparator,o=this._root;while(0!==a.length||o)if(o)a.push(o),o=o.left;else{if(o=a.pop(),r=s(o.key,e),r>0)break;if(s(o.key,t)>=0&&n.call(i,o))return this;o=o.right}return this},t.prototype.keys=function(){var t=[];return this.forEach((function(e){var n=e.key;return t.push(n)})),t},t.prototype.values=function(){var t=[];return this.forEach((function(e){var n=e.data;return t.push(n)})),t},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)while(t.left)t=t.left;return t},t.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)while(t.right)t=t.right;return t},t.prototype.at=function(t){var e=this._root,n=!1,i=0,r=[];while(!n)if(e)r.push(e),e=e.left;else if(r.length>0){if(e=r.pop(),i===t)return e;i++,e=e.right}else n=!0;return null},t.prototype.next=function(t){var e=this._root,n=null;if(t.right){n=t.right;while(n.left)n=n.left;return n}var i=this._comparator;while(e){var r=i(t.key,e.key);if(0===r)break;r<0?(n=e,e=e.left):e=e.right}return n},t.prototype.prev=function(t){var e=this._root,n=null;if(null!==t.left){n=t.left;while(n.right)n=n.right;return n}var i=this._comparator;while(e){var r=i(t.key,e.key);if(0===r)break;r<0?e=e.left:(n=e,e=e.right)}return n},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return d(this._root)},t.prototype.load=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!1);var i=t.length,r=this._comparator;if(n&&p(t,e,0,i-1,r),null===this._root)this._root=h(t,e,0,i),this._size=i;else{var a=m(this.toList(),v(t,e),r);i=this._size+i,this._root=f({head:a},0,i)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return u(this._root,"",!0,(function(t){return e.push(t)}),t),e.join("")},t.prototype.update=function(t,e,n){var i=this._comparator,r=o(t,this._root,i),a=r.left,u=r.right;i(t,e)<0?u=s(e,n,u,i):a=s(e,n,a,i),this._root=l(a,u,i)},t.prototype.split=function(t){return o(t,this._root,this._comparator)},t}();function h(t,e,n,r){var a=r-n;if(a>0){var s=n+Math.floor(a/2),o=t[s],l=e[s],u=new i(o,l);return u.left=h(t,e,n,s),u.right=h(t,e,s+1,r),u}return null}function v(t,e){for(var n=new i(null,null),r=n,a=0;a<t.length;a++)r=r.next=new i(t[a],e[a]);return r.next=null,n.next}function d(t){var e=t,n=[],r=!1,a=new i(null,null),s=a;while(!r)e?(n.push(e),e=e.left):n.length>0?(e=s=s.next=n.pop(),e=e.right):r=!0;return s.next=null,a.next}function f(t,e,n){var i=n-e;if(i>0){var r=e+Math.floor(i/2),a=f(t,e,r),s=t.head;return s.left=a,t.head=t.head.next,s.right=f(t,r+1,n),s}return null}function m(t,e,n){var r=new i(null,null),a=r,s=t,o=e;while(null!==s&&null!==o)n(s.key,o.key)<0?(a.next=s,s=s.next):(a.next=o,o=o.next),a=a.next;return null!==s?a.next=s:null!==o&&(a.next=o),r.next}function p(t,e,n,i,r){if(!(n>=i)){var a=t[n+i>>1],s=n-1,o=i+1;while(1){do{s++}while(r(t[s],a)<0);do{o--}while(r(t[o],a)>0);if(s>=o)break;var l=t[s];t[s]=t[o],t[o]=l,l=e[s],e[s]=e[o],e[o]=l}p(t,e,n,o,r),p(t,e,o+1,i,r)}}var g=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},y=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,i=t.ur.x<e.ur.x?t.ur.x:e.ur.x,r=t.ll.y<e.ll.y?e.ll.y:t.ll.y,a=t.ur.y<e.ur.y?t.ur.y:e.ur.y;return{ll:{x:n,y:r},ur:{x:i,y:a}}},w=Number.EPSILON;void 0===w&&(w=Math.pow(2,-52));var x=w*w,b=function(t,e){if(-w<t&&t<w&&-w<e&&e<w)return 0;var n=t-e;return n*n<x*t*e?0:t<e?-1:1},_=function(){function e(){t(this,e),this.reset()}return n(e,[{key:"reset",value:function(){this.xRounder=new A,this.yRounder=new A}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),e}(),A=function(){function e(){t(this,e),this.tree=new c,this.round(0)}return n(e,[{key:"round",value:function(t){var e=this.tree.add(t),n=this.tree.prev(e);if(null!==n&&0===b(e.key,n.key))return this.tree.remove(t),n.key;var i=this.tree.next(e);return null!==i&&0===b(e.key,i.key)?(this.tree.remove(t),i.key):t}}]),e}(),S=new _,k=function(t,e){return t.x*e.y-t.y*e.x},E=function(t,e){return t.x*e.x+t.y*e.y},L=function(t,e,n){var i={x:e.x-t.x,y:e.y-t.y},r={x:n.x-t.x,y:n.y-t.y},a=k(i,r);return b(a,0)},C=function(t){return Math.sqrt(E(t,t))},P=function(t,e,n){var i={x:e.x-t.x,y:e.y-t.y},r={x:n.x-t.x,y:n.y-t.y};return k(r,i)/C(r)/C(i)},M=function(t,e,n){var i={x:e.x-t.x,y:e.y-t.y},r={x:n.x-t.x,y:n.y-t.y};return E(r,i)/C(r)/C(i)},Z=function(t,e,n){return 0===e.y?null:{x:t.x+e.x/e.y*(n-t.y),y:n}},F=function(t,e,n){return 0===e.x?null:{x:n,y:t.y+e.y/e.x*(n-t.x)}},D=function(t,e,n,i){if(0===e.x)return F(n,i,t.x);if(0===i.x)return F(t,e,n.x);if(0===e.y)return Z(n,i,t.y);if(0===i.y)return Z(t,e,n.y);var r=k(e,i);if(0==r)return null;var a={x:n.x-t.x,y:n.y-t.y},s=k(a,e)/r,o=k(a,i)/r,l=t.x+o*e.x,u=n.x+s*i.x,c=t.y+o*e.y,h=n.y+s*i.y,v=(l+u)/2,d=(c+h)/2;return{x:v,y:d}},N=function(){function e(n,i){t(this,e),void 0===n.events?n.events=[this]:n.events.push(this),this.point=n,this.isLeft=i}return n(e,null,[{key:"compare",value:function(t,n){var i=e.comparePoints(t.point,n.point);return 0!==i?i:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft?t.isLeft?1:-1:T.compare(t.segment,n.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),n(e,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,n=0,i=e.length;n<i;n++){var r=e[n];this.point.events.push(r),r.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var n=this.point.events[e];if(void 0===n.segment.consumedBy)for(var i=e+1;i<t;i++){var r=this.point.events[i];void 0===r.consumedBy&&(n.otherSE.point.events===r.otherSE.point.events&&n.segment.consume(r.segment))}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,n=this.point.events.length;e<n;e++){var i=this.point.events[e];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&t.push(i)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,n=new Map,i=function(i){var r=i.otherSE;n.set(i,{sine:P(e.point,t.point,r.point),cosine:M(e.point,t.point,r.point)})};return function(t,e){n.has(t)||i(t),n.has(e)||i(e);var r=n.get(t),a=r.sine,s=r.cosine,o=n.get(e),l=o.sine,u=o.cosine;return a>=0&&l>=0?s<u?1:s>u?-1:0:a<0&&l<0?s<u?-1:s>u?1:0:l<a?-1:l>a?1:0}}}]),e}(),I=0,T=function(){function e(n,i,r,a){t(this,e),this.id=++I,this.leftSE=n,n.segment=this,n.otherSE=i,this.rightSE=i,i.segment=this,i.otherSE=n,this.rings=r,this.windings=a}return n(e,null,[{key:"compare",value:function(t,e){var n=t.leftSE.point.x,i=e.leftSE.point.x,r=t.rightSE.point.x,a=e.rightSE.point.x;if(a<n)return 1;if(r<i)return-1;var s=t.leftSE.point.y,o=e.leftSE.point.y,l=t.rightSE.point.y,u=e.rightSE.point.y;if(n<i){if(o<s&&o<l)return 1;if(o>s&&o>l)return-1;var c=t.comparePoint(e.leftSE.point);if(c<0)return 1;if(c>0)return-1;var h=e.comparePoint(t.rightSE.point);return 0!==h?h:-1}if(n>i){if(s<o&&s<u)return-1;if(s>o&&s>u)return 1;var v=e.comparePoint(t.leftSE.point);if(0!==v)return v;var d=t.comparePoint(e.rightSE.point);return d<0?1:d>0?-1:1}if(s<o)return-1;if(s>o)return 1;if(r<a){var f=e.comparePoint(t.rightSE.point);if(0!==f)return f}if(r>a){var m=t.comparePoint(e.rightSE.point);if(m<0)return 1;if(m>0)return-1}if(r!==a){var p=l-s,g=r-n,y=u-o,w=a-i;if(p>g&&y<w)return 1;if(p<g&&y>w)return-1}return r>a?1:r<a||l<u?-1:l>u?1:t.id<e.id?-1:t.id>e.id?1:0}}]),n(e,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,n=this.rightSE.point,i=this.vector();if(e.x===n.x)return t.x===e.x?0:t.x<e.x?1:-1;var r=(t.y-e.y)/i.y,a=e.x+r*i.x;if(t.x===a)return 0;var s=(t.x-e.x)/i.x,o=e.y+s*i.y;return t.y===o?0:t.y<o?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),n=t.bbox(),i=y(e,n);if(null===i)return null;var r=this.leftSE.point,a=this.rightSE.point,s=t.leftSE.point,o=t.rightSE.point,l=g(e,s)&&0===this.comparePoint(s),u=g(n,r)&&0===t.comparePoint(r),c=g(e,o)&&0===this.comparePoint(o),h=g(n,a)&&0===t.comparePoint(a);if(u&&l)return h&&!c?a:!h&&c?o:null;if(u)return c&&r.x===o.x&&r.y===o.y?null:r;if(l)return h&&a.x===s.x&&a.y===s.y?null:s;if(h&&c)return null;if(h)return a;if(c)return o;var v=D(r,this.vector(),s,t.vector());return null===v?null:g(i,v)?S.round(v.x,v.y):null}},{key:"split",value:function(t){var n=[],i=void 0!==t.events,r=new N(t,!0),a=new N(t,!1),s=this.rightSE;this.replaceRightSE(a),n.push(a),n.push(r);var o=new e(r,s,this.rings.slice(),this.windings.slice());return N.comparePoints(o.leftSE.point,o.rightSE.point)>0&&o.swapEvents(),N.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),i&&(r.checkForConsuming(),a.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,n=this.windings.length;e<n;e++)this.windings[e]*=-1}},{key:"consume",value:function(t){var n=this,i=t;while(n.consumedBy)n=n.consumedBy;while(i.consumedBy)i=i.consumedBy;var r=e.compare(n,i);if(0!==r){if(r>0){var a=n;n=i,i=a}if(n.prev===i){var s=n;n=i,i=s}for(var o=0,l=i.rings.length;o<l;o++){var u=i.rings[o],c=i.windings[o],h=n.rings.indexOf(u);-1===h?(n.rings.push(u),n.windings.push(c)):n.windings[h]+=c}i.rings=null,i.windings=null,i.consumedBy=n,i.leftSE.consumedBy=n.leftSE,i.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,n=this._afterState.windings,i=this._afterState.multiPolys,r=0,a=this.rings.length;r<a;r++){var s=this.rings[r],o=this.windings[r],l=e.indexOf(s);-1===l?(e.push(s),n.push(o)):n[l]+=o}for(var u=[],c=[],h=0,v=e.length;h<v;h++)if(0!==n[h]){var d=e[h],f=d.poly;if(-1===c.indexOf(f))if(d.isExterior)u.push(f);else{-1===c.indexOf(f)&&c.push(f);var m=u.indexOf(d.poly);-1!==m&&u.splice(m,1)}}for(var p=0,g=u.length;p<g;p++){var y=u[p].multiPoly;-1===i.indexOf(y)&&i.push(y)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(J.type){case"union":var n=0===t.length,i=0===e.length;this._isInResult=n!==i;break;case"intersection":var r,a;t.length<e.length?(r=t.length,a=e.length):(r=e.length,a=t.length),this._isInResult=a===J.numMultiPolys&&r<a;break;case"xor":var s=Math.abs(t.length-e.length);this._isInResult=s%2===1;break;case"difference":var o=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=o(t)!==o(e);break;default:throw new Error("Unrecognized operation type found ".concat(J.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,n,i){var r,a,s,o=N.comparePoints(t,n);if(o<0)r=t,a=n,s=1;else{if(!(o>0))throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));r=n,a=t,s=-1}var l=new N(r,!0),u=new N(a,!1);return new e(l,u,[i],[s])}}]),e}(),B=function(){function e(n,i,r){if(t(this,e),!Array.isArray(n)||0===n.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=i,this.isExterior=r,this.segments=[],"number"!==typeof n[0][0]||"number"!==typeof n[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var a=S.round(n[0][0],n[0][1]);this.bbox={ll:{x:a.x,y:a.y},ur:{x:a.x,y:a.y}};for(var s=a,o=1,l=n.length;o<l;o++){if("number"!==typeof n[o][0]||"number"!==typeof n[o][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var u=S.round(n[o][0],n[o][1]);u.x===s.x&&u.y===s.y||(this.segments.push(T.fromRing(s,u,this)),u.x<this.bbox.ll.x&&(this.bbox.ll.x=u.x),u.y<this.bbox.ll.y&&(this.bbox.ll.y=u.y),u.x>this.bbox.ur.x&&(this.bbox.ur.x=u.x),u.y>this.bbox.ur.y&&(this.bbox.ur.y=u.y),s=u)}a.x===s.x&&a.y===s.y||this.segments.push(T.fromRing(s,a,this))}return n(e,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.segments.length;e<n;e++){var i=this.segments[e];t.push(i.leftSE),t.push(i.rightSE)}return t}}]),e}(),O=function(){function e(n,i){if(t(this,e),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new B(n[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,a=n.length;r<a;r++){var s=new B(n[r],this,!1);s.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=s.bbox.ur.y),this.interiorRings.push(s)}this.multiPoly=i}return n(e,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,n=this.interiorRings.length;e<n;e++)for(var i=this.interiorRings[e].getSweepEvents(),r=0,a=i.length;r<a;r++)t.push(i[r]);return t}}]),e}(),R=function(){function e(n,i){if(t(this,e),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"===typeof n[0][0][0]&&(n=[n])}catch(o){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var r=0,a=n.length;r<a;r++){var s=new O(n[r],this);s.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=s.bbox.ur.y),this.polys.push(s)}this.isSubject=i}return n(e,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++)for(var i=this.polys[e].getSweepEvents(),r=0,a=i.length;r<a;r++)t.push(i[r]);return t}}]),e}(),G=function(){function e(n){t(this,e),this.events=n;for(var i=0,r=n.length;i<r;i++)n[i].segment.ringOut=this;this.poly=null}return n(e,null,[{key:"factory",value:function(t){for(var n=[],i=0,r=t.length;i<r;i++){var a=t[i];if(a.isInResult()&&!a.ringOut){var s=null,o=a.leftSE,l=a.rightSE,u=[o],c=o.point,h=[];while(1){if(s=o,o=l,u.push(o),o.point===c)break;while(1){var v=o.getAvailableLinkedEvents();if(0===v.length){var d=u[0].point,f=u[u.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(d.x,",")+" ".concat(d.y,"]. Last matching segment found ends at")+" [".concat(f.x,", ").concat(f.y,"]."))}if(1===v.length){l=v[0].otherSE;break}for(var m=null,p=0,g=h.length;p<g;p++)if(h[p].point===o.point){m=p;break}if(null===m){h.push({index:u.length,point:o.point});var y=o.getLeftmostComparator(s);l=v.sort(y)[0].otherSE;break}var w=h.splice(m)[0],x=u.splice(w.index);x.unshift(x[0].otherSE),n.push(new e(x.reverse()))}}n.push(new e(u))}}return n}}]),n(e,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],n=1,i=this.events.length-1;n<i;n++){var r=this.events[n].point,a=this.events[n+1].point;0!==L(r,t,a)&&(e.push(r),t=r)}if(1===e.length)return null;var s=e[0],o=e[1];0===L(s,t,o)&&e.shift(),e.push(e[0]);for(var l=this.isExteriorRing()?1:-1,u=this.isExteriorRing()?0:e.length-1,c=this.isExteriorRing()?e.length:-1,h=[],v=u;v!=c;v+=l)h.push([e[v].x,e[v].y]);return h}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,n=this.events.length;e<n;e++){var i=this.events[e];N.compare(t,i)>0&&(t=i)}var r=t.segment.prevInResult(),a=r?r.prevInResult():null;while(1){if(!r)return null;if(!a)return r.ringOut;if(a.ringOut!==r.ringOut)return a.ringOut.enclosingRing()!==r.ringOut?r.ringOut:r.ringOut.enclosingRing();r=a.prevInResult(),a=r?r.prevInResult():null}}}]),e}(),V=function(){function e(n){t(this,e),this.exteriorRing=n,n.poly=this,this.interiorRings=[]}return n(e,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,n=this.interiorRings.length;e<n;e++){var i=this.interiorRings[e].getGeom();null!==i&&t.push(i)}return t}}]),e}(),z=function(){function e(n){t(this,e),this.rings=n,this.polys=this._composePolys(n)}return n(e,[{key:"getGeom",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++){var i=this.polys[e].getGeom();null!==i&&t.push(i)}return t}},{key:"_composePolys",value:function(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n];if(!r.poly)if(r.isExteriorRing())e.push(new V(r));else{var a=r.enclosingRing();a.poly||e.push(new V(a)),a.poly.addInterior(r)}}return e}}]),e}(),Y=function(){function e(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T.compare;t(this,e),this.queue=n,this.tree=new c(i),this.segments=[]}return n(e,[{key:"process",value:function(t){var e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),n;var i=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!i)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");var r=i,a=i,s=void 0,o=void 0;while(void 0===s)r=this.tree.prev(r),null===r?s=null:void 0===r.key.consumedBy&&(s=r.key);while(void 0===o)a=this.tree.next(a),null===a?o=null:void 0===a.key.consumedBy&&(o=a.key);if(t.isLeft){var l=null;if(s){var u=s.getIntersection(e);if(null!==u&&(e.isAnEndpoint(u)||(l=u),!s.isAnEndpoint(u)))for(var c=this._splitSafely(s,u),h=0,v=c.length;h<v;h++)n.push(c[h])}var d=null;if(o){var f=o.getIntersection(e);if(null!==f&&(e.isAnEndpoint(f)||(d=f),!o.isAnEndpoint(f)))for(var m=this._splitSafely(o,f),p=0,g=m.length;p<g;p++)n.push(m[p])}if(null!==l||null!==d){var y=null;if(null===l)y=d;else if(null===d)y=l;else{var w=N.comparePoints(l,d);y=w<=0?l:d}this.queue.remove(e.rightSE),n.push(e.rightSE);for(var x=e.split(y),b=0,_=x.length;b<_;b++)n.push(x[b])}n.length>0?(this.tree.remove(e),n.push(t)):(this.segments.push(e),e.prev=s)}else{if(s&&o){var A=s.getIntersection(o);if(null!==A){if(!s.isAnEndpoint(A))for(var S=this._splitSafely(s,A),k=0,E=S.length;k<E;k++)n.push(S[k]);if(!o.isAnEndpoint(A))for(var L=this._splitSafely(o,A),C=0,P=L.length;C<P;C++)n.push(L[C])}}this.tree.remove(e)}return n}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var n=t.rightSE;this.queue.remove(n);var i=t.split(e);return i.push(n),void 0===t.consumedBy&&this.tree.insert(t),i}}]),e}(),U="undefined"!==typeof process&&{NODE_ENV:"production",BASE_URL:"/c2c_ui/master/"}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,W="undefined"!==typeof process&&{NODE_ENV:"production",BASE_URL:"/c2c_ui/master/"}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Q=function(){function e(){t(this,e)}return n(e,[{key:"run",value:function(t,e,n){J.type=t,S.reset();for(var i=[new R(e,!0)],r=0,a=n.length;r<a;r++)i.push(new R(n[r],!1));if(J.numMultiPolys=i.length,"difference"===J.type){var s=i[0],o=1;while(o<i.length)null!==y(i[o].bbox,s.bbox)?o++:i.splice(o,1)}if("intersection"===J.type)for(var l=0,u=i.length;l<u;l++)for(var h=i[l],v=l+1,d=i.length;v<d;v++)if(null===y(h.bbox,i[v].bbox))return[];for(var f=new c(N.compare),m=0,p=i.length;m<p;m++)for(var g=i[m].getSweepEvents(),w=0,x=g.length;w<x;w++)if(f.insert(g[w]),f.size>U)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");var b=new Y(f),_=f.size,A=f.pop();while(A){var k=A.key;if(f.size===_){var E=k.segment;throw new Error("Unable to pop() ".concat(k.isLeft?"left":"right"," SweepEvent ")+"[".concat(k.point.x,", ").concat(k.point.y,"] from segment #").concat(E.id," ")+"[".concat(E.leftSE.point.x,", ").concat(E.leftSE.point.y,"] -> ")+"[".concat(E.rightSE.point.x,", ").concat(E.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(f.size>U)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(b.segments.length>W)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var L=b.process(k),C=0,P=L.length;C<P;C++){var M=L[C];void 0===M.consumedBy&&f.insert(M)}_=f.size,A=f.pop()}S.reset();var Z=G.factory(b.segments),F=new z(Z);return F.getGeom()}}]),e}(),J=new Q,j=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return J.run("union",t,n)},H=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return J.run("intersection",t,n)},q=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return J.run("xor",t,n)},X=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return J.run("difference",t,n)},K={union:j,intersection:H,xor:q,difference:X};return K}))},65857:function(t,e,n){"use strict";t.exports=n.p+"img/levels-danger.5c2a565c.svg"},86236:function(t){"use strict";t.exports="data:image/avif;base64,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"},61070:function(t,e,n){"use strict";t.exports=n.p+"img/logo-ensg.b6185e88.jpg"},16448:function(t){"use strict";t.exports="data:image/webp;base64,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"},7085:function(t,e,n){"use strict";t.exports=n.p+"img/logo-fondation-petzl.05112e01.avif"},32102:function(t,e,n){"use strict";t.exports=n.p+"img/logo-fondation-petzl.c22c4824.jpg"},99576:function(t,e,n){"use strict";t.exports=n.p+"img/logo-fondation-petzl.671c0a48.webp"}}]);
//# sourceMappingURL=yeti-legacy.713c2cd9.js.map