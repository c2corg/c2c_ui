(self["webpackChunkc2c_ui"]=self["webpackChunkc2c_ui"]||[]).push([[173],{9825:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return _}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"section"},[e("html-header",{attrs:{title:t.$gettext("Associations history")}}),t._v(" "),e("association-history-pagination",{attrs:{count:t.results?t.results.count:0,limit:t.limit,offset:t.offset,"document-id":t.documentId,"user-id":t.userId}}),t._v(" "),e("loading-notification",{attrs:{promise:t.promise}}),t._v(" "),t.results?e("table",{staticClass:"table is-striped"},[e("thead",[e("tr",[e("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Created on")]),t._v(" "),e("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Contributor")]),t._v(" "),e("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Creation?")]),t._v(" "),e("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Parent")]),t._v(" "),e("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Child")])])]),t._v(" "),e("tbody",t._l(t.results.associations,(function(i,s){return e("tr",{key:s},[e("td",[t._v("\n          "+t._s(t.$dateUtils.toTechnicalString(i.written_at))+"\n        ")]),t._v(" "),e("td",[e("contributor-link",{attrs:{contributor:i.user}})],1),t._v(" "),e("td",[t._v("\n          "+t._s(i.is_creation)+"\n        ")]),t._v(" "),e("td",[e("colored-icon-document",{attrs:{"document-type":t.$documentUtils.getDocumentType(i.parent_document.type)}}),t._v(" "),e("span",[t._v(" ")]),t._v(" "),e("document-link",{attrs:{document:i.parent_document}})],1),t._v(" "),e("td",[e("colored-icon-document",{attrs:{"document-type":t.$documentUtils.getDocumentType(i.child_document.type)}}),t._v(" "),e("span",[t._v(" ")]),t._v(" "),e("document-link",{attrs:{document:i.child_document}})],1)])})),0)]):t._e(),t._v(" "),e("association-history-pagination",{attrs:{count:t.results?t.results.count:0,limit:t.limit,offset:t.offset,"document-id":t.documentId,"user-id":t.userId}})],1)},n=[],a=(i(58940),function(){var t=this,e=t._self._c;return e("div",[e("span",[t._v("(")]),t._v(" "),e("association-history-link",{attrs:{disabled:0===t.offsetAsNumber,limit:t.limit,"user-id":t.userId,"document-id":t.documentId}},[t._v("\n    newest\n  ")]),t._v(" "),e("span",[t._v(" | ")]),t._v(" "),e("association-history-link",{attrs:{disabled:!t.count||t.offsetAsNumber>=t.count-t.limitAsNumber,limit:t.limit,offset:t.count-t.limitAsNumber,"user-id":t.userId,"document-id":t.documentId}},[t._v("\n    oldest\n  ")]),t._v(" "),e("span",[t._v(") View : ")]),t._v(" "),e("span",[t._v("(")]),t._v(" "),e("association-history-link",{attrs:{disabled:0===t.offsetAsNumber,limit:t.limit,offset:Math.max(t.offsetAsNumber-t.limitAsNumber,0),"user-id":t.userId,"document-id":t.documentId}},[t._v("\n    newer "+t._s(t.limitAsNumber)+"\n  ")]),t._v(" "),e("span",[t._v(" | ")]),t._v(" "),e("association-history-link",{attrs:{disabled:!t.count||t.offsetAsNumber+t.limitAsNumber>=t.count,limit:t.limit,offset:t.offsetAsNumber+t.limitAsNumber,"user-id":t.userId,"document-id":t.documentId}},[t._v("\n    older "+t._s(t.limitAsNumber)+"\n  ")]),t._v(" "),e("span",[t._v(")")])],1)}),o=[],r={props:{count:{type:Number,required:!0},documentId:{type:Number,default:null},userId:{type:Number,default:null},limit:{type:Number,default:null},offset:{type:Number,default:null}},computed:{limitAsNumber(){var t;return null!==(t=this.limit)&&void 0!==t?t:50},offsetAsNumber(){var t;return null!==(t=this.offset)&&void 0!==t?t:0}}},l=r,d=i(81656),c=(0,d.A)(l,a,o,!1,null,null,null),u=c.exports,f=i(35277),m=i(45801),h=i(39544),p={components:{ColoredIconDocument:f.A,AssociationHistoryPagination:u},mixins:[h.A],data(){return{promise:{}}},computed:{userId(){return this.$route.query.u?parseInt(this.$route.query.u):null},documentId(){return this.$route.query.d?parseInt(this.$route.query.d):null},offset(){return this.$route.query.offset?parseInt(this.$route.query.offset):null},limit(){return this.$route.query.limit?parseInt(this.$route.query.limit):null},results(){return this.promise.data}},watch:{$route:{handler:"load",immediate:!0}},methods:{load(){this.promise=m.A.association.getHistory({documentId:this.documentId,userId:this.userId,limit:this.limit,offset:this.offset})}}},v=p,g=(0,d.A)(v,s,n,!1,null,"5a734991",null),_=g.exports},94796:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return S}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"section content"},[e("html-header",{attrs:{title:t.$gettext("Differences between versions")}}),t._v(" "),t.containsMaskedVersion?e("masked-document-version-info",{attrs:{"document-type":t.documentType}}):[e("h1",[e("icon-document",{staticClass:"is-large",attrs:{"document-type":t.documentType}}),t._v(" "),e("span",[t._v(" ")]),t._v(" "),e("span",[t._v("diff")]),t._v(" ("+t._s(t.lang)+") :\n      "),e("router-link",{attrs:{to:{name:t.documentType,params:{id:t.documentId,lang:t.lang}}}},[t._v(t._s(t.title))])],1),t._v(" "),e("div",{staticClass:"columns"},[t.oldVersion?e("div",{staticClass:"column"},[e("div",[e("version-link",{attrs:{"document-type":t.documentType,id:t.documentId,version:t.oldVersion.version.version_id,lang:t.lang}},[t._v("\n            Revision #"+t._s(t.oldVersion.document.version)+" as of\n            "+t._s(t.$dateUtils.toTechnicalString(t.oldVersion.version.written_at))+"\n          ")])],1),t._v(" "),e("div",[t._v("by "),e("contributor-link",{attrs:{contributor:t.oldVersion.version}})],1),t._v(" "),e("div",[t._v("\n          "+t._s(t.oldVersion.version.comment)+"\n        ")]),t._v(" "),e("div",[t.oldVersion.previous_version_id?e("diff-link",{attrs:{"document-type":t.documentType,id:t.documentId,lang:t.lang,"version-from":t.oldVersion.previous_version_id,"version-to":t.oldVersion.version.version_id}},[t._v("\n            ←\n            "),e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("previous difference")])]):e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("This is the first version")])],1)]):t._e(),t._v(" "),t.newVersion?e("div",{staticClass:"column"},[e("div",[e("version-link",{attrs:{"document-type":t.documentType,id:t.documentId,version:t.newVersion.version.version_id,lang:t.lang}},[t._v("\n            Revision #"+t._s(t.newVersion.document.version)+" as of\n            "+t._s(t.$dateUtils.toTechnicalString(t.newVersion.version.written_at))+"\n          ")])],1),t._v(" "),e("div",[t._v("by "),e("contributor-link",{attrs:{contributor:t.newVersion.version}})],1),t._v(" "),e("div",[t._v("\n          "+t._s(t.newVersion.version.comment)+"\n        ")]),t._v(" "),e("div",[t.newVersion.next_version_id?e("diff-link",{attrs:{"document-type":t.documentType,id:t.documentId,lang:t.lang,"version-from":t.newVersion.version.version_id,"version-to":t.newVersion.next_version_id}},[e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("next difference")]),t._v("\n            →\n          ")]):e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("This is the last version")])],1)]):t._e()]),t._v(" "),t.oldVersion&&t.newVersion?e("div",[t.filenameHasChanged?e("div",[e("div",{staticClass:"columns"},[e("div",{staticClass:"column"},[e("thumbnail",{staticClass:"is-pulled-right",attrs:{img:t.oldVersion.document,size:"MI"}})],1),t._v(" "),e("div",{staticClass:"column"},[e("thumbnail",{attrs:{img:t.newVersion.document,size:"MI"}})],1)])]):t._e(),t._v(" "),t.geometryHasChanged?e("div",{staticClass:"map-container"},[e("map-view",{attrs:{"old-document":t.oldVersion.document,"new-document":t.newVersion.document}})],1):t._e(),t._v(" "),t._l(Object.keys(t.diffProperties),(function(i){return e("div",{key:i},[e("h2",{staticClass:"title is-2 has-text-centered"},[t._v(t._s(t._f("uppercaseFirstLetter")(t.$gettext(i))))]),t._v(" "),e("div",{staticClass:"columns"},[e("div",{staticClass:"column is-6"},[null===t.diffProperties[i].old?e("del",{staticClass:"is-pulled-right is-italic"},[t._v("null")]):e("del",{staticClass:"is-pulled-right"},[t._v(t._s(t.diffProperties[i].old))])]),t._v(" "),e("div",{staticClass:"column is-6"},[null===t.diffProperties[i].new?e("ins",{staticClass:"is-italic"},[t._v("null")]):e("ins",[t._v(t._s(t.diffProperties[i].new))])])])])})),t._v(" "),t._l(t.diffLocales,(function(i,s){return e("div",{key:s},[e("h2",{staticClass:"title is-2 has-text-centered"},[t._v(t._s(t.$gettext(s)))]),t._v(" "),e("div",{staticClass:"columns is-mobile"},[e("div",{staticClass:"column is-6"},[e("div",{staticClass:"splitted-diff"},t._l(i,(function(i,s){return e("div",{key:s},[i.ellipsed?e("div",{staticClass:"block-ellipsed has-text-centered is-size-7 has-text-grey-light is-italic"},[t._v("\n                  "+t._s(i.rows.length)+" identical rows\n                ")]):e("div",t._l(i.rows,(function(i,s){return e("div",{key:s,staticClass:"row-diff",class:{"row-del":!i.isIdentical&&!i.isFakeOld,"row-fake":i.isFakeOld}},t._l(i.oldPart,(function(i,s){return e(i.isIdentical?"span":"del",{key:s,tag:"component"},[t._v(t._s(i.text))])})),1)})),0)])})),0)]),t._v(" "),e("div",{staticClass:"column is-6"},[e("div",{staticClass:"splitted-diff"},t._l(i,(function(i,s){return e("div",{key:s},[i.ellipsed?e("div",{staticClass:"block-ellipsed has-text-centered is-size-7 has-text-grey-light is-italic"},[t._v("\n                  "+t._s(i.rows.length)+" identical rows\n                ")]):e("div",t._l(i.rows,(function(i,s){return e("div",{key:s,staticClass:"row-diff",class:{"row-ins":!i.isIdentical&&!i.isFakeNew,"row-fake":i.isFakeNew}},t._l(i.newPart,(function(i,s){return e(i.isIdentical?"span":"ins",{key:s,tag:"component"},[t._v(t._s(i.text))])})),1)})),0)])})),0)])])])}))],2):t._e()]],2)},n=[],a=(i(33110),i(44114),i(23792),i(62953),i(58940),i(27495),i(25440),i(74423),i(21699),i(26910),i(99449),function(){var t=this,e=t._self._c;return e("div",{staticClass:"notification is-warning has-text-centered"},[e("p",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("You are trying to compare versions of a document of which at least one version is masked.")]),t._v(" "),e("router-link",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{to:{name:t.documentType+"-history",params:{id:t.$route.params.id,lang:t.$route.params.lang}},rel:"nofollow"}},[t._v("\n    Show document history\n  ")])],1)}),o=[],r={props:{documentType:{type:String,required:!0}}},l=r,d=i(81656),c=(0,d.A)(l,a,o,!1,null,null,null),u=c.exports;i(16280),i(13609),i(71761),i(90744),i(38781);function f(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}var m=-1,h=1,p=0;f.Diff,f.diff_main=function(t,e,i,s){"undefined"===typeof s&&(s=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var n=s;if(null===t||null===e)throw new Error("Null input. (diff_main)");if(t===e)return t?[[p,t]]:[];"undefined"===typeof i&&(i=!0);var a=i,o=this.diff_commonPrefix(t,e),r=t.substring(0,o);t=t.substring(o),e=e.substring(o),o=this.diff_commonSuffix(t,e);var l=t.substring(t.length-o);t=t.substring(0,t.length-o),e=e.substring(0,e.length-o);var d=this.diff_compute_(t,e,a,n);return r&&d.unshift([p,r]),l&&d.push([p,l]),this.diff_cleanupMerge(d),d},f.diff_compute_=function(t,e,i,s){var n;if(!t)return[[h,e]];if(!e)return[[m,t]];var a=t.length>e.length?t:e,o=t.length>e.length?e:t,r=a.indexOf(o);if(-1!==r)return n=[[h,a.substring(0,r)],[p,o],[h,a.substring(r+o.length)]],t.length>e.length&&(n[0][0]=n[2][0]=m),n;if(1===o.length)return[[m,t],[h,e]];var l=this.diff_halfMatch_(t,e);if(l){var d=l[0],c=l[1],u=l[2],f=l[3],v=l[4],g=this.diff_main(d,u,i,s),_=this.diff_main(c,f,i,s);return g.concat([[p,v]],_)}return i&&t.length>100&&e.length>100?this.diff_lineMode_(t,e,s):this.diff_bisect_(t,e,s)},f.diff_lineMode_=function(t,e,i){var s=this.diff_linesToChars_(t,e);t=s.chars1,e=s.chars2;var n=s.lineArray,a=this.diff_main(t,e,!1,i);this.diff_charsToLines_(a,n),this.diff_cleanupSemantic(a),a.push([p,""]);var o=0,r=0,l=0,d="",c="";while(o<a.length){switch(a[o][0]){case h:l++,c+=a[o][1];break;case m:r++,d+=a[o][1];break;case p:if(r>=1&&l>=1){a.splice(o-r-l,r+l),o=o-r-l;let t=this.diff_main(d,c,!1,i);for(var u=t.length-1;u>=0;u--)a.splice(o,0,t[u]);o+=t.length}l=0,r=0,d="",c="";break}o++}return a.pop(),a},f.diff_bisect_=function(t,e,i){for(var s=t.length,n=e.length,a=Math.ceil((s+n)/2),o=a,r=2*a,l=new Array(r),d=new Array(r),c=0;c<r;c++)l[c]=-1,d[c]=-1;l[o+1]=0,d[o+1]=0;for(var u=s-n,f=u%2!==0,p=0,v=0,g=0,_=0,b=0;b<a;b++){if((new Date).getTime()>i)break;for(let a=-b+p;a<=b-v;a+=2){let c=o+a;var y;y=a===-b||a!==b&&l[c-1]<l[c+1]?l[c+1]:l[c-1]+1;let m=y-a;while(y<s&&m<n&&t.charAt(y)===e.charAt(m))y++,m++;if(l[c]=y,y>s)v+=2;else if(m>n)p+=2;else if(f){let n=o+u-a;if(n>=0&&n<r&&-1!==d[n]){var w=s-d[n];if(y>=w)return this.diff_bisectSplit_(t,e,y,m,i)}}}for(let a=-b+g;a<=b-_;a+=2){let c,m=o+a;c=a===-b||a!==b&&d[m-1]<d[m+1]?d[m+1]:d[m-1]+1;var C=c-a;while(c<s&&C<n&&t.charAt(s-c-1)===e.charAt(n-C-1))c++,C++;if(d[m]=c,c>s)_+=2;else if(C>n)g+=2;else if(!f){let n=o+u-a;if(n>=0&&n<r&&-1!==l[n]){let a=l[n],r=o+a-n;if(c=s-c,a>=c)return this.diff_bisectSplit_(t,e,a,r,i)}}}}return[[m,t],[h,e]]},f.diff_bisectSplit_=function(t,e,i,s,n){var a=t.substring(0,i),o=e.substring(0,s),r=t.substring(i),l=e.substring(s),d=this.diff_main(a,o,!1,n),c=this.diff_main(r,l,!1,n);return d.concat(c)},f.diff_linesToChars_=function(t,e){var i=[],s={};function n(t){var e="",n=0,a=-1,o=i.length;while(a<t.length-1){a=t.indexOf("\n",n),-1===a&&(a=t.length-1);var r=t.substring(n,a+1);n=a+1,(s.hasOwnProperty?s.hasOwnProperty(r):void 0!==s[r])?e+=String.fromCharCode(s[r]):(e+=String.fromCharCode(o),s[r]=o,i[o++]=r)}return e}i[0]="";var a=n(t),o=n(e);return{chars1:a,chars2:o,lineArray:i}},f.diff_charsToLines_=function(t,e){for(var i=0;i<t.length;i++){for(var s=t[i][1],n=[],a=0;a<s.length;a++)n[a]=e[s.charCodeAt(a)];t[i][1]=n.join("")}},f.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!==e.charAt(0))return 0;var i=0,s=Math.min(t.length,e.length),n=s,a=0;while(i<n)t.substring(a,n)===e.substring(a,n)?(i=n,a=i):s=n,n=Math.floor((s-i)/2+i);return n},f.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!==e.charAt(e.length-1))return 0;var i=0,s=Math.min(t.length,e.length),n=s,a=0;while(i<n)t.substring(t.length-n,t.length-a)===e.substring(e.length-n,e.length-a)?(i=n,a=i):s=n,n=Math.floor((s-i)/2+i);return n},f.diff_commonOverlap_=function(t,e){var i=t.length,s=e.length;if(0===i||0===s)return 0;i>s?t=t.substring(i-s):i<s&&(e=e.substring(0,i));var n=Math.min(i,s);if(t===e)return n;var a=0,o=1;while(o===o){var r=t.substring(n-o),l=e.indexOf(r);if(-1===l)return a;o+=l,0!==l&&t.substring(n-o)!==e.substring(0,o)||(a=o,o++)}},f.diff_halfMatch_=function(t,e){if(this.Diff_Timeout<=0)return null;var i=t.length>e.length?t:e,s=t.length>e.length?e:t;if(i.length<4||2*s.length<i.length)return null;var n=this;function a(t,e,i){var s,a,o,r,l=t.substring(i,i+Math.floor(t.length/4)),d=-1,c="";while(-1!==(d=e.indexOf(l,d+1))){var u=n.diff_commonPrefix(t.substring(i),e.substring(d)),f=n.diff_commonSuffix(t.substring(0,i),e.substring(0,d));c.length<f+u&&(c=e.substring(d-f,d)+e.substring(d,d+u),s=t.substring(0,i-f),a=t.substring(i+u),o=e.substring(0,d-f),r=e.substring(d+u))}return 2*c.length>=t.length?[s,a,o,r,c]:null}var o,r,l,d,c,u=a(i,s,Math.ceil(i.length/4)),f=a(i,s,Math.ceil(i.length/2));if(!u&&!f)return null;o=f?u&&u[4].length>f[4].length?u:f:u,t.length>e.length?(r=o[0],l=o[1],d=o[2],c=o[3]):(d=o[0],c=o[1],r=o[2],l=o[3]);var m=o[4];return[r,l,d,c,m]},f.diff_cleanupSemantic=function(t){var e=!1,i=[],s=0,n=null,a=0,o=0,r=0,l=0,d=0;while(a<t.length)t[a][0]===p?(i[s++]=a,o=l,r=d,l=0,d=0,n=t[a][1]):(t[a][0]===h?l+=t[a][1].length:d+=t[a][1].length,n&&n.length<=Math.max(o,r)&&n.length<=Math.max(l,d)&&(t.splice(i[s-1],0,[m,n]),t[i[s-1]+1][0]=h,s--,s--,a=s>0?i[s-1]:-1,o=0,r=0,l=0,d=0,n=null,e=!0)),a++;e&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),a=1;while(a<t.length){if(t[a-1][0]===m&&t[a][0]===h){var c=t[a-1][1],u=t[a][1],f=this.diff_commonOverlap_(c,u),v=this.diff_commonOverlap_(u,c);f>=v?(f>=c.length/2||f>=u.length/2)&&(t.splice(a,0,[p,u.substring(0,f)]),t[a-1][1]=c.substring(0,c.length-f),t[a+1][1]=u.substring(f),a++):(v>=c.length/2||v>=u.length/2)&&(t.splice(a,0,[p,c.substring(0,v)]),t[a-1][0]=h,t[a-1][1]=u.substring(0,u.length-v),t[a+1][0]=m,t[a+1][1]=c.substring(v),a++),a++}a++}},f.diff_cleanupSemanticLossless=function(t){function e(t,e){if(!t||!e)return 6;var i=t.charAt(t.length-1),s=e.charAt(0),n=i.match(f.nonAlphaNumericRegex_),a=s.match(f.nonAlphaNumericRegex_),o=n&&i.match(f.whitespaceRegex_),r=a&&s.match(f.whitespaceRegex_),l=o&&i.match(f.linebreakRegex_),d=r&&s.match(f.linebreakRegex_),c=l&&t.match(f.blanklineEndRegex_),u=d&&e.match(f.blanklineStartRegex_);return c||u?5:l||d?4:n&&!o&&r?3:o||r?2:n||a?1:0}var i=1;while(i<t.length-1){if(t[i-1][0]===p&&t[i+1][0]===p){var s=t[i-1][1],n=t[i][1],a=t[i+1][1],o=this.diff_commonSuffix(s,n);if(o){var r=n.substring(n.length-o);s=s.substring(0,s.length-o),n=r+n.substring(0,n.length-o),a=r+a}var l=s,d=n,c=a,u=e(s,n)+e(n,a);while(n.charAt(0)===a.charAt(0)){s+=n.charAt(0),n=n.substring(1)+a.charAt(0),a=a.substring(1);var m=e(s,n)+e(n,a);m>=u&&(u=m,l=s,d=n,c=a)}t[i-1][1]!==l&&(l?t[i-1][1]=l:(t.splice(i-1,1),i--),t[i][1]=d,c?t[i+1][1]=c:(t.splice(i+1,1),i--))}i++}},f.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,f.whitespaceRegex_=/\s/,f.linebreakRegex_=/[\r\n]/,f.blanklineEndRegex_=/\n\r?\n$/,f.blanklineStartRegex_=/^\r?\n\r?\n/,f.diff_cleanupEfficiency=function(t){var e=!1,i=[],s=0,n=null,a=0,o=!1,r=!1,l=!1,d=!1;while(a<t.length)t[a][0]===p?(t[a][1].length<this.Diff_EditCost&&(l||d)?(i[s++]=a,o=l,r=d,n=t[a][1]):(s=0,n=null),l=d=!1):(t[a][0]===m?d=!0:l=!0,n&&(o&&r&&l&&d||n.length<this.Diff_EditCost/2&&o+r+l+d===3)&&(t.splice(i[s-1],0,[m,n]),t[i[s-1]+1][0]=h,s--,n=null,o&&r?(l=d=!0,s=0):(s--,a=s>0?i[s-1]:-1,l=d=!1),e=!0)),a++;e&&this.diff_cleanupMerge(t)},f.diff_cleanupMerge=function(t){t.push([p,""]);var e,i=0,s=0,n=0,a="",o="";while(i<t.length)switch(t[i][0]){case h:n++,o+=t[i][1],i++;break;case m:s++,a+=t[i][1],i++;break;case p:s+n>1?(0!==s&&0!==n&&(e=this.diff_commonPrefix(o,a),0!==e&&(i-s-n>0&&t[i-s-n-1][0]===p?t[i-s-n-1][1]+=o.substring(0,e):(t.splice(0,0,[p,o.substring(0,e)]),i++),o=o.substring(e),a=a.substring(e)),e=this.diff_commonSuffix(o,a),0!==e&&(t[i][1]=o.substring(o.length-e)+t[i][1],o=o.substring(0,o.length-e),a=a.substring(0,a.length-e))),0===s?t.splice(i-n,s+n,[h,o]):0===n?t.splice(i-s,s+n,[m,a]):t.splice(i-s-n,s+n,[m,a],[h,o]),i=i-s-n+(s?1:0)+(n?1:0)+1):0!==i&&t[i-1][0]===p?(t[i-1][1]+=t[i][1],t.splice(i,1)):i++,n=0,s=0,a="",o="";break}""===t[t.length-1][1]&&t.pop();var r=!1;i=1;while(i<t.length-1)t[i-1][0]===p&&t[i+1][0]===p&&(t[i][1].substring(t[i][1].length-t[i-1][1].length)===t[i-1][1]?(t[i][1]=t[i-1][1]+t[i][1].substring(0,t[i][1].length-t[i-1][1].length),t[i+1][1]=t[i-1][1]+t[i+1][1],t.splice(i-1,1),r=!0):t[i][1].substring(0,t[i+1][1].length)===t[i+1][1]&&(t[i-1][1]+=t[i+1][1],t[i][1]=t[i][1].substring(t[i+1][1].length)+t[i+1][1],t.splice(i+1,1),r=!0)),i++;r&&this.diff_cleanupMerge(t)},f.diff_xIndex=function(t,e){var i,s=0,n=0,a=0,o=0;for(i=0;i<t.length;i++){if(t[i][0]!==h&&(s+=t[i][1].length),t[i][0]!==m&&(n+=t[i][1].length),s>e)break;a=s,o=n}return t.length!==i&&t[i][0]===m?o:o+(e-a)},f.diff_prettyHtml=function(t){for(var e=[],i=/&/g,s=/</g,n=/>/g,a=/\n/g,o=0;o<t.length;o++){var r=t[o][0],l=t[o][1],d=l.replace(i,"&amp;").replace(s,"&lt;").replace(n,"&gt;").replace(a,"&para;<br>");switch(r){case h:e[o]='<ins style="background:#e6ffe6;">'+d+"</ins>";break;case m:e[o]='<del style="background:#ffe6e6;">'+d+"</del>";break;case p:e[o]="<span>"+d+"</span>";break}}return e.join("")},f.diff_text1=function(t){for(var e=[],i=0;i<t.length;i++)t[i][0]!==h&&(e[i]=t[i][1]);return e.join("")},f.diff_text2=function(t){for(var e=[],i=0;i<t.length;i++)t[i][0]!==m&&(e[i]=t[i][1]);return e.join("")},f.diff_levenshtein=function(t){for(var e=0,i=0,s=0,n=0;n<t.length;n++){var a=t[n][0],o=t[n][1];switch(a){case h:i+=o.length;break;case m:s+=o.length;break;case p:e+=Math.max(i,s),i=0,s=0;break}}return e+=Math.max(i,s),e},f.diff_toDelta=function(t){for(var e=[],i=0;i<t.length;i++)switch(t[i][0]){case h:e[i]="+"+encodeURI(t[i][1]);break;case m:e[i]="-"+t[i][1].length;break;case p:e[i]="="+t[i][1].length;break}return e.join("\t").replace(/%20/g," ")},f.diff_fromDelta=function(t,e){for(var i=[],s=0,n=0,a=e.split(/\t/g),o=0;o<a.length;o++){var r=a[o].substring(1);switch(a[o].charAt(0)){case"+":try{i[s++]=[h,decodeURI(r)]}catch(c){throw new Error("Illegal escape in diff_fromDelta: "+r)}break;case"-":case"=":var l=parseInt(r,10);if(isNaN(l)||l<0)throw new Error("Invalid number in diff_fromDelta: "+r);var d=t.substring(n,n+=l);"="===a[o].charAt(0)?i[s++]=[p,d]:i[s++]=[m,d];break;default:if(a[o])throw new Error("Invalid diff operation in diff_fromDelta: "+a[o])}}if(n!==t.length)throw new Error("Delta length ("+n+") does not equal source text length ("+t.length+").");return i},f.match_main=function(t,e,i){if(null===t||null===e||null===i)throw new Error("Null input. (match_main)");return i=Math.max(0,Math.min(i,t.length)),t===e?0:t.length?t.substring(i,i+e.length)===e?i:this.match_bitap_(t,e,i):-1},f.match_bitap_=function(t,e,i){if(e.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var s=this.match_alphabet_(e),n=this;function a(t,s){var a=t/e.length,o=Math.abs(i-s);return n.Match_Distance?a+o/n.Match_Distance:o?1:a}var o=this.Match_Threshold,r=t.indexOf(e,i);-1!==r&&(o=Math.min(a(0,r),o),r=t.lastIndexOf(e,i+e.length),-1!==r&&(o=Math.min(a(0,r),o)));var l,d,c=1<<e.length-1;r=-1;for(var u,f=e.length+t.length,m=0;m<e.length;m++){l=0,d=f;while(l<d)a(m,i+d)<=o?l=d:f=d,d=Math.floor((f-l)/2+l);f=d;var h=Math.max(1,i-d+1),p=Math.min(i+d,t.length)+e.length,v=Array(p+2);v[p+1]=(1<<m)-1;for(var g=p;g>=h;g--){var _=s[t.charAt(g-1)];if(v[g]=0===m?(v[g+1]<<1|1)&_:(v[g+1]<<1|1)&_|(u[g+1]|u[g])<<1|1|u[g+1],v[g]&c){var b=a(m,g-1);if(b<=o){if(o=b,r=g-1,!(r>i))break;h=Math.max(1,2*i-r)}}}if(a(m+1,i)>o)break;u=v}return r},f.match_alphabet_=function(t){var e={};for(let i=0;i<t.length;i++)e[t.charAt(i)]=0;for(let i=0;i<t.length;i++)e[t.charAt(i)]|=1<<t.length-i-1;return e},f.patch_addContext_=function(t,e){if(0!==e.length){var i=e.substring(t.start2,t.start2+t.length1),s=0;while(e.indexOf(i)!==e.lastIndexOf(i)&&i.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin)s+=this.Patch_Margin,i=e.substring(t.start2-s,t.start2+t.length1+s);s+=this.Patch_Margin;var n=e.substring(t.start2-s,t.start2);n&&t.diffs.unshift([p,n]);var a=e.substring(t.start2+t.length1,t.start2+t.length1+s);a&&t.diffs.push([p,a]),t.start1-=n.length,t.start2-=n.length,t.length1+=n.length+a.length,t.length2+=n.length+a.length}},f.patch_make=function(t,e,i){var s,n;if("string"===typeof t&&"string"===typeof e&&"undefined"===typeof i)s=t,n=this.diff_main(s,e,!0),n.length>2&&(this.diff_cleanupSemantic(n),this.diff_cleanupEfficiency(n));else if(t&&"object"===typeof t&&"undefined"===typeof e&&"undefined"===typeof i)n=t,s=this.diff_text1(n);else if("string"===typeof t&&e&&"object"===typeof e&&"undefined"===typeof i)s=t,n=e;else{if("string"!==typeof t||"string"!==typeof e||!i||"object"!==typeof i)throw new Error("Unknown call format to patch_make.");s=t,n=i}if(0===n.length)return[];for(var a=[],o=new f.patch_obj,r=0,l=0,d=0,c=s,u=s,v=0;v<n.length;v++){var g=n[v][0],_=n[v][1];switch(r||g===p||(o.start1=l,o.start2=d),g){case h:o.diffs[r++]=n[v],o.length2+=_.length,u=u.substring(0,d)+_+u.substring(d);break;case m:o.length1+=_.length,o.diffs[r++]=n[v],u=u.substring(0,d)+u.substring(d+_.length);break;case p:_.length<=2*this.Patch_Margin&&r&&n.length!==v+1?(o.diffs[r++]=n[v],o.length1+=_.length,o.length2+=_.length):_.length>=2*this.Patch_Margin&&r&&(this.patch_addContext_(o,c),a.push(o),o=new f.patch_obj,r=0,c=u,l=d);break}g!==h&&(l+=_.length),g!==m&&(d+=_.length)}return r&&(this.patch_addContext_(o,c),a.push(o)),a},f.patch_deepCopy=function(t){for(var e=[],i=0;i<t.length;i++){var s=t[i],n=new f.patch_obj;n.diffs=[];for(var a=0;a<s.diffs.length;a++)n.diffs[a]=s.diffs[a].slice();n.start1=s.start1,n.start2=s.start2,n.length1=s.length1,n.length2=s.length2,e[i]=n}return e},f.patch_apply=function(t,e){if(0===t.length)return[e,[]];t=this.patch_deepCopy(t);var i=this.patch_addPadding(t);e=i+e+i,this.patch_splitMax(t);for(var s=0,n=[],a=0;a<t.length;a++){var o,r,l=t[a].start2+s,d=this.diff_text1(t[a].diffs),c=-1;if(d.length>this.Match_MaxBits?(o=this.match_main(e,d.substring(0,this.Match_MaxBits),l),-1!==o&&(c=this.match_main(e,d.substring(d.length-this.Match_MaxBits),l+d.length-this.Match_MaxBits),(-1===c||o>=c)&&(o=-1))):o=this.match_main(e,d,l),-1===o)n[a]=!1,s-=t[a].length2-t[a].length1;else if(n[a]=!0,s=o-l,r=-1===c?e.substring(o,o+d.length):e.substring(o,c+this.Match_MaxBits),d===r)e=e.substring(0,o)+this.diff_text2(t[a].diffs)+e.substring(o+d.length);else{var u=this.diff_main(d,r,!1);if(d.length>this.Match_MaxBits&&this.diff_levenshtein(u)/d.length>this.Patch_DeleteThreshold)n[a]=!1;else{this.diff_cleanupSemanticLossless(u);for(var f,v=0,g=0;g<t[a].diffs.length;g++){var _=t[a].diffs[g];_[0]!==p&&(f=this.diff_xIndex(u,v)),_[0]===h?e=e.substring(0,o+f)+_[1]+e.substring(o+f):_[0]===m&&(e=e.substring(0,o+f)+e.substring(o+this.diff_xIndex(u,v+_[1].length))),_[0]!==m&&(v+=_[1].length)}}}}return e=e.substring(i.length,e.length-i.length),[e,n]},f.patch_addPadding=function(t){var e=this.Patch_Margin,i="";for(let a=1;a<=e;a++)i+=String.fromCharCode(a);for(let a=0;a<t.length;a++)t[a].start1+=e,t[a].start2+=e;var s=t[0],n=s.diffs;if(0===n.length||n[0][0]!==p)n.unshift([p,i]),s.start1-=e,s.start2-=e,s.length1+=e,s.length2+=e;else if(e>n[0][1].length){let t=e-n[0][1].length;n[0][1]=i.substring(n[0][1].length)+n[0][1],s.start1-=t,s.start2-=t,s.length1+=t,s.length2+=t}if(s=t[t.length-1],n=s.diffs,0===n.length||n[n.length-1][0]!==p)n.push([p,i]),s.length1+=e,s.length2+=e;else if(e>n[n.length-1][1].length){let t=e-n[n.length-1][1].length;n[n.length-1][1]+=i.substring(0,t),s.length1+=t,s.length2+=t}return i},f.patch_splitMax=function(t){for(var e=this.Match_MaxBits,i=0;i<t.length;i++)if(!(t[i].length1<=e)){var s=t[i];t.splice(i--,1);var n=s.start1,a=s.start2,o="";while(0!==s.diffs.length){var r=new f.patch_obj,l=!0;r.start1=n-o.length,r.start2=a-o.length,""!==o&&(r.length1=r.length2=o.length,r.diffs.push([p,o]));while(0!==s.diffs.length&&r.length1<e-this.Patch_Margin){var d=s.diffs[0][0],c=s.diffs[0][1];d===h?(r.length2+=c.length,a+=c.length,r.diffs.push(s.diffs.shift()),l=!1):d===m&&1===r.diffs.length&&r.diffs[0][0]===p&&c.length>2*e?(r.length1+=c.length,n+=c.length,l=!1,r.diffs.push([d,c]),s.diffs.shift()):(c=c.substring(0,e-r.length1-this.Patch_Margin),r.length1+=c.length,n+=c.length,d===p?(r.length2+=c.length,a+=c.length):l=!1,r.diffs.push([d,c]),c===s.diffs[0][1]?s.diffs.shift():s.diffs[0][1]=s.diffs[0][1].substring(c.length))}o=this.diff_text2(r.diffs),o=o.substring(o.length-this.Patch_Margin);var u=this.diff_text1(s.diffs).substring(0,this.Patch_Margin);""!==u&&(r.length1+=u.length,r.length2+=u.length,0!==r.diffs.length&&r.diffs[r.diffs.length-1][0]===p?r.diffs[r.diffs.length-1][1]+=u:r.diffs.push([p,u])),l||t.splice(++i,0,r)}}},f.patch_toText=function(t){for(var e=[],i=0;i<t.length;i++)e[i]=t[i];return e.join("")},f.patch_fromText=function(t){var e=[];if(!t)return e;var i=t.split("\n"),s=0,n=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;while(s<i.length){var a=i[s].match(n);if(!a)throw new Error("Invalid patch string: "+i[s]);var o=new f.patch_obj;e.push(o),o.start1=parseInt(a[1],10),""===a[2]?(o.start1--,o.length1=1):"0"===a[2]?o.length1=0:(o.start1--,o.length1=parseInt(a[2],10)),o.start2=parseInt(a[3],10),""===a[4]?(o.start2--,o.length2=1):"0"===a[4]?o.length2=0:(o.start2--,o.length2=parseInt(a[4],10)),s++;while(s<i.length){var r=i[s].charAt(0);try{var l=decodeURI(i[s].substring(1))}catch(d){throw new Error("Illegal escape in patch_fromText: "+l)}if("-"===r)o.diffs.push([m,l]);else if("+"===r)o.diffs.push([h,l]);else if(" "===r)o.diffs.push([p,l]);else{if("@"===r)break;if(""!==r)throw new Error('Invalid patch mode "'+r+'" in: '+l)}s++}}return e},f.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},f.patch_obj.toString=function(){var t,e;t=0===this.length1?this.start1+",0":1===this.length1?this.start1+1:this.start1+1+","+this.length1,e=0===this.length2?this.start2+",0":1===this.length2?this.start2+1:this.start2+1+","+this.length2;for(var i,s=["@@ -"+t+" +"+e+" @@\n"],n=0;n<this.diffs.length;n++){switch(this.diffs[n][0]){case h:i="+";break;case m:i="-";break;case p:i=" ";break}s[n+1]=i+encodeURI(this.diffs[n][1])+"\n"}return s.join("").replace(/%20/g," ")};var v=i(45801),g=i(10077),_=i(39544);const b=function(t,e){return Array.isArray(t)||Array.isArray(e)?JSON.stringify(t)!==JSON.stringify(e):null===t&&null!==e||null!==t&&null===e||t!==e},y=function(t,e){for(let i=0;i<t.length;i++)0===t[i][0]?e(t[i][1],t[i][1],!0):1===t[i][0]?e(null,t[i][1],!1):-1===t[i][0]&&(i+1<t.length&&1===t[i+1][0]?(e(t[i][1],t[i+1][1],!1),i+=1):e(t[i][1],null,!1))},w=function(t,e){this.text=t,this.isIdentical=e},C=function(t,e,i){if(this.oldPart=[],this.newPart=[],this.ellipsed=!0,this.isIdentical=i,i)this.oldPart=[new w(t,!0)],this.newPart=this.oldPart;else if(void 0===t)this.newPart.push(new w(e,!1));else if(void 0===e)this.oldPart.push(new w(t,!1));else{const i=f.diff_main(t,e);y(i,this.addItem.bind(this))}};Object.defineProperty(C.prototype,"isFakeOld",{get(){return 0===this.oldPart.length}}),Object.defineProperty(C.prototype,"isFakeNew",{get(){return 0===this.newPart.length}}),C.prototype.addItem=function(t,e,i){if(i){const e=new w(t,!0);this.oldPart.push(e),this.newPart.push(e)}else void 0!==t&&this.oldPart.push(new w(t,!1)),void 0!==e&&this.newPart.push(new w(e,!1))};const A=function(){this.items=[]};A.prototype.build=function(t,e){const i=f.diff_linesToChars_(t,e),s=f.diff_main(i.chars1,i.chars2,!1);f.diff_charsToLines_(s,i.lineArray),y(s,this.add.bind(this))},A.prototype.add=function(t,e,i){const s=this.items;if(i){const e=t.split("\n");for(const t of e.slice(0,e.length-1))s.push(new C(t,t,!0))}else{t=null!==t?t.split("\n"):[],e=null!==e?e.split("\n"):[];for(let i=0;i<Math.max(t.length-1,e.length-1);i++)s.push(new C(t[i],e[i],!1))}},A.prototype.computeEllipsisStates=function(){const t=this.items;for(let e=0;e<t.length;e++)if(!t[e].isIdentical)for(let i=Math.max(0,e-2);i<=Math.min(t.length-1,e+2);i++)t[i].ellipsed=!1};var x={components:{MaskedDocumentVersionInfo:u},mixins:[_.A],data(){return{title:null,oldVersion:null,newVersion:null,diffProperties:{},diffLocales:{},containsMaskedVersion:!0}},computed:{documentId(){return parseInt(this.$route.params.id)},documentType(){return this.$route.name.replace("-diff","")},lang(){return this.$route.params.lang},geoLocalized(){return g.A.objectDefinitions[this.documentType].geoLocalized},filenameHasChanged(){var t,e;return this.oldVersion.document.filename!==(null===(t=this.newVersion)||void 0===t||null===(e=t.document)||void 0===e?void 0:e.filename)},geometryHasChanged(){var t,e,i,s,n;if(!this.geoLocalized&&"area"!==this.documentType)return!1;if(!this.$documentUtils.hasSameGeolocation(this.oldVersion.document,null===(t=this.newVersion)||void 0===t?void 0:t.document))return!0;const a=null===(e=this.oldVersion)||void 0===e||null===(i=e.document)||void 0===i?void 0:i.geometry,o=null===(s=this.newVersion)||void 0===s||null===(n=s.document)||void 0===n?void 0:n.geometry;return a.geom_detail!==o.geom_detail}},watch:{$route:{handler:"loadVersions",immediate:!0}},methods:{loadVersions(){this.loadVersion(this.$route.params.versionFrom,"oldVersion"),this.loadVersion(this.$route.params.versionTo,"newVersion")},getKeys(t,e,i=[]){let s=Object.keys(t).concat(Object.keys(e));return s=s.filter((function(t,e,s){return s.indexOf(t)===e&&!i.includes(t)})),s.sort(),s},buildDiff(){if(this.diffProperties={},this.diffLocales={},!this.oldVersion||!this.newVersion)return;if(!this.oldVersion.document||!this.newVersion.document)return;this.containsMaskedVersion=!1;const t=this.getKeys(this.oldVersion.document,this.newVersion.document,["version","locales","geometry","cooked","filename"]);for(const a of t)b(this.oldVersion.document[a],this.newVersion.document[a])&&(this.diffProperties[a]={old:this.oldVersion.document[a],new:this.newVersion.document[a]});const e=this.$documentUtils.getLocaleStupid(this.oldVersion.document,this.lang),i=this.$documentUtils.getLocaleStupid(this.newVersion.document,this.lang),s=this.getKeys(e,i,["lang","version"]),n=function(t){var e;return t=null!==(e=t)&&void 0!==e?e:"",t=t.replace(/\r\n?/g,"\n"),t+=t.endsWith("\n")?"":"\n",t};for(const a of s){const t=n(e[a]),s=n(i[a]);if(b(t,s)){const e=new A;e.build(t,s),e.computeEllipsisStates();const i=function(t){this.rows=[],this.ellipsed=t},n=[new i(e.items[0].ellipsed)];let o=n[0];for(const t of e.items)o.ellipsed!==t.ellipsed&&(o=new i(t.ellipsed),n.push(o)),o.rows.push(t);this.diffLocales[a]=n}}},loadVersion(t,e){this[e]=null,"prev"!==t&&"next"!==t&&v.A[this.documentType].getVersion(this.documentId,this.lang,t).then((t=>{this[e]=t.data,"prev"===this.$route.params.versionFrom&&"newVersion"===e&&this.loadVersion(this.newVersion.previous_version_id,"oldVersion"),"next"===this.$route.params.versionTo&&"oldVersion"===e&&this.loadVersion(this.newVersion.next_version_id,"newVersion"),"newVersion"===e&&this.newVersion.document&&(this.title=this.$documentUtils.getLocaleStupid(this.newVersion.document,this.lang).title),this.buildDiff()}))}}},D=x,k=(0,d.A)(D,s,n,!1,null,"30ba4538",null),S=k.exports},25259:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return g}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"section"},[e("html-header",{attrs:{title:t.$gettext("Versions")}}),t._v(" "),e("loading-notification",{attrs:{promise:t.promise}}),t._v(" "),t.history?e("div",[e("h1",{staticClass:"title is-1"},[e("icon-document",{attrs:{"document-type":t.documentType}}),t._v(" "),e("router-link",{attrs:{to:{name:t.documentType,params:{id:t.documentId,lang:t.lang}}}},[t._v(t._s(t.history.title))])],1),t._v(" "),e("history-view-links",{attrs:{"document-id":t.documentId,"document-type":t.documentType,lang:t.lang,"version-from":t.versionFrom,"version-to":t.versionTo}}),t._v(" "),e("table",{staticClass:"table is-striped"},[e("thead",[e("tr",[e("th"),t._v(" "),e("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Created on")]),t._v(" "),e("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Contributor")]),t._v(" "),t.$user.isModerator?e("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Visibility")]):t._e(),t._v(" "),e("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("comment")])])]),t._v(" "),e("tbody",t._l(t.filteredVersions,(function(i){return e("tr",{key:i.version_id,class:{masked:i.masked}},[e("td",["profile"!=t.documentType?e("div",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.versionFrom,expression:"versionFrom"}],attrs:{disabled:t.versionTo<=i.version_id,type:"radio",name:"versionFrom"},domProps:{value:i.version_id,checked:t._q(t.versionFrom,i.version_id)},on:{change:function(e){t.versionFrom=i.version_id}}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.versionTo,expression:"versionTo"}],attrs:{disabled:t.versionFrom>=i.version_id,type:"radio",name:"versionTo"},domProps:{value:i.version_id,checked:t._q(t.versionTo,i.version_id)},on:{change:function(e){t.versionTo=i.version_id}}}),t._v(" "),i.previous_version_id?e("diff-link",{attrs:{"document-type":t.documentType,id:t.documentId,lang:t.lang,"version-from":i.previous_version_id,"version-to":i.version_id}}):t._e()],1):t._e()]),t._v(" "),e("td",[e("version-link",{attrs:{"document-type":t.documentType,id:t.documentId,version:i.version_id,lang:t.lang}},[t._v("\n              "+t._s(t.$dateUtils.toTechnicalString(i.written_at))+"\n            ")])],1),t._v(" "),e("td",[e("contributor-link",{attrs:{contributor:i}})],1),t._v(" "),t.$user.isModerator?e("td",[i.version_id!==t.latestVersionId?e("mask-link",{attrs:{id:t.documentId,version:i,lang:t.lang}}):t._e()],1):t._e(),t._v(" "),e("td",[t._v("\n            "+t._s(i.comment)+"\n          ")])])})),0)]),t._v(" "),e("history-view-links",{attrs:{"document-id":t.documentId,"document-type":t.documentType,lang:t.lang,"version-from":t.versionFrom,"version-to":t.versionTo}})],1):t._e()],1)},n=[],a=(i(58940),i(27495),i(25440),i(23792),i(62953),i(94490),function(){var t=this,e=t._self._c;return e("div",{staticClass:"links"},[e("diff-link",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{"document-type":t.documentType,id:t.documentId,lang:t.lang,"version-from":t.versionFrom,"version-to":t.versionTo}},[t._v("\n    Compare selected versions\n  ")]),t._v(" "),e("router-link",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{to:{name:t.documentType,params:{id:t.documentId,lang:t.lang}}}},[t._v("\n    See the latest version\n  ")]),t._v(" "),e("association-history-link",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{"document-id":t.documentId}},[t._v("Associations history")]),t._v(" "),e("span",[e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("List of versions for language:")]),t._v(" "),e("span",[t._v("  "+t._s(t.$gettext(t.lang,"langs"))+" ")])])],1)}),o=[],r={props:{documentId:{type:Number,required:!0},documentType:{type:String,required:!0},lang:{type:String,required:!0},versionFrom:{type:Number,required:!0},versionTo:{type:Number,required:!0}}},l=r,d=i(81656),c=(0,d.A)(l,a,o,!1,null,"d6f3509e",null),u=c.exports,f=i(45801),m=i(39544),h={components:{HistoryViewLinks:u},mixins:[m.A],data(){return{promise:{},versionFrom:void 0,versionTo:void 0}},computed:{documentId(){return parseInt(this.$route.params.id)},documentType(){return this.$route.name.replace("-history","")},lang(){return this.$route.params.lang},latestVersionId(){return this.history.versions[0].version_id},filteredVersions(){let t=[...this.history.versions];this.$user.isModerator||(t=t.filter((t=>!t.masked)));const e=t.length;return t.forEach(((i,s)=>{s<e-1&&(i.previous_version_id=t[s+1].version_id)})),t},history(){return this.promise.data}},watch:{$route:{handler:"load",immediate:!0}},methods:{load(){this.promise=f.A[this.documentType].getHistory(this.documentId,this.lang).then((t=>{const e=t.data.versions.reverse();t.data.versions=e,this.versionFrom=e[e.length>1?1:0].version_id,this.versionTo=e[0].version_id}))}}},p=h,v=(0,d.A)(p,s,n,!1,null,"4800f9dd",null),g=v.exports},74644:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return h}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"section content"},[e("html-header",{attrs:{title:t.$gettext("Recent changes")}}),t._v(" "),e("div",{attrs:{clas:"links"}},[e("association-history-link",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{"user-id":t.userId}},[t._v("Associations history")])],1),t._v(" "),e("table",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.load,expression:"load"}],attrs:{"infinite-scroll-disabled":"disableInfiniteSCroll","infinite-scroll-distance":"100"}},[e("tr",[e("th",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{"translate-context":"modification date"}},[t._v("Modified the")]),t._v(" "),e("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("contributor")]),t._v(" "),e("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Links")]),t._v(" "),e("th"),t._v(" "),e("th",[e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("title")]),t._v("\n        :\n        "),e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("comment")])])]),t._v(" "),t._l(t.feed,(function(i,s){return e("tr",{key:s},[e("td",[e("version-link",{attrs:{"document-type":i.document.documentType,id:i.document.document_id,version:i.version_id,lang:i.lang}},[t._v("\n          "+t._s(t.$dateUtils.toTechnicalString(i.written_at))+"\n        ")])],1),t._v(" "),e("td",[e("contributor-link",{attrs:{contributor:i.user}})],1),t._v(" "),e("td",[e("document-link",{attrs:{document:i.document,lang:i.lang}},[t._v(" last ")]),t._v(" "),e("diff-link",{attrs:{"document-type":i.document.documentType,id:i.document.document_id,lang:i.lang,"version-from":"prev","version-to":i.version_id}}),t._v(" "),e("history-link",{attrs:{document:i.document,lang:i.lang}})],1),t._v(" "),e("td",[e("marker-quality",{attrs:{quality:i.document.quality}}),t._v("\n        "+t._s(i.lang)+"\n      ")],1),t._v(" "),e("td",[e("colored-icon-document",{attrs:{"document-type":i.document.documentType}}),t._v("\n        "+t._s(i.document.title)+"\n        :\n        "),i.comment?e("span",[t._v("\n          "+t._s(i.comment)+"\n        ")]):e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("empty comment")])],1)])}))],2),t._v(" "),e("loading-notification",{attrs:{promise:t.promise}})],1)},n=[],a=(i(58940),i(69085),i(27495),i(25440),i(23792),i(62953),i(44114),i(27567)),o=i.n(a),r=i(35277),l=i(45801),d=i(39544),c={components:{ColoredIconDocument:r.A},directives:{infiniteScroll:o()},mixins:[d.A],data(){return{promise:{},feed:[],endOfFeed:!1}},computed:{userId(){return this.$route.query.u?parseInt(this.$route.query.u):null},loading(){return!!this.promise&&this.promise.loading},disableInfiniteSCroll(){return this.loading||this.endOfFeed},nextQuery(){return this.promise.data?Object.assign({},this.$route.query,{token:this.promise.data.pagination_token}):this.$route.query}},watch:{$route:{handler:"initialize",immediate:!0}},methods:{initialize(){this.feed=[],this.endOfFeed=!1,this.$route.hash?this.$router.replace(this.$route.fullPath.replace("#","?")):this.load()},load(){this.promise&&this.promise.loading||this.endOfFeed||(this.promise=l.A.getRecentChanges(this.nextQuery).then(this.onLoad))},onLoad(){for(const t of this.promise.data.feed)t.document.documentType=this.$documentUtils.getDocumentType(t.document.type),this.feed.push(t);this.endOfFeed=0===this.promise.data.feed.length,this.$nextTick(this.onScroll)}}},u=c,f=i(81656),m=(0,f.A)(u,s,n,!1,null,"846fc366",null),h=m.exports},21827:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return c}});i(89463);var s=function(){var t=this,e=t._self._c;return e("edition-container",{attrs:{mode:t.mode,document:t.document,"is-loading":t.saving},on:{save:t.save}},[e("div",{staticClass:"columns"},[e("form-field",{attrs:{document:t.document,field:t.fields.title}}),t._v(" "),e("form-field",{staticClass:"is-narrow",attrs:{document:t.document,field:t.fields.area_type}})],1),t._v(" "),t.$user.isModerator?e("map-input-row",{attrs:{document:t.document,"geom-detail-editable":""}}):t._e(),t._v(" "),e("div",{staticClass:"columns is-multiline"},[e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.summary}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.description}}),t._v(" "),e("quality-field",{staticClass:"is-4",attrs:{document:t.document}})],1),t._v(" "),e("hr")],1)},n=[],a=i(59608),o={mixins:[a.A],methods:{beforeSave(){this.$user.isModerator||delete this.document.geometry}}},r=o,l=i(81656),d=(0,l.A)(r,s,n,!1,null,null,null),c=d.exports},18553:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return c}});i(89463);var s=function(){var t=this,e=t._self._c;return e("edition-container",{attrs:{mode:t.mode,document:t.document,"is-loading":t.saving},on:{save:t.save}},[e("div",{staticClass:"columns is-multiline"},[e("form-field",{attrs:{document:t.document,field:t.fields.title,"is-expanded":""}}),t._v(" "),e("form-field",{staticClass:"is-narrow",attrs:{document:t.document,field:t.fields.article_type}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.activities}}),t._v(" "),e("form-field",{staticClass:"is-8",attrs:{document:t.document,field:t.fields.categories}}),t._v(" "),e("quality-field",{ref:"qualityField",staticClass:"is-4",attrs:{document:t.document}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.summary}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.description}})],1),t._v(" "),e("associations-input-row",{attrs:{document:t.document,field:t.fields.articles}}),t._v(" "),e("associations-input-row",{attrs:{document:t.document,field:t.fields.waypoints}}),t._v(" "),e("associations-input-row",{attrs:{document:t.document,field:t.fields.outings}}),t._v(" "),e("associations-input-row",{attrs:{document:t.document,field:t.fields.routes}}),t._v(" "),e("associations-input-row",{attrs:{document:t.document,field:t.fields.books}}),t._v(" "),e("hr")],1)},n=[],a=i(59608),o={mixins:[a.A],methods:{beforeSave(){this.$refs.qualityField.beforeSave()}}},r=o,l=i(81656),d=(0,l.A)(r,s,n,!1,null,null,null),c=d.exports},22323:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return c}});i(89463);var s=function(){var t=this,e=t._self._c;return e("edition-container",{attrs:{mode:t.mode,document:t.document,"is-loading":t.saving},on:{save:t.save}},[e("form-section",{attrs:{title:t.$gettext("general informations"),"sub-title":t.$gettext("Title of the book, author, language and date of publication.")}},[e("div",{staticClass:"columns is-multiline"},[e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.title}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.activities}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.book_types}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.langs}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.author}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.editor}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.publication_date}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.nb_pages}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.isbn}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.url}}),t._v(" "),e("quality-field",{staticClass:"is-4",attrs:{document:t.document}})],1)]),t._v(" "),e("form-section",{attrs:{title:t.$gettext("description"),"sub-title":t.$gettext("Book content")}},[e("div",{staticClass:"columns is-multiline"},[e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.summary}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.description}})],1)]),t._v(" "),e("form-section",{attrs:{title:t.$gettext("associations"),"sub-title":t.$gettext("Articles, waypoints or routes to be linked.")}},[e("associations-input-row",{attrs:{document:t.document,field:t.fields.articles}}),t._v(" "),e("associations-input-row",{attrs:{document:t.document,field:t.fields.waypoints}}),t._v(" "),e("associations-input-row",{attrs:{document:t.document,field:t.fields.routes}})],1)],1)},n=[],a=i(59608),o={mixins:[a.A]},r=o,l=i(81656),d=(0,l.A)(r,s,n,!1,null,null,null),c=d.exports},4291:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return u}});i(89463);var s=function(){var t=this,e=t._self._c;return e("edition-container",{attrs:{mode:t.mode,document:t.document,"is-loading":t.saving||t.uploadingNewFile},on:{save:t.save}},[e("form-section",{attrs:{title:t.$gettext("general informations"),"sub-title":t.$gettext("Title, activity and characteristics of the picture")}},[e("div",{staticClass:"columns is-multiline"},[e("form-field",{attrs:{document:t.document,field:t.fields.title}}),t._v(" "),e("form-field",{staticClass:"is-narrow",attrs:{document:t.document,field:t.fields.image_type}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.activities}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.author}}),t._v(" "),e("form-field",{staticClass:"is-narrow",attrs:{document:t.document,field:t.fields.date_time}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.categories}}),t._v(" "),e("div",{staticClass:"column is-6"},[e("form-field",{attrs:{"no-wrapper":"",document:t.document,field:t.fields.filename}}),t._v(" "),e("form-field",{attrs:{"no-wrapper":"",document:t.document,field:t.fields.file_size}}),t._v(" "),e("form-field",{attrs:{"no-wrapper":"",document:t.document,field:t.fields.height}}),t._v(" "),e("form-field",{attrs:{"no-wrapper":"",document:t.document,field:t.fields.width}})],1),t._v(" "),"edit"===t.mode&&t.document?e("div",{staticClass:"column is-6 has-text-centered"},[e("div",{staticClass:"field"},[e("div",{staticClass:"file is-centered"},[e("label",{staticClass:"file-label"},[e("input",{staticClass:"file-input",attrs:{type:"file",name:"resume",accept:"image/*"},on:{change:t.onFileChange}}),t._v(" "),e("span",{staticClass:"file-cta button",class:{"is-loading":t.uploadingNewFile}},[e("span",{staticClass:"file-icon"},[e("fa-icon",{attrs:{icon:"upload"}})],1),t._v(" "),e("span",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"file-label"},[t._v("Upload a new version")])])])])]),t._v(" "),t.newVersionSource?e("img",{attrs:{src:t.newVersionSource}}):e("thumbnail",{attrs:{img:t.document,size:"MI"}})],1):t._e()],1)]),t._v(" "),e("form-section",{attrs:{title:t.$gettext("geolocation"),"sub-title":t.$gettext("Precise localisation of the shooting")}},[e("div",{staticClass:"columns is-multiline"},[e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.elevation}})],1),t._v(" "),e("map-input-row",{ref:"map",attrs:{document:t.document}})],1),t._v(" "),e("form-section",{attrs:{title:t.$gettext("camera settings"),"sub-title":t.$gettext("Parameters of the Digital Camera")}},[e("div",{staticClass:"columns is-multiline"},[e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.camera_name}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.fnumber}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.focal_length}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.exposure_time}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.iso_speed}})],1)]),t._v(" "),e("form-section",{attrs:{title:t.$gettext("Detailed information"),"sub-title":t.$gettext("Open fields to detail the picture's context")}},[e("div",{staticClass:"columns is-multiline"},[e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.summary}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.description}}),t._v(" "),e("quality-field",{ref:"qualityField",staticClass:"is-4",attrs:{document:t.document}})],1)]),t._v(" "),e("form-section",{attrs:{title:t.$gettext("associations"),"sub-title":t.$gettext("Articles, waypoints, routes or books to be linked.")}},[e("associations-input-row",{attrs:{document:t.document,field:t.fields.articles}}),t._v(" "),e("associations-input-row",{attrs:{document:t.document,field:t.fields.waypoints}}),t._v(" "),e("associations-input-row",{attrs:{document:t.document,field:t.fields.routes}}),t._v(" "),e("associations-input-row",{attrs:{document:t.document,field:t.fields.books}})],1)],1)},n=[],a=(i(23792),i(62953),i(69085),i(59608)),o=i(11679),r={mixins:[a.A],data(){return{newVersionSource:null,uploadingNewFile:!1}},watch:{"document.geometry.geom":function(t,e){null===e&&null!==t&&this.$nextTick((()=>{this.$refs.map.fitMapToDocuments()}))}},methods:{beforeSave(){this.$refs.qualityField.beforeSave()},afterLoad(){this.fields.image_type.values=this.fields.image_type.values.filter((t=>"copyright"!==t||"copyright"===this.document.image_type||this.$user.isModerator&&this.document.associations.books.length)).filter((t=>"personal"!==t||"personal"===this.document.image_type||this.$user.isModerator))},onFileChange(t){const e=t.target.files[0];e&&(this.uploadingNewFile=!0,(0,o.A)(e,void 0,(t=>{this.newVersionSource=t}),(()=>{}),(t=>{this.uploadingNewFile=!1,t.geometry&&(t.geometry.version=this.document.geometry.version),Object.assign(this.document,t)}),(()=>{this.uploadingNewFile=!1})),t.target.value="")}}},l=r,d=i(81656),c=(0,d.A)(l,s,n,!1,null,null,null),u=c.exports},11762:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return c}});var s=function(){var t=this,e=t._self._c;return e("edition-container",{attrs:{mode:t.mode,document:t.document,"is-loading":t.saving},on:{save:t.save}},[e("div",{staticClass:"columns is-multiline"},[e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.title}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.editor}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.scale}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.code}})],1),t._v(" "),e("hr")])},n=[],a=i(59608),o={mixins:[a.A]},r=o,l=i(81656),d=(0,l.A)(r,s,n,!1,null,null,null),c=d.exports},69007:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return g}});i(89463);var s=function(){var t=this,e=t._self._c;return t.document?e("edition-container",{attrs:{mode:t.mode,document:t.document,"is-loading":t.saving},on:{save:t.save}},[e("form-section",{attrs:{title:t.$gettext("general informations"),"sub-title":t.$gettext("Main informations about your outing"),"expanded-on-load":""}},[e("div",{staticClass:"columns"},[e("form-field",{staticClass:"is-narrow",attrs:{document:t.document,field:t.fields.date_start,max:t.showBothDates?t.document.date_end:t.currentDate},on:{input:t.handleDates},nativeOn:{click:function(e){return t.setCurrentDate.apply(null,arguments)}}}),t._v(" "),e("form-field",{directives:[{name:"show",rawName:"v-show",value:t.showBothDates,expression:"showBothDates"}],staticClass:"is-narrow",attrs:{document:t.document,field:t.fields.date_end,min:t.showBothDates?t.document.date_start:void 0,max:t.currentDate},nativeOn:{click:function(e){return t.setCurrentDate.apply(null,arguments)}}}),t._v(" "),e("div",{staticClass:"column is-narrow"},[e("input-checkbox",{model:{value:t.showBothDates,callback:function(e){t.showBothDates=e},expression:"showBothDates"}},[t._v(t._s(t.$gettext("Several days?")))])],1)],1),t._v(" "),e("div",{staticClass:"columns is-multiline"},[e("form-field",{staticClass:"is-two-fifths",attrs:{document:t.document,field:t.fields.activities}}),t._v(" "),e("div",{staticClass:"column"},[e("map-input-row",{ref:"mapInput",staticClass:"field",attrs:{document:t.document,documents:t.possibleRoutes,"geom-detail-editable":"","initial-extent":t.initialExtent},on:{move:t.updateBbox}})],1)],1),t._v(" "),e("div",{staticClass:"field"},[e("label",{staticClass:"label"},[t._v("\n        "+t._s(t._f("uppercaseFirstLetter")(t.$gettext("routes")))+":\n        "),e("marker-helper",{attrs:{name:"1063027#routes"}})],1),t._v(" "),e("div",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.routeTitle,expression:"routeTitle"}],staticClass:"input",attrs:{type:"text",placeholder:"Name"},domProps:{value:t.routeTitle},on:{input:function(e){e.target.composing||(t.routeTitle=e.target.value)}}})])]),t._v(" "),t.possibleRoutes&&0!==t.possibleRoutes.length?e("div",{staticClass:"field"},t._l(t.possibleRoutes,(function(i){return e("div",{key:i.document_id},[e("input-checkbox",{attrs:{value:t.routeIsAssociated(i.document_id)},on:{input:function(e){return t.changeRouteAssociation(e,i)}}},[e("activities",{staticClass:"is-size-4 has-text-secondary",attrs:{activities:i.activities}}),t._v(" "),e("document-title",{attrs:{document:i}}),t._v(",\n          "),e("document-rating",{attrs:{document:i}})],1),t._v(" "),e("document-link",{attrs:{document:i,target:"_blank",title:t.$gettext("Open in a new tab")}},[e("fa-icon",{attrs:{icon:"link"}})],1)],1)})),0):e("div",{staticClass:"notification is-info"},[e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Please move the map, or change the route's name.")]),t._v(" "),e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("If the route does not exists in our base, you can create it.")])]),t._v(" "),t.showMoreResultsBanner?e("div",{staticClass:"notification is-info"},[e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("\n        More routes are available. You can move the map, specify the name or set an activity to filter them out.\n      ")])]):t._e(),t._v(" "),e("div",{staticClass:"columns is-multiline"},[e("form-field",{attrs:{document:t.document,field:t.fields.title}}),t._v(" "),e("form-field",{staticClass:"is-narrow",attrs:{document:t.document,field:t.fields.partial_trip}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.route_description,placeholder:t.$gettext("describe route_conditions")}})],1)]),t._v(" "),e("form-section",{attrs:{title:t.$gettext("Weather & conditions"),"sub-title":t.$gettext("Describe the conditions you encountered during your outing")}},[e("div",{staticClass:"columns is-multiline"},[e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.condition_rating}}),t._v(" "),e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.glacier_rating}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.conditions_levels}})],1),t._v(" "),e("div",{staticClass:"columns"},[e("form-field",{attrs:{document:t.document,field:t.fields.elevation_up_snow}}),t._v(" "),e("form-field",{attrs:{document:t.document,field:t.fields.elevation_down_snow}})],1),t._v(" "),e("div",{staticClass:"columns"},[e("form-field",{attrs:{document:t.document,field:t.fields.snow_quantity}}),t._v(" "),e("form-field",{attrs:{document:t.document,field:t.fields.snow_quality}})],1),t._v(" "),e("div",{staticClass:"columns is-multiline"},[e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.conditions,placeholder:t.$gettext("describe conditions")}}),t._v(" "),e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.weather,placeholder:t.$gettext("describe weather")}}),t._v(" "),e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.timing,placeholder:t.$gettext("describe timing")}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.avalanche_signs}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.avalanches}})],1)]),t._v(" "),e("form-section",{attrs:{title:t.$gettext("Personal informations"),"sub-title":t.$gettext("People who were with you, and your feelings about this outing")}},[e("associations-input-row",{attrs:{label:t.$gettext("participants"),document:t.document,field:t.fields.users}}),t._v(" "),e("div",{staticClass:"columns"},[e("form-field",{staticClass:"is-narrow",attrs:{document:t.document,field:t.fields.participant_count}}),t._v(" "),e("form-field",{attrs:{document:t.document,field:t.fields.participants,placeholder:t.$gettext("Without c2c account")}})],1),t._v(" "),e("div",{staticClass:"columns is-multiline"},[e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.description,label:t.$gettext("personal comments"),placeholder:t.$gettext("write your comments")}}),t._v(" "),e("form-field",{attrs:{document:t.document,field:t.fields.disable_comments}})],1)],1),t._v(" "),e("form-section",{attrs:{title:t.$gettext("Details"),"sub-title":t.$gettext("Detailed figures, like ratings, height differences, frequentation...")}},[e("div",{staticClass:"columns"},[e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.frequentation}})],1),t._v(" "),e("div",{staticClass:"columns is-multiline"},[e("div",{staticClass:"column is-4"},[e("form-field",{attrs:{"no-wrapper":"",document:t.document,field:t.fields.elevation_access}}),t._v(" "),e("form-field",{attrs:{"no-wrapper":"",document:t.document,field:t.fields.access_condition}}),t._v(" "),e("form-field",{attrs:{"no-wrapper":"",document:t.document,field:t.fields.public_transport}})],1),t._v(" "),e("form-field",{staticClass:"is-8",attrs:{document:t.document,field:t.fields.access_comment}}),t._v(" "),e("div",{staticClass:"column is-4"},[e("form-field",{attrs:{"no-wrapper":"",document:t.document,field:t.fields.lift_status}}),t._v(" "),e("form-field",{attrs:{"no-wrapper":"",document:t.document,field:t.fields.hut_status}})],1),t._v(" "),e("form-field",{staticClass:"is-8",attrs:{document:t.document,field:t.fields.hut_comment}})],1),t._v(" "),e("div",{staticClass:"columns"},[e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.height_diff_up}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.height_diff_down}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.height_diff_difficulties}})],1),t._v(" "),e("div",{staticClass:"columns"},[e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.length_total,unit:"km",divisor:1e3}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.elevation_min}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.elevation_max}})],1),t._v(" "),e("div",{staticClass:"columns is-multiline"},[e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.global_rating}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.rock_free_rating}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.engagement_rating}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.equipment_rating}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.ski_rating,prefix:"?"},on:{"click-prefix":t.showCotometer}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.labande_global_rating}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.ice_rating}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.snowshoe_rating}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.via_ferrata_rating}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.hiking_rating}})],1),t._v(" "),e("div",{staticClass:"columns"},[e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.mtb_down_rating}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.mtb_up_rating}})],1),t._v(" "),e("div",{staticClass:"columns"},[e("quality-field",{ref:"qualityField",staticClass:"is-4",attrs:{document:t.document}})],1)]),t._v(" "),t.document?e("cotometer-window",{ref:"cotometerWindow",model:{value:t.document.ski_rating,callback:function(e){t.$set(t.document,"ski_rating",e)},expression:"document.ski_rating"}}):t._e()],1):t._e()},n=[],a=(i(78459),i(3362),i(23792),i(62953),i(74423),i(21699),i(26910),i(44114),function(){var t=this,e=t._self._c;return e("modal-card",{ref:"modalWindow"},[e("span",{attrs:{slot:"title"},slot:"title"},[e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("This tool estimates the technical difficulty of a ski route (ski rating).")])]),t._v(" "),e("div",{staticClass:"field"},[e("label",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"label"},[t._v("Skiability")]),t._v(" "),e("div",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.skiability,expression:"skiability"}],staticClass:"is-checkradio is-info",attrs:{id:"c2c-skiability-0",name:"c2c-skiability",type:"radio"},domProps:{value:0,checked:t._q(t.skiability,0)},on:{change:function(e){t.skiability=0}}}),t._v(" "),e("label",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{for:"c2c-skiability-0"}},[t._v("Wide and constant")])]),t._v(" "),e("div",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.skiability,expression:"skiability"}],staticClass:"is-checkradio is-info",attrs:{type:"radio",id:"c2c-skiability-1",name:"c2c-skiability"},domProps:{value:.1,checked:t._q(t.skiability,.1)},on:{change:function(e){t.skiability=.1}}}),t._v(" "),e("label",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{for:"c2c-skiability-1"}},[t._v("1 or 2 complications (steeper or narrow section...)")])]),t._v(" "),e("div",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.skiability,expression:"skiability"}],staticClass:"is-checkradio is-info",attrs:{type:"radio",id:"c2c-skiability-2",name:"c2c-skiability"},domProps:{value:.2,checked:t._q(t.skiability,.2)},on:{change:function(e){t.skiability=.2}}}),t._v(" "),e("label",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{for:"c2c-skiability-2"}},[t._v("Very complex (steps, narrow sections, ridges...)")])])]),t._v(" "),e("div",{staticClass:"field"},[e("label",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"label"},[t._v("Average slope (degrees)")]),t._v(" "),e("div",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.slope,expression:"slope"}],staticClass:"input",attrs:{placeholder:t.$gettext("Average slope in degree"),type:"number"},domProps:{value:t.slope},on:{input:function(e){e.target.composing||(t.slope=e.target.value)}}})]),t._v(" "),t.errorSlope?e("p",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"help is-danger"},[t._v("The slope must be between 0 and 80 deg")]):t._e()]),t._v(" "),e("div",{staticClass:"field"},[e("label",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"label"},[t._v("height_diff")]),t._v(" "),e("div",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.elevation,expression:"elevation"}],staticClass:"input",attrs:{type:"number",min:"50",max:"3000"},domProps:{value:t.elevation},on:{input:function(e){e.target.composing||(t.elevation=e.target.value)}}})]),t._v(" "),t.errorElevation?e("p",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"help is-danger"},[t._v("The slope must be between 50 and 3000m high")]):t._e()]),t._v(" "),t.rating?e("h1",{staticClass:"title is-1 has-text-centered"},[e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Suggested rating")]),t._v(" "),e("br"),t._v(" "),e("span",{staticClass:"has-text-success"},[t._v("\n      "+t._s(t.rating)+"\n    ")])]):t._e(),t._v(" "),e("footer",{attrs:{slot:"footer"},slot:"footer"},[e("button",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button is-success",attrs:{type:"button",disabled:!t.rating},on:{click:t.setResult}},[t._v("Ok")]),t._v(" "),e("button",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button is-default",attrs:{type:"button"},on:{click:function(e){return t.$refs.modalWindow.hide()}}},[t._v("Cancel")])])])}),o=[],r={data(){return{skiability:0,slope:null,elevation:50}},computed:{errorSlope(){return Number.isNaN(this.slope)||this.slope<0||this.slope>80},errorElevation(){return(Number.isNaN(this.elevation)||this.elevation<50||this.elevation>3e3)&&null!==this.elevation},rating(){if(this.errorSlope||this.errorElevation)return null;let t=Math.tan(Math.PI*this.slope/180)+.1*Math.log(this.elevation);t+=this.skiability*(t-1);const e=(1+this.skiability)*this.elevation;return this.slope<=17&&e<400?"1.1":this.slope<=23&&e<650?"1.2":this.slope<30&&e<800?"1.3":this.slope<35&&e<800||this.slope<23&&e>800?"2.1":this.slope<35&&e<=950?"2.2":this.slope<35&&e>950?"2.3":this.slope>=35&&this.slope<=40&&e<650?"3.1":this.slope>=35&&this.slope<=40&&e<=900?"3.2":this.slope>=35&&this.slope<=40&&e>900?"3.3":t<.98?"1.1":t>=.98&&t<1.02?"1.2":t>=1.03&&t<1.09?"+1.3":t>=1.09&&t<1.18?"+2.1":t>=1.18&&t<1.24?"2.2":t>=1.24&&t<1.3?"2.3":t>=1.3&&t<1.34?"3.1":t>=1.34&&t<1.39?"3.2":t>=1.39&&t<1.42?"3.3":t>=1.42&&t<1.46?"4.1":t>=1.46&&t<1.52?"4.2":t>=1.52&&t<1.575?"4.3":t>=1.575&&t<1.67?"5.1":t>=1.67&&t<1.745?"5.2":t>=1.745&&t<1.81?"5.3":t>=1.81&&t<1.95?"5.4":t>=1.95&&t<2.09?"5.5":t>=2.09&&t<2.25?"5.6":t>=2.25&&t<2.4?"5.7":"5.8"}},methods:{show(){this.$refs.modalWindow.show()},setResult(){this.$emit("input",this.rating),this.$refs.modalWindow.hide()}}},l=r,d=i(81656),c=(0,d.A)(l,a,o,!1,null,null,null),u=c.exports,f=i(59608),m=i(45801),h={components:{CotometerWindow:u},mixins:[f.A],data(){return{showBothDates:!1,possibleRoutes:null,routeTitle:"",bbox:null,showMoreResultsBanner:!1,currentDate:this.getCurrentDateString()}},computed:{initialExtent(){return this.$route.query.initial_bbox?this.$route.query.initial_bbox.split(",").map(parseFloat):this.document.associations.routes.length?this.$documentUtils.getDocumentsBbox(this.document.associations.routes):null}},watch:{showBothDates:"handleDates","document.activities":function(t,e){void 0!==e&&this.updateRoutes("activities",!1)},"document.geometry.geom_detail":function(t,e){null===e&&null!==t&&(this.possibleRoutes=null,this.$nextTick((async()=>{await this.fitMapToDocuments(),this.updateRoutes()})))},routeTitle(){this.updateRoutes("routeTitle",!1)}},methods:{afterLoad(){this.showBothDates=this.document.date_start!==this.document.date_end},updateBbox(t){var e;null!==this.bbox||null!==this.initialExtent||"add"!==this.mode?t.join(",")!==(null===(e=this.bbox)||void 0===e?void 0:e.join(","))&&(this.bbox=t,this.updateRoutes("bbox",!1)):this.bbox=t},async fitMapToDocuments(){this.bbox=await this.$refs.mapInput.fitMapToDocuments()},updateRoutes(t,e){if(!this.bbox)return t;const i={limit:50,bbox:this.bbox.join(",")};this.routeTitle&&(i.q=this.routeTitle),this.document.activities.length&&(i.act=this.document.activities.join(","));const s=m.A.route.getAll(i);return s.then((t=>this.computePossibleRoutes(t.data.documents,t.data.total,e))),s},clearPossibleRoutes(){this.computePossibleRoutes([],0,!1)},computePossibleRoutes(t,e,i){this.showMoreResultsBanner=e!==t.length;const s=t.map((t=>t.document_id));t=[...t,...this.document.associations.routes.filter((t=>!s.includes(t.document_id)))],t.sort(((t,e)=>this.$documentUtils.getDocumentTitle(t).localeCompare(this.$documentUtils.getDocumentTitle(e)))),this.possibleRoutes=t,i&&this.$nextTick(this.fitMapToDocuments)},changeRouteAssociation(t,e){if(!t&&!this.routeIsAssociated(e.document_id)||t&&this.routeIsAssociated(e.document_id))return;const i=this.document.associations.routes;t?(i.push(e),1===i.length?(this.possibleRoutes=[],this.$nextTick((async()=>{this.$documentUtils.propagateProperties(this.document,e),await this.fitMapToDocuments(),this.updateRoutes("First route",!1)}))):this.$documentUtils.propagateProperties(this.document,e)):(this.document.associations.routes=i.filter((t=>t.document_id!==e.document_id)),this.document.associations.routes.length||(this.document.geometry.geom=null))},routeIsAssociated(t){return 0!==this.document.associations.routes.filter((e=>e.document_id===t)).length},handleDates(){this.showBothDates?this.document.date_end<this.document.date_start&&(this.document.date_end=this.document.date_start):this.document.date_end=this.document.date_start},setCurrentDate(){this.currentDate=this.getCurrentDateString()},beforeSave(){this.handleDates(),this.$refs.qualityField.beforeSave()},showCotometer(){this.$refs.cotometerWindow.show()},getCurrentDateString(){return this.$dateUtils.toLocalizedString(new Date,"YYYY-MM-DD")}}},p=h,v=(0,d.A)(p,s,n,!1,null,null,null),g=v.exports},21702:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return c}});i(89463);var s=function(){var t=this,e=t._self._c;return e("edition-container",{attrs:{mode:t.mode,document:t.document,"is-loading":t.saving},on:{save:t.save}},[e("div",{staticClass:"columns is-multiline"},[e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.activities}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.categories}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.summary}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.description}})],1),t._v(" "),e("map-input-row",{ref:"map",attrs:{document:t.document}}),t._v(" "),e("hr")],1)},n=[],a=i(59608),o={mixins:[a.A],watch:{"document.geometry.geom":function(t,e){null===e&&null!==t&&this.$nextTick((()=>{this.$refs.map.fitMapToDocuments()}))}}},r=o,l=i(81656),d=(0,l.A)(r,s,n,!1,null,null,null),c=d.exports},617:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return c}});i(89463);var s=function(){var t=this,e=t._self._c;return e("edition-container",{attrs:{mode:t.mode,document:t.document,"is-loading":t.saving},on:{save:t.save}},[e("form-section",{attrs:{title:t.$gettext("general informations"),"sub-title":t.$gettext("Main information about the route, such as title, activity, GPS, and waypoint (which mountain, place)."),"expanded-on-load":""}},[e("div",{staticClass:"columns is-1"},[e("form-field",{staticClass:"is-narrow",attrs:{label:t.$gettext("waypoint"),document:t.document,field:t.fields.main_waypoint_id}}),t._v(" "),e("form-field",{attrs:{document:t.document,field:t.fields.title}})],1),t._v(" "),e("div",{staticClass:"columns is-multiline"},[e("form-field",{staticClass:"is-narrow",attrs:{document:t.document,field:t.fields.climbing_outdoor_type}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.activities}})],1),t._v(" "),e("map-input-row",{ref:"map",attrs:{document:t.document,"geom-detail-editable":""}}),t._v(" "),e("associations-input-row",{attrs:{document:t.document,field:t.fields.waypoints}}),t._v(" "),e("associations-input-row",{attrs:{document:t.document,field:t.fields.routes}}),t._v(" "),e("associations-input-row",{attrs:{document:t.document,field:t.fields.articles}}),t._v(" "),e("associations-input-row",{attrs:{document:t.document,field:t.fields.books}}),t._v(" "),e("associations-input-row",{attrs:{document:t.document,field:t.fields.xreports}})],1),t._v(" "),e("form-section",{attrs:{title:t.$gettext("configuration"),"sub-title":t.$gettext("Data like orientation, rock type, route type (such as return trip or loop) and route configuration type (such as ridge or gully).")}},[e("div",{staticClass:"columns is-multiline"},[e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.orientations}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.route_types}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.configuration}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.rock_types}})],1)]),t._v(" "),e("form-section",{attrs:{title:t.$gettext("numbers"),"sub-title":t.$gettext("Information about the terrain, like elevations, lengths...")}},[e("div",{staticClass:"columns is-multiline"},[e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.elevation_min}}),t._v(" "),e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.elevation_max}}),t._v(" "),e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.height_diff_up}}),t._v(" "),e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.height_diff_down}}),t._v(" "),e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.height_diff_access}}),t._v(" "),e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.height_diff_difficulties}}),t._v(" "),e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.difficulties_height}}),t._v(" "),e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.route_length,divisor:1e3,unit:"km"}})],1),t._v(" "),e("div",{staticClass:"columns is-multiline"},[e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.mtb_length_asphalt,divisor:1e3,unit:"km"}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.mtb_length_trail,divisor:1e3,unit:"km"}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.mtb_height_diff_portages}})],1),t._v(" "),e("div",{staticClass:"columns is-multiline"},[e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.lift_access}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.durations,label:t.$gettext("durations (days)")}})],1),t._v(" "),e("div",{staticClass:"columns is-multiline"},[e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.slackline_type}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.slackline_height}})],1)]),t._v(" "),e("form-section",{attrs:{title:t.$gettext("ratings"),"sub-title":t.$gettext("Everything about ratings : difficulties, exposition...")}},[e("div",{staticClass:"columns is-multiline"},[e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.global_rating}}),t._v(" "),e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.rock_free_rating}}),t._v(" "),e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.rock_required_rating}}),t._v(" "),e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.aid_rating}})],1),t._v(" "),e("div",{staticClass:"columns is-multiline"},[e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.labande_global_rating}}),t._v(" "),e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.labande_ski_rating}}),t._v(" "),e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.ski_rating}}),t._v(" "),e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.ski_exposition}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.slope}})],1),t._v(" "),e("div",{staticClass:"columns is-multiline"},[e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.ice_rating}}),t._v(" "),e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.mixed_rating}}),t._v(" "),e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.snowshoe_rating}}),t._v(" "),e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.via_ferrata_rating}}),t._v(" "),e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.hiking_rating}})],1),t._v(" "),e("div",{staticClass:"columns is-multiline"},[e("form-field",{attrs:{document:t.document,field:t.fields.mtb_down_rating}}),t._v(" "),e("form-field",{attrs:{document:t.document,field:t.fields.mtb_up_rating}}),t._v(" "),e("form-field",{attrs:{document:t.document,field:t.fields.hiking_mtb_exposition}})],1),t._v(" "),e("div",{staticClass:"columns is-multiline"},[e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.equipment_rating}}),t._v(" "),e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.engagement_rating}}),t._v(" "),e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.exposition_rock_rating}}),t._v(" "),e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.risk_rating}})],1)]),t._v(" "),e("form-section",{attrs:{title:t.$gettext("Description"),"sub-title":t.$gettext("This is where you may describe the route extensively, maybe starting with a brief summary and then developing the description (including approach, descent, etc.). Don't forget to mention the route history if you know it.")}},[e("div",{staticClass:"columns is-multiline"},[e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.summary}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.route_history,placeholder:t.$gettext("Describe historical information about the route (date, names..) here")}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.description,placeholder:t.descriptionPlaceholder}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.slackline_anchor1}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.slackline_anchor2}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.remarks}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.gear,placeholder:t.$gettext("Describe here the gear needed for this route")}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.glacier_gear}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.external_resources,placeholder:t.$gettext("Books and websites not already associated to this route")}}),t._v(" "),e("quality-field",{staticClass:"is-4",attrs:{document:t.document}})],1)])],1)},n=[],a=(i(74423),i(21699),i(58940),i(23792),i(62953),i(59608)),o={mixins:[a.A],computed:{descriptionPlaceholder(){if(this.document&&["mountain_climbing","rock_climbing","ice_climbing"].find((t=>this.document.activities.includes(t))))return this.$gettext("Describe the route following the structure below")}},watch:{"document.associations.waypoints":"onWaypointsAssociation","document.geometry.geom":"onGeometryUpdate","document.geometry.geom_detail":"onGeometryUpdate","document.climbing_outdoor_type":{handler(t){this.handleRockFreeRating(t)},immediate:!0}},methods:{afterLoad(){"add"===this.mode&&this.$route.query.w&&(this.document.main_waypoint_id=parseInt(this.$route.query.w))},beforeSave(){"bloc"===this.document.climbing_outdoor_type&&this.handleRockFreeRating("single")},afterSave(){"bloc"===this.document.climbing_outdoor_type&&this.handleRockFreeRating("bloc")},onGeometryUpdate(t,e){null===e&&null!==t&&this.$nextTick((()=>{this.$refs.map.fitMapToDocuments()}))},onWaypointsAssociation(){const t=this.document.associations.waypoints;-1===t.findIndex((t=>t.document_id===this.document.main_waypoint_id))&&(this.document.main_waypoint_id=null),"add"===this.mode&&null===this.document.main_waypoint_id&&0!==t.length&&(this.document.main_waypoint_id=t[0].document_id)},handleRockFreeRating(t){if(!this.document)return;const e=this.document.rock_free_rating,i=this.fields.rock_free_rating.values;switch(t){case"bloc":this.document.rock_free_rating=e.toUpperCase(),this.fields.rock_free_rating.values=i.map((t=>t.toUpperCase()));break;default:this.document.rock_free_rating=e.toLowerCase(),this.fields.rock_free_rating.values=i.map((t=>t.toLowerCase()))}}}},r=o,l=i(81656),d=(0,l.A)(r,s,n,!1,null,null,null),c=d.exports},77835:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return u}});i(89463);var s=function(){var t=this,e=t._self._c;return e("edition-container",{staticClass:"edition-container",attrs:{mode:t.mode,document:t.document,"is-loading":t.saving},on:{save:t.save}},[e("form-section",{attrs:{title:t.$gettext("general informations"),"sub-title":t.$gettext("Waypoint's main properties"),"expanded-on-load":""}},[e("div",{staticClass:"columns"},[e("form-field",{staticClass:"is-narrow",attrs:{document:t.document,field:t.fields.waypoint_type}}),t._v(" "),e("form-field",{attrs:{document:t.document,field:t.fields.title}})],1),t._v(" "),e("div",{staticClass:"columns"},[e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.elevation}}),t._v(" "),e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.elevation_min}}),t._v(" "),e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.prominence}})],1),t._v(" "),e("map-input-row",{ref:"map",attrs:{document:t.document}}),t._v(" "),e("div",{staticClass:"columns"},[e("form-field",{attrs:{document:t.document,field:t.fields.maps_info,label:t.$gettext("maps_references"),placeholder:t.$gettext("Add here maps not automatically referenced")}})],1)],1),t._v(" "),e("form-section",{attrs:{title:t.$gettext("Transport & road or PT access"),"sub-title":t.$gettext("Informations about the access")}},[e("div",{staticClass:"columns is-multiline"},[e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.snow_clearance_rating}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.lift_access}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.public_transportation_rating}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.parking_fee}}),t._v(" "),e("form-field",{staticClass:"is-8",attrs:{document:t.document,field:t.fields.public_transportation_types}})],1)]),t._v(" "),e("form-section",{attrs:{title:t.$gettext("Types and styles")}},[e("div",{staticClass:"columns is-multiline"},[e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.climbing_outdoor_types}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.climbing_indoor_types}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.climbing_styles}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.rock_types}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.best_periods}})],1),t._v(" "),e("div",{staticClass:"columns is-multiline"},[e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.orientations}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.access_time}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.rain_proof}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.children_proof}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.ground_types}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.product_types}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.slackline_types}})],1)]),t._v(" "),e("form-section",{attrs:{title:t.$gettext("Numbers"),"sub-title":t.$gettext("Misc data about the waypoint")}},[e("div",{staticClass:"columns"},[e("form-field",{attrs:{document:t.document,field:t.fields.length}}),t._v(" "),e("form-field",{attrs:{document:t.document,field:t.fields.slope}})],1),t._v(" "),e("div",{staticClass:"columns is-multiline"},[e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.custodianship}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.capacity_staffed}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.capacity,context:t.capacityContext}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.url}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.phone}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.phone_custodian}})],1),t._v(" "),e("div",{staticClass:"columns is-multiline"},[e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.matress_unstaffed}}),t._v(" "),e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.blanket_unstaffed}}),t._v(" "),e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.gas_unstaffed}}),t._v(" "),e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.heating_unstaffed}})],1),t._v(" "),e("div",{staticClass:"columns is-multiline"},[e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.height_min}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.height_median}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.height_max}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.routes_quantity}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.slackline_length_max}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.slackline_length_min}})],1)]),t._v(" "),e("form-section",{attrs:{title:t.$gettext("ratings"),"sub-title":t.$gettext("Associated routes cotations")}},[e("div",{staticClass:"columns is-multiline"},[e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.climbing_rating_min}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.climbing_rating_median}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.climbing_rating_max}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.equipment_ratings}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.paragliding_rating}})],1)]),t._v(" "),e("form-section",{attrs:{title:t.$gettext("Description"),"sub-title":t.$gettext("Waypoint's textual description")}},[e("div",{staticClass:"columns is-multiline"},[e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.summary,placeholder:t.$gettext("write a summary")}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.access_period,placeholder:t.accessPeriodPlaceholder,label:t.accessPeriodTitle}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.description,placeholder:t.descriptionPlaceholder}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.access,placeholder:t.accessPlaceholder,label:t.accessTitle}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.external_resources,placeholder:t.$gettext("Books and websites not already associated to this route")}}),t._v(" "),e("quality-field",{staticClass:"is-4",attrs:{document:t.document}})],1)]),t._v(" "),e("form-section",{attrs:{title:t.$gettext("associations"),"sub-title":t.$gettext("You may add associated waypoints, books and articles")}},[e("associations-input-row",{attrs:{document:t.document,field:t.fields.articles}}),t._v(" "),e("associations-input-row",{attrs:{document:t.document,field:t.fields.waypoints}}),t._v(" "),e("associations-input-row",{attrs:{document:t.document,field:t.fields.books}})],1)],1)},n=[],a=i(59608),o=i(61082),r={mixins:[a.A,o.A],computed:{capacityContext(){return this.document&&"bivouac"===this.document.waypoint_type?this.document.waypoint_type:null}},watch:{"document.geometry.geom":function(t,e){null===e&&null!==t&&this.$nextTick((()=>{this.$refs.map.fitMapToDocuments()}))}}},l=r,d=i(81656),c=(0,d.A)(l,s,n,!1,null,null,null),u=c.exports},22518:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return c}});i(89463);var s=function(){var t=this,e=t._self._c;return e("edition-container",{attrs:{mode:t.mode,document:t.document,"is-loading":t.saving},on:{save:t.save}},[e("form-section",{attrs:{title:t.$gettext("General information"),"sub-title":t.$gettext("Report title, activity, linked routes or outings.")}},[e("div",{staticClass:"columns is-multiline"},[e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.title}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.event_activity}})],1),t._v(" "),e("associations-input-row",{attrs:{document:t.document,field:t.fields.articles}}),t._v(" "),e("associations-input-row",{attrs:{document:t.document,field:t.fields.routes}}),t._v(" "),e("associations-input-row",{attrs:{document:t.document,field:t.fields.outings}})],1),t._v(" "),e("form-section",{attrs:{title:t.$gettext("Anonymity and confidentiality")}},[e("div",{staticClass:"columns is-multiline"},[e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.anonymous}}),t._v(" "),e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.disable_comments}})],1)]),t._v(" "),e("form-section",{attrs:{title:t.$gettext("Geolocation"),"sub-title":t.$gettext("Precise location of the event.")}},[e("div",{staticClass:"columns is-multiline"},[e("form-field",{staticClass:"is-3",attrs:{document:t.document,field:t.fields.elevation}})],1),t._v(" "),e("map-input-row",{ref:"map",attrs:{document:t.document}})],1),t._v(" "),e("form-section",{attrs:{title:t.$gettext("Participants and context"),"sub-title":t.$gettext("Details on participants and event context")}},[e("div",{staticClass:"columns is-multiline"},[e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.date}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.nb_participants}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.event_type}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.nb_impacted}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.severity}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.rescue}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.avalanche_level}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.avalanche_slope}})],1),t._v(" "),e("div",{staticClass:"columns is-multiline"},[e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.age}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.gender}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.author_status}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.autonomy}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.activity_rate}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.supervision}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.qualification}}),t._v(" "),e("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.previous_injuries}})],1)]),t._v(" "),e("form-section",{attrs:{title:t.$gettext("Narration"),"sub-title":t.$gettext("Open fields to deeply explain the event circumstances.")}},[e("div",{staticClass:"columns is-multiline"},[e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.description,placeholder:t.$gettext("Details of the actual outing and the incident. If you have already written up your outing, you only need to describe the incident, then link it to your outing report (after first uploading it)")}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.place,placeholder:t.$gettext("Information on the location of the incident. Mark the location on the map above, even if you cannot do very accurately, (in which case give more details here). After completing the report, you can associate it to a route, a climbing site or an outing.")}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.route_study,placeholder:t.$gettext("Map, guidebook, known route, planning for a plan B, (re) evaluation of route during trip?")}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.conditions,placeholder:t.$gettext("Describe the information gathered before the outing and how these evolved once on route: weather forecast, avalanche risk reports, amount of refreezing, condition of the snow/ice/rock, reports from the previous days, etc.")}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.training,placeholder:t.$gettext("Please describe your technical and experience level related to the chosen goal, your level of fitness, prior tiredness accumulated, acclimatization if in altitude, etc.")}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.motivations,placeholder:t.$gettext("Why did you choose this outing? When did you decide to engage. What influenced your decision (holiday time, long journey, hotel/hut bookings, time spent already in preparation, limited possibilities, etc.)?")}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.group_management,placeholder:t.$gettext("Communication of the individual objectives and expectations, the thoughts and observations during the outing, discussions on new strategies, the way the group conducted itself and divided responsibilities, was the group used to working together, core aspirations, etc.")}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.risk,placeholder:t.$gettext("Have you (re)evaluated the risks at each change in the situation? What factors might have affected your awareness, such as tiredness, stress, relaxing having passed the main difficulties or on the descent, on a section reputed to be easy, presence of footprints or other people, complete confidence in the leader of the group, etc.")}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.time_management,placeholder:t.$gettext("Had a timetable for the route been foreseen? Did you maintain the schedule? Was time a factor in causing the incident?")}}),t._v(" "),e("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.safety,placeholder:t.$gettext("Types of belay and protection used, verifications between climbers, snowpack stability tests, testing of avalanche transceivers, etc.")}}),t._v(" "),e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.reduce_impact}}),t._v(" "),e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.increase_impact}}),t._v(" "),e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.modifications,placeholder:t.$gettext("Has this experience changed your habits? Describe the lessons you have learned from this experience")}}),t._v(" "),e("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.other_comments,placeholder:t.$gettext("Briefly describe any injuries. Comments that do not fit into any other fields can be entered here.")}}),t._v(" "),e("quality-field",{staticClass:"is-4",attrs:{document:t.document}})],1)])],1)},n=[],a=i(59608),o={mixins:[a.A],watch:{"document.geometry.geom":function(t,e){null===e&&null!==t&&this.$nextTick((()=>{this.$refs.map.fitMapToDocuments()}))}}},r=o,l=i(81656),d=(0,l.A)(r,s,n,!1,null,null,null),c=d.exports},35277:function(t,e,i){"use strict";i.d(e,{A:function(){return c}});var s=function(){var t=this,e=t._self._c;return e("span",{staticClass:"icon icon-document-container",style:`background: ${t.$options.colors[t.documentType]||"black"}`},[e("icon-document",{staticClass:"has-text-light",attrs:{"document-type":t.documentType}})],1)},n=[],a=i(57585),o={mixins:[a.uY],colors:{area:"purple",book:"plum",article:"darkcyan",image:"pink",map:"yellow",outing:"grey",profile:"red",route:"dodgerblue",waypoint:"green",xreport:"tomato"}},r=o,l=i(81656),d=(0,l.A)(r,s,n,!1,null,"2201a3ce",null),c=d.exports},59608:function(t,e,i){"use strict";i.d(e,{A:function(){return ge}});i(27495),i(25440),i(44114),i(23792),i(62953),i(78459),i(89463);var s=i(49576),n=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"columns is-multiline"},[e("div",{staticClass:"column is-narrow"},[e("label",{staticClass:"label"},[t._v("\n        "+t._s(t._f("uppercaseFirstLetter")(t.label||t.$gettext(t.field.name)))+"\n        "),e("marker-helper",{attrs:{name:t.helper?t.helper:t.field.helper}})],1)]),t._v(" "),e("div",{staticClass:"column is-narrow"},[e("form-input",{ref:"input",staticClass:"is-expanded",attrs:{document:t.document,field:t.field}})],1)]),t._v(" "),e("div",{staticClass:"columns is-multiline"},t._l(t.document.associations[t.field.name],(function(i){return e("div",{key:i.document_id,staticClass:"column is-4"},[e("document-card",{attrs:{document:i,"show-delete-button":t.showDeleteButton(i),target:"_blank"},on:{delete:function(e){return t.$documentUtils.removeAssociation(t.document,i)}}})],1)})),0)])},a=[],o=function(){var t=this,e=t._self._c;return"activities"==t.field.name?e("input-activity",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],attrs:{"has-error":t.hasError,"show-labels":"","document-type":t.document.type},model:{value:t.document.activities,callback:function(e){t.$set(t.document,"activities",e)},expression:"document.activities"}}):"event_activity"==t.field.name?e("input-event-activity",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],attrs:{"has-error":t.hasError,"show-labels":""},model:{value:t.document.event_activity,callback:function(e){t.$set(t.document,"event_activity",e)},expression:"document.event_activity"}}):"orientations"==t.field.name?e("input-orientation",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],model:{value:t.document.orientations,callback:function(e){t.$set(t.document,"orientations",e)},expression:"document.orientations"}}):"main_waypoint_id"==t.field.name?e("div",{staticClass:"control select",class:{"is-danger":t.hasError}},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.document.main_waypoint_id,expression:"document.main_waypoint_id"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.document,"main_waypoint_id",e.target.multiple?i:i[0])}}},[e("option",{domProps:{value:null}}),t._v(" "),t._l(t.document.associations.waypoints,(function(i){return e("option",{key:i.document_id,domProps:{value:i.document_id}},[t._v("\n      "+t._s(t.$documentUtils.getDocumentTitle(i))+"\n    ")])}))],2)]):"conditions_levels"==t.field.name?e("input-conditions-levels",{model:{value:t.object[t.field.name],callback:function(e){t.$set(t.object,t.field.name,e)},expression:"object[field.name]"}}):"markdown"==t.field.type?e("input-markdown",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],attrs:{placeholder:t.placeholder},model:{value:t.object[t.field.name],callback:function(e){t.$set(t.object,t.field.name,e)},expression:"object[field.name]"}}):"associations"==t.field.parent?e("input-document",{attrs:{"document-type":t.field.documentType,multiple:"","clear-input-on-toggle":"","has-error":t.hasError},on:{add:function(e){return t.$documentUtils.propagateProperties(t.document,arguments[0])}},model:{value:t.object[t.field.name],callback:function(e){t.$set(t.object,t.field.name,e)},expression:"object[field.name]"}}):t.field.values&&t.field.multiple?e("input-multi-select",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],attrs:{options:t.field.values,required:t.field.required,i18n:t.field.i18n,"i18n-context":t.field.i18nContext,"has-error":t.hasError},model:{value:t.object[t.field.name],callback:function(e){t.$set(t.object,t.field.name,e)},expression:"object[field.name]"}}):"date"===t.field.type?e("input-date",{attrs:{"has-error":t.hasError,"disabled-dates":t.disabledDates,required:t.field.required},model:{value:t.object[t.field.name],callback:function(e){t.$set(t.object,t.field.name,e)},expression:"object[field.name]"}}):t.simpleInputType?e("input-simple",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],ref:"input",attrs:{prefix:t.prefix,"is-expanded":t.isExpanded,postfix:t.unit||t.field.unit,divisor:t.divisor,type:t.field.type,min:t.min||t.field.min,max:t.max||t.field.max,disabled:t.field.disabled,placeholder:t.placeholder||t.$gettext(t.field.name),required:t.field.required,i18n:t.field.i18n,"i18n-context":t.field.i18nContext,options:t.field.values,"has-error":t.hasError},on:{"click-prefix":function(e){return t.$emit("click-prefix")},input:function(e){return t.$emit("input",arguments[0])}},model:{value:t.object[t.field.name],callback:function(e){t.$set(t.object,t.field.name,e)},expression:"object[field.name]"}}):"boolean"==t.field.type?e("input-yes-no",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],attrs:{nullable:t.field.nullable},model:{value:t.object[t.field.name],callback:function(e){t.$set(t.object,t.field.name,e)},expression:"object[field.name]"}}):"date_time"==t.field.type?e("input-datetime",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],model:{value:t.object[t.field.name],callback:function(e){t.$set(t.object,t.field.name,e)},expression:"object[field.name]"}}):e("div",{staticClass:"notification is-danger"},[t._v("\n  Unknown field type : "+t._s(t.field.type)+"\n")])},r=[],l=(i(16280),i(74423),i(74353)),d=i.n(l),c=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("table",[e("tr",[e("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Location / elevation / orientation")]),t._v(" "),e("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("soft snow")]),t._v(" "),e("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("total snow")]),t._v(" "),e("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("comment")]),t._v(" "),e("th")]),t._v(" "),t._l(t.levels,(function(i,s){return e("tr",{key:s},[e("td",[e("input",{directives:[{name:"model",rawName:"v-model.lazy",value:i.level_place,expression:"level.level_place",modifiers:{lazy:!0}}],staticClass:"input",attrs:{type:"text"},domProps:{value:i.level_place},on:{change:function(e){return t.$set(i,"level_place",e.target.value)}}})]),t._v(" "),e("td",[e("input",{directives:[{name:"model",rawName:"v-model.lazy",value:i.level_snow_height_soft,expression:"level.level_snow_height_soft",modifiers:{lazy:!0}}],staticClass:"input",attrs:{type:"text"},domProps:{value:i.level_snow_height_soft},on:{change:function(e){return t.$set(i,"level_snow_height_soft",e.target.value)}}})]),t._v(" "),e("td",[e("input",{directives:[{name:"model",rawName:"v-model.lazy",value:i.level_snow_height_total,expression:"level.level_snow_height_total",modifiers:{lazy:!0}}],staticClass:"input",attrs:{type:"text"},domProps:{value:i.level_snow_height_total},on:{change:function(e){return t.$set(i,"level_snow_height_total",e.target.value)}}})]),t._v(" "),e("td",[e("input",{directives:[{name:"model",rawName:"v-model.lazy",value:i.level_comment,expression:"level.level_comment",modifiers:{lazy:!0}}],staticClass:"input",attrs:{type:"text"},domProps:{value:i.level_comment},on:{change:function(e){return t.$set(i,"level_comment",e.target.value)}}})]),t._v(" "),e("td",[s<t.levels.length-1||t.isLevelFilled(t.levels[s])?e("delete-button",{staticClass:"is-size-2 delete-button",on:{click:function(e){return t.levels.splice(s,1)}}}):t._e()],1)])}))],2)])},u=[],f=(i(33110),{props:{value:{type:String,default:null}},data(){return{levels:[]}},watch:{levels:{handler:"change",deep:!0}},created(){const t=this.value?JSON.parse(this.value):[];for(const e of t)this.isLevelFilled(e)&&this.levels.push(e);this.levels.push({})},methods:{change(){this.isLevelFilled(this.levels[this.levels.length-1])&&this.levels.push({}),this.$emit("input",JSON.stringify(this.levels.filter((t=>this.isLevelFilled(t)))))},isLevelFilled(t){return Boolean(t.level_place)||Boolean(t.level_snow_height_soft)||Boolean(t.level_snow_height_total)||Boolean(t.level_comment)}}}),m=f,h=i(81656),p=(0,h.A)(m,c,u,!1,null,null,null),v=p.exports,g=i(57585),_={components:{InputConditionsLevels:v},mixins:[g.v1,g.ox],props:{prefix:{type:String,default:null},isExpanded:{type:Boolean,default:null},placeholder:{type:String,default:void 0},min:{type:String,default:void 0},max:{type:String,default:void 0},unit:{type:String,default:void 0},divisor:{type:Number,default:void 0}},computed:{disabledDates(){const t=this.min||this.field.min,e=this.max||this.field.max;return{to:t?d()(t).toDate():void 0,from:e?d()(e).add(1,"day").toDate():void 0}},editedLocale(){return this.document.locales[0]},object(){if("document"===this.field.parent)return this.document;if("locales"===this.field.parent)return this.editedLocale;if("associations"===this.field.parent)return this.document.associations;throw new Error(`Unexpected parent value : ${this.field.parent}`)},visible(){return this.field.isVisibleFor(this.document)},simpleInputType(){return["text","number","url","tel"].includes(this.field.type)},hasError(){return null!==this.field.error}}},b=_,y=(0,h.A)(b,o,r,!1,null,null,null),w=y.exports,C=i(66703),A={components:{FormInput:w},mixins:[g.v1,g.ox,C.A],props:{label:{type:String,default:null},helper:{type:String,default:void 0}},computed:{visible(){return this.$refs.input.visible},hasError(){return null!==this.field.error}},methods:{showDeleteButton(t){return this.canRemove(this.document,t)}}},x=A,D=(0,h.A)(x,n,a,!1,null,null,null),k=D.exports,S=function(){var t=this,e=t._self._c;return t.document?e("div",{staticClass:"section",class:{preview:t.isPreview}},[e("div",{staticClass:"has-edition-width"},[e("h1",{staticClass:"title is-1"},[e("icon-edit"),t._v(" "),"edit"===t.mode?e("span",[e("html-header",{attrs:{title:t.$gettext("Edit a document")}}),t._v(" "),e("document-title",{attrs:{document:t.document}}),t._v(" "),e("span",{staticClass:"is-size-5"},[t._v(" ("+t._s(t.$language.availableAPI[t.$route.params.lang])+")")])],1):e("span",[e("html-header",{attrs:{title:t.$documentUtils.getCreationTitle(t.documentType)}}),t._v("\n        "+t._s(t._f("uppercaseFirstLetter")(t.$documentUtils.getCreationTitle(t.documentType)))+"\n        "),e("span",[e("dropdown-button",[e("span",{staticClass:"button",attrs:{slot:"button"},slot:"button"},[e("span",[t._v(" "+t._s(t.$language.availableAPI[t.document.locales[0].lang])+"  ")]),t._v(" "),e("fa-icon",{attrs:{icon:"angle-down","aria-hidden":"true"}})],1),t._v(" "),t._l(t.$options.constants.langs,(function(i){return e("div",{key:i,staticClass:"dropdown-item has-hover-background has-cursor-pointer",on:{click:function(e){t.document.locales[0].lang=i}}},[t._v("\n              "+t._s(t.$language.availableAPI[i])+"\n            ")])}))],2)],1)],1),t._v(" "),e("button",{staticClass:"button is-size-6 is-pulled-right",on:{click:function(e){t.isPreview=!t.isPreview}}},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.isPreview,expression:"isPreview"}]},[e("fa-icon",{attrs:{icon:"edit"}}),t._v(" "),e("span",[t._v(" ")]),t._v(" "),e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Back to edit mode")])],1),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:!t.isPreview,expression:"!isPreview"}]},[e("fa-icon",{attrs:{icon:"eye"}}),t._v(" "),e("span",[t._v(" ")]),t._v(" "),e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Preview")])],1)])],1),t._v(" "),e("div",{staticStyle:{clear:"both"}})]),t._v(" "),t.isPreview?e(t.documentType+"-view",{tag:"component",attrs:{draft:t.document}}):t._e(),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isPreview,expression:"!isPreview"}],staticClass:"has-edition-width"},[e("hr"),t._v(" "),t._t("default",(function(){return[t._v(" ... ")]})),t._v(" "),e("save-document-row",{attrs:{"is-loading":t.isLoading},on:{save:function(e){return t.$emit("save",arguments[0])},preview:function(e){t.isPreview=!0}}}),t._v(" "),t.htmlBanners&&t.htmlBanners[t.documentType]?e("div",{staticClass:"edition-banner",domProps:{innerHTML:t._s(t.htmlBanners[t.documentType])}}):t._e()],2)],1):t._e()},E=[],M=(i(71761),function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"field is-horizontal"},[e("div",{staticClass:"field-label is-normal"},[e("label",{staticClass:"label"},[e("marker-helper",{attrs:{name:t.helper}}),t._v("\n      "+t._s(t._f("uppercaseFirstLetter")(t.label))+"\n    ")],1)]),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field",class:{"is-grouped is-grouped-multiline":t.isGrouped,"is-expanded":t.isExpanded,"is-narrow":t.isNarrow}},[t._t("default")],2)])])}),$=[],T={props:{label:{type:String,default:""},alwaysVisible:{type:Boolean,default:!1},isGrouped:{type:Boolean,default:!1},isExpanded:{type:Boolean,default:!1},isNarrow:{type:Boolean,default:!1},helper:{type:String,default:void 0}},data(){return{visible:!0,hasError:!1}},mounted(){for(const t of this.$children)t.$watch("visible",this.checkVisibility),t.$watch("hasError",this.checkHasError);this.checkVisibility(),this.checkHasError()},methods:{checkVisibility(){this.visible=this.alwaysVisible;for(const e of this.$children){var t;if(e.visible)this.visible=null===(t=this.visible)||void 0===t||t}},checkHasError(){this.hasError=!1;for(const t of this.$children)!0===t.hasError&&(this.hasError=!0)}}},B=T,P=(0,h.A)(B,M,$,!1,null,null,null),I=P.exports,N=function(){var t=this,e=t._self._c;return e("div",{staticClass:"columns is-mobile is-multiline"},[e("div",{staticClass:"column is-narrow"},[e("div",{staticClass:"control"},[e("button",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button is-primary",class:{"is-loading":t.isLoading},on:{click:function(e){return t.$emit("save",t.comment)}}},[t._v("\n        Save\n      ")])])]),t._v(" "),e("div",{staticClass:"column is-narrow"},[e("button",{staticClass:"button",on:{click:function(e){return t.$emit("preview")}}},[e("fa-icon",{attrs:{icon:"eye"}}),t._v(" "),e("span",[t._v(" ")]),t._v(" "),e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Preview")])],1)]),t._v(" "),e("div",{staticClass:"column is-12-mobile"},[e("div",{staticClass:"control is-expanded"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],staticClass:"input",attrs:{type:"text",disabled:"edit"!==t.mode,placeholder:t.$gettext("comment")},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}})])])])},F=[],V={props:{isLoading:{type:Boolean,required:!0}},data(){return{comment:""}},computed:{mode(){return this.$route.name.split("-")[1]}}},O=V,R=(0,h.A)(O,N,F,!1,null,null,null),U=R.exports,L=i(45801),j=i(10077),Y=i(55989),q=i(15424),H=i(52771),G=i(24689),W=i(24915),Q=i(24236),z=i(40533),J=i(27284),X=i(96683),K=i(40933);const Z=1110927;let tt={initialized:!1};var et={components:{FormRow:I,AreaView:Y.A,ArticleView:q.A,BookView:H.A,ImageView:G.A,MapView:W.A,OutingView:Q.A,ProfileView:z.A,RouteView:J.A,WaypointView:X.A,XreportView:K.A,SaveDocumentRow:U},props:{document:{type:Object,default:null},mode:{type:String,required:!0},isLoading:{type:Boolean,required:!0}},data(){return{isPreview:!1}},constants:j.A,computed:{documentType(){return this.$documentUtils.getDocumentType(this.document.type)},htmlBanners(){return tt}},watch:{$route:"reset"},mounted(){tt.initialized||L.A.article.getCooked(Z,this.$language.current).then(this.computeBanners)},methods:{reset(){this.isPreview=!1},computeBanners(t){const e=t.data.cooked,i=document.createElement("div");let s;i.innerHTML=e.description,tt={initialized:!0,undefined:""};for(const n of i.children){const t=n.nodeName.match(/^[hH]3$/);t?(s=n.id,tt[s]=""):tt[s]+=n.outerHTML}this.$forceUpdate()}}},it=et,st=(0,h.A)(it,S,E,!1,null,"2801f035",null),nt=st.exports,at=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],class:t.noWrapper?"":"column"},[e("div",{staticClass:"field"},[e("label",{staticClass:"label"},[e("marker-helper",{attrs:{name:t.helper||t.field.helper}}),t._v("\n      "+t._s(t._f("uppercaseFirstLetter")(t.label||t.fieldLabel))+"\n      "),t.hasError?e("span",{staticClass:"has-text-danger"},[t._v("\n        "+t._s(t._f("uppercaseFirstLetter")(t.errorMessage))+"\n      ")]):t._e()],1),t._v(" "),e("form-input",{ref:"input",attrs:{document:t.document,field:t.field,helper:null,placeholder:t.placeholder,unit:t.unit,max:t.max,min:t.min,divisor:t.divisor,"is-expanded":t.isExpanded}})],1)])},ot=[],rt={components:{FormInput:w},mixins:[g.v1,g.ox],props:{isExpanded:{type:Boolean,default:!1},helper:{type:String,default:void 0},label:{type:String,default:void 0},context:{type:String,default:null},placeholder:{type:String,default:" "},unit:{type:String,default:void 0},divisor:{type:Number,default:void 0},noWrapper:{type:Boolean,default:!1},max:{type:String,default:void 0},min:{type:String,default:void 0}},data(){return{visible:!0}},computed:{hasError(){return null!==this.field.error},errorMessage(){return this.hasError?this.$gettext(this.field.error.description):null},fieldLabel(){return this.$gettext(this.field.name,this.context)}},mounted(){this.$refs.input.$watch("visible",(()=>{this.visible=this.$refs.input.visible})),this.visible=this.$refs.input.visible}},lt=rt,dt=(0,h.A)(lt,at,ot,!1,null,null,null),ct=dt.exports,ut=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"section-item"},[e("div",{staticClass:"columns is-mobile section-header"},[e("div",{staticClass:"column"},[e("h2",{staticClass:"title is-2",class:{"has-text-danger":t.hasError}},[t._v("\n        "+t._s(t.title)+"\n      ")]),t._v(" "),t.subTitle?e("p",[e("em",[t._v(" "+t._s(t.subTitle)+" ")])]):t._e()]),t._v(" "),e("div",{staticClass:"column is-narrow"},[e("button",{staticClass:"button is-info",on:{click:t.toggleExpandedState}},[t._v("\n        "+t._s(t.expanded_?t.$gettext("Collapse"):t.$gettext("Expand"))+"\n      ")])])]),t._v(" "),e("div",{ref:"content",staticClass:"section-content section-content-hidden"},[t._t("default")],2),t._v(" "),e("hr")])},ft=[],mt={props:{title:{type:String,required:!0},subTitle:{type:String,default:void 0},expandedOnLoad:{type:Boolean,default:!1}},data(){return{expanded_:!1,style:null,visible:!0,hasError:!1}},mounted(){this.style=document.createElement("style"),this.style.type="text/css",document.getElementsByTagName("head")[0].appendChild(this.style);for(const t of this.$children)t.$watch("visible",this.checkVisibility),t.$watch("hasError",this.checkHasError);this.checkVisibility(),this.checkHasError(),window.addEventListener("keyup",this.onKeyup),this.expandedOnLoad&&this.toggleExpandedState()},beforeDestroy(){window.removeEventListener("keyup",this.onKeyup)},methods:{toggleExpandedState(){const t=this.$refs.content,e=`section-content-expanded${this._uid}`;this.expanded_?(this.style.innerHTML=`.${e} { max-height: ${t.clientHeight}px!important; }`,t.classList.add(e),setTimeout((()=>{t.classList.add("section-content-hidden"),t.classList.remove(e)}),0)):(this.style.innerHTML=`.${e} { max-height: ${t.scrollHeight}px!important; }`,t.classList.remove("section-content-hidden"),t.classList.add(e),setTimeout((()=>{t.classList.remove(e)}),301)),this.expanded_=!this.expanded_},onKeyup(t){t.altKey&&t.shiftKey&&("ArrowUp"===t.key&&this.expanded_||"ArrowDown"===t.key&&!this.expanded_)&&this.toggleExpandedState()},checkVisibility(){this.visible=!1;for(const t of this.$children)if(t.visible)return void(this.visible=!0)},checkHasError(){this.hasError=!1;for(const t of this.$children)!0===t.hasError&&(this.hasError=!0)}}},ht=mt,pt=(0,h.A)(ht,ut,ft,!1,null,"0c69faa3",null),vt=pt.exports,gt=function(){var t=this,e=t._self._c;return e("div",[t.geomDetailEditable?e("div",{staticClass:"columns is-mobile"},[e("div",{staticClass:"column is-narrow"},[t.hasTrackingActivities?e("div",[e("button",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button is-primary is-small",on:{click:t.openGPSModal}},[t._v("Upload a GPS track")]),t._v(" "),e("gps-upload-modal",{ref:"GpsUploadModal",on:{data:t.setGeometry}})],1):e("gps-file-upload",{staticClass:"upload-button",on:{click:t.setGeometry}},[e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Upload a GPS track")])])],1),t._v(" "),e("div",{staticClass:"column"},[e("em",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("You may also drag, draw or edit the track on the map.")])])]):t._e(),t._v(" "),e("div",{staticClass:"columns is-multiline"},[e("div",{staticClass:"column is-12 map-container"},[e("map-view",{ref:"map",attrs:{"initial-extent":t.initialExtent,documents:t.documents,"edited-document":t.document,"geom-detail-editable":t.geomDetailEditable,"show-center-on-geolocation":"","show-recenter-on":""},on:{move:function(e){return t.$emit("move",arguments[0])}}})],1),t._v(" "),e("div",{staticClass:"column is-6"},[e("div",{staticClass:"field"},[e("label",{staticClass:"label"},[t._v(t._s(t.$gettext("Longitude")))]),t._v(" "),e("input-simple",{attrs:{type:"number",postfix:"°E"},on:{input:t.setGeometryPoint},model:{value:t.longitude,callback:function(e){t.longitude=e},expression:"longitude"}})],1)]),t._v(" "),e("div",{staticClass:"column is-6"},[e("div",{staticClass:"field"},[e("label",{staticClass:"label"},[t._v(t._s(t.$gettext("Latitude")))]),t._v(" "),e("input-simple",{attrs:{type:"number",postfix:"°N"},on:{input:t.setGeometryPoint},model:{value:t.latitude,callback:function(e){t.latitude=e},expression:"latitude"}})],1)])])])},_t=[],bt=(i(21699),function(){var t=this,e=t._self._c;return e("div",{staticClass:"control"},[e("input",{ref:"geoFileInput",attrs:{type:"file",accept:".gpx,.kml,.fit,.tcx,application/gpx+xml,application/vnd.ant.fit,application/vnd.google-earth.kml+xml,application/vnd.garmin.tcx+xml"},on:{change:t.uploadGeoFile}}),t._v(" "),e("button",{staticClass:"button is-primary is-small",on:{click:function(e){return t.$refs.geoFileInput.click()}}},[t._t("default",(function(){return[e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Choose file")])]}))],2)])}),yt=[],wt=(i(99449),{methods:{uploadGeoFile(t){const e=new FileReader;e.onload=function(){this.$emit("click",e.result)}.bind(this);const i=t.target.files[0];"application/vnd.ant.fit"===i.type||i.name.toLowerCase().endsWith(".fit")?e.readAsArrayBuffer(i):e.readAsText(i),this.$refs.geoFileInput.value=""}}}),Ct=wt,At=(0,h.A)(Ct,bt,yt,!1,null,"48583539",null),xt=At.exports,Dt=function(){var t=this,e=t._self._c;return e("modal-window",{ref:"modalWindow",attrs:{wide:""}},[e("div",{staticClass:"tabs"},[e("ul",[e("li",{class:{"is-active":"tracking-devices"===t.activeTab}},[e("a",{on:{click:function(e){t.activeTab="tracking-devices"}}},[e("fa-icon",{attrs:{icon:"location-crosshairs"}}),t._v(" "),e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Tracking devices")])],1)]),t._v(" "),e("li",{class:{"is-active":"file"===t.activeTab}},[e("a",{on:{click:function(e){t.activeTab="file"}}},[e("fa-icon",{attrs:{icon:"file-download"}}),t._v(" "),e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Local file")])],1)])])]),t._v(" "),"tracking-devices"===t.activeTab?e("tracking-device-activities",{on:{geojson:t.setGeometry}}):t._e(),t._v(" "),"file"===t.activeTab?e("gps-file-upload",{on:{click:t.setGeometry}}):t._e()],1)},kt=[],St=function(){var t=this,e=t._self._c;return t.activities.length?e("div",[e("p",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Select an activity to load geographical data into document.")]),t._v(" "),e("div",{staticClass:"mt-2"},[e("div",{staticClass:"activities-list columns is-multiline"},t._l(t.activities,(function(i){return e("div",{key:i.id},[e("div",{staticClass:"column is-flex is-justify-content-space-around"},[e("tracking-device-activity",{attrs:{activity:i}},[t.fetching?t.fetching===i.id?e("spinner-icon"):t._e():e("button",{staticClass:"button",on:{click:function(e){return t.fetch(i.id)}}},[e("fa-icon",{attrs:{icon:"download"}}),t._v(" "),e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Use track")])],1)],1)],1)])})),0),t._v(" "),e("p",[e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Static map images")]),t._v(" © "),e("a",{attrs:{href:"https://www.mapbox.com/about/maps/"}},[t._v("Mapbox")]),t._v(" ©\n      "),e("a",{attrs:{href:"http://www.openstreetmap.org/copyright"}},[t._v("OpenStreetMap")])])])]):null!==t.promise?e("div",[e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Loading...")])]):e("div",[e("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("No activity found")])])},Et=[],Mt=(i(3362),i(9391),function(){var t=this,e=t._self._c;return e("div",{staticClass:"activity",class:{hovered:t.hover},on:{mouseover:function(e){t.hover=!0},mouseleave:function(e){t.hover=!1}}},[e("img",{attrs:{src:t.activity.miniature?`${t.miniaturesBaseUrl}/${t.activity.miniature}`:"/img/broken_image.png"}}),t._v(" "),e("div",{staticClass:"activity-top px-2"},[e("div",{staticClass:"is-flex is-justify-content-space-between is-size-7 is-italic"},[e("div",[t._v(t._s(t.activity.type[t.$user.lang]))]),t._v(" "),e("div",{staticClass:"has-text-right"},[t._v(t._s(t.$dateUtils.toTechnicalString(t.activity.date)))])]),t._v(" "),e("div",[t.activity.name?e("span",[t._v(t._s(t.activity.name)+" ")]):t._e(),t._v(" "),e("span",{class:{"is-size-7 is-italic":t.activity.name}},["strava"===t.activity.vendor?e("a",{attrs:{href:"https://www.strava.com/activities/"+t.activity.vendorId}},[t._v(t._s(t.$gettext(t.activity.vendor)))]):"garmin"===t.activity.vendor?e("a",{attrs:{href:"https://connect.garmin.com/modern/activity/"+t.activity.vendorId}},[t._v(t._s(t.$gettext(t.activity.vendor)))]):[t._v(t._s(t.$gettext(t.activity.vendor)))]],2)])]),t._v(" "),e("div",{staticClass:"activity-bottom is-flex is-justify-content-space-between is-size-7 is-italic px-2"},[t.duration?e("div",[e("fa-icon",{attrs:{icon:["far","clock"],title:t.$gettext("Duration")}}),t._v(" "),e("span",{domProps:{innerHTML:t._s(t.duration)}})],1):t._e(),t._v(" "),t.length?e("div",[e("fa-icon",{attrs:{icon:"ruler",title:t.$gettext("length")}}),t._v(" "),e("span",{domProps:{innerHTML:t._s(t.length)}}),t._v(" \n    ")],1):t._e(),t._v(" "),t.heightDiffUp?e("div",[e("icon-height-diff-up"),t._v(" "),e("span",{domProps:{innerHTML:t._s(t.heightDiffUp)}})],1):t._e()]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.hover,expression:"hover"}],staticClass:"activity-center"},[t._t("default")],2)])}),$t=[],Tt=i(29497),Bt={name:"TrackingDeviceActivity",props:{activity:{type:Object,required:!0}},data(){return{hover:!1}},computed:{duration(){if(this.activity.duration)return this.$dateUtils.durationToTimeString(this.activity.duration)},heightDiffUp(){return this.$documentUtils.heightDiffUpWithUnit(this.activity.heightDiffUp)},length(){return this.$documentUtils.lengthWithUnit(this.activity.length)},miniaturesBaseUrl(){return Tt.A.urls.miniatures}}},Pt=Bt,It=(0,h.A)(Pt,Mt,$t,!1,null,"5f2a7043",null),Nt=It.exports,Ft=i(24966),Vt={components:{TrackingDeviceActivity:Nt},data(){return{promise:null,activities:[],fetching:null}},mounted(){this.loadActivities()},methods:{async loadActivities(){this.promise&&this.promise.cancel(),this.promise=Ft.A.getActivities(this.$user.id,this.$user.lang).then((t=>{this.activities=t.data}))},fetch(t){this.fetching=t,Ft.A.getActivityGeometry(this.$user.id,t).then((({data:t})=>{this.$emit("geojson",t)}),(()=>{(0,s.toast)({message:this.$gettext("Geographical data could not be retrieved"),type:"is-danger",position:"center"})})).finally((()=>this.fetching=null))}}},Ot=Vt,Rt=(0,h.A)(Ot,St,Et,!1,null,null,null),Ut=Rt.exports,Lt={components:{TrackingDeviceActivities:Ut,GpsFileUpload:xt},data(){return{activeTab:"tracking-devices"}},methods:{show(){this.$refs.modalWindow.show()},hide(){this.$refs.modalWindow.hide()},setGeometry(t){this.$emit("data",t),this.hide()}}},jt=Lt,Yt=(0,h.A)(jt,Dt,kt,!1,null,null,null),qt=Yt.exports,Ht=i(10717);const Gt=new Ht.A.format.GeoJSON,Wt="EPSG:4326",Qt="EPSG:3857";var zt={components:{GpsUploadModal:qt,GpsFileUpload:xt},mixins:[g.ox],props:{geomDetailEditable:{type:Boolean,default:!1},documents:{type:Array,default:null},initialExtent:{type:Array,default:null}},data(){return{latitude:null,longitude:null,hasTrackingActivities:!1}},computed:{hasError(){return!1},visible(){return!0}},watch:{"document.geometry.geom":{handler:"setLatitudeLongitude",immediate:!0}},mounted(){Ft.A.getStatus(this.$user.id).then((({data:t})=>{Object.values(t).includes("configured")&&(this.hasTrackingActivities=!0)}),(()=>{}))},methods:{openGPSModal(){this.$refs.GpsUploadModal.show()},setGeometry(t){this.$refs.map.setDocumentGeometryFromGeoFile(t)},setGeometryPoint(){if(null===this.latitude||null===this.longitude)return;const t=parseFloat(String(this.longitude).replace(",",".")),e=parseFloat(String(this.latitude).replace(",",".")),i=new Ht.A.geom.Point([t,e]);i.transform(Wt,Qt),this.document.geometry.geom=Gt.writeGeometry(i)},setLatitudeLongitude(){if(!this.document||!this.document.geometry||!this.document.geometry.geom)return{};const t=Gt.readGeometry(this.document.geometry.geom);t.transform(Qt,Wt);const e=t.getCoordinates();this.longitude=Math.round(1e6*e[0])/1e6,this.latitude=Math.round(1e6*e[1])/1e6},fitMapToDocuments(){return this.$refs.map.fitMapToDocuments(!0)}}},Jt=zt,Xt=(0,h.A)(Jt,gt,_t,!1,null,"aff31be0",null),Kt=Xt.exports,Zt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"column"},[e("div",{staticClass:"field"},[e("label",{staticClass:"label"},[e("span",[t._v("\n        "+t._s(t._f("uppercaseFirstLetter")(t.$gettext("quality")))+"\n      ")]),t._v("\n       \n      "),t.isCollaborative?t._e():e("span",{on:{click:function(e){t.autoComputeQuality=!t.autoComputeQuality}}},[e("fa-icon",{staticClass:"has-cursor-pointer",attrs:{icon:t.autoComputeQuality?"lock":"unlock"}})],1)])]),t._v(" "),e("div",{staticClass:"field quality-select-container"},[t.autoComputeQuality&&!t.isCollaborative?e("input-simple",{attrs:{options:t.$options.quality_types,i18n:"","i18n-context":"quality_types",value:t.computedQuality,disabled:""}}):e("input-simple",{attrs:{options:t.$options.quality_types,i18n:"","i18n-context":"quality_types",required:""},model:{value:t.document.quality,callback:function(e){t.$set(t.document,"quality",e)},expression:"document.quality"}})],1)])},te=[];i(5746);function ee(t){return t<1?"empty":t<2?"draft":t<3?"medium":"fine"}function ie(t,e){for(const i of e)if(t.activities.includes(i))return!0;return!1}function se(t,e){return t.geometry&&t.geometry.geom_detail||e.route_description}function ne(t,e){if(e.conditions)return!0;if(!e.conditions_levels)return!1;const i=JSON.parse(e.conditions_levels);return!(!i||0===i.length||!(i[0].level_place||i[0].level_comment||i[0].level_snow_height_total||i[0].level_snow_height_soft))}function ae(t){return t.elevation_up_snow||t.elevation_down_snow||t.snow_quantity||t.snow_quality||t.length_total||t.glacier_rating}function oe(t,e){let i=0;return i+=t.geometry&&t.geometry.geom?1:0,i+=t.activities&&t.activities.length?.5:0,i+=t.categories&&t.categories.length?.5:0,i+=t.associations.waypoints.length||t.associations.routes.length?1:0,i+=e.title?1:0,i+=e.description?1:0,ee(i)}function re(t,e){const i=e.description||"";let s=0;return s+=t.associations.waypoints.length?1:0,s+=t.associations.images.length?1:0,s+=e.summary?1:0,s+=i?1:-1,s+=-1!==i.search(/(^|\n)##/g)?1:0,s+=-1!==i.search(/\[img=/g)?1:0,ee(s)}function le(t,e){function i(){let i=0;return i+=se(t,e)?.5:0,i+=ae(t)?.5:0,(t.access_condition&&"snowy"!==t.access_condition&&t.elevation_access||"snowy"===t.access_condition&&t.elevation_access&&e.access_comment)&&(i+=.5),i+="no"!==t.avalanche_signs&&e.avalanches?.5:0,i+=e.description?.5:0,i+=e.weather?.5:0,i+=t.condition_rating?.5:0,i=ne(t,e)?i+1:Math.min(i,2),i}function s(){let i=0;return i+=se(t,e)?.5:0,i+=t.condition_rating?.5:0,i+=e.description?1:0,i+=e.timing?.5:0,i+=e.weather?.5:0,i=ne(t,e)?i+1.5:Math.min(i,2),i}function n(){let i=0;return i+=se(t,e)?.5:0,i+=e.description?1:0,i+=e.timing?.5:0,i+=e.weather?.5:0,i=e.conditions?i+2:Math.min(i,2),i}let a=0,o=0,r=0;ie(t,["skitouring","snowshoeing"])&&(a=i()),ie(t,["snow_ice_mixed","ice_climbing","mountain_climbing"])&&(o=s()),ie(t,["rock_climbing","hiking","mountain_biking","via_ferrata","paragliding","slacklining"])&&(r=n());const l=Math.max(a,o,r);return ee(l)}var de={props:{document:{type:Object,default:null}},data(){return{autoComputeQuality:!0,computedQuality:"empty"}},computed:{editedLocale(){return this.document?this.document.locales[0]:null},isCollaborative(){return!!["a","b","w","r","m"].includes(this.document.type)||!["u","o","x"].includes(this.document.type)&&(["i"].includes(this.document.type)?"collab"===this.document.image_type:!!["c"].includes(this.document.type)&&"collab"===this.document.article_type)}},watch:{document:{handler:"computeQuality",deep:!0,immediate:!0}},methods:{computeQuality(){if(!this.document)return null;"o"===this.document.type?this.computedQuality=le(this.document,this.editedLocale):"c"===this.document.type?this.computedQuality=re(this.document,this.editedLocale):"i"===this.document.type?this.computedQuality=oe(this.document,this.editedLocale):this.computedQuality=this.document.quality,"great"===this.document.quality&&(this.computedQuality="great")},beforeSave(){!this.isCollaborative&&this.autoComputeQuality&&(this.document.quality=this.computedQuality)}},quality_types:j.A.quality_types},ce=de,ue=(0,h.A)(ce,Zt,te,!1,null,"42c5dffc",null),fe=ue.exports,me=i(39544);const he=new Ht.A.format.GeoJSON,pe="EPSG:4326",ve="EPSG:3857";var ge={components:{FormRow:I,FormSection:vt,FormField:ct,QualityField:fe,FormInput:w,MapInputRow:Kt,EditionContainer:nt,AssociationsInputRow:k},mixins:[me.A],data(){return{promise:{},fields:null,saving:!1,modified:!1}},computed:{mode(){return this.$route.name.split("-")[1]},documentType(){return this.$route.name.replace(/-(edit|add)/,"")},documentId(){return this.$route.params.id},lang(){return this.$route.params.lang},document(){return this.promise.data},editedLocale(){return this.document?this.document.locales[0]:null}},watch:{$route:{handler:"load",immediate:!0},"document.geometry.geom":"setLatitudeLongitude"},mounted(){window.addEventListener("beforeunload",this.beforeUnload)},beforeDestroy(){window.removeEventListener("beforeunload",this.beforeUnload)},beforeRouteLeave(t,e,i){if(this.modified){const t=window.confirm(this.$gettext("Do you really want to leave? you have unsaved changes!"));t?i():i(!1)}else i()},methods:{load(){if(this.fields=j.A.objectDefinitions[this.documentType].fields,this.cleanErrors(),this.latitude=null,this.longitude=null,this.$user.isLogged)if("edit"===this.mode)this.promise=L.A[this.documentType].get(this.documentId,this.lang).then((t=>{const e=t.data.locales;e.length||e.push(this.$documentUtils.buildLocale(this.documentType,this.lang)),this.afterLoad(t),this.modified=!0}));else{const t=this.$documentUtils.buildDocument(this.documentType,this.lang);this.promise={data:null,loading:1};const e=()=>{this.promise.loading-=1,0===this.promise.loading&&(this.modified=!0,this.promise.data=t,this.afterLoad())};"outing"===this.documentType&&(this.promise.loading+=1,L.A.profile.get(this.$user.id).then((i=>{this.$documentUtils.addAssociation(t,i.data),e()})));for(const i of Object.keys(this.$route.query)){const s=this.$documentUtils.getDocumentType(i);if(s&&this.$route.query[i]){const n=String(this.$route.query[i]).split(",");for(const i of n)this.promise.loading+=1,L.A[s].get(i).then((i=>{this.$documentUtils.addAssociation(t,i.data),e()}))}}this.$route.query.act&&(t.activities=this.$route.query.act.split(",")),e()}},setGeometryPoint(){if(null===this.latitude||null===this.longitude)return;const t=parseFloat(String(this.longitude).replace(",",".")),e=parseFloat(String(this.latitude).replace(",",".")),i=new Ht.A.geom.Point([t,e]);i.transform(pe,ve),this.document.geometry.geom=he.writeGeometry(i)},setLatitudeLongitude(){if(!this.document||!this.document.geometry||!this.document.geometry.geom)return{};const t=he.readGeometry(this.document.geometry.geom);t.transform(ve,pe);const e=t.getCoordinates();this.longitude=Math.round(1e6*e[0])/1e6,this.latitude=Math.round(1e6*e[1])/1e6},afterLoad(){},beforeSave(){},afterSave(){},displayErrors(t){const e=this.getFieldsWithError(),i=t?"API message":void 0;if(0!==e.length){const t=e.map((t=>`${this.$gettext(t.name)} : ${this.$gettext(t.error.description,i)}`));return(0,s.toast)({message:`<ul><li>${t.join("</li><li>")}</li></ul>`,type:"is-danger",position:"center"}),!0}return!1},save(t){if("eu"===this.lang&&!this.$user.isModerator)return void(0,s.toast)({message:this.$gettext("Sorry, euskara lang has been frozen.\nWe're looking for a moderator, if you're interested, please contact board@camptocamp.org"),type:"is-danger",position:"center"});if(this.beforeSave(),this.computeErrors(),this.displayErrors(!1))return;let e;this.saving=!0,e="edit"===this.mode?L.A[this.documentType].save(this.document,t).then((()=>{this.modified=!1,this.goToDocument(this.document.document_id)})):L.A[this.documentType].create(this.document).then((t=>{this.modified=!1,this.goToDocument(t.data.document_id)})),this.afterSave(),e.catch((t=>{this.saving=!1;const e=t.response.data;this.dispatchErrors(e.errors)}))},goToDocument(t){this.$router.push({name:this.documentType,params:{id:t,lang:this.lang}})},computeErrors(){for(const t of Object.values(this.fields))t.error=t.getError(this.document,this.editedLocale)},getFieldsWithError(){return Object.values(this.fields).filter((t=>null!==t.error))},dispatchErrors(t){this.cleanErrors();for(const e of t){const t=e.name.split(".");"locales"===t[0]?this.dispatchError(t[2],e):"associations"===t[0]?this.dispatchError(t[1],e):this.dispatchError(t[0],e)}this.displayErrors(!0)},dispatchError(t,e){void 0===this.fields[t]?(0,s.toast)({message:this.$gettext(`${e.name}: ${e.description}`),type:"is-danger",position:"center"}):this.fields[t].error=e},cleanErrors(){for(const t of Object.values(this.fields))t.error=null},beforeUnload(t){this.modified&&(t.preventDefault(),t.returnValue="")}}}},58202:function(t,e,i){t.exports=i(94556),i(62835),i(71832),i(30269),i(34743),i(22172),i(87905),i(82846),i(49079)},22172:function(t,e,i){var s,n,a;(function(o){"use strict";n=[i(94556),i(34743)],s=o,a="function"===typeof s?s.apply(e,n):s,void 0===a||(t.exports=a)})((function(t){"use strict";var e=t.ExifMap.prototype;e.tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",34665:{36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",36880:"OffsetTime",36881:"OffsetTimeOriginal",36882:"OffsetTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber"},34853:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},40965:{1:"InteroperabilityIndex"}},e.tags.ifd1=e.tags,e.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"Original",2:"Horizontal flip",3:"Rotate 180° CCW",4:"Vertical flip",5:"Vertical flip + Rotate 90° CW",6:"Rotate 90° CW",7:"Horizontal flip + Rotate 90° CW",8:"Rotate 90° CCW"}},e.getText=function(t){var e=this.get(t);switch(t){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[t][e];case"ExifVersion":case"FlashpixVersion":if(!e)return;return String.fromCharCode(e[0],e[1],e[2],e[3]);case"ComponentsConfiguration":if(!e)return;return this.stringValues[t][e[0]]+this.stringValues[t][e[1]]+this.stringValues[t][e[2]]+this.stringValues[t][e[3]];case"GPSVersionID":if(!e)return;return e[0]+"."+e[1]+"."+e[2]+"."+e[3]}return String(e)},e.getAll=function(){var t,e,i,s={};for(t in this)Object.prototype.hasOwnProperty.call(this,t)&&(e=this[t],e&&e.getAll?s[this.ifds[t].name]=e.getAll():(i=this.tags[t],i&&(s[i]=this.getText(i))));return s},e.getName=function(t){var e=this.tags[t];return"object"===typeof e?this.ifds[t].name:e},function(){var t,i,s,n=e.tags;for(t in n)if(Object.prototype.hasOwnProperty.call(n,t))if(i=e.ifds[t],i)for(t in s=n[t],s)Object.prototype.hasOwnProperty.call(s,t)&&(i.map[s[t]]=Number(t));else e.map[n[t]]=Number(t)}()}))},34743:function(t,e,i){var s,n,a;(function(o){"use strict";n=[i(94556),i(71832)],s=o,a="function"===typeof s?s.apply(e,n):s,void 0===a||(t.exports=a)})((function(t){"use strict";function e(t){t&&(Object.defineProperty(this,"map",{value:this.ifds[t].map}),Object.defineProperty(this,"tags",{value:this.tags&&this.tags[t]||{}}))}function i(e,i,s){if(s){if(!(i+s>e.byteLength))return new Blob([t.bufferSlice.call(e.buffer,i,i+s)],{type:"image/jpeg"});console.log("Invalid Exif data: Invalid thumbnail data.")}}e.prototype.map={Orientation:274,Thumbnail:"ifd1",Blob:513,Exif:34665,GPSInfo:34853,Interoperability:40965},e.prototype.ifds={ifd1:{name:"Thumbnail",map:e.prototype.map},34665:{name:"Exif",map:{}},34853:{name:"GPSInfo",map:{}},40965:{name:"Interoperability",map:{}}},e.prototype.get=function(t){return this[t]||this[this.map[t]]};var s={1:{getValue:function(t,e){return t.getUint8(e)},size:1},2:{getValue:function(t,e){return String.fromCharCode(t.getUint8(e))},size:1,ascii:!0},3:{getValue:function(t,e,i){return t.getUint16(e,i)},size:2},4:{getValue:function(t,e,i){return t.getUint32(e,i)},size:4},5:{getValue:function(t,e,i){return t.getUint32(e,i)/t.getUint32(e+4,i)},size:8},9:{getValue:function(t,e,i){return t.getInt32(e,i)},size:4},10:{getValue:function(t,e,i){return t.getInt32(e,i)/t.getInt32(e+4,i)},size:8}};function n(t,e,i,n,a,o){var r,l,d,c,u,f,m=s[n];if(m){if(r=m.size*a,l=r>4?e+t.getUint32(i+8,o):i+8,!(l+r>t.byteLength)){if(1===a)return m.getValue(t,l,o);for(d=[],c=0;c<a;c+=1)d[c]=m.getValue(t,l+c*m.size,o);if(m.ascii){for(u="",c=0;c<d.length;c+=1){if(f=d[c],"\0"===f)break;u+=f}return u}return d}console.log("Invalid Exif data: Invalid data offset.")}else console.log("Invalid Exif data: Invalid tag type.")}function a(t,e,i){return(!t||t[i])&&(!e||!0!==e[i])}function o(t,e,i,s,o,r,l,d){var c,u,f,m,h,p;if(i+6>t.byteLength)console.log("Invalid Exif data: Invalid directory offset.");else{if(c=t.getUint16(i,s),u=i+2+12*c,!(u+4>t.byteLength)){for(f=0;f<c;f+=1)m=i+2+12*f,h=t.getUint16(m,s),a(l,d,h)&&(p=n(t,e,m,t.getUint16(m+2,s),t.getUint32(m+4,s),s),o[h]=p,r&&(r[h]=m));return t.getUint32(u,s)}console.log("Invalid Exif data: Invalid directory size.")}}function r(t,i,s,n,a,r,l){var d=t.exif[i];d&&(t.exif[i]=new e(i),t.exifOffsets&&(t.exifOffsets[i]=new e(i)),o(s,n,n+d,a,t.exif[i],t.exifOffsets&&t.exifOffsets[i],r&&r[i],l&&l[i]))}s[7]=s[1],t.parseExifData=function(t,s,n,l,d){if(!d.disableExif){var c,u,f,m=d.includeExifTags,h=d.excludeExifTags||{34665:{37500:!0}},p=s+10;if(1165519206===t.getUint32(s+4))if(p+8>t.byteLength)console.log("Invalid Exif data: Invalid segment size.");else if(0===t.getUint16(s+8)){switch(t.getUint16(p)){case 18761:c=!0;break;case 19789:c=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}42===t.getUint16(p+2,c)?(u=t.getUint32(p+4,c),l.exif=new e,d.disableExifOffsets||(l.exifOffsets=new e,l.exifTiffOffset=p,l.exifLittleEndian=c),u=o(t,p,p+u,c,l.exif,l.exifOffsets,m,h),u&&a(m,h,"ifd1")&&(l.exif.ifd1=u,l.exifOffsets&&(l.exifOffsets.ifd1=p+u)),Object.keys(l.exif.ifds).forEach((function(e){r(l,e,t,p,c,m,h)})),f=l.exif.ifd1,f&&f[513]&&(f[513]=i(t,p+f[513],f[514]))):console.log("Invalid Exif data: Missing TIFF marker.")}else console.log("Invalid Exif data: Missing byte alignment offset.")}},t.metaDataParsers.jpeg[65505].push(t.parseExifData),t.exifWriters={274:function(t,e,i){var s=e.exifOffsets[274];if(!s)return t;var n=new DataView(t,s+8,2);return n.setUint16(0,i,e.exifLittleEndian),t}},t.writeExifData=function(e,i,s,n){return t.exifWriters[i.exif.map[s]](e,i,n)},t.ExifMap=e}))},30269:function(t,e,i){var s,n,a;(function(o){"use strict";n=[i(94556)],s=o,a="function"===typeof s?s.apply(e,n):s,void 0===a||(t.exports=a)})((function(t){"use strict";var e=t.global;e.fetch&&e.Request&&e.Response&&e.Response.prototype.blob?t.fetchBlob=function(t,i,s){function n(t){return t.blob()}if(e.Promise&&"function"!==typeof i)return fetch(new Request(t,i)).then(n);fetch(new Request(t,s)).then(n).then(i)["catch"]((function(t){i(null,t)}))}:e.XMLHttpRequest&&""===(new XMLHttpRequest).responseType&&(t.fetchBlob=function(t,i,s){function n(e,i){s=s||{};var n=new XMLHttpRequest;n.open(s.method||"GET",t),s.headers&&Object.keys(s.headers).forEach((function(t){n.setRequestHeader(t,s.headers[t])})),n.withCredentials="include"===s.credentials,n.responseType="blob",n.onload=function(){e(n.response)},n.onerror=n.onabort=n.ontimeout=function(t){e===i?i(null,t):i(t)},n.send(s.body)}return e.Promise&&"function"!==typeof i?(s=i,new Promise(n)):n(i,i)})}))},82846:function(t,e,i){var s,n,a;(function(o){"use strict";n=[i(94556),i(87905)],s=o,a="function"===typeof s?s.apply(e,n):s,void 0===a||(t.exports=a)})((function(t){"use strict";var e=t.IptcMap.prototype;e.tags={0:"ApplicationRecordVersion",3:"ObjectTypeReference",4:"ObjectAttributeReference",5:"ObjectName",7:"EditStatus",8:"EditorialUpdate",10:"Urgency",12:"SubjectReference",15:"Category",20:"SupplementalCategories",22:"FixtureIdentifier",25:"Keywords",26:"ContentLocationCode",27:"ContentLocationName",30:"ReleaseDate",35:"ReleaseTime",37:"ExpirationDate",38:"ExpirationTime",40:"SpecialInstructions",42:"ActionAdvised",45:"ReferenceService",47:"ReferenceDate",50:"ReferenceNumber",55:"DateCreated",60:"TimeCreated",62:"DigitalCreationDate",63:"DigitalCreationTime",65:"OriginatingProgram",70:"ProgramVersion",75:"ObjectCycle",80:"Byline",85:"BylineTitle",90:"City",92:"Sublocation",95:"State",100:"CountryCode",101:"Country",103:"OriginalTransmissionReference",105:"Headline",110:"Credit",115:"Source",116:"CopyrightNotice",118:"Contact",120:"Caption",121:"LocalCaption",122:"Writer",125:"RasterizedCaption",130:"ImageType",131:"ImageOrientation",135:"LanguageIdentifier",150:"AudioType",151:"AudioSamplingRate",152:"AudioSamplingResolution",153:"AudioDuration",154:"AudioOutcue",184:"JobID",185:"MasterDocumentID",186:"ShortDocumentID",187:"UniqueDocumentID",188:"OwnerID",200:"ObjectPreviewFileFormat",201:"ObjectPreviewFileVersion",202:"ObjectPreviewData",221:"Prefs",225:"ClassifyState",228:"SimilarityIndex",230:"DocumentNotes",231:"DocumentHistory",232:"ExifCameraInfo",255:"CatalogSets"},e.stringValues={10:{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"},75:{a:"Morning",b:"Both Morning and Evening",p:"Evening"},131:{L:"Landscape",P:"Portrait",S:"Square"}},e.getText=function(t){var e=this.get(t),i=this.map[t],s=this.stringValues[i];return s?s[e]:String(e)},e.getAll=function(){var t,e,i={};for(t in this)Object.prototype.hasOwnProperty.call(this,t)&&(e=this.tags[t],e&&(i[e]=this.getText(e)));return i},e.getName=function(t){return this.tags[t]},function(){var t,i=e.tags,s=e.map||{};for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&(s[i[t]]=Number(t))}()}))},87905:function(t,e,i){var s,n,a;(function(o){"use strict";n=[i(94556),i(71832)],s=o,a="function"===typeof s?s.apply(e,n):s,void 0===a||(t.exports=a)})((function(t){"use strict";function e(){}function i(t,e,i){for(var s="",n=e+i,a=e;a<n;a+=1)s+=String.fromCharCode(t.getUint8(a));return s}function s(t,e,s,n,a){return"binary"===e.types[t]?new Blob([s.buffer.slice(n,n+a)]):"Uint16"===e.types[t]?s.getUint16(n):i(s,n,a)}function n(t,e){return void 0===t?e:t instanceof Array?(t.push(e),t):[t,e]}function a(t,e,i,a,o,r){var l,d,c,u=e+i,f=e;while(f<u)28===t.getUint8(f)&&2===t.getUint8(f+1)&&(c=t.getUint8(f+2),o&&!o[c]||r&&r[c]||(d=t.getInt16(f+3),l=s(c,a.iptc,t,f+5,d),a.iptc[c]=n(a.iptc[c],l),a.iptcOffsets&&(a.iptcOffsets[c]=f))),f+=1}function o(t,e){return 943868237===t.getUint32(e)&&1028===t.getUint16(e+4)}function r(t,e){var i=t.getUint8(e+7);return i%2!==0&&(i+=1),0===i&&(i=4),i}e.prototype.map={ObjectName:5},e.prototype.types={0:"Uint16",200:"Uint16",201:"Uint16",202:"binary"},e.prototype.get=function(t){return this[t]||this[this.map[t]]},t.parseIptcData=function(t,i,s,n,l){if(!l.disableIptc){var d=i+s;while(i+8<d){if(o(t,i)){var c=r(t,i),u=i+8+c;if(u>d){console.log("Invalid IPTC data: Invalid segment offset.");break}var f=t.getUint16(i+6+c);if(i+f>d){console.log("Invalid IPTC data: Invalid segment size.");break}return n.iptc=new e,l.disableIptcOffsets||(n.iptcOffsets=new e),void a(t,u,f,n,l.includeIptcTags,l.excludeIptcTags||{202:!0})}i+=1}}},t.metaDataParsers.jpeg[65517].push(t.parseIptcData),t.IptcMap=e}))},71832:function(t,e,i){var s,n,a;(function(o){"use strict";n=[i(94556)],s=o,a="function"===typeof s?s.apply(e,n):s,void 0===a||(t.exports=a)})((function(t){"use strict";var e=t.global,i=t.transform,s=e.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),n=e.ArrayBuffer&&ArrayBuffer.prototype.slice||function(t,e){e=e||this.byteLength-t;var i=new Uint8Array(this,t,e),s=new Uint8Array(e);return s.set(i),s.buffer},a={jpeg:{65505:[],65517:[]}};function o(i,o,r,l){var d=this;function c(o,c){if(!(e.DataView&&s&&i&&i.size>=12&&"image/jpeg"===i.type))return o(l);var u=r.maxMetaDataSize||262144;t.readFile(s.call(i,0,u),(function(t){var e=new DataView(t);if(65496!==e.getUint16(0))return c(new Error("Invalid JPEG file: Missing JPEG marker."));var i,s,u,f,m=2,h=e.byteLength-4,p=m;while(m<h){if(i=e.getUint16(m),!(i>=65504&&i<=65519||65534===i))break;if(s=e.getUint16(m+2)+2,m+s>e.byteLength){console.log("Invalid JPEG metadata: Invalid segment size.");break}if(u=a.jpeg[i],u&&!r.disableMetaDataParsers)for(f=0;f<u.length;f+=1)u[f].call(d,e,m,s,l,r);m+=s,p=m}!r.disableImageHead&&p>6&&(l.imageHead=n.call(t,0,p)),o(l)}),c,"readAsArrayBuffer")||o(l)}return r=r||{},e.Promise&&"function"!==typeof o?(r=o||{},l=r,new Promise(c)):(l=l||{},c(o,o))}function r(t,e,i){return t&&e&&i?new Blob([i,s.call(t,e.byteLength)],{type:"image/jpeg"}):null}function l(t,i,s){var n={maxMetaDataSize:1024,disableMetaDataParsers:!0};if(!s&&e.Promise)return o(t,n).then((function(e){return r(t,e.imageHead,i)}));o(t,(function(e){s(r(t,e.imageHead,i))}),n)}t.transform=function(s,n,a,r,l){t.requiresMetaData(n)?(l=l||{},o(r,(function(o){o!==l&&(e.console&&console.log(o),o=l),i.call(t,s,n,a,r,o)}),n,l)):i.apply(t,arguments)},t.blobSlice=s,t.bufferSlice=n,t.replaceHead=l,t.parseMetaData=o,t.metaDataParsers=a}))},49079:function(t,e,i){var s,n,a;(function(o){"use strict";n=[i(94556),i(62835),i(71832)],s=o,a="function"===typeof s?s.apply(e,n):s,void 0===a||(t.exports=a)})((function(t){"use strict";var e=t.transform,i=t.requiresCanvas,s=t.requiresMetaData,n=t.transformCoordinates,a=t.getTransformedOptions;function o(e,i){var s=e&&e.orientation;return!0===s&&!t.orientation||1===s&&t.orientation||(!i||t.orientation)&&s>1&&s<9}function r(t,e){return t!==e&&(1===t&&e>1&&e<9||t>1&&t<9)}function l(t,e){if(e>1&&e<9)switch(t){case 2:case 4:return e>4;case 5:case 7:return e%2===0;case 6:case 8:return 2===e||4===e||5===e||7===e}return!1}(function(t){if(t.global.document){var e="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAIAAwMBEQACEQEDEQH/xABRAAEAAAAAAAAAAAAAAAAAAAAKEAEBAQADAQEAAAAAAAAAAAAGBQQDCAkCBwEBAAAAAAAAAAAAAAAAAAAAABEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8AG8T9NfSMEVMhQvoP3fFiRZ+MTHDifa/95OFSZU5OzRzxkyejv8ciEfhSceSXGjS8eSdLnZc2HDm4M3BxcXwH/9k=",i=document.createElement("img");i.onload=function(){if(t.orientation=2===i.width&&3===i.height,t.orientation){var e=t.createCanvas(1,1,!0),s=e.getContext("2d");s.drawImage(i,1,1,1,1,0,0,1,1),t.orientationCropBug="255,255,255,255"!==s.getImageData(0,0,1,1).data.toString()}},i.src=e}})(t),t.requiresCanvas=function(e){return o(e)||i.call(t,e)},t.requiresMetaData=function(e){return o(e,!0)||s.call(t,e)},t.transform=function(i,s,n,a,o){e.call(t,i,s,(function(e,i){if(i){var s=t.orientation&&i.exif&&i.exif.get("Orientation");if(s>4&&s<9){var a=i.originalWidth,o=i.originalHeight;i.originalWidth=o,i.originalHeight=a}}n(e,i)}),a,o)},t.getTransformedOptions=function(e,i,s){var n=a.call(t,e,i),o=s.exif&&s.exif.get("Orientation"),d=n.orientation,c=t.orientation&&o;if(!0===d&&(d=o),!r(d,c))return n;var u=n.top,f=n.right,m=n.bottom,h=n.left,p={};for(var v in n)Object.prototype.hasOwnProperty.call(n,v)&&(p[v]=n[v]);if(p.orientation=d,(d>4&&!(c>4)||d<5&&c>4)&&(p.maxWidth=n.maxHeight,p.maxHeight=n.maxWidth,p.minWidth=n.minHeight,p.minHeight=n.minWidth,p.sourceWidth=n.sourceHeight,p.sourceHeight=n.sourceWidth),c>1){switch(c){case 2:f=n.left,h=n.right;break;case 3:u=n.bottom,f=n.left,m=n.top,h=n.right;break;case 4:u=n.bottom,m=n.top;break;case 5:u=n.left,f=n.bottom,m=n.right,h=n.top;break;case 6:u=n.left,f=n.top,m=n.right,h=n.bottom;break;case 7:u=n.right,f=n.top,m=n.left,h=n.bottom;break;case 8:u=n.right,f=n.bottom,m=n.left,h=n.top;break}if(l(d,c)){var g=u,_=f;u=m,f=h,m=g,h=_}}switch(p.top=u,p.right=f,p.bottom=m,p.left=h,d){case 2:p.right=h,p.left=f;break;case 3:p.top=m,p.right=h,p.bottom=u,p.left=f;break;case 4:p.top=m,p.bottom=u;break;case 5:p.top=h,p.right=m,p.bottom=f,p.left=u;break;case 6:p.top=f,p.right=m,p.bottom=h,p.left=u;break;case 7:p.top=f,p.right=u,p.bottom=h,p.left=m;break;case 8:p.top=h,p.right=u,p.bottom=f,p.left=m;break}return p},t.transformCoordinates=function(e,i,s){n.call(t,e,i,s);var a=i.orientation,o=t.orientation&&s.exif&&s.exif.get("Orientation");if(r(a,o)){var d=e.getContext("2d"),c=e.width,u=e.height,f=c,m=u;switch((a>4&&!(o>4)||a<5&&o>4)&&(e.width=u,e.height=c),a>4&&(f=u,m=c),o){case 2:d.translate(f,0),d.scale(-1,1);break;case 3:d.translate(f,m),d.rotate(Math.PI);break;case 4:d.translate(0,m),d.scale(1,-1);break;case 5:d.rotate(-.5*Math.PI),d.scale(-1,1);break;case 6:d.rotate(-.5*Math.PI),d.translate(-f,0);break;case 7:d.rotate(-.5*Math.PI),d.translate(-f,m),d.scale(1,-1);break;case 8:d.rotate(.5*Math.PI),d.translate(0,-m);break}switch(l(a,o)&&(d.translate(f,m),d.rotate(Math.PI)),a){case 2:d.translate(c,0),d.scale(-1,1);break;case 3:d.translate(c,u),d.rotate(Math.PI);break;case 4:d.translate(0,u),d.scale(1,-1);break;case 5:d.rotate(.5*Math.PI),d.scale(1,-1);break;case 6:d.rotate(.5*Math.PI),d.translate(0,-u);break;case 7:d.rotate(.5*Math.PI),d.translate(c,-u),d.scale(-1,1);break;case 8:d.rotate(-.5*Math.PI),d.translate(-c,0);break}}}}))},62835:function(t,e,i){var s,n,a;(function(o){"use strict";n=[i(94556)],s=o,a="function"===typeof s?s.apply(e,n):s,void 0===a||(t.exports=a)})((function(t){"use strict";var e=t.transform;t.createCanvas=function(e,i,s){if(s&&t.global.OffscreenCanvas)return new OffscreenCanvas(e,i);var n=document.createElement("canvas");return n.width=e,n.height=i,n},t.transform=function(i,s,n,a,o){e.call(t,t.scale(i,s,o),s,n,a,o)},t.transformCoordinates=function(){},t.getTransformedOptions=function(t,e){var i,s,n,a,o=e.aspectRatio;if(!o)return e;for(s in i={},e)Object.prototype.hasOwnProperty.call(e,s)&&(i[s]=e[s]);return i.crop=!0,n=t.naturalWidth||t.width,a=t.naturalHeight||t.height,n/a>o?(i.maxWidth=a*o,i.maxHeight=a):(i.maxWidth=n,i.maxHeight=n/o),i},t.drawImage=function(t,e,i,s,n,a,o,r,l){var d=e.getContext("2d");return!1===l.imageSmoothingEnabled?(d.msImageSmoothingEnabled=!1,d.imageSmoothingEnabled=!1):l.imageSmoothingQuality&&(d.imageSmoothingQuality=l.imageSmoothingQuality),d.drawImage(t,i,s,n,a,0,0,o,r),d},t.requiresCanvas=function(t){return t.canvas||t.crop||!!t.aspectRatio},t.scale=function(e,i,s){i=i||{},s=s||{};var n,a,o,r,l,d,c,u,f,m,h,p,v=e.getContext||t.requiresCanvas(i)&&!!t.global.HTMLCanvasElement,g=e.naturalWidth||e.width,_=e.naturalHeight||e.height,b=g,y=_;function w(){var t=Math.max((o||b)/b,(r||y)/y);t>1&&(b*=t,y*=t)}function C(){var t=Math.min((n||b)/b,(a||y)/y);t<1&&(b*=t,y*=t)}if(v&&(i=t.getTransformedOptions(e,i,s),c=i.left||0,u=i.top||0,i.sourceWidth?(l=i.sourceWidth,void 0!==i.right&&void 0===i.left&&(c=g-l-i.right)):l=g-c-(i.right||0),i.sourceHeight?(d=i.sourceHeight,void 0!==i.bottom&&void 0===i.top&&(u=_-d-i.bottom)):d=_-u-(i.bottom||0),b=l,y=d),n=i.maxWidth,a=i.maxHeight,o=i.minWidth,r=i.minHeight,v&&n&&a&&i.crop?(b=n,y=a,h=l/d-n/a,h<0?(d=a*l/n,void 0===i.top&&void 0===i.bottom&&(u=(_-d)/2)):h>0&&(l=n*d/a,void 0===i.left&&void 0===i.right&&(c=(g-l)/2))):((i.contain||i.cover)&&(o=n=n||o,r=a=a||r),i.cover?(C(),w()):(w(),C())),v){if(f=i.pixelRatio,f>1&&(!e.style.width||Math.floor(parseFloat(e.style.width,10))!==Math.floor(g/f))&&(b*=f,y*=f),t.orientationCropBug&&!e.getContext&&(c||u||l!==g||d!==_)&&(h=e,e=t.createCanvas(g,_,!0),t.drawImage(h,e,0,0,g,_,g,_,i)),m=i.downsamplingRatio,m>0&&m<1&&b<l&&y<d)while(l*m>b)p=t.createCanvas(l*m,d*m,!0),t.drawImage(e,p,c,u,l,d,p.width,p.height,i),c=0,u=0,l=p.width,d=p.height,e=p;return p=t.createCanvas(b,y),t.transformCoordinates(p,i,s),f>1&&(p.style.width=p.width/f+"px"),t.drawImage(e,p,c,u,l,d,b,y,i).setTransform(1,0,0,1,0,0),p}return e.width=b,e.height=y,e}}))},94556:function(t,e,i){var s;(function(n){"use strict";var a=n.URL||n.webkitURL;function o(t){return!!a&&a.createObjectURL(t)}function r(t){return!!a&&a.revokeObjectURL(t)}function l(t,e){!t||"blob:"!==t.slice(0,5)||e&&e.noRevoke||r(t)}function d(t,e,i,s){if(!n.FileReader)return!1;var a=new FileReader;a.onload=function(){e.call(a,this.result)},i&&(a.onabort=a.onerror=function(){i.call(a,this.error)});var o=a[s||"readAsDataURL"];return o?(o.call(a,t),a):void 0}function c(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"}function u(t,e,i){function s(e,s){var a,r=document.createElement("img");function f(t,i){e!==s?t instanceof Error?s(t):(i=i||{},i.image=t,e(i)):e&&e(t,i)}function m(e,s){s&&n.console&&console.log(s),e&&c("Blob",e)?(t=e,a=o(t)):(a=t,i&&i.crossOrigin&&(r.crossOrigin=i.crossOrigin)),r.src=a}return r.onerror=function(t){l(a,i),s&&s.call(r,t)},r.onload=function(){l(a,i);var e={originalWidth:r.naturalWidth||r.width,originalHeight:r.naturalHeight||r.height};try{u.transform(r,i,f,t,e)}catch(n){s&&s(n)}},"string"===typeof t?(u.requiresMetaData(i)?u.fetchBlob(t,m,i):m(),r):c("Blob",t)||c("File",t)?(a=o(t),a?(r.src=a,r):d(t,(function(t){r.src=t}),s)):void 0}return n.Promise&&"function"!==typeof e?(i=e,new Promise(s)):s(e,e)}u.requiresMetaData=function(t){return t&&t.meta},u.fetchBlob=function(t,e){e()},u.transform=function(t,e,i,s,n){i(t,n)},u.global=n,u.readFile=d,u.isInstanceOf=c,u.createObjectURL=o,u.revokeObjectURL=r,s=function(){return u}.call(e,i,e,t),void 0===s||(t.exports=s)})("undefined"!==typeof window&&window||this)},56045:function(t,e,i){"use strict";function s(t){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function o(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),t}function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function l(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},s=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(i).filter((function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable})))),s.forEach((function(e){r(t,e,i[e])}))}return t}i.r(e);var d=function(){function t(e,i,s,a){n(this,t),this.language=e,this.months=i,this.monthsAbbr=s,this.days=a,this.rtl=!1,this.ymd=!1,this.yearSuffix=""}return o(t,[{key:"language",get:function(){return this._language},set:function(t){if("string"!==typeof t)throw new TypeError("Language must be a string");this._language=t}},{key:"months",get:function(){return this._months},set:function(t){if(12!==t.length)throw new RangeError("There must be 12 months for ".concat(this.language," language"));this._months=t}},{key:"monthsAbbr",get:function(){return this._monthsAbbr},set:function(t){if(12!==t.length)throw new RangeError("There must be 12 abbreviated months for ".concat(this.language," language"));this._monthsAbbr=t}},{key:"days",get:function(){return this._days},set:function(t){if(7!==t.length)throw new RangeError("There must be 7 days for ".concat(this.language," language"));this._days=t}}]),t}(),c=new d("English",["January","February","March","April","May","June","July","August","September","October","November","December"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]),u={useUtc:!1,getFullYear:function(t){return this.useUtc?t.getUTCFullYear():t.getFullYear()},getMonth:function(t){return this.useUtc?t.getUTCMonth():t.getMonth()},getDate:function(t){return this.useUtc?t.getUTCDate():t.getDate()},getDay:function(t){return this.useUtc?t.getUTCDay():t.getDay()},getHours:function(t){return this.useUtc?t.getUTCHours():t.getHours()},getMinutes:function(t){return this.useUtc?t.getUTCMinutes():t.getMinutes()},setFullYear:function(t,e,i){return this.useUtc?t.setUTCFullYear(e):t.setFullYear(e)},setMonth:function(t,e,i){return this.useUtc?t.setUTCMonth(e):t.setMonth(e)},setDate:function(t,e,i){return this.useUtc?t.setUTCDate(e):t.setDate(e)},compareDates:function(t,e){var i=new Date(t.getTime()),s=new Date(e.getTime());return this.useUtc?(i.setUTCHours(0,0,0,0),s.setUTCHours(0,0,0,0)):(i.setHours(0,0,0,0),s.setHours(0,0,0,0)),i.getTime()===s.getTime()},isValidDate:function(t){return"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(t.getTime())},getDayNameAbbr:function(t,e){if("object"!==s(t))throw TypeError("Invalid Type");return e[this.getDay(t)]},getMonthName:function(t,e){if(!e)throw Error("missing 2nd parameter Months array");if("object"===s(t))return e[this.getMonth(t)];if("number"===typeof t)return e[t];throw TypeError("Invalid type")},getMonthNameAbbr:function(t,e){if(!e)throw Error("missing 2nd paramter Months array");if("object"===s(t))return e[this.getMonth(t)];if("number"===typeof t)return e[t];throw TypeError("Invalid type")},daysInMonth:function(t,e){return/8|3|5|10/.test(e)?30:1===e?(t%4||!(t%100))&&t%400?28:29:31},getNthSuffix:function(t){switch(t){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},formatDate:function(t,e,i){i=i||c;var s=this.getFullYear(t),n=this.getMonth(t)+1,a=this.getDate(t),o=e.replace(/dd/,("0"+a).slice(-2)).replace(/d/,a).replace(/yyyy/,s).replace(/yy/,String(s).slice(2)).replace(/MMMM/,this.getMonthName(this.getMonth(t),i.months)).replace(/MMM/,this.getMonthNameAbbr(this.getMonth(t),i.monthsAbbr)).replace(/MM/,("0"+n).slice(-2)).replace(/M(?!a|ä|e)/,n).replace(/su/,this.getNthSuffix(this.getDate(t))).replace(/D(?!e|é|i)/,this.getDayNameAbbr(t,i.days));return o},createDateArray:function(t,e){var i=[];while(t<=e)i.push(new Date(t)),t=this.setDate(new Date(t),this.getDate(new Date(t))+1);return i},validateDateInput:function(t){return null===t||t instanceof Date||"string"===typeof t||"number"===typeof t}},f=function(t){return l({},u,{useUtc:t})},m=l({},u),h={props:{selectedDate:Date,resetTypedDate:[Date],format:[String,Function],translation:Object,inline:Boolean,id:String,name:String,refName:String,openDate:Date,placeholder:String,inputClass:[String,Object,Array],clearButton:Boolean,clearButtonIcon:String,calendarButton:Boolean,calendarButtonIcon:String,calendarButtonIconContent:String,disabled:Boolean,required:Boolean,typeable:Boolean,bootstrapStyling:Boolean,useUtc:Boolean},data:function(){var t=f(this.useUtc);return{input:null,typedDate:!1,utils:t}},computed:{formattedValue:function(){return this.selectedDate?this.typedDate?this.typedDate:"function"===typeof this.format?this.format(this.selectedDate):this.utils.formatDate(new Date(this.selectedDate),this.format,this.translation):null},computedInputClass:function(){return this.bootstrapStyling?"string"===typeof this.inputClass?[this.inputClass,"form-control"].join(" "):l({"form-control":!0},this.inputClass):this.inputClass}},watch:{resetTypedDate:function(){this.typedDate=!1}},methods:{showCalendar:function(){this.$emit("showCalendar")},parseTypedDate:function(t){if([27,13].includes(t.keyCode)&&this.input.blur(),this.typeable){var e=Date.parse(this.input.value);isNaN(e)||(this.typedDate=this.input.value,this.$emit("typedDate",new Date(this.typedDate)))}},inputBlurred:function(){this.typeable&&isNaN(Date.parse(this.input.value))&&(this.clearDate(),this.input.value=null,this.typedDate=null),this.$emit("closeCalendar")},clearDate:function(){this.$emit("clearDate")}},mounted:function(){this.input=this.$el.querySelector("input")}};function p(t,e,i,s,n,a,o,r,l,d){"boolean"!==typeof o&&(l=r,r=o,o=!1);var c,u="function"===typeof i?i.options:i;if(t&&t.render&&(u.render=t.render,u.staticRenderFns=t.staticRenderFns,u._compiled=!0,n&&(u.functional=!0)),s&&(u._scopeId=s),a?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(a)},u._ssrRegister=c):e&&(c=o?function(){e.call(this,d(this.$root.$options.shadowRoot))}:function(t){e.call(this,r(t))}),c)if(u.functional){var f=u.render;u.render=function(t,e){return c.call(e),f(t,e)}}else{var m=u.beforeCreate;u.beforeCreate=m?[].concat(m,c):[c]}return i}var v=p;const g=h;var _=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:{"input-group":t.bootstrapStyling}},[t.calendarButton?i("span",{staticClass:"vdp-datepicker__calendar-button",class:{"input-group-prepend":t.bootstrapStyling},style:{"cursor:not-allowed;":t.disabled},on:{click:t.showCalendar}},[i("span",{class:{"input-group-text":t.bootstrapStyling}},[i("i",{class:t.calendarButtonIcon},[t._v("\n        "+t._s(t.calendarButtonIconContent)+"\n        "),t.calendarButtonIcon?t._e():i("span",[t._v("…")])])])]):t._e(),t._v(" "),i("input",{ref:t.refName,class:t.computedInputClass,attrs:{type:t.inline?"hidden":"text",name:t.name,id:t.id,"open-date":t.openDate,placeholder:t.placeholder,"clear-button":t.clearButton,disabled:t.disabled,required:t.required,readonly:!t.typeable,autocomplete:"off"},domProps:{value:t.formattedValue},on:{click:t.showCalendar,keyup:t.parseTypedDate,blur:t.inputBlurred}}),t._v(" "),t.clearButton&&t.selectedDate?i("span",{staticClass:"vdp-datepicker__clear-button",class:{"input-group-append":t.bootstrapStyling},on:{click:function(e){return t.clearDate()}}},[i("span",{class:{"input-group-text":t.bootstrapStyling}},[i("i",{class:t.clearButtonIcon},[t.clearButtonIcon?t._e():i("span",[t._v("×")])])])]):t._e(),t._v(" "),t._t("afterDateInput")],2)},b=[];_._withStripped=!0;const y=void 0,w=void 0,C=void 0,A=!1;var x=v({render:_,staticRenderFns:b},y,g,w,A,C,void 0,void 0),D={props:{showDayView:Boolean,selectedDate:Date,pageDate:Date,pageTimestamp:Number,fullMonthName:Boolean,allowedToShowView:Function,dayCellContent:{type:Function,default:function(t){return t.date}},disabledDates:Object,highlighted:Object,calendarClass:[String,Object,Array],calendarStyle:Object,translation:Object,isRtl:Boolean,mondayFirst:Boolean,useUtc:Boolean},data:function(){var t=f(this.useUtc);return{utils:t}},computed:{daysOfWeek:function(){if(this.mondayFirst){var t=this.translation.days.slice();return t.push(t.shift()),t}return this.translation.days},blankDays:function(){var t=this.pageDate,e=this.useUtc?new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),1)):new Date(t.getFullYear(),t.getMonth(),1,t.getHours(),t.getMinutes());return this.mondayFirst?this.utils.getDay(e)>0?this.utils.getDay(e)-1:6:this.utils.getDay(e)},days:function(){for(var t=this.pageDate,e=[],i=this.useUtc?new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),1)):new Date(t.getFullYear(),t.getMonth(),1,t.getHours(),t.getMinutes()),s=this.utils.daysInMonth(this.utils.getFullYear(i),this.utils.getMonth(i)),n=0;n<s;n++)e.push({date:this.utils.getDate(i),timestamp:i.getTime(),isSelected:this.isSelectedDate(i),isDisabled:this.isDisabledDate(i),isHighlighted:this.isHighlightedDate(i),isHighlightStart:this.isHighlightStart(i),isHighlightEnd:this.isHighlightEnd(i),isToday:this.utils.compareDates(i,new Date),isWeekend:0===this.utils.getDay(i)||6===this.utils.getDay(i),isSaturday:6===this.utils.getDay(i),isSunday:0===this.utils.getDay(i)}),this.utils.setDate(i,this.utils.getDate(i)+1);return e},currMonthName:function(){var t=this.fullMonthName?this.translation.months:this.translation.monthsAbbr;return this.utils.getMonthNameAbbr(this.utils.getMonth(this.pageDate),t)},currYearName:function(){var t=this.translation.yearSuffix;return"".concat(this.utils.getFullYear(this.pageDate)).concat(t)},isYmd:function(){return this.translation.ymd&&!0===this.translation.ymd},isLeftNavDisabled:function(){return this.isRtl?this.isNextMonthDisabled(this.pageTimestamp):this.isPreviousMonthDisabled(this.pageTimestamp)},isRightNavDisabled:function(){return this.isRtl?this.isPreviousMonthDisabled(this.pageTimestamp):this.isNextMonthDisabled(this.pageTimestamp)}},methods:{selectDate:function(t){if(t.isDisabled)return this.$emit("selectedDisabled",t),!1;this.$emit("selectDate",t)},getPageMonth:function(){return this.utils.getMonth(this.pageDate)},showMonthCalendar:function(){this.$emit("showMonthCalendar")},changeMonth:function(t){var e=this.pageDate;this.utils.setMonth(e,this.utils.getMonth(e)+t),this.$emit("changedMonth",e)},previousMonth:function(){this.isPreviousMonthDisabled()||this.changeMonth(-1)},isPreviousMonthDisabled:function(){if(!this.disabledDates||!this.disabledDates.to)return!1;var t=this.pageDate;return this.utils.getMonth(this.disabledDates.to)>=this.utils.getMonth(t)&&this.utils.getFullYear(this.disabledDates.to)>=this.utils.getFullYear(t)},nextMonth:function(){this.isNextMonthDisabled()||this.changeMonth(1)},isNextMonthDisabled:function(){if(!this.disabledDates||!this.disabledDates.from)return!1;var t=this.pageDate;return this.utils.getMonth(this.disabledDates.from)<=this.utils.getMonth(t)&&this.utils.getFullYear(this.disabledDates.from)<=this.utils.getFullYear(t)},isSelectedDate:function(t){return this.selectedDate&&this.utils.compareDates(this.selectedDate,t)},isDisabledDate:function(t){var e=this,i=!1;return"undefined"!==typeof this.disabledDates&&("undefined"!==typeof this.disabledDates.dates&&this.disabledDates.dates.forEach((function(s){if(e.utils.compareDates(t,s))return i=!0,!0})),"undefined"!==typeof this.disabledDates.to&&this.disabledDates.to&&t<this.disabledDates.to&&(i=!0),"undefined"!==typeof this.disabledDates.from&&this.disabledDates.from&&t>this.disabledDates.from&&(i=!0),"undefined"!==typeof this.disabledDates.ranges&&this.disabledDates.ranges.forEach((function(e){if("undefined"!==typeof e.from&&e.from&&"undefined"!==typeof e.to&&e.to&&t<e.to&&t>e.from)return i=!0,!0})),"undefined"!==typeof this.disabledDates.days&&-1!==this.disabledDates.days.indexOf(this.utils.getDay(t))&&(i=!0),"undefined"!==typeof this.disabledDates.daysOfMonth&&-1!==this.disabledDates.daysOfMonth.indexOf(this.utils.getDate(t))&&(i=!0),"function"===typeof this.disabledDates.customPredictor&&this.disabledDates.customPredictor(t)&&(i=!0),i)},isHighlightedDate:function(t){var e=this;if((!this.highlighted||!this.highlighted.includeDisabled)&&this.isDisabledDate(t))return!1;var i=!1;return"undefined"!==typeof this.highlighted&&("undefined"!==typeof this.highlighted.dates&&this.highlighted.dates.forEach((function(s){if(e.utils.compareDates(t,s))return i=!0,!0})),this.isDefined(this.highlighted.from)&&this.isDefined(this.highlighted.to)&&(i=t>=this.highlighted.from&&t<=this.highlighted.to),"undefined"!==typeof this.highlighted.days&&-1!==this.highlighted.days.indexOf(this.utils.getDay(t))&&(i=!0),"undefined"!==typeof this.highlighted.daysOfMonth&&-1!==this.highlighted.daysOfMonth.indexOf(this.utils.getDate(t))&&(i=!0),"function"===typeof this.highlighted.customPredictor&&this.highlighted.customPredictor(t)&&(i=!0),i)},dayClasses:function(t){return{selected:t.isSelected,disabled:t.isDisabled,highlighted:t.isHighlighted,today:t.isToday,weekend:t.isWeekend,sat:t.isSaturday,sun:t.isSunday,"highlight-start":t.isHighlightStart,"highlight-end":t.isHighlightEnd}},isHighlightStart:function(t){return this.isHighlightedDate(t)&&this.highlighted.from instanceof Date&&this.utils.getFullYear(this.highlighted.from)===this.utils.getFullYear(t)&&this.utils.getMonth(this.highlighted.from)===this.utils.getMonth(t)&&this.utils.getDate(this.highlighted.from)===this.utils.getDate(t)},isHighlightEnd:function(t){return this.isHighlightedDate(t)&&this.highlighted.to instanceof Date&&this.utils.getFullYear(this.highlighted.to)===this.utils.getFullYear(t)&&this.utils.getMonth(this.highlighted.to)===this.utils.getMonth(t)&&this.utils.getDate(this.highlighted.to)===this.utils.getDate(t)},isDefined:function(t){return"undefined"!==typeof t&&t}}};const k=D;var S=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.showDayView,expression:"showDayView"}],class:[t.calendarClass,"vdp-datepicker__calendar"],style:t.calendarStyle,on:{mousedown:function(t){t.preventDefault()}}},[t._t("beforeCalendarHeader"),t._v(" "),i("header",[i("span",{staticClass:"prev",class:{disabled:t.isLeftNavDisabled},on:{click:function(e){t.isRtl?t.nextMonth():t.previousMonth()}}},[t._v("<")]),t._v(" "),i("span",{staticClass:"day__month_btn",class:t.allowedToShowView("month")?"up":"",on:{click:t.showMonthCalendar}},[t._v(t._s(t.isYmd?t.currYearName:t.currMonthName)+" "+t._s(t.isYmd?t.currMonthName:t.currYearName))]),t._v(" "),i("span",{staticClass:"next",class:{disabled:t.isRightNavDisabled},on:{click:function(e){t.isRtl?t.previousMonth():t.nextMonth()}}},[t._v(">")])]),t._v(" "),i("div",{class:t.isRtl?"flex-rtl":""},[t._l(t.daysOfWeek,(function(e){return i("span",{key:e.timestamp,staticClass:"cell day-header"},[t._v(t._s(e))])})),t._v(" "),t.blankDays>0?t._l(t.blankDays,(function(t){return i("span",{key:t.timestamp,staticClass:"cell day blank"})})):t._e(),t._l(t.days,(function(e){return i("span",{key:e.timestamp,staticClass:"cell day",class:t.dayClasses(e),domProps:{innerHTML:t._s(t.dayCellContent(e))},on:{click:function(i){return t.selectDate(e)}}})}))],2)],2)},E=[];S._withStripped=!0;const M=void 0,$=void 0,T=void 0,B=!1;var P=v({render:S,staticRenderFns:E},M,k,$,B,T,void 0,void 0),I={props:{showMonthView:Boolean,selectedDate:Date,pageDate:Date,pageTimestamp:Number,disabledDates:Object,calendarClass:[String,Object,Array],calendarStyle:Object,translation:Object,isRtl:Boolean,allowedToShowView:Function,useUtc:Boolean},data:function(){var t=f(this.useUtc);return{utils:t}},computed:{months:function(){for(var t=this.pageDate,e=[],i=this.useUtc?new Date(Date.UTC(t.getUTCFullYear(),0,t.getUTCDate())):new Date(t.getFullYear(),0,t.getDate(),t.getHours(),t.getMinutes()),s=0;s<12;s++)e.push({month:this.utils.getMonthName(s,this.translation.months),timestamp:i.getTime(),isSelected:this.isSelectedMonth(i),isDisabled:this.isDisabledMonth(i)}),this.utils.setMonth(i,this.utils.getMonth(i)+1);return e},pageYearName:function(){var t=this.translation.yearSuffix;return"".concat(this.utils.getFullYear(this.pageDate)).concat(t)},isLeftNavDisabled:function(){return this.isRtl?this.isNextYearDisabled(this.pageTimestamp):this.isPreviousYearDisabled(this.pageTimestamp)},isRightNavDisabled:function(){return this.isRtl?this.isPreviousYearDisabled(this.pageTimestamp):this.isNextYearDisabled(this.pageTimestamp)}},methods:{selectMonth:function(t){if(t.isDisabled)return!1;this.$emit("selectMonth",t)},changeYear:function(t){var e=this.pageDate;this.utils.setFullYear(e,this.utils.getFullYear(e)+t),this.$emit("changedYear",e)},previousYear:function(){this.isPreviousYearDisabled()||this.changeYear(-1)},isPreviousYearDisabled:function(){return!(!this.disabledDates||!this.disabledDates.to)&&this.utils.getFullYear(this.disabledDates.to)>=this.utils.getFullYear(this.pageDate)},nextYear:function(){this.isNextYearDisabled()||this.changeYear(1)},isNextYearDisabled:function(){return!(!this.disabledDates||!this.disabledDates.from)&&this.utils.getFullYear(this.disabledDates.from)<=this.utils.getFullYear(this.pageDate)},showYearCalendar:function(){this.$emit("showYearCalendar")},isSelectedMonth:function(t){return this.selectedDate&&this.utils.getFullYear(this.selectedDate)===this.utils.getFullYear(t)&&this.utils.getMonth(this.selectedDate)===this.utils.getMonth(t)},isDisabledMonth:function(t){var e=!1;return"undefined"!==typeof this.disabledDates&&("undefined"!==typeof this.disabledDates.to&&this.disabledDates.to&&(this.utils.getMonth(t)<this.utils.getMonth(this.disabledDates.to)&&this.utils.getFullYear(t)<=this.utils.getFullYear(this.disabledDates.to)||this.utils.getFullYear(t)<this.utils.getFullYear(this.disabledDates.to))&&(e=!0),"undefined"!==typeof this.disabledDates.from&&this.disabledDates.from&&(this.utils.getMonth(t)>this.utils.getMonth(this.disabledDates.from)&&this.utils.getFullYear(t)>=this.utils.getFullYear(this.disabledDates.from)||this.utils.getFullYear(t)>this.utils.getFullYear(this.disabledDates.from))&&(e=!0),"function"===typeof this.disabledDates.customPredictor&&this.disabledDates.customPredictor(t)&&(e=!0),e)}}};const N=I;var F=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.showMonthView,expression:"showMonthView"}],class:[t.calendarClass,"vdp-datepicker__calendar"],style:t.calendarStyle,on:{mousedown:function(t){t.preventDefault()}}},[t._t("beforeCalendarHeader"),t._v(" "),i("header",[i("span",{staticClass:"prev",class:{disabled:t.isLeftNavDisabled},on:{click:function(e){t.isRtl?t.nextYear():t.previousYear()}}},[t._v("<")]),t._v(" "),i("span",{staticClass:"month__year_btn",class:t.allowedToShowView("year")?"up":"",on:{click:t.showYearCalendar}},[t._v(t._s(t.pageYearName))]),t._v(" "),i("span",{staticClass:"next",class:{disabled:t.isRightNavDisabled},on:{click:function(e){t.isRtl?t.previousYear():t.nextYear()}}},[t._v(">")])]),t._v(" "),t._l(t.months,(function(e){return i("span",{key:e.timestamp,staticClass:"cell month",class:{selected:e.isSelected,disabled:e.isDisabled},on:{click:function(i){return i.stopPropagation(),t.selectMonth(e)}}},[t._v(t._s(e.month))])}))],2)},V=[];F._withStripped=!0;const O=void 0,R=void 0,U=void 0,L=!1;var j=v({render:F,staticRenderFns:V},O,N,R,L,U,void 0,void 0),Y={props:{showYearView:Boolean,selectedDate:Date,pageDate:Date,pageTimestamp:Number,disabledDates:Object,highlighted:Object,calendarClass:[String,Object,Array],calendarStyle:Object,translation:Object,isRtl:Boolean,allowedToShowView:Function,useUtc:Boolean},computed:{years:function(){for(var t=this.pageDate,e=[],i=this.useUtc?new Date(Date.UTC(10*Math.floor(t.getUTCFullYear()/10),t.getUTCMonth(),t.getUTCDate())):new Date(10*Math.floor(t.getFullYear()/10),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes()),s=0;s<10;s++)e.push({year:this.utils.getFullYear(i),timestamp:i.getTime(),isSelected:this.isSelectedYear(i),isDisabled:this.isDisabledYear(i)}),this.utils.setFullYear(i,this.utils.getFullYear(i)+1);return e},getPageDecade:function(){var t=10*Math.floor(this.utils.getFullYear(this.pageDate)/10),e=t+9,i=this.translation.yearSuffix;return"".concat(t," - ").concat(e).concat(i)},isLeftNavDisabled:function(){return this.isRtl?this.isNextDecadeDisabled(this.pageTimestamp):this.isPreviousDecadeDisabled(this.pageTimestamp)},isRightNavDisabled:function(){return this.isRtl?this.isPreviousDecadeDisabled(this.pageTimestamp):this.isNextDecadeDisabled(this.pageTimestamp)}},data:function(){var t=f(this.useUtc);return{utils:t}},methods:{selectYear:function(t){if(t.isDisabled)return!1;this.$emit("selectYear",t)},changeYear:function(t){var e=this.pageDate;this.utils.setFullYear(e,this.utils.getFullYear(e)+t),this.$emit("changedDecade",e)},previousDecade:function(){if(this.isPreviousDecadeDisabled())return!1;this.changeYear(-10)},isPreviousDecadeDisabled:function(){if(!this.disabledDates||!this.disabledDates.to)return!1;var t=this.utils.getFullYear(this.disabledDates.to),e=10*Math.floor(this.utils.getFullYear(this.pageDate)/10)-1;return t>e},nextDecade:function(){if(this.isNextDecadeDisabled())return!1;this.changeYear(10)},isNextDecadeDisabled:function(){if(!this.disabledDates||!this.disabledDates.from)return!1;var t=this.utils.getFullYear(this.disabledDates.from),e=10*Math.ceil(this.utils.getFullYear(this.pageDate)/10);return t<e},isSelectedYear:function(t){return this.selectedDate&&this.utils.getFullYear(this.selectedDate)===this.utils.getFullYear(t)},isDisabledYear:function(t){var e=!1;return!("undefined"===typeof this.disabledDates||!this.disabledDates)&&("undefined"!==typeof this.disabledDates.to&&this.disabledDates.to&&this.utils.getFullYear(t)<this.utils.getFullYear(this.disabledDates.to)&&(e=!0),"undefined"!==typeof this.disabledDates.from&&this.disabledDates.from&&this.utils.getFullYear(t)>this.utils.getFullYear(this.disabledDates.from)&&(e=!0),"function"===typeof this.disabledDates.customPredictor&&this.disabledDates.customPredictor(t)&&(e=!0),e)}}};const q=Y;var H=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.showYearView,expression:"showYearView"}],class:[t.calendarClass,"vdp-datepicker__calendar"],style:t.calendarStyle,on:{mousedown:function(t){t.preventDefault()}}},[t._t("beforeCalendarHeader"),t._v(" "),i("header",[i("span",{staticClass:"prev",class:{disabled:t.isLeftNavDisabled},on:{click:function(e){t.isRtl?t.nextDecade():t.previousDecade()}}},[t._v("<")]),t._v(" "),i("span",[t._v(t._s(t.getPageDecade))]),t._v(" "),i("span",{staticClass:"next",class:{disabled:t.isRightNavDisabled},on:{click:function(e){t.isRtl?t.previousDecade():t.nextDecade()}}},[t._v(">")])]),t._v(" "),t._l(t.years,(function(e){return i("span",{key:e.timestamp,staticClass:"cell year",class:{selected:e.isSelected,disabled:e.isDisabled},on:{click:function(i){return i.stopPropagation(),t.selectYear(e)}}},[t._v(t._s(e.year))])}))],2)},G=[];H._withStripped=!0;const W=void 0,Q=void 0,z=void 0,J=!1;var X=v({render:H,staticRenderFns:G},W,q,Q,J,z,void 0,void 0),K={components:{DateInput:x,PickerDay:P,PickerMonth:j,PickerYear:X},props:{value:{validator:function(t){return m.validateDateInput(t)}},name:String,refName:String,id:String,format:{type:[String,Function],default:"dd MMM yyyy"},language:{type:Object,default:function(){return c}},openDate:{validator:function(t){return m.validateDateInput(t)}},dayCellContent:Function,fullMonthName:Boolean,disabledDates:Object,highlighted:Object,placeholder:String,inline:Boolean,calendarClass:[String,Object,Array],inputClass:[String,Object,Array],wrapperClass:[String,Object,Array],mondayFirst:Boolean,clearButton:Boolean,clearButtonIcon:String,calendarButton:Boolean,calendarButtonIcon:String,calendarButtonIconContent:String,bootstrapStyling:Boolean,initialView:String,disabled:Boolean,required:Boolean,typeable:Boolean,useUtc:Boolean,minimumView:{type:String,default:"day"},maximumView:{type:String,default:"year"}},data:function(){var t=this.openDate?new Date(this.openDate):new Date,e=f(this.useUtc),i=e.setDate(t,1);return{pageTimestamp:i,selectedDate:null,showDayView:!1,showMonthView:!1,showYearView:!1,calendarHeight:0,resetTypedDate:new Date,utils:e}},watch:{value:function(t){this.setValue(t)},openDate:function(){this.setPageDate()},initialView:function(){this.setInitialView()}},computed:{computedInitialView:function(){return this.initialView?this.initialView:this.minimumView},pageDate:function(){return new Date(this.pageTimestamp)},translation:function(){return this.language},calendarStyle:function(){return{position:this.isInline?"static":void 0}},isOpen:function(){return this.showDayView||this.showMonthView||this.showYearView},isInline:function(){return!!this.inline},isRtl:function(){return!0===this.translation.rtl}},methods:{resetDefaultPageDate:function(){null!==this.selectedDate?this.setPageDate(this.selectedDate):this.setPageDate()},showCalendar:function(){return!this.disabled&&!this.isInline&&(this.isOpen?this.close(!0):void this.setInitialView())},setInitialView:function(){var t=this.computedInitialView;if(!this.allowedToShowView(t))throw new Error("initialView '".concat(this.initialView,"' cannot be rendered based on minimum '").concat(this.minimumView,"' and maximum '").concat(this.maximumView,"'"));switch(t){case"year":this.showYearCalendar();break;case"month":this.showMonthCalendar();break;default:this.showDayCalendar();break}},allowedToShowView:function(t){var e=["day","month","year"],i=e.indexOf(this.minimumView),s=e.indexOf(this.maximumView),n=e.indexOf(t);return n>=i&&n<=s},showDayCalendar:function(){return!!this.allowedToShowView("day")&&(this.close(),this.showDayView=!0,!0)},showMonthCalendar:function(){return!!this.allowedToShowView("month")&&(this.close(),this.showMonthView=!0,!0)},showYearCalendar:function(){return!!this.allowedToShowView("year")&&(this.close(),this.showYearView=!0,!0)},setDate:function(t){var e=new Date(t);this.selectedDate=e,this.setPageDate(e),this.$emit("selected",e),this.$emit("input",e)},clearDate:function(){this.selectedDate=null,this.setPageDate(),this.$emit("selected",null),this.$emit("input",null),this.$emit("cleared")},selectDate:function(t){this.setDate(t.timestamp),this.isInline||this.close(!0),this.resetTypedDate=new Date},selectDisabledDate:function(t){this.$emit("selectedDisabled",t)},selectMonth:function(t){var e=new Date(t.timestamp);this.allowedToShowView("day")?(this.setPageDate(e),this.$emit("changedMonth",t),this.showDayCalendar()):this.selectDate(t)},selectYear:function(t){var e=new Date(t.timestamp);this.allowedToShowView("month")?(this.setPageDate(e),this.$emit("changedYear",t),this.showMonthCalendar()):this.selectDate(t)},setValue:function(t){if("string"===typeof t||"number"===typeof t){var e=new Date(t);t=isNaN(e.valueOf())?null:e}if(!t)return this.setPageDate(),void(this.selectedDate=null);this.selectedDate=t,this.setPageDate(t)},setPageDate:function(t){t||(t=this.openDate?new Date(this.openDate):new Date),this.pageTimestamp=this.utils.setDate(new Date(t),1)},handleChangedMonthFromDayPicker:function(t){this.setPageDate(t),this.$emit("changedMonth",t)},setTypedDate:function(t){this.setDate(t.getTime())},close:function(t){this.showDayView=this.showMonthView=this.showYearView=!1,this.isInline||(t&&this.$emit("closed"),document.removeEventListener("click",this.clickOutside,!1))},init:function(){this.value&&this.setValue(this.value),this.isInline&&this.setInitialView()}},mounted:function(){this.init()}},Z="undefined"!==typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function tt(t){return function(t,e){return st(t,e)}}var et=document.head||document.getElementsByTagName("head")[0],it={};function st(t,e){var i=Z?e.media||"default":t,s=it[i]||(it[i]={ids:new Set,styles:[]});if(!s.ids.has(t)){s.ids.add(t);var n=e.source;if(e.map&&(n+="\n/*# sourceURL="+e.map.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e.map))))+" */"),s.element||(s.element=document.createElement("style"),s.element.type="text/css",e.media&&s.element.setAttribute("media",e.media),et.appendChild(s.element)),"styleSheet"in s.element)s.styles.push(n),s.element.styleSheet.cssText=s.styles.filter(Boolean).join("\n");else{var a=s.ids.size-1,o=document.createTextNode(n),r=s.element.childNodes;r[a]&&s.element.removeChild(r[a]),r.length?s.element.insertBefore(o,r[a]):s.element.appendChild(o)}}}var nt=tt;const at=K;var ot=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vdp-datepicker",class:[t.wrapperClass,t.isRtl?"rtl":""]},[i("date-input",{attrs:{selectedDate:t.selectedDate,resetTypedDate:t.resetTypedDate,format:t.format,translation:t.translation,inline:t.inline,id:t.id,name:t.name,refName:t.refName,openDate:t.openDate,placeholder:t.placeholder,inputClass:t.inputClass,typeable:t.typeable,clearButton:t.clearButton,clearButtonIcon:t.clearButtonIcon,calendarButton:t.calendarButton,calendarButtonIcon:t.calendarButtonIcon,calendarButtonIconContent:t.calendarButtonIconContent,disabled:t.disabled,required:t.required,bootstrapStyling:t.bootstrapStyling,"use-utc":t.useUtc},on:{showCalendar:t.showCalendar,closeCalendar:t.close,typedDate:t.setTypedDate,clearDate:t.clearDate}},[t._t("afterDateInput",null,{slot:"afterDateInput"})],2),t._v(" "),t.allowedToShowView("day")?i("picker-day",{attrs:{pageDate:t.pageDate,selectedDate:t.selectedDate,showDayView:t.showDayView,fullMonthName:t.fullMonthName,allowedToShowView:t.allowedToShowView,disabledDates:t.disabledDates,highlighted:t.highlighted,calendarClass:t.calendarClass,calendarStyle:t.calendarStyle,translation:t.translation,pageTimestamp:t.pageTimestamp,isRtl:t.isRtl,mondayFirst:t.mondayFirst,dayCellContent:t.dayCellContent,"use-utc":t.useUtc},on:{changedMonth:t.handleChangedMonthFromDayPicker,selectDate:t.selectDate,showMonthCalendar:t.showMonthCalendar,selectedDisabled:t.selectDisabledDate}},[t._t("beforeCalendarHeader",null,{slot:"beforeCalendarHeader"})],2):t._e(),t._v(" "),t.allowedToShowView("month")?i("picker-month",{attrs:{pageDate:t.pageDate,selectedDate:t.selectedDate,showMonthView:t.showMonthView,allowedToShowView:t.allowedToShowView,disabledDates:t.disabledDates,calendarClass:t.calendarClass,calendarStyle:t.calendarStyle,translation:t.translation,isRtl:t.isRtl,"use-utc":t.useUtc},on:{selectMonth:t.selectMonth,showYearCalendar:t.showYearCalendar,changedYear:t.setPageDate}},[t._t("beforeCalendarHeader",null,{slot:"beforeCalendarHeader"})],2):t._e(),t._v(" "),t.allowedToShowView("year")?i("picker-year",{attrs:{pageDate:t.pageDate,selectedDate:t.selectedDate,showYearView:t.showYearView,allowedToShowView:t.allowedToShowView,disabledDates:t.disabledDates,calendarClass:t.calendarClass,calendarStyle:t.calendarStyle,translation:t.translation,isRtl:t.isRtl,"use-utc":t.useUtc},on:{selectYear:t.selectYear,changedDecade:t.setPageDate}},[t._t("beforeCalendarHeader",null,{slot:"beforeCalendarHeader"})],2):t._e()],1)},rt=[];ot._withStripped=!0;const lt=function(t){t&&t("data-v-64ca2bb5_0",{source:".rtl {\n  direction: rtl;\n}\n.vdp-datepicker {\n  position: relative;\n  text-align: left;\n}\n.vdp-datepicker * {\n  box-sizing: border-box;\n}\n.vdp-datepicker__calendar {\n  position: absolute;\n  z-index: 100;\n  background: #fff;\n  width: 300px;\n  border: 1px solid #ccc;\n}\n.vdp-datepicker__calendar header {\n  display: block;\n  line-height: 40px;\n}\n.vdp-datepicker__calendar header span {\n  display: inline-block;\n  text-align: center;\n  width: 71.42857142857143%;\n  float: left;\n}\n.vdp-datepicker__calendar header .prev,\n.vdp-datepicker__calendar header .next {\n  width: 14.285714285714286%;\n  float: left;\n  text-indent: -10000px;\n  position: relative;\n}\n.vdp-datepicker__calendar header .prev:after,\n.vdp-datepicker__calendar header .next:after {\n  content: '';\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translateX(-50%) translateY(-50%);\n  border: 6px solid transparent;\n}\n.vdp-datepicker__calendar header .prev:after {\n  border-right: 10px solid #000;\n  margin-left: -5px;\n}\n.vdp-datepicker__calendar header .prev.disabled:after {\n  border-right: 10px solid #ddd;\n}\n.vdp-datepicker__calendar header .next:after {\n  border-left: 10px solid #000;\n  margin-left: 5px;\n}\n.vdp-datepicker__calendar header .next.disabled:after {\n  border-left: 10px solid #ddd;\n}\n.vdp-datepicker__calendar header .prev:not(.disabled),\n.vdp-datepicker__calendar header .next:not(.disabled),\n.vdp-datepicker__calendar header .up:not(.disabled) {\n  cursor: pointer;\n}\n.vdp-datepicker__calendar header .prev:not(.disabled):hover,\n.vdp-datepicker__calendar header .next:not(.disabled):hover,\n.vdp-datepicker__calendar header .up:not(.disabled):hover {\n  background: #eee;\n}\n.vdp-datepicker__calendar .disabled {\n  color: #ddd;\n  cursor: default;\n}\n.vdp-datepicker__calendar .flex-rtl {\n  display: flex;\n  width: inherit;\n  flex-wrap: wrap;\n}\n.vdp-datepicker__calendar .cell {\n  display: inline-block;\n  padding: 0 5px;\n  width: 14.285714285714286%;\n  height: 40px;\n  line-height: 40px;\n  text-align: center;\n  vertical-align: middle;\n  border: 1px solid transparent;\n}\n.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).day,\n.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).month,\n.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).year {\n  cursor: pointer;\n}\n.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).day:hover,\n.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).month:hover,\n.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).year:hover {\n  border: 1px solid #4bd;\n}\n.vdp-datepicker__calendar .cell.selected {\n  background: #4bd;\n}\n.vdp-datepicker__calendar .cell.selected:hover {\n  background: #4bd;\n}\n.vdp-datepicker__calendar .cell.selected.highlighted {\n  background: #4bd;\n}\n.vdp-datepicker__calendar .cell.highlighted {\n  background: #cae5ed;\n}\n.vdp-datepicker__calendar .cell.highlighted.disabled {\n  color: #a3a3a3;\n}\n.vdp-datepicker__calendar .cell.grey {\n  color: #888;\n}\n.vdp-datepicker__calendar .cell.grey:hover {\n  background: inherit;\n}\n.vdp-datepicker__calendar .cell.day-header {\n  font-size: 75%;\n  white-space: nowrap;\n  cursor: inherit;\n}\n.vdp-datepicker__calendar .cell.day-header:hover {\n  background: inherit;\n}\n.vdp-datepicker__calendar .month,\n.vdp-datepicker__calendar .year {\n  width: 33.333%;\n}\n.vdp-datepicker__clear-button,\n.vdp-datepicker__calendar-button {\n  cursor: pointer;\n  font-style: normal;\n}\n.vdp-datepicker__clear-button.disabled,\n.vdp-datepicker__calendar-button.disabled {\n  color: #999;\n  cursor: default;\n}\n",map:{version:3,sources:["Datepicker.vue"],names:[],mappings:"AAAA;EACE,cAAc;AAChB;AACA;EACE,kBAAkB;EAClB,gBAAgB;AAClB;AACA;EACE,sBAAsB;AACxB;AACA;EACE,kBAAkB;EAClB,YAAY;EACZ,gBAAgB;EAChB,YAAY;EACZ,sBAAsB;AACxB;AACA;EACE,cAAc;EACd,iBAAiB;AACnB;AACA;EACE,qBAAqB;EACrB,kBAAkB;EAClB,yBAAyB;EACzB,WAAW;AACb;AACA;;EAEE,0BAA0B;EAC1B,WAAW;EACX,qBAAqB;EACrB,kBAAkB;AACpB;AACA;;EAEE,WAAW;EACX,kBAAkB;EAClB,SAAS;EACT,QAAQ;EACR,4CAA4C;EAC5C,6BAA6B;AAC/B;AACA;EACE,6BAA6B;EAC7B,iBAAiB;AACnB;AACA;EACE,6BAA6B;AAC/B;AACA;EACE,4BAA4B;EAC5B,gBAAgB;AAClB;AACA;EACE,4BAA4B;AAC9B;AACA;;;EAGE,eAAe;AACjB;AACA;;;EAGE,gBAAgB;AAClB;AACA;EACE,WAAW;EACX,eAAe;AACjB;AACA;EACE,aAAa;EACb,cAAc;EACd,eAAe;AACjB;AACA;EACE,qBAAqB;EACrB,cAAc;EACd,0BAA0B;EAC1B,YAAY;EACZ,iBAAiB;EACjB,kBAAkB;EAClB,sBAAsB;EACtB,6BAA6B;AAC/B;AACA;;;EAGE,eAAe;AACjB;AACA;;;EAGE,sBAAsB;AACxB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,mBAAmB;AACrB;AACA;EACE,cAAc;AAChB;AACA;EACE,WAAW;AACb;AACA;EACE,mBAAmB;AACrB;AACA;EACE,cAAc;EACd,mBAAmB;EACnB,eAAe;AACjB;AACA;EACE,mBAAmB;AACrB;AACA;;EAEE,cAAc;AAChB;AACA;;EAEE,eAAe;EACf,kBAAkB;AACpB;AACA;;EAEE,WAAW;EACX,eAAe;AACjB",file:"Datepicker.vue",sourcesContent:[".rtl {\n  direction: rtl;\n}\n.vdp-datepicker {\n  position: relative;\n  text-align: left;\n}\n.vdp-datepicker * {\n  box-sizing: border-box;\n}\n.vdp-datepicker__calendar {\n  position: absolute;\n  z-index: 100;\n  background: #fff;\n  width: 300px;\n  border: 1px solid #ccc;\n}\n.vdp-datepicker__calendar header {\n  display: block;\n  line-height: 40px;\n}\n.vdp-datepicker__calendar header span {\n  display: inline-block;\n  text-align: center;\n  width: 71.42857142857143%;\n  float: left;\n}\n.vdp-datepicker__calendar header .prev,\n.vdp-datepicker__calendar header .next {\n  width: 14.285714285714286%;\n  float: left;\n  text-indent: -10000px;\n  position: relative;\n}\n.vdp-datepicker__calendar header .prev:after,\n.vdp-datepicker__calendar header .next:after {\n  content: '';\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translateX(-50%) translateY(-50%);\n  border: 6px solid transparent;\n}\n.vdp-datepicker__calendar header .prev:after {\n  border-right: 10px solid #000;\n  margin-left: -5px;\n}\n.vdp-datepicker__calendar header .prev.disabled:after {\n  border-right: 10px solid #ddd;\n}\n.vdp-datepicker__calendar header .next:after {\n  border-left: 10px solid #000;\n  margin-left: 5px;\n}\n.vdp-datepicker__calendar header .next.disabled:after {\n  border-left: 10px solid #ddd;\n}\n.vdp-datepicker__calendar header .prev:not(.disabled),\n.vdp-datepicker__calendar header .next:not(.disabled),\n.vdp-datepicker__calendar header .up:not(.disabled) {\n  cursor: pointer;\n}\n.vdp-datepicker__calendar header .prev:not(.disabled):hover,\n.vdp-datepicker__calendar header .next:not(.disabled):hover,\n.vdp-datepicker__calendar header .up:not(.disabled):hover {\n  background: #eee;\n}\n.vdp-datepicker__calendar .disabled {\n  color: #ddd;\n  cursor: default;\n}\n.vdp-datepicker__calendar .flex-rtl {\n  display: flex;\n  width: inherit;\n  flex-wrap: wrap;\n}\n.vdp-datepicker__calendar .cell {\n  display: inline-block;\n  padding: 0 5px;\n  width: 14.285714285714286%;\n  height: 40px;\n  line-height: 40px;\n  text-align: center;\n  vertical-align: middle;\n  border: 1px solid transparent;\n}\n.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).day,\n.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).month,\n.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).year {\n  cursor: pointer;\n}\n.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).day:hover,\n.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).month:hover,\n.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).year:hover {\n  border: 1px solid #4bd;\n}\n.vdp-datepicker__calendar .cell.selected {\n  background: #4bd;\n}\n.vdp-datepicker__calendar .cell.selected:hover {\n  background: #4bd;\n}\n.vdp-datepicker__calendar .cell.selected.highlighted {\n  background: #4bd;\n}\n.vdp-datepicker__calendar .cell.highlighted {\n  background: #cae5ed;\n}\n.vdp-datepicker__calendar .cell.highlighted.disabled {\n  color: #a3a3a3;\n}\n.vdp-datepicker__calendar .cell.grey {\n  color: #888;\n}\n.vdp-datepicker__calendar .cell.grey:hover {\n  background: inherit;\n}\n.vdp-datepicker__calendar .cell.day-header {\n  font-size: 75%;\n  white-space: nowrap;\n  cursor: inherit;\n}\n.vdp-datepicker__calendar .cell.day-header:hover {\n  background: inherit;\n}\n.vdp-datepicker__calendar .month,\n.vdp-datepicker__calendar .year {\n  width: 33.333%;\n}\n.vdp-datepicker__clear-button,\n.vdp-datepicker__calendar-button {\n  cursor: pointer;\n  font-style: normal;\n}\n.vdp-datepicker__clear-button.disabled,\n.vdp-datepicker__calendar-button.disabled {\n  color: #999;\n  cursor: default;\n}\n"]},media:void 0})},dt=void 0,ct=void 0,ut=!1;var ft=v({render:ot,staticRenderFns:rt},lt,at,dt,ut,ct,nt,void 0);e["default"]=ft},13609:function(t,e,i){"use strict";var s=i(46518),n=i(48981),a=i(26198),o=i(34527),r=i(84606),l=i(96837),d=1!==[].unshift(0),c=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(t){return t instanceof TypeError}},u=d||!c();s({target:"Array",proto:!0,arity:1,forced:u},{unshift:function(t){var e=n(this),i=a(e),s=arguments.length;if(s){l(i+s);var d=i;while(d--){var c=d+s;d in e?e[c]=e[d]:r(e,c)}for(var u=0;u<s;u++)e[u]=arguments[u]}return o(e,i+s)}})},9391:function(t,e,i){"use strict";var s=i(46518),n=i(96395),a=i(80550),o=i(79039),r=i(97751),l=i(94901),d=i(2293),c=i(93438),u=i(36840),f=a&&a.prototype,m=!!a&&o((function(){f["finally"].call({then:function(){}},(function(){}))}));if(s({target:"Promise",proto:!0,real:!0,forced:m},{finally:function(t){var e=d(this,r("Promise")),i=l(t);return this.then(i?function(i){return c(e,t()).then((function(){return i}))}:t,i?function(i){return c(e,t()).then((function(){throw i}))}:t)}}),!n&&l(a)){var h=r("Promise").prototype["finally"];f["finally"]!==h&&u(f,"finally",h,{unsafe:!0})}}}]);
//# sourceMappingURL=wiki-tools.44e8b406.js.map