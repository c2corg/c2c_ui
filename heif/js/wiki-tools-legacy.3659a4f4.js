(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["wiki-tools"],{"0ac9":function(t,e,i){},1784:function(t,e,i){"use strict";i("5319"),i("ddb0");var s=i("4b44"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"columns is-multiline"},[i("div",{staticClass:"column is-narrow"},[i("label",{staticClass:"label"},[t._v("\n        "+t._s(t._f("uppercaseFirstLetter")(t.label||t.$gettext(t.field.name)))+"\n        "),i("marker-helper",{attrs:{name:t.helper?t.helper:t.field.helper}})],1)]),t._v(" "),i("div",{staticClass:"column is-narrow"},[i("form-input",{ref:"input",staticClass:"is-expanded",attrs:{document:t.document,field:t.field}})],1)]),t._v(" "),i("div",{staticClass:"columns is-multiline"},t._l(t.document.associations[t.field.name],(function(e){return i("div",{key:e.document_id,staticClass:"column is-4"},[i("document-card",{attrs:{document:e,"show-delete-button":t.showDeleteButton(e),target:"_blank"},on:{delete:function(i){return t.$documentUtils.removeAssociation(t.document,e)}}})],1)})),0)])},a=[],o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return"activities"==t.field.name?i("input-activity",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],attrs:{"has-error":t.hasError,"show-labels":"","document-type":t.document.type},model:{value:t.document.activities,callback:function(e){t.$set(t.document,"activities",e)},expression:"document.activities"}}):"event_activity"==t.field.name?i("input-event-activity",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],attrs:{"has-error":t.hasError,"show-labels":""},model:{value:t.document.event_activity,callback:function(e){t.$set(t.document,"event_activity",e)},expression:"document.event_activity"}}):"orientations"==t.field.name?i("input-orientation",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],model:{value:t.document.orientations,callback:function(e){t.$set(t.document,"orientations",e)},expression:"document.orientations"}}):"main_waypoint_id"==t.field.name?i("div",{staticClass:"control select",class:{"is-danger":t.hasError}},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.document.main_waypoint_id,expression:"document.main_waypoint_id"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.document,"main_waypoint_id",e.target.multiple?i:i[0])}}},[i("option",{domProps:{value:null}}),t._v(" "),t._l(t.document.associations.waypoints,(function(e){return i("option",{key:e.document_id,domProps:{value:e.document_id}},[t._v("\n      "+t._s(t.$documentUtils.getDocumentTitle(e))+"\n    ")])}))],2)]):"conditions_levels"==t.field.name?i("input-conditions-levels",{model:{value:t.object[t.field.name],callback:function(e){t.$set(t.object,t.field.name,e)},expression:"object[field.name]"}}):"markdown"==t.field.type?i("input-markdown",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],attrs:{placeholder:t.placeholder},model:{value:t.object[t.field.name],callback:function(e){t.$set(t.object,t.field.name,e)},expression:"object[field.name]"}}):"associations"==t.field.parent?i("input-document",{attrs:{"document-type":t.field.documentType,multiple:"","clear-input-on-toggle":"","has-error":t.hasError},on:{add:function(e){return t.$documentUtils.propagateAssociationProperties(t.document,arguments[0])}},model:{value:t.object[t.field.name],callback:function(e){t.$set(t.object,t.field.name,e)},expression:"object[field.name]"}}):t.field.values&&t.field.multiple?i("input-multi-select",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],attrs:{options:t.field.values,required:t.field.required,i18n:t.field.i18n,"i18n-context":t.field.i18nContext,"has-error":t.hasError},model:{value:t.object[t.field.name],callback:function(e){t.$set(t.object,t.field.name,e)},expression:"object[field.name]"}}):"date"===t.field.type?i("input-date",{attrs:{"has-error":t.hasError,"disabled-dates":t.disabledDates,required:t.field.required},model:{value:t.object[t.field.name],callback:function(e){t.$set(t.object,t.field.name,e)},expression:"object[field.name]"}}):t.simpleInputType?i("input-simple",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],ref:"input",attrs:{prefix:t.prefix,"is-expanded":t.isExpanded,postfix:t.unit||t.field.unit,divisor:t.divisor,type:t.field.type,min:t.min||t.field.min,max:t.max||t.field.max,disabled:t.field.disabled,placeholder:t.placeholder||t.$gettext(t.field.name),required:t.field.required,i18n:t.field.i18n,"i18n-context":t.field.i18nContext,options:t.field.values,"has-error":t.hasError},on:{"click-prefix":function(e){return t.$emit("click-prefix")},input:function(e){return t.$emit("input",arguments[0])}},model:{value:t.object[t.field.name],callback:function(e){t.$set(t.object,t.field.name,e)},expression:"object[field.name]"}}):"boolean"==t.field.type?i("input-yes-no",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],attrs:{nullable:t.field.nullable},model:{value:t.object[t.field.name],callback:function(e){t.$set(t.object,t.field.name,e)},expression:"object[field.name]"}}):"date_time"==t.field.type?i("input-datetime",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],model:{value:t.object[t.field.name],callback:function(e){t.$set(t.object,t.field.name,e)},expression:"object[field.name]"}}):i("div",{staticClass:"notification is-danger"},[t._v("\n  Unknown field type : "+t._s(t.field.type)+"\n")])},l=[],r=i("fd3a"),d=i("fe1f"),c=i("8c86");function u(t,e){Object(c["a"])(2,arguments);var i=Object(r["a"])(t),s=Object(d["a"])(e);return isNaN(s)?new Date(NaN):s?(i.setDate(i.getDate()+s),i):i}var m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content"},[i("table",[i("tr",[i("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Location / elevation / orientation")]),t._v(" "),i("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("soft snow")]),t._v(" "),i("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("total snow")]),t._v(" "),i("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("comment")]),t._v(" "),i("th")]),t._v(" "),t._l(t.levels,(function(e,s){return i("tr",{key:s},[i("td",[i("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.level_place,expression:"level.level_place",modifiers:{lazy:!0}}],staticClass:"input",attrs:{type:"text"},domProps:{value:e.level_place},on:{change:function(i){return t.$set(e,"level_place",i.target.value)}}})]),t._v(" "),i("td",[i("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.level_snow_height_soft,expression:"level.level_snow_height_soft",modifiers:{lazy:!0}}],staticClass:"input",attrs:{type:"text"},domProps:{value:e.level_snow_height_soft},on:{change:function(i){return t.$set(e,"level_snow_height_soft",i.target.value)}}})]),t._v(" "),i("td",[i("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.level_snow_height_total,expression:"level.level_snow_height_total",modifiers:{lazy:!0}}],staticClass:"input",attrs:{type:"text"},domProps:{value:e.level_snow_height_total},on:{change:function(i){return t.$set(e,"level_snow_height_total",i.target.value)}}})]),t._v(" "),i("td",[i("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.level_comment,expression:"level.level_comment",modifiers:{lazy:!0}}],staticClass:"input",attrs:{type:"text"},domProps:{value:e.level_comment},on:{change:function(i){return t.$set(e,"level_comment",i.target.value)}}})]),t._v(" "),i("td",[s<t.levels.length-1||t.isLevelFilled(t.levels[s])?i("delete-button",{staticClass:"is-size-2 delete-button",on:{click:function(e){return t.levels.splice(s,1)}}}):t._e()],1)])}))],2)])},f=[],h={props:{value:{type:String,default:null}},data(){return{levels:[]}},watch:{levels:{handler:"change",deep:!0}},created(){const t=this.value?JSON.parse(this.value):[];for(const e of t)this.isLevelFilled(e)&&this.levels.push(e);this.levels.push({})},methods:{change(){this.isLevelFilled(this.levels[this.levels.length-1])&&this.levels.push({}),this.$emit("input",JSON.stringify(this.levels.filter(t=>this.isLevelFilled(t))))},isLevelFilled(t){return Boolean(t.level_place)||Boolean(t.level_snow_height_soft)||Boolean(t.level_snow_height_total)||Boolean(t.level_comment)}}},v=h,p=(i("e811"),i("2877")),_=Object(p["a"])(v,m,f,!1,null,"7169bd50",null),g=_.exports,b=i("a50d"),y={components:{InputConditionsLevels:g},mixins:[b["c"],b["a"]],props:{prefix:{type:String,default:null},isExpanded:{type:Boolean,default:null},placeholder:{type:String,default:void 0},min:{type:String,default:void 0},max:{type:String,default:void 0},unit:{type:String,default:void 0},divisor:{type:Number,default:void 0}},computed:{disabledDates(){const t=this.min||this.field.min,e=this.max||this.field.max;return{to:t?Object(r["a"])(this.$dateUtils.parseDate(t)):void 0,from:e?Object(r["a"])(u(this.$dateUtils.parseDate(e),1)):void 0}},editedLocale(){return this.document.locales[0]},object(){if("document"===this.field.parent)return this.document;if("locales"===this.field.parent)return this.editedLocale;if("associations"===this.field.parent)return this.document.associations;throw new Error("Unexpected parent value : "+this.field.parent)},visible(){return this.field.isVisibleFor(this.document)},simpleInputType(){return["text","number","url","tel"].includes(this.field.type)},hasError(){return null!==this.field.error}}},w=y,C=Object(p["a"])(w,o,l,!1,null,null,null),x=C.exports,$=i("598b"),k={components:{FormInput:x},mixins:[b["c"],b["a"],$["a"]],props:{label:{type:String,default:null},helper:{type:String,default:void 0}},computed:{visible(){return this.$refs.input.visible},hasError(){return null!==this.field.error}},methods:{showDeleteButton(t){return this.canRemove(this.document,t)}}},N=k,E=Object(p["a"])(N,n,a,!1,null,null,null),T=E.exports,P=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.document?i("div",{staticClass:"section",class:{preview:t.isPreview}},[i("div",{staticClass:"has-edition-width"},[i("h1",{staticClass:"title is-1"},[i("icon-edit"),t._v(" "),"edit"===t.mode?i("span",[i("html-header",{attrs:{title:t.$gettext("Edit a document")}}),t._v(" "),i("document-title",{attrs:{document:t.document}}),t._v(" "),i("span",{staticClass:"is-size-5"},[t._v(" ("+t._s(t.$language.available[t.$route.params.lang])+")")])],1):i("span",[i("html-header",{attrs:{title:t.$documentUtils.getCreationTitle(t.documentType)}}),t._v("\n        "+t._s(t._f("uppercaseFirstLetter")(t.$documentUtils.getCreationTitle(t.documentType)))+"\n        "),i("span",[i("dropdown-button",[i("span",{staticClass:"button",attrs:{slot:"button"},slot:"button"},[i("span",[t._v(" "+t._s(t.$language.available[t.document.locales[0].lang])+"  ")]),t._v(" "),i("fa-icon",{attrs:{icon:"angle-down","aria-hidden":"true"}})],1),t._v(" "),t._l(t.$options.constants.langs,(function(e){return i("div",{key:e,staticClass:"dropdown-item has-hover-background has-cursor-pointer",on:{click:function(i){t.document.locales[0].lang=e}}},[t._v("\n              "+t._s(t.$language.available[e])+"\n            ")])}))],2)],1)],1),t._v(" "),i("button",{staticClass:"button is-size-6 is-pulled-right",on:{click:function(e){t.isPreview=!t.isPreview}}},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.isPreview,expression:"isPreview"}]},[i("fa-icon",{attrs:{icon:"edit"}}),t._v(" "),i("span",[t._v(" ")]),t._v(" "),i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Back to edit mode")])],1),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:!t.isPreview,expression:"!isPreview"}]},[i("fa-icon",{attrs:{icon:"eye"}}),t._v(" "),i("span",[t._v(" ")]),t._v(" "),i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Preview")])],1)])],1),t._v(" "),i("div",{staticStyle:{clear:"both"}})]),t._v(" "),t.isPreview?i(t.documentType+"-view",{tag:"component",attrs:{draft:t.document}}):t._e(),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.isPreview,expression:"!isPreview"}],staticClass:"has-edition-width"},[i("hr"),t._v(" "),t._t("default",[t._v(" ... ")]),t._v(" "),i("save-document-row",{attrs:{"is-loading":t.isLoading},on:{save:function(e){return t.$emit("save",arguments[0])},preview:function(e){t.isPreview=!0}}}),t._v(" "),t.htmlBanners&&t.htmlBanners[t.documentType]?i("div",{staticClass:"edition-banner",domProps:{innerHTML:t._s(t.htmlBanners[t.documentType])}}):t._e()],2)],1):t._e()},I=[],M=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"field is-horizontal"},[i("div",{staticClass:"field-label is-normal"},[i("label",{staticClass:"label"},[i("marker-helper",{attrs:{name:t.helper}}),t._v("\n      "+t._s(t._f("uppercaseFirstLetter")(t.label))+"\n    ")],1)]),t._v(" "),i("div",{staticClass:"field-body"},[i("div",{staticClass:"field",class:{"is-grouped is-grouped-multiline":t.isGrouped,"is-expanded":t.isExpanded,"is-narrow":t.isNarrow}},[t._t("default")],2)])])},S=[],j={props:{label:{type:String,default:""},alwaysVisible:{type:Boolean,default:!1},isGrouped:{type:Boolean,default:!1},isExpanded:{type:Boolean,default:!1},isNarrow:{type:Boolean,default:!1},helper:{type:String,default:void 0}},data(){return{visible:!0,hasError:!1}},mounted(){for(const t of this.$children)t.$watch("visible",this.checkVisibility),t.$watch("hasError",this.checkHasError);this.checkVisibility(),this.checkHasError()},methods:{checkVisibility(){this.visible=this.alwaysVisible;for(const e of this.$children){var t;if(e.visible)this.visible=null===(t=this.visible)||void 0===t||t}},checkHasError(){this.hasError=!1;for(const t of this.$children)!0===t.hasError&&(this.hasError=!0)}}},V=j,D=Object(p["a"])(V,M,S,!1,null,null,null),q=D.exports,L=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"columns is-mobile is-multiline"},[i("div",{staticClass:"column is-narrow"},[i("div",{staticClass:"control"},[i("button",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button is-primary",class:{"is-loading":t.isLoading},on:{click:function(e){return t.$emit("save",t.comment)}}},[t._v("\n        Save\n      ")])])]),t._v(" "),i("div",{staticClass:"column is-narrow"},[i("button",{staticClass:"button",on:{click:function(e){return t.$emit("preview")}}},[i("fa-icon",{attrs:{icon:"eye"}}),t._v(" "),i("span",[t._v(" ")]),t._v(" "),i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Preview")])],1)]),t._v(" "),i("div",{staticClass:"column is-12-mobile"},[i("div",{staticClass:"control is-expanded"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],staticClass:"input",attrs:{type:"text",disabled:"edit"!==t.mode,placeholder:t.$gettext("comment")},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}})])])])},O=[],A={props:{isLoading:{type:Boolean,required:!0}},data(){return{comment:""}},computed:{mode(){return this.$route.name.split("-")[1]}}},F=A,B=Object(p["a"])(F,L,O,!1,null,null,null),U=B.exports,R=i("188b"),W=i("25c4"),z=i("9f3f"),H=i("9b99"),G=i("62d5"),Q=i("4947"),J=i("b32b"),K=i("e78b"),X=i("cece"),Y=i("d83c"),Z=i("a790"),tt=i("d1c3");const et=1110927;let it={initialized:!1};var st={components:{FormRow:q,AreaView:z["a"],ArticleView:H["a"],BookView:G["a"],ImageView:Q["a"],MapView:J["a"],OutingView:K["a"],ProfileView:X["a"],RouteView:Y["a"],WaypointView:Z["a"],XreportView:tt["a"],SaveDocumentRow:U},props:{document:{type:Object,default:null},mode:{type:String,required:!0},isLoading:{type:Boolean,required:!0}},data(){return{isPreview:!1}},constants:W["a"],computed:{documentType(){return this.$documentUtils.getDocumentType(this.document.type)},htmlBanners(){return it}},watch:{$route:"reset"},mounted(){it.initialized||R["a"].article.getCooked(et,this.$language.current).then(this.computeBanners)},methods:{reset(){this.isPreview=!1},computeBanners(t){const e=t.data.cooked,i=document.createElement("div");let s;i.innerHTML=e.description,it={initialized:!0,undefined:""};for(const n of i.children){const t=n.nodeName.match(/^[hH]3$/);t?(s=n.id,it[s]=""):it[s]+=n.outerHTML}this.$forceUpdate()}}},nt=st,at=(i("d9bc"),Object(p["a"])(nt,P,I,!1,null,"155aff63",null)),ot=at.exports,lt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],class:t.noWrapper?"":"column"},[i("div",{staticClass:"field"},[i("label",{staticClass:"label"},[i("marker-helper",{attrs:{name:t.helper||t.field.helper}}),t._v("\n      "+t._s(t._f("uppercaseFirstLetter")(t.label||t.fieldLabel))+"\n      "),t.hasError?i("span",{staticClass:"has-text-danger"},[t._v("\n        "+t._s(t._f("uppercaseFirstLetter")(t.errorMessage))+"\n      ")]):t._e()],1),t._v(" "),i("form-input",{ref:"input",attrs:{document:t.document,field:t.field,helper:null,placeholder:t.placeholder,unit:t.unit,divisor:t.divisor,"is-expanded":t.isExpanded}})],1)])},rt=[],dt={components:{FormInput:x},mixins:[b["c"],b["a"]],props:{isExpanded:{type:Boolean,default:!1},helper:{type:String,default:void 0},label:{type:String,default:void 0},context:{type:String,default:null},placeholder:{type:String,default:" "},unit:{type:String,default:void 0},divisor:{type:Number,default:void 0},noWrapper:{type:Boolean,default:!1}},data(){return{visible:!0}},computed:{hasError(){return null!==this.field.error},errorMessage(){return this.hasError?this.$gettext(this.field.error.description):null},fieldLabel(){return this.$gettext(this.field.name,this.context)}},mounted(){this.$refs.input.$watch("visible",()=>{this.visible=this.$refs.input.visible}),this.visible=this.$refs.input.visible}},ct=dt,ut=Object(p["a"])(ct,lt,rt,!1,null,null,null),mt=ut.exports,ft=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"section-item"},[i("div",{staticClass:"columns is-mobile section-header"},[i("div",{staticClass:"column"},[i("h2",{staticClass:"title is-2",class:{"has-text-danger":t.hasError}},[t._v("\n        "+t._s(t.title)+"\n      ")]),t._v(" "),t.subTitle?i("p",[i("em",[t._v(" "+t._s(t.subTitle)+" ")])]):t._e()]),t._v(" "),i("div",{staticClass:"column is-narrow"},[i("button",{staticClass:"button is-info",on:{click:t.toggleExpandedState}},[t._v("\n        "+t._s(t.expanded_?t.$gettext("Collapse"):t.$gettext("Expand"))+"\n      ")])])]),t._v(" "),i("div",{ref:"content",staticClass:"section-content section-content-hidden"},[t._t("default")],2),t._v(" "),i("hr")])},ht=[],vt={props:{title:{type:String,required:!0},subTitle:{type:String,default:void 0}},data(){return{expanded_:!1,style:null,visible:!0,hasError:!1}},mounted(){this.style=document.createElement("style"),this.style.type="text/css",document.getElementsByTagName("head")[0].appendChild(this.style);for(const t of this.$children)t.$watch("visible",this.checkVisibility),t.$watch("hasError",this.checkHasError);this.checkVisibility(),this.checkHasError(),window.addEventListener("keyup",this.onKeyup)},beforeDestroy(){window.removeEventListener("keyup",this.onKeyup)},methods:{toggleExpandedState(){const t=this.$refs.content,e="section-content-expanded"+this._uid;this.expanded_?(this.style.innerHTML=`.${e} { max-height: ${t.clientHeight}px!important; }`,t.classList.add(e),setTimeout(()=>{t.classList.add("section-content-hidden"),t.classList.remove(e)},0)):(this.style.innerHTML=`.${e} { max-height: ${t.scrollHeight}px!important; }`,t.classList.remove("section-content-hidden"),t.classList.add(e),setTimeout(()=>{t.classList.remove(e)},301)),this.expanded_=!this.expanded_},onKeyup(t){t.altKey&&t.shiftKey&&("ArrowUp"===t.key&&this.expanded_?this.toggleExpandedState():"ArrowDown"!==t.key||this.expanded_||this.toggleExpandedState())},checkVisibility(){this.visible=!1;for(const t of this.$children)if(t.visible)return void(this.visible=!0)},checkHasError(){this.hasError=!1;for(const t of this.$children)!0===t.hasError&&(this.hasError=!0)}}},pt=vt,_t=(i("d909"),Object(p["a"])(pt,ft,ht,!1,null,"2cc5985c",null)),gt=_t.exports,bt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.geomDetailEditable?i("div",{staticClass:"columns is-mobile"},[i("div",{staticClass:"column is-narrow"},[i("div",{staticClass:"control upload-button"},[i("input",{ref:"geoFileInput",attrs:{type:"file",accept:".gpx,.kml,.fit,application/gpx+xml,application/vnd.ant.fit,application/vnd.google-earth.kml+xml"},on:{change:t.uploadGeoFile}}),t._v(" "),i("button",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button is-primary is-small",on:{click:function(e){return t.$refs.geoFileInput.click()}}},[t._v("\n          Upload a GPS track\n        ")])])]),t._v(" "),i("div",{staticClass:"column"},[i("em",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v(" You may also drag, draw or edit the track on the map. ")])])]):t._e(),t._v(" "),i("div",{staticClass:"columns is-multiline"},[i("div",{staticClass:"column is-12 map-container"},[i("map-view",{ref:"map",attrs:{"edited-document":t.document,"geom-detail-editable":t.geomDetailEditable,"show-center-on-geolocation":"","show-recenter-on":""}})],1),t._v(" "),i("div",{staticClass:"column is-6"},[i("div",{staticClass:"field"},[i("label",{staticClass:"label"},[t._v(t._s(t.$gettext("Longitude")))]),t._v(" "),i("input-simple",{attrs:{type:"number",postfix:"°E"},on:{input:t.setGeometryPoint},model:{value:t.longitude,callback:function(e){t.longitude=e},expression:"longitude"}})],1)]),t._v(" "),i("div",{staticClass:"column is-6"},[i("div",{staticClass:"field"},[i("label",{staticClass:"label"},[t._v(t._s(t.$gettext("Latitude")))]),t._v(" "),i("input-simple",{attrs:{type:"number",postfix:"°N"},on:{input:t.setGeometryPoint},model:{value:t.latitude,callback:function(e){t.latitude=e},expression:"latitude"}})],1)])])])},yt=[],wt=i("dac7");const Ct=new wt["a"].format.GeoJSON,xt="EPSG:4326",$t="EPSG:3857";var kt={mixins:[b["a"]],props:{geomDetailEditable:{type:Boolean,default:!1}},data(){return{latitude:null,longitude:null}},computed:{hasError(){return!1},visible(){return!0}},watch:{"document.geometry.geom":{handler:"setLatitudeLongitude",immediate:!0}},methods:{uploadGeoFile(t){const e=new FileReader;e.onload=function(){this.$refs.map.setDocumentGeometryFromGeoFile(e.result)}.bind(this);const i=t.target.files[0];"application/vnd.ant.fit"===i.type||i.name.toLowerCase().endsWith(".fit")?e.readAsArrayBuffer(i):e.readAsText(i),this.$refs.geoFileInput.value=""},setGeometryPoint(){if(null===this.latitude||null===this.longitude)return;const t=parseFloat(String(this.longitude).replace(",",".")),e=parseFloat(String(this.latitude).replace(",",".")),i=new wt["a"].geom.Point([t,e]);i.transform(xt,$t),this.document.geometry.geom=Ct.writeGeometry(i)},setLatitudeLongitude(){if(!this.document||!this.document.geometry||!this.document.geometry.geom)return{};const t=Ct.readGeometry(this.document.geometry.geom);t.transform($t,xt);const e=t.getCoordinates();this.longitude=Math.round(1e6*e[0])/1e6,this.latitude=Math.round(1e6*e[1])/1e6}}},Nt=kt,Et=(i("2722"),Object(p["a"])(Nt,bt,yt,!1,null,"7a031bea",null)),Tt=Et.exports,Pt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"column"},[i("div",{staticClass:"field"},[i("label",{staticClass:"label"},[i("span",[t._v("\n        "+t._s(t._f("uppercaseFirstLetter")(t.$gettext("quality")))+"\n      ")]),t._v("\n       \n      "),t.isCollaborative?t._e():i("span",{on:{click:function(e){t.autoComputeQuality=!t.autoComputeQuality}}},[i("fa-icon",{staticClass:"has-cursor-pointer",attrs:{icon:t.autoComputeQuality?"lock":"unlock"}})],1)])]),t._v(" "),i("div",{staticClass:"field quality-select-container"},[t.autoComputeQuality&&!t.isCollaborative?i("input-simple",{attrs:{options:t.$options.quality_types,i18n:"","i18n-context":"quality_types",value:t.computedQuality,disabled:""}}):i("input-simple",{attrs:{options:t.$options.quality_types,i18n:"","i18n-context":"quality_types",required:""},model:{value:t.document.quality,callback:function(e){t.$set(t.document,"quality",e)},expression:"document.quality"}})],1)])},It=[];function Mt(t){return t<1?"empty":t<2?"draft":t<3?"medium":"fine"}function St(t,e){for(const i of e)if(t.activities.includes(i))return!0;return!1}function jt(t,e){return t.geometry&&t.geometry.geom_detail||e.route_description}function Vt(t,e){if(e.conditions)return!0;if(!e.conditions_levels)return!1;const i=JSON.parse(e.conditions_levels);return!(!i||0===i.length||!(i[0].level_place||i[0].level_comment||i[0].level_snow_height_total||i[0].level_snow_height_soft))}function Dt(t){return t.elevation_up_snow||t.elevation_down_snow||t.snow_quantity||t.snow_quality||t.length_total||t.glacier_rating}function qt(t,e){let i=0;return i+=t.geometry&&t.geometry.geom?1:0,i+=t.activities&&t.activities.length?.5:0,i+=t.categories&&t.categories.length?.5:0,i+=t.associations.waypoints.length||t.associations.routes.length?1:0,i+=e.title?1:0,i+=e.description?1:0,Mt(i)}function Lt(t,e){const i=e.description||"";let s=0;return s+=t.associations.waypoints.length?1:0,s+=t.associations.images.length?1:0,s+=e.summary?1:0,s+=i?1:-1,s+=-1!==i.search(/(^|\n)##/g)?1:0,s+=-1!==i.search(/\[img=/g)?1:0,Mt(s)}function Ot(t,e){function i(){let i=0;return i+=jt(t,e)?.5:0,i+=Dt(t)?.5:0,(t.access_condition&&"snowy"!==t.access_condition&&t.elevation_access||"snowy"===t.access_condition&&t.elevation_access&&e.access_comment)&&(i+=.5),i+="no"!==t.avalanche_signs&&e.avalanches?.5:0,i+=e.description?.5:0,i+=e.weather?.5:0,i+=t.condition_rating?.5:0,i=Vt(t,e)?i+1:Math.min(i,2),i}function s(){let i=0;return i+=jt(t,e)?.5:0,i+=t.condition_rating?.5:0,i+=e.description?1:0,i+=e.timing?.5:0,i+=e.weather?.5:0,i=Vt(t,e)?i+1.5:Math.min(i,2),i}function n(){let i=0;return i+=jt(t,e)?.5:0,i+=e.description?1:0,i+=e.timing?.5:0,i+=e.weather?.5:0,i=e.conditions?i+2:Math.min(i,2),i}let a=0,o=0,l=0;St(t,["skitouring","snowshoeing"])&&(a=i()),St(t,["snow_ice_mixed","ice_climbing","mountain_climbing"])&&(o=s()),St(t,["rock_climbing","hiking","mountain_biking","via_ferrata","paragliding","slacklining"])&&(l=n());const r=Math.max(a,o,l);return Mt(r)}var At={props:{document:{type:Object,default:null}},data(){return{autoComputeQuality:!0,computedQuality:"empty"}},computed:{editedLocale(){return this.document?this.document.locales[0]:null},isCollaborative(){return!!["a","b","w","r","m"].includes(this.document.type)||!["u","o","x"].includes(this.document.type)&&(["i"].includes(this.document.type)?"collab"===this.document.image_type:!!["c"].includes(this.document.type)&&"collab"===this.document.article_type)}},watch:{document:{handler:"computeQuality",deep:!0,immediate:!0}},methods:{computeQuality(){if(!this.document)return null;"o"===this.document.type?this.computedQuality=Ot(this.document,this.editedLocale):"c"===this.document.type?this.computedQuality=Lt(this.document,this.editedLocale):"i"===this.document.type?this.computedQuality=qt(this.document,this.editedLocale):this.computedQuality=this.document.quality,"great"===this.document.quality&&(this.computedQuality="great")},beforeSave(){!this.isCollaborative&&this.autoComputeQuality&&(this.document.quality=this.computedQuality)}},quality_types:W["a"].quality_types},Ft=At,Bt=(i("f411"),Object(p["a"])(Ft,Pt,It,!1,null,"162743a8",null)),Ut=Bt.exports;const Rt=new wt["a"].format.GeoJSON,Wt="EPSG:4326",zt="EPSG:3857";e["a"]={components:{FormRow:q,FormSection:gt,FormField:mt,QualityField:Ut,FormInput:x,MapInputRow:Tt,EditionContainer:ot,AssociationsInputRow:T},data(){return{promise:{},fields:null,saving:!1,modified:!1}},computed:{mode(){return this.$route.name.split("-")[1]},documentType(){return this.$route.name.replace(/-(edit|add)/,"")},documentId(){return this.$route.params.id},lang(){return this.$route.params.lang},document(){return this.promise.data},editedLocale(){return this.document?this.document.locales[0]:null}},watch:{$route:{handler:"load",immediate:!0},"document.geometry.geom":"setLatitudeLongitude"},mounted(){window.addEventListener("beforeunload",this.beforeUnload)},beforeDestroy(){window.removeEventListener("beforeunload",this.beforeUnload)},beforeRouteEnter(t,e,i){i(t=>{t.$user.isLogged||t.$router.push({name:"auth"})})},beforeRouteLeave(t,e,i){if(this.modified){const t=window.confirm(this.$gettext("Do you really want to leave? you have unsaved changes!"));t?i():i(!1)}else i()},methods:{load(){if(this.fields=W["a"].objectDefinitions[this.documentType].fields,this.cleanErrors(),this.latitude=null,this.longitude=null,this.$user.isLogged)if("edit"===this.mode)this.promise=R["a"][this.documentType].get(this.documentId,this.lang).then(t=>{const e=t.data.locales;0===e.length&&e.push(this.$documentUtils.buildLocale(this.documentType,this.lang)),this.afterLoad(t),this.modified=!0});else{this.promise={data:this.$documentUtils.buildDocument(this.documentType,this.lang)},"outing"===this.documentType&&R["a"].profile.get(this.$user.id).then(t=>{this.$documentUtils.addAssociation(this.document,t.data)});for(const t of Object.keys(this.$route.query)){const e=this.$documentUtils.getDocumentType(t);if(e&&this.$route.query[t]){const i=String(this.$route.query[t]).split(",");for(const t of i)R["a"][e].get(t).then(t=>{this.$documentUtils.addAssociation(this.document,t.data)})}}this.$route.query.act&&(this.document.activities=this.$route.query.act.split(",")),this.afterLoad(),this.modified=!0}},setGeometryPoint(){if(null===this.latitude||null===this.longitude)return;const t=parseFloat(String(this.longitude).replace(",",".")),e=parseFloat(String(this.latitude).replace(",",".")),i=new wt["a"].geom.Point([t,e]);i.transform(Wt,zt),this.document.geometry.geom=Rt.writeGeometry(i)},setLatitudeLongitude(){if(!this.document||!this.document.geometry||!this.document.geometry.geom)return{};const t=Rt.readGeometry(this.document.geometry.geom);t.transform(zt,Wt);const e=t.getCoordinates();this.longitude=Math.round(1e6*e[0])/1e6,this.latitude=Math.round(1e6*e[1])/1e6},afterLoad(){},beforeSave(){},displayErrors(t){const e=this.getFieldsWithError(),i=t?"API message":void 0;if(0!==e.length){const t=e.map(t=>`${this.$gettext(t.name)} : ${this.$gettext(t.error.description,i)}`);return Object(s["toast"])({message:`<ul><li>${t.join("</li><li>")}</li></ul>`,type:"is-danger",position:"center"}),!0}return!1},save(t){if("eu"===this.lang&&!this.$user.isModerator)return void Object(s["toast"])({message:this.$gettext("Sorry, euskara lang has been frozen.\nWe're looking for a moderator, if you're interested, please contact board@camptocamp.org"),type:"is-danger",position:"center"});if(this.beforeSave(),this.computeErrors(),this.displayErrors(!1))return;let e;this.saving=!0,e="edit"===this.mode?R["a"][this.documentType].save(this.document,t).then(()=>{this.modified=!1,this.goToDocument(this.document.document_id)}):R["a"][this.documentType].create(this.document).then(t=>{this.modified=!1,this.goToDocument(t.data.document_id)}),e.catch(t=>{this.saving=!1;const e=t.response.data;this.dispatchErrors(e.errors)})},goToDocument(t){this.$router.push({name:this.documentType,params:{id:t,lang:this.lang}})},computeErrors(){for(const t of Object.values(this.fields))t.error=t.getError(this.document,this.editedLocale)},getFieldsWithError(){return Object.values(this.fields).filter(t=>null!==t.error)},dispatchErrors(t){this.cleanErrors();for(const e of t){const t=e.name.split(".");"locales"===t[0]?this.dispatchError(t[2],e):"associations"===t[0]?this.dispatchError(t[1],e):this.dispatchError(t[0],e)}this.displayErrors(!0)},dispatchError(t,e){void 0===this.fields[t]?Object(s["toast"])({message:this.$gettext(`${e.name}: ${e.description}`),type:"is-danger",position:"center"}):this.fields[t].error=e},cleanErrors(){for(const t of Object.values(this.fields))t.error=null},beforeUnload(t){this.modified&&(t.preventDefault(),t.returnValue="")}}}},"19d5":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("edition-container",{attrs:{mode:t.mode,document:t.document,"is-loading":t.saving},on:{save:t.save}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.activities}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.categories}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.summary}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.description}})],1),t._v(" "),i("map-input-row",{attrs:{document:t.document}}),t._v(" "),i("hr")],1)},n=[],a=i("1784"),o={mixins:[a["a"]]},l=o,r=i("2877"),d=Object(r["a"])(l,s,n,!1,null,null,null);e["default"]=d.exports},"1c08":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("edition-container",{attrs:{mode:t.mode,document:t.document,"is-loading":t.saving},on:{save:t.save}},[i("form-section",{attrs:{title:t.$gettext("general informations"),"sub-title":t.$gettext("Title of the book, author, language and date of publication.")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.title}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.activities}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.book_types}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.langs}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.author}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.editor}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.publication_date}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.nb_pages}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.isbn}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.url}}),t._v(" "),i("quality-field",{staticClass:"is-4",attrs:{document:t.document}})],1)]),t._v(" "),i("form-section",{attrs:{title:t.$gettext("description"),"sub-title":t.$gettext("Book content")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.summary}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.description}})],1)]),t._v(" "),i("form-section",{attrs:{title:t.$gettext("associations"),"sub-title":t.$gettext("Articles, waypoints or routes to be linked.")}},[i("associations-input-row",{attrs:{document:t.document,field:t.fields.articles}}),t._v(" "),i("associations-input-row",{attrs:{document:t.document,field:t.fields.waypoints}}),t._v(" "),i("associations-input-row",{attrs:{document:t.document,field:t.fields.routes}})],1)],1)},n=[],a=i("1784"),o={mixins:[a["a"]]},l=o,r=i("2877"),d=Object(r["a"])(l,s,n,!1,null,null,null);e["default"]=d.exports},"1de6":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"section"},[i("html-header",{attrs:{title:t.$gettext("Associations history")}}),t._v(" "),i("association-history-pagination",{attrs:{count:t.results?t.results.count:0,limit:t.limit,offset:t.offset,"document-id":t.documentId,"user-id":t.userId}}),t._v(" "),i("loading-notification",{attrs:{promise:t.promise}}),t._v(" "),t.results?i("table",{staticClass:"table is-striped"},[i("thead",[i("tr",[i("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Created on")]),t._v(" "),i("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Contributor")]),t._v(" "),i("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Creation?")]),t._v(" "),i("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Parent")]),t._v(" "),i("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Child")])])]),t._v(" "),i("tbody",t._l(t.results.associations,(function(e,s){return i("tr",{key:s},[i("td",[t._v("\n          "+t._s(t.$dateUtils.toTechnicalString(e.written_at))+"\n        ")]),t._v(" "),i("td",[i("contributor-link",{attrs:{contributor:e.user}})],1),t._v(" "),i("td",[t._v("\n          "+t._s(e.is_creation)+"\n        ")]),t._v(" "),i("td",[i("colored-icon-document",{attrs:{"document-type":t.$documentUtils.getDocumentType(e.parent_document.type)}}),t._v(" "),i("span",[t._v(" ")]),t._v(" "),i("document-link",{attrs:{document:e.parent_document}})],1),t._v(" "),i("td",[i("colored-icon-document",{attrs:{"document-type":t.$documentUtils.getDocumentType(e.child_document.type)}}),t._v(" "),i("span",[t._v(" ")]),t._v(" "),i("document-link",{attrs:{document:e.child_document}})],1)])})),0)]):t._e(),t._v(" "),i("association-history-pagination",{attrs:{count:t.results?t.results.count:0,limit:t.limit,offset:t.offset,"document-id":t.documentId,"user-id":t.userId}})],1)},n=[],a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("span",[t._v("(")]),t._v(" "),i("association-history-link",{attrs:{disabled:0===t.offsetAsNumber,limit:t.limit,"user-id":t.userId,"document-id":t.documentId}},[t._v("\n    newest\n  ")]),t._v(" "),i("span",[t._v(" | ")]),t._v(" "),i("association-history-link",{attrs:{disabled:!t.count||t.offsetAsNumber>=t.count-t.limitAsNumber,limit:t.limit,offset:t.count-t.limitAsNumber,"user-id":t.userId,"document-id":t.documentId}},[t._v("\n    oldest\n  ")]),t._v(" "),i("span",[t._v(") View : ")]),t._v(" "),i("span",[t._v("(")]),t._v(" "),i("association-history-link",{attrs:{disabled:0===t.offsetAsNumber,limit:t.limit,offset:Math.max(t.offsetAsNumber-t.limitAsNumber,0),"user-id":t.userId,"document-id":t.documentId}},[t._v("\n    newer "+t._s(t.limitAsNumber)+"\n  ")]),t._v(" "),i("span",[t._v(" | ")]),t._v(" "),i("association-history-link",{attrs:{disabled:!t.count||t.offsetAsNumber+t.limitAsNumber>=t.count,limit:t.limit,offset:t.offsetAsNumber+t.limitAsNumber,"user-id":t.userId,"document-id":t.documentId}},[t._v("\n    older "+t._s(t.limitAsNumber)+"\n  ")]),t._v(" "),i("span",[t._v(")")])],1)},o=[],l={props:{count:{type:Number,required:!0},documentId:{type:Number,default:null},userId:{type:Number,default:null},limit:{type:Number,default:null},offset:{type:Number,default:null}},computed:{limitAsNumber(){var t;return null!==(t=this.limit)&&void 0!==t?t:50},offsetAsNumber(){var t;return null!==(t=this.offset)&&void 0!==t?t:0}}},r=l,d=i("2877"),c=Object(d["a"])(r,a,o,!1,null,null,null),u=c.exports,m=i("66ba"),f=i("188b"),h={components:{ColoredIconDocument:m["a"],AssociationHistoryPagination:u},data(){return{promise:{}}},computed:{userId(){return this.$route.query.u?parseInt(this.$route.query.u):null},documentId(){return this.$route.query.d?parseInt(this.$route.query.d):null},offset(){return this.$route.query.offset?parseInt(this.$route.query.offset):null},limit(){return this.$route.query.limit?parseInt(this.$route.query.limit):null},results(){return this.promise.data}},watch:{$route:{handler:"load",immediate:!0}},methods:{load(){this.promise=f["a"].association.getHistory({documentId:this.documentId,userId:this.userId,limit:this.limit,offset:this.offset})}}},v=h,p=(i("bbf1"),Object(d["a"])(v,s,n,!1,null,"0c9d5882",null));e["default"]=p.exports},"1f85":function(t,e,i){"use strict";i("a194")},"257e":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("edition-container",{attrs:{mode:t.mode,document:t.document,"is-loading":t.saving},on:{save:t.save}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{attrs:{document:t.document,field:t.fields.title,"is-expanded":""}}),t._v(" "),i("form-field",{staticClass:"is-narrow",attrs:{document:t.document,field:t.fields.article_type}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.activities}}),t._v(" "),i("form-field",{staticClass:"is-8",attrs:{document:t.document,field:t.fields.categories}}),t._v(" "),i("quality-field",{ref:"qualityField",staticClass:"is-4",attrs:{document:t.document}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.summary}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.description}})],1),t._v(" "),i("associations-input-row",{attrs:{document:t.document,field:t.fields.articles}}),t._v(" "),i("associations-input-row",{attrs:{document:t.document,field:t.fields.waypoints}}),t._v(" "),i("associations-input-row",{attrs:{document:t.document,field:t.fields.outings}}),t._v(" "),i("associations-input-row",{attrs:{document:t.document,field:t.fields.routes}}),t._v(" "),i("associations-input-row",{attrs:{document:t.document,field:t.fields.books}}),t._v(" "),i("hr")],1)},n=[],a=i("1784"),o={mixins:[a["a"]],methods:{beforeSave(){this.$refs.qualityField.beforeSave()}}},l=o,r=i("2877"),d=Object(r["a"])(l,s,n,!1,null,null,null);e["default"]=d.exports},2722:function(t,e,i){"use strict";i("4b94")},"4b94":function(t,e,i){},"4f08":function(t,e,i){},"545b":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("edition-container",{attrs:{mode:t.mode,document:t.document,"is-loading":t.saving},on:{save:t.save}},[i("form-section",{attrs:{title:t.$gettext("General information"),"sub-title":t.$gettext("Report title, activity, linked routes or outings.")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.title}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.event_activity}})],1),t._v(" "),i("associations-input-row",{attrs:{document:t.document,field:t.fields.articles}}),t._v(" "),i("associations-input-row",{attrs:{document:t.document,field:t.fields.routes}}),t._v(" "),i("associations-input-row",{attrs:{document:t.document,field:t.fields.outings}})],1),t._v(" "),i("form-section",{attrs:{title:t.$gettext("Anonymity and confidentiality")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.anonymous}}),t._v(" "),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.disable_comments}})],1)]),t._v(" "),i("form-section",{attrs:{title:t.$gettext("Geolocation"),"sub-title":t.$gettext("Precise location of the event.")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-3",attrs:{document:t.document,field:t.fields.elevation}})],1),t._v(" "),i("map-input-row",{attrs:{document:t.document}})],1),t._v(" "),i("form-section",{attrs:{title:t.$gettext("Participants and context"),"sub-title":t.$gettext("Details on participants and event context")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.date}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.nb_participants}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.event_type}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.nb_impacted}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.severity}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.rescue}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.avalanche_level}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.avalanche_slope}})],1),t._v(" "),i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.age}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.gender}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.author_status}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.autonomy}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.activity_rate}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.supervision}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.qualification}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.previous_injuries}})],1)]),t._v(" "),i("form-section",{attrs:{title:t.$gettext("Narration"),"sub-title":t.$gettext("Open fields to deeply explain the event circumstances.")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.description,placeholder:t.$gettext("Details of the actual outing and the incident. If you have already written up your outing, you only need to describe the incident, then link it to your outing report (after first uploading it)")}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.place,placeholder:t.$gettext("Information on the location of the incident. Mark the location on the map above, even if you cannot do very accurately, (in which case give more details here). After completing the report, you can associate it to a route, a climbing site or an outing.")}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.route_study,placeholder:t.$gettext("Map, guidebook, known route, planning for a plan B, (re) evaluation of route during trip?")}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.conditions,placeholder:t.$gettext("Describe the information gathered before the outing and how these evolved once on route: weather forecast, avalanche risk reports, amount of refreezing, condition of the snow/ice/rock, reports from the previous days, etc.")}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.training,placeholder:t.$gettext("Please describe your technical and experience level related to the chosen goal, your level of fitness, prior tiredness accumulated, acclimatization if in altitude, etc.")}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.motivations,placeholder:t.$gettext("Why did you choose this outing? When did you decide to engage. What influenced your decision (holiday time, long journey, hotel/hut bookings, time spent already in preparation, limited possibilities, etc.)?")}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.group_management,placeholder:t.$gettext("Communication of the individual objectives and expectations, the thoughts and observations during the outing, discussions on new strategies, the way the group conducted itself and divided responsibilities, was the group used to working together, core aspirations, etc.")}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.risk,placeholder:t.$gettext("Have you (re)evaluated the risks at each change in the situation? What factors might have affected your awareness, such as tiredness, stress, relaxing having passed the main difficulties or on the descent, on a section reputed to be easy, presence of footprints or other people, complete confidence in the leader of the group, etc.")}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.time_management,placeholder:t.$gettext("Had a timetable for the route been foreseen? Did you maintain the schedule? Was time a factor in causing the incident?")}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.safety,placeholder:t.$gettext("Types of belay and protection used, verifications between climbers, snowpack stability tests, testing of avalanche transceivers, etc.")}}),t._v(" "),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.reduce_impact}}),t._v(" "),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.increase_impact}}),t._v(" "),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.modifications,placeholder:t.$gettext("Has this experience changed your habits? Describe the lessons you have learned from this experience")}}),t._v(" "),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.other_comments,placeholder:t.$gettext("Briefly describe any injuries. Comments that do not fit into any other fields can be entered here.")}}),t._v(" "),i("quality-field",{staticClass:"is-4",attrs:{document:t.document}})],1)])],1)},n=[],a=i("1784"),o={mixins:[a["a"]]},l=o,r=i("2877"),d=Object(r["a"])(l,s,n,!1,null,null,null);e["default"]=d.exports},"5bf5":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("edition-container",{attrs:{mode:t.mode,document:t.document,"is-loading":t.saving},on:{save:t.save}},[i("div",{staticClass:"columns"},[i("form-field",{attrs:{document:t.document,field:t.fields.title}}),t._v(" "),i("form-field",{staticClass:"is-narrow",attrs:{document:t.document,field:t.fields.area_type}})],1),t._v(" "),t.$user.isModerator?i("map-input-row",{attrs:{document:t.document,"geom-detail-editable":""}}):t._e(),t._v(" "),i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.summary}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.description}}),t._v(" "),i("quality-field",{staticClass:"is-4",attrs:{document:t.document}})],1),t._v(" "),i("hr")],1)},n=[],a=i("1784"),o={mixins:[a["a"]],methods:{beforeSave(){this.$user.isModerator||delete this.document.geometry}}},l=o,r=i("2877"),d=Object(r["a"])(l,s,n,!1,null,null,null);e["default"]=d.exports},"5edb":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("edition-container",{staticClass:"edition-container",attrs:{mode:t.mode,document:t.document,"is-loading":t.saving},on:{save:t.save}},[i("form-section",{attrs:{title:t.$gettext("general informations"),"sub-title":t.$gettext("Waypoint's main properties")}},[i("div",{staticClass:"columns"},[i("form-field",{staticClass:"is-narrow",attrs:{document:t.document,field:t.fields.waypoint_type}}),t._v(" "),i("form-field",{attrs:{document:t.document,field:t.fields.title}})],1),t._v(" "),i("div",{staticClass:"columns"},[i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.elevation}}),t._v(" "),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.elevation_min}}),t._v(" "),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.prominence}})],1),t._v(" "),i("map-input-row",{attrs:{document:t.document}}),t._v(" "),i("div",{staticClass:"columns"},[i("form-field",{attrs:{document:t.document,field:t.fields.maps_info,label:t.$gettext("maps_references"),placeholder:t.$gettext("Add here maps not automatically referenced")}})],1)],1),t._v(" "),i("form-section",{attrs:{title:t.$gettext("Transport & road or PT access"),"sub-title":t.$gettext("Informations about the access")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.snow_clearance_rating}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.lift_access}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.public_transportation_rating}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.parking_fee}}),t._v(" "),i("form-field",{staticClass:"is-8",attrs:{document:t.document,field:t.fields.public_transportation_types}})],1)]),t._v(" "),i("form-section",{attrs:{title:t.$gettext("Types and styles")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.climbing_outdoor_types}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.climbing_indoor_types}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.climbing_styles}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.rock_types}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.best_periods}})],1),t._v(" "),i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.orientations}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.access_time}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.rain_proof}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.children_proof}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.ground_types}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.product_types}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.slackline_types}})],1)]),t._v(" "),i("form-section",{attrs:{title:t.$gettext("Numbers"),"sub-title":t.$gettext("Misc data about the waypoint")}},[i("div",{staticClass:"columns"},[i("form-field",{attrs:{document:t.document,field:t.fields.length}}),t._v(" "),i("form-field",{attrs:{document:t.document,field:t.fields.slope}})],1),t._v(" "),i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.custodianship}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.capacity_staffed}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.capacity,context:t.capacityContext}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.url}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.phone}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.phone_custodian}})],1),t._v(" "),i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.matress_unstaffed}}),t._v(" "),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.blanket_unstaffed}}),t._v(" "),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.gas_unstaffed}}),t._v(" "),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.heating_unstaffed}})],1),t._v(" "),i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.height_min}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.height_median}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.height_max}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.routes_quantity}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.slackline_length_max}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.slackline_length_min}})],1)]),t._v(" "),i("form-section",{attrs:{title:t.$gettext("ratings"),"sub-title":t.$gettext("Associated routes cotations")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.climbing_rating_min}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.climbing_rating_median}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.climbing_rating_max}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.equipment_ratings}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.paragliding_rating}})],1)]),t._v(" "),i("form-section",{attrs:{title:t.$gettext("Description"),"sub-title":t.$gettext("Waypoint's textual description")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.summary,placeholder:t.$gettext("write a summary")}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.access_period,placeholder:t.accessPeriodPlaceholder,label:t.accessPeriodTitle}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.description,placeholder:t.descriptionPlaceholder}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.access,placeholder:t.accessPlaceholder,label:t.accessTitle}}),t._v(" "),i("quality-field",{staticClass:"is-4",attrs:{document:t.document}})],1)]),t._v(" "),i("form-section",{attrs:{title:t.$gettext("associations"),"sub-title":t.$gettext("You may add associated waypoints, books and articles")}},[i("associations-input-row",{attrs:{document:t.document,field:t.fields.articles}}),t._v(" "),i("associations-input-row",{attrs:{document:t.document,field:t.fields.waypoints}}),t._v(" "),i("associations-input-row",{attrs:{document:t.document,field:t.fields.books}})],1)],1)},n=[],a=i("1784"),o=i("8a7f"),l={mixins:[a["a"],o["a"]],computed:{capacityContext(){return this.document&&"bivouac"===this.document.waypoint_type?this.document.waypoint_type:null}}},r=l,d=i("2877"),c=Object(d["a"])(r,s,n,!1,null,null,null);e["default"]=c.exports},6375:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("edition-container",{attrs:{mode:t.mode,document:t.document,"is-loading":t.saving},on:{save:t.save}},[i("form-section",{attrs:{title:t.$gettext("general informations"),"sub-title":t.$gettext("Main information about the route, such as title, activity, GPS, and waypoint (which mountain, place).")}},[i("div",{staticClass:"columns is-1"},[i("form-field",{staticClass:"is-narrow",attrs:{label:t.$gettext("waypoint"),document:t.document,field:t.fields.main_waypoint_id}}),t._v(" "),i("form-field",{attrs:{document:t.document,field:t.fields.title}})],1),t._v(" "),i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-narrow",attrs:{document:t.document,field:t.fields.climbing_outdoor_type}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.activities}})],1),t._v(" "),i("map-input-row",{attrs:{document:t.document,"geom-detail-editable":""}}),t._v(" "),i("associations-input-row",{attrs:{document:t.document,field:t.fields.waypoints}}),t._v(" "),i("associations-input-row",{attrs:{document:t.document,field:t.fields.routes}}),t._v(" "),i("associations-input-row",{attrs:{document:t.document,field:t.fields.articles}}),t._v(" "),i("associations-input-row",{attrs:{document:t.document,field:t.fields.books}}),t._v(" "),i("associations-input-row",{attrs:{document:t.document,field:t.fields.xreports}})],1),t._v(" "),i("form-section",{attrs:{title:t.$gettext("configuration"),"sub-title":t.$gettext("Data like orientation, rock type, route type (such as return trip or loop) and route configuration type (such as ridge or gully).")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.orientations}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.route_types}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.configuration}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.rock_types}})],1)]),t._v(" "),i("form-section",{attrs:{title:t.$gettext("numbers"),"sub-title":t.$gettext("Information about the terrain, like elevations, lengths...")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.elevation_min}}),t._v(" "),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.elevation_max}}),t._v(" "),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.height_diff_up}}),t._v(" "),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.height_diff_down}}),t._v(" "),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.height_diff_access}}),t._v(" "),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.height_diff_difficulties}}),t._v(" "),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.difficulties_height}}),t._v(" "),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.route_length,divisor:1e3,unit:"km"}})],1),t._v(" "),i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.mtb_length_asphalt,divisor:1e3,unit:"km"}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.mtb_length_trail,divisor:1e3,unit:"km"}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.mtb_height_diff_portages}})],1),t._v(" "),i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.lift_access}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.durations,label:t.$gettext("durations (days)")}})],1),t._v(" "),i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.slackline_type}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.slackline_height}})],1)]),t._v(" "),i("form-section",{attrs:{title:t.$gettext("ratings"),"sub-title":t.$gettext("Everything about ratings : difficulties, exposition...")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.global_rating}}),t._v(" "),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.rock_free_rating}}),t._v(" "),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.rock_required_rating}}),t._v(" "),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.aid_rating}})],1),t._v(" "),i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.labande_global_rating}}),t._v(" "),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.labande_ski_rating}}),t._v(" "),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.ski_rating}}),t._v(" "),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.ski_exposition}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.slope}})],1),t._v(" "),i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.ice_rating}}),t._v(" "),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.mixed_rating}}),t._v(" "),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.snowshoe_rating}}),t._v(" "),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.via_ferrata_rating}}),t._v(" "),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.hiking_rating}})],1),t._v(" "),i("div",{staticClass:"columns is-multiline"},[i("form-field",{attrs:{document:t.document,field:t.fields.mtb_down_rating}}),t._v(" "),i("form-field",{attrs:{document:t.document,field:t.fields.mtb_up_rating}}),t._v(" "),i("form-field",{attrs:{document:t.document,field:t.fields.hiking_mtb_exposition}})],1),t._v(" "),i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.equipment_rating}}),t._v(" "),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.engagement_rating}}),t._v(" "),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.exposition_rock_rating}}),t._v(" "),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.risk_rating}})],1)]),t._v(" "),i("form-section",{attrs:{title:t.$gettext("Comments"),"sub-title":t.$gettext("This is where you may describe the route extensively, maybe starting with a brief summary and then developing the description (including approach, descent, etc.). Don't forget to mention the route history if you know it.")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.summary}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.route_history,placeholder:t.$gettext("Describe historical information about the route (date, names..) here")}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.description}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.slackline_anchor1}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.slackline_anchor2}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.remarks}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.gear,placeholder:t.$gettext("Describe here the gear needed for this route")}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.glacier_gear}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.external_resources,placeholder:t.$gettext("Books and websites not already associated to this route")}}),t._v(" "),i("quality-field",{staticClass:"is-4",attrs:{document:t.document}})],1)])],1)},n=[],a=i("1784"),o={mixins:[a["a"]],watch:{"document.associations.waypoints":"onWaypointsAssociation"},methods:{afterLoad(){"add"===this.mode&&this.$route.query.w&&(this.document.main_waypoint_id=parseInt(this.$route.query.w))},onWaypointsAssociation(){const t=this.document.associations.waypoints;-1===t.findIndex(t=>t.document_id===this.document.main_waypoint_id)&&(this.document.main_waypoint_id=null),"add"===this.mode&&null===this.document.main_waypoint_id&&0!==t.length&&(this.document.main_waypoint_id=t[0].document_id)}}},l=o,r=i("2877"),d=Object(r["a"])(l,s,n,!1,null,null,null);e["default"]=d.exports},"66ba":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"icon icon-document-container",style:"background: "+(t.$options.colors[t.documentType]||"black")},[i("icon-document",{staticClass:"has-text-light",attrs:{"document-type":t.documentType}})],1)},n=[],a=i("a50d"),o={mixins:[a["b"]],colors:{area:"purple",book:"plum",article:"darkcyan",image:"pink",map:"yellow",outing:"grey",profile:"red",route:"dodgerblue",waypoint:"green",xreport:"tomato"}},l=o,r=(i("fd5b"),i("2877")),d=Object(r["a"])(l,s,n,!1,null,"2201a3ce",null);e["a"]=d.exports},"6c10":function(t,e,i){"use strict";i("9ff5")},"6d32":function(t,e,i){},7228:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("edition-container",{attrs:{mode:t.mode,document:t.document,"is-loading":t.saving},on:{save:t.save}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.title}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.editor}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.scale}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.code}})],1),t._v(" "),i("hr")])},n=[],a=i("1784"),o={mixins:[a["a"]]},l=o,r=i("2877"),d=Object(r["a"])(l,s,n,!1,null,null,null);e["default"]=d.exports},"7e41":function(t,e,i){"use strict";i("b9bf")},8527:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"section"},[i("html-header",{attrs:{title:t.$gettext("Versions")}}),t._v(" "),i("loading-notification",{attrs:{promise:t.promise}}),t._v(" "),t.history?i("div",[i("h1",{staticClass:"title is-1"},[i("icon-document",{attrs:{"document-type":t.documentType}}),t._v(" "),i("router-link",{attrs:{to:{name:t.documentType,params:{id:t.documentId,lang:t.lang}}}},[t._v(t._s(t.history.title))])],1),t._v(" "),i("history-view-links",{attrs:{"document-id":t.documentId,"document-type":t.documentType,lang:t.lang,"version-from":t.versionFrom,"version-to":t.versionTo}}),t._v(" "),i("table",{staticClass:"table is-striped"},[i("thead",[i("tr",[i("th"),t._v(" "),i("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Created on")]),t._v(" "),i("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("contributor")]),t._v(" "),i("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("comment")])])]),t._v(" "),i("tbody",t._l(t.history.versions,(function(e){return i("tr",{key:e.version_id},[i("td",["profile"!=t.documentType?i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.versionFrom,expression:"versionFrom"}],attrs:{disabled:t.versionTo<=e.version_id,type:"radio",name:"versionFrom"},domProps:{value:e.version_id,checked:t._q(t.versionFrom,e.version_id)},on:{change:function(i){t.versionFrom=e.version_id}}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.versionTo,expression:"versionTo"}],attrs:{disabled:t.versionFrom>=e.version_id,type:"radio",name:"versionTo"},domProps:{value:e.version_id,checked:t._q(t.versionTo,e.version_id)},on:{change:function(i){t.versionTo=e.version_id}}}),t._v(" "),e.version_id!==t.veryFirstVersionId?i("diff-link",{attrs:{"document-type":t.documentType,id:t.documentId,lang:t.lang,"version-from":"prev","version-to":e.version_id}}):t._e()],1):t._e()]),t._v(" "),i("td",[i("version-link",{attrs:{"document-type":t.documentType,id:t.documentId,version:e.version_id,lang:t.lang}},[t._v("\n              "+t._s(t.$dateUtils.toTechnicalString(e.written_at))+"\n            ")])],1),t._v(" "),i("td",[i("contributor-link",{attrs:{contributor:e}})],1),t._v(" "),i("td",[t._v("\n            "+t._s(e.comment)+"\n          ")])])})),0)]),t._v(" "),i("history-view-links",{attrs:{"document-id":t.documentId,"document-type":t.documentType,lang:t.lang,"version-from":t.versionFrom,"version-to":t.versionTo}})],1):t._e()],1)},n=[],a=(i("5319"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"links"},[i("diff-link",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{"document-type":t.documentType,id:t.documentId,lang:t.lang,"version-from":t.versionFrom,"version-to":t.versionTo}},[t._v("\n    Compare selected versions\n  ")]),t._v(" "),i("router-link",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{to:{name:t.documentType,params:{id:t.documentId,lang:t.lang}}}},[t._v("\n    See the latest version\n  ")]),t._v(" "),i("association-history-link",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{"document-id":t.documentId}},[t._v(" Associations history ")]),t._v(" "),i("span",[i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v(" List of versions for language: ")]),t._v(" "),i("span",[t._v("  "+t._s(t.$gettext(t.lang,"langs"))+" ")])])],1)}),o=[],l={props:{documentId:{type:Number,required:!0},documentType:{type:String,required:!0},lang:{type:String,required:!0},versionFrom:{type:Number,required:!0},versionTo:{type:Number,required:!0}}},r=l,d=(i("ec2b"),i("2877")),c=Object(d["a"])(r,a,o,!1,null,"dc03affa",null),u=c.exports,m=i("188b"),f={components:{HistoryViewLinks:u},data(){return{promise:{},versionFrom:void 0,versionTo:void 0}},computed:{documentId(){return parseInt(this.$route.params.id)},documentType(){return this.$route.name.replace("-history","")},lang(){return this.$route.params.lang},veryFirstVersionId(){return this.history.versions[this.history.versions.length-1].version_id},history(){return this.promise.data}},watch:{$route:{handler:"load",immediate:!0}},methods:{load(){this.promise=m["a"][this.documentType].getHistory(this.documentId,this.lang).then(t=>{const e=t.data.versions.reverse();t.data.versions=e,this.versionFrom=e[e.length>1?1:0].version_id,this.versionTo=e[0].version_id})}}},h=f,v=(i("1f85"),Object(d["a"])(h,s,n,!1,null,"f0dd7166",null));e["default"]=v.exports},"85fb":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"section content"},[i("html-header",{attrs:{title:t.$gettext("Differences between versions")}}),t._v(" "),i("h1",[i("icon-document",{staticClass:"is-large",attrs:{"document-type":t.documentType}}),t._v(" "),i("span",[t._v(" ")]),t._v(" "),i("span",[t._v("diff")]),t._v(" ("+t._s(t.lang)+") :\n    "),i("router-link",{attrs:{to:{name:t.documentType,params:{id:t.documentId,lang:t.lang}}}},[t._v(t._s(t.title))])],1),t._v(" "),i("div",{staticClass:"columns"},[t.oldVersion?i("div",{staticClass:"column"},[i("div",[i("version-link",{attrs:{"document-type":t.documentType,id:t.documentId,version:t.oldVersion.version.version_id,lang:t.lang}},[t._v("\n          Revision #"+t._s(t.oldVersion.document.version)+" as of\n          "+t._s(t.$dateUtils.toTechnicalString(t.oldVersion.version.written_at))+"\n        ")])],1),t._v(" "),i("div",[t._v("by "),i("contributor-link",{attrs:{contributor:t.oldVersion.version}})],1),t._v(" "),i("div",[t._v("\n        "+t._s(t.oldVersion.version.comment)+"\n      ")]),t._v(" "),i("div",[t.oldVersion.previous_version_id?i("diff-link",{attrs:{"document-type":t.documentType,id:t.documentId,lang:t.lang,"version-from":t.oldVersion.previous_version_id,"version-to":t.oldVersion.version.version_id}},[t._v("\n          ←\n          "),i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("previous difference")])]):i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v(" This is the first version ")])],1)]):t._e(),t._v(" "),t.newVersion?i("div",{staticClass:"column"},[i("div",[i("version-link",{attrs:{"document-type":t.documentType,id:t.documentId,version:t.newVersion.version.version_id,lang:t.lang}},[t._v("\n          Revision #"+t._s(t.newVersion.document.version)+" as of\n          "+t._s(t.$dateUtils.toTechnicalString(t.newVersion.version.written_at))+"\n        ")])],1),t._v(" "),i("div",[t._v("by "),i("contributor-link",{attrs:{contributor:t.newVersion.version}})],1),t._v(" "),i("div",[t._v("\n        "+t._s(t.newVersion.version.comment)+"\n      ")]),t._v(" "),i("div",[t.newVersion.next_version_id?i("diff-link",{attrs:{"document-type":t.documentType,id:t.documentId,lang:t.lang,"version-from":t.newVersion.version.version_id,"version-to":t.newVersion.next_version_id}},[i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("next difference")]),t._v("\n          →\n        ")]):i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v(" This is the last version ")])],1)]):t._e()]),t._v(" "),t.oldVersion&&t.newVersion?i("div",[t.filenameHasChanged?i("div",[i("div",{staticClass:"columns"},[i("div",{staticClass:"column"},[i("img",{staticClass:"is-pulled-right",attrs:{src:t.getImageUrl(t.oldVersion.document)}})]),t._v(" "),i("div",{staticClass:"column"},[i("img",{attrs:{src:t.getImageUrl(t.newVersion.document)}})])])]):t._e(),t._v(" "),t.geometryHasChanged?i("div",{staticClass:"map-container"},[i("map-view",{attrs:{"old-document":t.oldVersion.document,"new-document":t.newVersion.document}})],1):t._e(),t._v(" "),t._l(Object.keys(t.diffProperties),(function(e){return i("div",{key:e},[i("h2",{staticClass:"title is-2 has-text-centered"},[t._v(t._s(t._f("uppercaseFirstLetter")(t.$gettext(e))))]),t._v(" "),i("div",{staticClass:"columns"},[i("div",{staticClass:"column is-6"},[null===t.diffProperties[e].old?i("del",{staticClass:"is-pulled-right is-italic"},[t._v("null")]):i("del",{staticClass:"is-pulled-right"},[t._v(t._s(t.diffProperties[e].old))])]),t._v(" "),i("div",{staticClass:"column is-6"},[null===t.diffProperties[e].new?i("ins",{staticClass:"is-italic"},[t._v("null")]):i("ins",[t._v(t._s(t.diffProperties[e].new))])])])])})),t._v(" "),t._l(t.diffLocales,(function(e,s){return i("div",{key:s},[i("h2",{staticClass:"title is-2 has-text-centered"},[t._v(t._s(t.$gettext(s)))]),t._v(" "),i("div",{staticClass:"columns is-mobile"},[i("div",{staticClass:"column is-6"},[i("div",{staticClass:"splitted-diff"},t._l(e,(function(e,s){return i("div",{key:s},[e.ellipsed?i("div",{staticClass:"block-ellipsed has-text-centered is-size-7 has-text-grey-light is-italic"},[t._v("\n                "+t._s(e.rows.length)+" identical rows\n              ")]):i("div",t._l(e.rows,(function(e,s){return i("div",{key:s,staticClass:"row-diff",class:{"row-del":!e.isIdentical&&!e.isFakeOld,"row-fake":e.isFakeOld}},t._l(e.oldPart,(function(e,s){return i(e.isIdentical?"span":"del",{key:s,tag:"component"},[t._v(t._s(e.text))])})),1)})),0)])})),0)]),t._v(" "),i("div",{staticClass:"column is-6"},[i("div",{staticClass:"splitted-diff"},t._l(e,(function(e,s){return i("div",{key:s},[e.ellipsed?i("div",{staticClass:"block-ellipsed has-text-centered is-size-7 has-text-grey-light is-italic"},[t._v("\n                "+t._s(e.rows.length)+" identical rows\n              ")]):i("div",t._l(e.rows,(function(e,s){return i("div",{key:s,staticClass:"row-diff",class:{"row-ins":!e.isIdentical&&!e.isFakeNew,"row-fake":e.isFakeNew}},t._l(e.newPart,(function(e,s){return i(e.isIdentical?"span":"ins",{key:s,tag:"component"},[t._v(t._s(e.text))])})),1)})),0)])})),0)])])])}))],2):t._e()],1)},n=[];i("ddb0"),i("5319");function a(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}var o=-1,l=1,r=0;a.Diff,a.diff_main=function(t,e,i,s){"undefined"===typeof s&&(s=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var n=s;if(null===t||null===e)throw new Error("Null input. (diff_main)");if(t===e)return t?[[r,t]]:[];"undefined"===typeof i&&(i=!0);var a=i,o=this.diff_commonPrefix(t,e),l=t.substring(0,o);t=t.substring(o),e=e.substring(o),o=this.diff_commonSuffix(t,e);var d=t.substring(t.length-o);t=t.substring(0,t.length-o),e=e.substring(0,e.length-o);var c=this.diff_compute_(t,e,a,n);return l&&c.unshift([r,l]),d&&c.push([r,d]),this.diff_cleanupMerge(c),c},a.diff_compute_=function(t,e,i,s){var n;if(!t)return[[l,e]];if(!e)return[[o,t]];var a=t.length>e.length?t:e,d=t.length>e.length?e:t,c=a.indexOf(d);if(-1!==c)return n=[[l,a.substring(0,c)],[r,d],[l,a.substring(c+d.length)]],t.length>e.length&&(n[0][0]=n[2][0]=o),n;if(1===d.length)return[[o,t],[l,e]];var u=this.diff_halfMatch_(t,e);if(u){var m=u[0],f=u[1],h=u[2],v=u[3],p=u[4],_=this.diff_main(m,h,i,s),g=this.diff_main(f,v,i,s);return _.concat([[r,p]],g)}return i&&t.length>100&&e.length>100?this.diff_lineMode_(t,e,s):this.diff_bisect_(t,e,s)},a.diff_lineMode_=function(t,e,i){var s=this.diff_linesToChars_(t,e);t=s.chars1,e=s.chars2;var n=s.lineArray,a=this.diff_main(t,e,!1,i);this.diff_charsToLines_(a,n),this.diff_cleanupSemantic(a),a.push([r,""]);var d=0,c=0,u=0,m="",f="";while(d<a.length){switch(a[d][0]){case l:u++,f+=a[d][1];break;case o:c++,m+=a[d][1];break;case r:if(c>=1&&u>=1){a.splice(d-c-u,c+u),d=d-c-u;let t=this.diff_main(m,f,!1,i);for(var h=t.length-1;h>=0;h--)a.splice(d,0,t[h]);d+=t.length}u=0,c=0,m="",f="";break}d++}return a.pop(),a},a.diff_bisect_=function(t,e,i){for(var s=t.length,n=e.length,a=Math.ceil((s+n)/2),r=a,d=2*a,c=new Array(d),u=new Array(d),m=0;m<d;m++)c[m]=-1,u[m]=-1;c[r+1]=0,u[r+1]=0;for(var f=s-n,h=f%2!==0,v=0,p=0,_=0,g=0,b=0;b<a;b++){if((new Date).getTime()>i)break;for(let a=-b+v;a<=b-p;a+=2){let o=r+a;var y;y=a===-b||a!==b&&c[o-1]<c[o+1]?c[o+1]:c[o-1]+1;let l=y-a;while(y<s&&l<n&&t.charAt(y)===e.charAt(l))y++,l++;if(c[o]=y,y>s)p+=2;else if(l>n)v+=2;else if(h){let n=r+f-a;if(n>=0&&n<d&&-1!==u[n]){var w=s-u[n];if(y>=w)return this.diff_bisectSplit_(t,e,y,l,i)}}}for(let a=-b+_;a<=b-g;a+=2){let o,l=r+a;o=a===-b||a!==b&&u[l-1]<u[l+1]?u[l+1]:u[l-1]+1;var C=o-a;while(o<s&&C<n&&t.charAt(s-o-1)===e.charAt(n-C-1))o++,C++;if(u[l]=o,o>s)g+=2;else if(C>n)_+=2;else if(!h){let n=r+f-a;if(n>=0&&n<d&&-1!==c[n]){let a=c[n],l=r+a-n;if(o=s-o,a>=o)return this.diff_bisectSplit_(t,e,a,l,i)}}}}return[[o,t],[l,e]]},a.diff_bisectSplit_=function(t,e,i,s,n){var a=t.substring(0,i),o=e.substring(0,s),l=t.substring(i),r=e.substring(s),d=this.diff_main(a,o,!1,n),c=this.diff_main(l,r,!1,n);return d.concat(c)},a.diff_linesToChars_=function(t,e){var i=[],s={};function n(t){var e="",n=0,a=-1,o=i.length;while(a<t.length-1){a=t.indexOf("\n",n),-1===a&&(a=t.length-1);var l=t.substring(n,a+1);n=a+1,(s.hasOwnProperty?s.hasOwnProperty(l):void 0!==s[l])?e+=String.fromCharCode(s[l]):(e+=String.fromCharCode(o),s[l]=o,i[o++]=l)}return e}i[0]="";var a=n(t),o=n(e);return{chars1:a,chars2:o,lineArray:i}},a.diff_charsToLines_=function(t,e){for(var i=0;i<t.length;i++){for(var s=t[i][1],n=[],a=0;a<s.length;a++)n[a]=e[s.charCodeAt(a)];t[i][1]=n.join("")}},a.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!==e.charAt(0))return 0;var i=0,s=Math.min(t.length,e.length),n=s,a=0;while(i<n)t.substring(a,n)===e.substring(a,n)?(i=n,a=i):s=n,n=Math.floor((s-i)/2+i);return n},a.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!==e.charAt(e.length-1))return 0;var i=0,s=Math.min(t.length,e.length),n=s,a=0;while(i<n)t.substring(t.length-n,t.length-a)===e.substring(e.length-n,e.length-a)?(i=n,a=i):s=n,n=Math.floor((s-i)/2+i);return n},a.diff_commonOverlap_=function(t,e){var i=t.length,s=e.length;if(0===i||0===s)return 0;i>s?t=t.substring(i-s):i<s&&(e=e.substring(0,i));var n=Math.min(i,s);if(t===e)return n;var a=0,o=1;while(o===o){var l=t.substring(n-o),r=e.indexOf(l);if(-1===r)return a;o+=r,0!==r&&t.substring(n-o)!==e.substring(0,o)||(a=o,o++)}},a.diff_halfMatch_=function(t,e){if(this.Diff_Timeout<=0)return null;var i=t.length>e.length?t:e,s=t.length>e.length?e:t;if(i.length<4||2*s.length<i.length)return null;var n=this;function a(t,e,i){var s,a,o,l,r=t.substring(i,i+Math.floor(t.length/4)),d=-1,c="";while(-1!==(d=e.indexOf(r,d+1))){var u=n.diff_commonPrefix(t.substring(i),e.substring(d)),m=n.diff_commonSuffix(t.substring(0,i),e.substring(0,d));c.length<m+u&&(c=e.substring(d-m,d)+e.substring(d,d+u),s=t.substring(0,i-m),a=t.substring(i+u),o=e.substring(0,d-m),l=e.substring(d+u))}return 2*c.length>=t.length?[s,a,o,l,c]:null}var o,l,r,d,c,u=a(i,s,Math.ceil(i.length/4)),m=a(i,s,Math.ceil(i.length/2));if(!u&&!m)return null;o=m?u&&u[4].length>m[4].length?u:m:u,t.length>e.length?(l=o[0],r=o[1],d=o[2],c=o[3]):(d=o[0],c=o[1],l=o[2],r=o[3]);var f=o[4];return[l,r,d,c,f]},a.diff_cleanupSemantic=function(t){var e=!1,i=[],s=0,n=null,a=0,d=0,c=0,u=0,m=0;while(a<t.length)t[a][0]===r?(i[s++]=a,d=u,c=m,u=0,m=0,n=t[a][1]):(t[a][0]===l?u+=t[a][1].length:m+=t[a][1].length,n&&n.length<=Math.max(d,c)&&n.length<=Math.max(u,m)&&(t.splice(i[s-1],0,[o,n]),t[i[s-1]+1][0]=l,s--,s--,a=s>0?i[s-1]:-1,d=0,c=0,u=0,m=0,n=null,e=!0)),a++;e&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),a=1;while(a<t.length){if(t[a-1][0]===o&&t[a][0]===l){var f=t[a-1][1],h=t[a][1],v=this.diff_commonOverlap_(f,h),p=this.diff_commonOverlap_(h,f);v>=p?(v>=f.length/2||v>=h.length/2)&&(t.splice(a,0,[r,h.substring(0,v)]),t[a-1][1]=f.substring(0,f.length-v),t[a+1][1]=h.substring(v),a++):(p>=f.length/2||p>=h.length/2)&&(t.splice(a,0,[r,f.substring(0,p)]),t[a-1][0]=l,t[a-1][1]=h.substring(0,h.length-p),t[a+1][0]=o,t[a+1][1]=f.substring(p),a++),a++}a++}},a.diff_cleanupSemanticLossless=function(t){function e(t,e){if(!t||!e)return 6;var i=t.charAt(t.length-1),s=e.charAt(0),n=i.match(a.nonAlphaNumericRegex_),o=s.match(a.nonAlphaNumericRegex_),l=n&&i.match(a.whitespaceRegex_),r=o&&s.match(a.whitespaceRegex_),d=l&&i.match(a.linebreakRegex_),c=r&&s.match(a.linebreakRegex_),u=d&&t.match(a.blanklineEndRegex_),m=c&&e.match(a.blanklineStartRegex_);return u||m?5:d||c?4:n&&!l&&r?3:l||r?2:n||o?1:0}var i=1;while(i<t.length-1){if(t[i-1][0]===r&&t[i+1][0]===r){var s=t[i-1][1],n=t[i][1],o=t[i+1][1],l=this.diff_commonSuffix(s,n);if(l){var d=n.substring(n.length-l);s=s.substring(0,s.length-l),n=d+n.substring(0,n.length-l),o=d+o}var c=s,u=n,m=o,f=e(s,n)+e(n,o);while(n.charAt(0)===o.charAt(0)){s+=n.charAt(0),n=n.substring(1)+o.charAt(0),o=o.substring(1);var h=e(s,n)+e(n,o);h>=f&&(f=h,c=s,u=n,m=o)}t[i-1][1]!==c&&(c?t[i-1][1]=c:(t.splice(i-1,1),i--),t[i][1]=u,m?t[i+1][1]=m:(t.splice(i+1,1),i--))}i++}},a.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,a.whitespaceRegex_=/\s/,a.linebreakRegex_=/[\r\n]/,a.blanklineEndRegex_=/\n\r?\n$/,a.blanklineStartRegex_=/^\r?\n\r?\n/,a.diff_cleanupEfficiency=function(t){var e=!1,i=[],s=0,n=null,a=0,d=!1,c=!1,u=!1,m=!1;while(a<t.length)t[a][0]===r?(t[a][1].length<this.Diff_EditCost&&(u||m)?(i[s++]=a,d=u,c=m,n=t[a][1]):(s=0,n=null),u=m=!1):(t[a][0]===o?m=!0:u=!0,n&&(d&&c&&u&&m||n.length<this.Diff_EditCost/2&&d+c+u+m===3)&&(t.splice(i[s-1],0,[o,n]),t[i[s-1]+1][0]=l,s--,n=null,d&&c?(u=m=!0,s=0):(s--,a=s>0?i[s-1]:-1,u=m=!1),e=!0)),a++;e&&this.diff_cleanupMerge(t)},a.diff_cleanupMerge=function(t){t.push([r,""]);var e,i=0,s=0,n=0,a="",d="";while(i<t.length)switch(t[i][0]){case l:n++,d+=t[i][1],i++;break;case o:s++,a+=t[i][1],i++;break;case r:s+n>1?(0!==s&&0!==n&&(e=this.diff_commonPrefix(d,a),0!==e&&(i-s-n>0&&t[i-s-n-1][0]===r?t[i-s-n-1][1]+=d.substring(0,e):(t.splice(0,0,[r,d.substring(0,e)]),i++),d=d.substring(e),a=a.substring(e)),e=this.diff_commonSuffix(d,a),0!==e&&(t[i][1]=d.substring(d.length-e)+t[i][1],d=d.substring(0,d.length-e),a=a.substring(0,a.length-e))),0===s?t.splice(i-n,s+n,[l,d]):0===n?t.splice(i-s,s+n,[o,a]):t.splice(i-s-n,s+n,[o,a],[l,d]),i=i-s-n+(s?1:0)+(n?1:0)+1):0!==i&&t[i-1][0]===r?(t[i-1][1]+=t[i][1],t.splice(i,1)):i++,n=0,s=0,a="",d="";break}""===t[t.length-1][1]&&t.pop();var c=!1;i=1;while(i<t.length-1)t[i-1][0]===r&&t[i+1][0]===r&&(t[i][1].substring(t[i][1].length-t[i-1][1].length)===t[i-1][1]?(t[i][1]=t[i-1][1]+t[i][1].substring(0,t[i][1].length-t[i-1][1].length),t[i+1][1]=t[i-1][1]+t[i+1][1],t.splice(i-1,1),c=!0):t[i][1].substring(0,t[i+1][1].length)===t[i+1][1]&&(t[i-1][1]+=t[i+1][1],t[i][1]=t[i][1].substring(t[i+1][1].length)+t[i+1][1],t.splice(i+1,1),c=!0)),i++;c&&this.diff_cleanupMerge(t)},a.diff_xIndex=function(t,e){var i,s=0,n=0,a=0,r=0;for(i=0;i<t.length;i++){if(t[i][0]!==l&&(s+=t[i][1].length),t[i][0]!==o&&(n+=t[i][1].length),s>e)break;a=s,r=n}return t.length!==i&&t[i][0]===o?r:r+(e-a)},a.diff_prettyHtml=function(t){for(var e=[],i=/&/g,s=/</g,n=/>/g,a=/\n/g,d=0;d<t.length;d++){var c=t[d][0],u=t[d][1],m=u.replace(i,"&amp;").replace(s,"&lt;").replace(n,"&gt;").replace(a,"&para;<br>");switch(c){case l:e[d]='<ins style="background:#e6ffe6;">'+m+"</ins>";break;case o:e[d]='<del style="background:#ffe6e6;">'+m+"</del>";break;case r:e[d]="<span>"+m+"</span>";break}}return e.join("")},a.diff_text1=function(t){for(var e=[],i=0;i<t.length;i++)t[i][0]!==l&&(e[i]=t[i][1]);return e.join("")},a.diff_text2=function(t){for(var e=[],i=0;i<t.length;i++)t[i][0]!==o&&(e[i]=t[i][1]);return e.join("")},a.diff_levenshtein=function(t){for(var e=0,i=0,s=0,n=0;n<t.length;n++){var a=t[n][0],d=t[n][1];switch(a){case l:i+=d.length;break;case o:s+=d.length;break;case r:e+=Math.max(i,s),i=0,s=0;break}}return e+=Math.max(i,s),e},a.diff_toDelta=function(t){for(var e=[],i=0;i<t.length;i++)switch(t[i][0]){case l:e[i]="+"+encodeURI(t[i][1]);break;case o:e[i]="-"+t[i][1].length;break;case r:e[i]="="+t[i][1].length;break}return e.join("\t").replace(/%20/g," ")},a.diff_fromDelta=function(t,e){for(var i=[],s=0,n=0,a=e.split(/\t/g),d=0;d<a.length;d++){var c=a[d].substring(1);switch(a[d].charAt(0)){case"+":try{i[s++]=[l,decodeURI(c)]}catch(f){throw new Error("Illegal escape in diff_fromDelta: "+c)}break;case"-":case"=":var u=parseInt(c,10);if(isNaN(u)||u<0)throw new Error("Invalid number in diff_fromDelta: "+c);var m=t.substring(n,n+=u);"="===a[d].charAt(0)?i[s++]=[r,m]:i[s++]=[o,m];break;default:if(a[d])throw new Error("Invalid diff operation in diff_fromDelta: "+a[d])}}if(n!==t.length)throw new Error("Delta length ("+n+") does not equal source text length ("+t.length+").");return i},a.match_main=function(t,e,i){if(null===t||null===e||null===i)throw new Error("Null input. (match_main)");return i=Math.max(0,Math.min(i,t.length)),t===e?0:t.length?t.substring(i,i+e.length)===e?i:this.match_bitap_(t,e,i):-1},a.match_bitap_=function(t,e,i){if(e.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var s=this.match_alphabet_(e),n=this;function a(t,s){var a=t/e.length,o=Math.abs(i-s);return n.Match_Distance?a+o/n.Match_Distance:o?1:a}var o=this.Match_Threshold,l=t.indexOf(e,i);-1!==l&&(o=Math.min(a(0,l),o),l=t.lastIndexOf(e,i+e.length),-1!==l&&(o=Math.min(a(0,l),o)));var r,d,c=1<<e.length-1;l=-1;for(var u,m=e.length+t.length,f=0;f<e.length;f++){r=0,d=m;while(r<d)a(f,i+d)<=o?r=d:m=d,d=Math.floor((m-r)/2+r);m=d;var h=Math.max(1,i-d+1),v=Math.min(i+d,t.length)+e.length,p=Array(v+2);p[v+1]=(1<<f)-1;for(var _=v;_>=h;_--){var g=s[t.charAt(_-1)];if(p[_]=0===f?(p[_+1]<<1|1)&g:(p[_+1]<<1|1)&g|(u[_+1]|u[_])<<1|1|u[_+1],p[_]&c){var b=a(f,_-1);if(b<=o){if(o=b,l=_-1,!(l>i))break;h=Math.max(1,2*i-l)}}}if(a(f+1,i)>o)break;u=p}return l},a.match_alphabet_=function(t){var e={};for(let i=0;i<t.length;i++)e[t.charAt(i)]=0;for(let i=0;i<t.length;i++)e[t.charAt(i)]|=1<<t.length-i-1;return e},a.patch_addContext_=function(t,e){if(0!==e.length){var i=e.substring(t.start2,t.start2+t.length1),s=0;while(e.indexOf(i)!==e.lastIndexOf(i)&&i.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin)s+=this.Patch_Margin,i=e.substring(t.start2-s,t.start2+t.length1+s);s+=this.Patch_Margin;var n=e.substring(t.start2-s,t.start2);n&&t.diffs.unshift([r,n]);var a=e.substring(t.start2+t.length1,t.start2+t.length1+s);a&&t.diffs.push([r,a]),t.start1-=n.length,t.start2-=n.length,t.length1+=n.length+a.length,t.length2+=n.length+a.length}},a.patch_make=function(t,e,i){var s,n;if("string"===typeof t&&"string"===typeof e&&"undefined"===typeof i)s=t,n=this.diff_main(s,e,!0),n.length>2&&(this.diff_cleanupSemantic(n),this.diff_cleanupEfficiency(n));else if(t&&"object"===typeof t&&"undefined"===typeof e&&"undefined"===typeof i)n=t,s=this.diff_text1(n);else if("string"===typeof t&&e&&"object"===typeof e&&"undefined"===typeof i)s=t,n=e;else{if("string"!==typeof t||"string"!==typeof e||!i||"object"!==typeof i)throw new Error("Unknown call format to patch_make.");s=t,n=i}if(0===n.length)return[];for(var d=[],c=new a.patch_obj,u=0,m=0,f=0,h=s,v=s,p=0;p<n.length;p++){var _=n[p][0],g=n[p][1];switch(u||_===r||(c.start1=m,c.start2=f),_){case l:c.diffs[u++]=n[p],c.length2+=g.length,v=v.substring(0,f)+g+v.substring(f);break;case o:c.length1+=g.length,c.diffs[u++]=n[p],v=v.substring(0,f)+v.substring(f+g.length);break;case r:g.length<=2*this.Patch_Margin&&u&&n.length!==p+1?(c.diffs[u++]=n[p],c.length1+=g.length,c.length2+=g.length):g.length>=2*this.Patch_Margin&&u&&(this.patch_addContext_(c,h),d.push(c),c=new a.patch_obj,u=0,h=v,m=f);break}_!==l&&(m+=g.length),_!==o&&(f+=g.length)}return u&&(this.patch_addContext_(c,h),d.push(c)),d},a.patch_deepCopy=function(t){for(var e=[],i=0;i<t.length;i++){var s=t[i],n=new a.patch_obj;n.diffs=[];for(var o=0;o<s.diffs.length;o++)n.diffs[o]=s.diffs[o].slice();n.start1=s.start1,n.start2=s.start2,n.length1=s.length1,n.length2=s.length2,e[i]=n}return e},a.patch_apply=function(t,e){if(0===t.length)return[e,[]];t=this.patch_deepCopy(t);var i=this.patch_addPadding(t);e=i+e+i,this.patch_splitMax(t);for(var s=0,n=[],a=0;a<t.length;a++){var d,c,u=t[a].start2+s,m=this.diff_text1(t[a].diffs),f=-1;if(m.length>this.Match_MaxBits?(d=this.match_main(e,m.substring(0,this.Match_MaxBits),u),-1!==d&&(f=this.match_main(e,m.substring(m.length-this.Match_MaxBits),u+m.length-this.Match_MaxBits),(-1===f||d>=f)&&(d=-1))):d=this.match_main(e,m,u),-1===d)n[a]=!1,s-=t[a].length2-t[a].length1;else if(n[a]=!0,s=d-u,c=-1===f?e.substring(d,d+m.length):e.substring(d,f+this.Match_MaxBits),m===c)e=e.substring(0,d)+this.diff_text2(t[a].diffs)+e.substring(d+m.length);else{var h=this.diff_main(m,c,!1);if(m.length>this.Match_MaxBits&&this.diff_levenshtein(h)/m.length>this.Patch_DeleteThreshold)n[a]=!1;else{this.diff_cleanupSemanticLossless(h);for(var v,p=0,_=0;_<t[a].diffs.length;_++){var g=t[a].diffs[_];g[0]!==r&&(v=this.diff_xIndex(h,p)),g[0]===l?e=e.substring(0,d+v)+g[1]+e.substring(d+v):g[0]===o&&(e=e.substring(0,d+v)+e.substring(d+this.diff_xIndex(h,p+g[1].length))),g[0]!==o&&(p+=g[1].length)}}}}return e=e.substring(i.length,e.length-i.length),[e,n]},a.patch_addPadding=function(t){var e=this.Patch_Margin,i="";for(let a=1;a<=e;a++)i+=String.fromCharCode(a);for(let a=0;a<t.length;a++)t[a].start1+=e,t[a].start2+=e;var s=t[0],n=s.diffs;if(0===n.length||n[0][0]!==r)n.unshift([r,i]),s.start1-=e,s.start2-=e,s.length1+=e,s.length2+=e;else if(e>n[0][1].length){let t=e-n[0][1].length;n[0][1]=i.substring(n[0][1].length)+n[0][1],s.start1-=t,s.start2-=t,s.length1+=t,s.length2+=t}if(s=t[t.length-1],n=s.diffs,0===n.length||n[n.length-1][0]!==r)n.push([r,i]),s.length1+=e,s.length2+=e;else if(e>n[n.length-1][1].length){let t=e-n[n.length-1][1].length;n[n.length-1][1]+=i.substring(0,t),s.length1+=t,s.length2+=t}return i},a.patch_splitMax=function(t){for(var e=this.Match_MaxBits,i=0;i<t.length;i++)if(!(t[i].length1<=e)){var s=t[i];t.splice(i--,1);var n=s.start1,d=s.start2,c="";while(0!==s.diffs.length){var u=new a.patch_obj,m=!0;u.start1=n-c.length,u.start2=d-c.length,""!==c&&(u.length1=u.length2=c.length,u.diffs.push([r,c]));while(0!==s.diffs.length&&u.length1<e-this.Patch_Margin){var f=s.diffs[0][0],h=s.diffs[0][1];f===l?(u.length2+=h.length,d+=h.length,u.diffs.push(s.diffs.shift()),m=!1):f===o&&1===u.diffs.length&&u.diffs[0][0]===r&&h.length>2*e?(u.length1+=h.length,n+=h.length,m=!1,u.diffs.push([f,h]),s.diffs.shift()):(h=h.substring(0,e-u.length1-this.Patch_Margin),u.length1+=h.length,n+=h.length,f===r?(u.length2+=h.length,d+=h.length):m=!1,u.diffs.push([f,h]),h===s.diffs[0][1]?s.diffs.shift():s.diffs[0][1]=s.diffs[0][1].substring(h.length))}c=this.diff_text2(u.diffs),c=c.substring(c.length-this.Patch_Margin);var v=this.diff_text1(s.diffs).substring(0,this.Patch_Margin);""!==v&&(u.length1+=v.length,u.length2+=v.length,0!==u.diffs.length&&u.diffs[u.diffs.length-1][0]===r?u.diffs[u.diffs.length-1][1]+=v:u.diffs.push([r,v])),m||t.splice(++i,0,u)}}},a.patch_toText=function(t){for(var e=[],i=0;i<t.length;i++)e[i]=t[i];return e.join("")},a.patch_fromText=function(t){var e=[];if(!t)return e;var i=t.split("\n"),s=0,n=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;while(s<i.length){var d=i[s].match(n);if(!d)throw new Error("Invalid patch string: "+i[s]);var c=new a.patch_obj;e.push(c),c.start1=parseInt(d[1],10),""===d[2]?(c.start1--,c.length1=1):"0"===d[2]?c.length1=0:(c.start1--,c.length1=parseInt(d[2],10)),c.start2=parseInt(d[3],10),""===d[4]?(c.start2--,c.length2=1):"0"===d[4]?c.length2=0:(c.start2--,c.length2=parseInt(d[4],10)),s++;while(s<i.length){var u=i[s].charAt(0);try{var m=decodeURI(i[s].substring(1))}catch(f){throw new Error("Illegal escape in patch_fromText: "+m)}if("-"===u)c.diffs.push([o,m]);else if("+"===u)c.diffs.push([l,m]);else if(" "===u)c.diffs.push([r,m]);else{if("@"===u)break;if(""!==u)throw new Error('Invalid patch mode "'+u+'" in: '+m)}s++}}return e},a.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},a.patch_obj.toString=function(){var t,e;t=0===this.length1?this.start1+",0":1===this.length1?this.start1+1:this.start1+1+","+this.length1,e=0===this.length2?this.start2+",0":1===this.length2?this.start2+1:this.start2+1+","+this.length2;for(var i,s=["@@ -"+t+" +"+e+" @@\n"],n=0;n<this.diffs.length;n++){switch(this.diffs[n][0]){case l:i="+";break;case o:i="-";break;case r:i=" ";break}s[n+1]=i+encodeURI(this.diffs[n][1])+"\n"}return s.join("").replace(/%20/g," ")};var d=i("188b"),c=i("25c4"),u=i("e952");const m=function(t,e){return Array.isArray(t)||Array.isArray(e)?JSON.stringify(t)!==JSON.stringify(e):null===t&&null!==e||null!==t&&null===e||t!==e},f=function(t,e){for(let i=0;i<t.length;i++)0===t[i][0]?e(t[i][1],t[i][1],!0):1===t[i][0]?e(null,t[i][1],!1):-1===t[i][0]&&(i+1<t.length&&1===t[i+1][0]?(e(t[i][1],t[i+1][1],!1),i+=1):e(t[i][1],null,!1))},h=function(t,e){this.text=t,this.isIdentical=e},v=function(t,e,i){if(this.oldPart=[],this.newPart=[],this.ellipsed=!0,this.isIdentical=i,i)this.oldPart=[new h(t,!0)],this.newPart=this.oldPart;else if(void 0===t)this.newPart.push(new h(e,!1));else if(void 0===e)this.oldPart.push(new h(t,!1));else{const i=a.diff_main(t,e);f(i,this.addItem.bind(this))}};Object.defineProperty(v.prototype,"isFakeOld",{get(){return 0===this.oldPart.length}}),Object.defineProperty(v.prototype,"isFakeNew",{get(){return 0===this.newPart.length}}),v.prototype.addItem=function(t,e,i){if(i){const e=new h(t,!0);this.oldPart.push(e),this.newPart.push(e)}else void 0!==t&&this.oldPart.push(new h(t,!1)),void 0!==e&&this.newPart.push(new h(e,!1))};const p=function(){this.items=[]};p.prototype.build=function(t,e){const i=a.diff_linesToChars_(t,e),s=a.diff_main(i.chars1,i.chars2,!1);a.diff_charsToLines_(s,i.lineArray),f(s,this.add.bind(this))},p.prototype.add=function(t,e,i){const s=this.items;if(i){const e=t.split("\n");for(const t of e.slice(0,e.length-1))s.push(new v(t,t,!0))}else{t=null!==t?t.split("\n"):[],e=null!==e?e.split("\n"):[];for(let i=0;i<Math.max(t.length-1,e.length-1);i++)s.push(new v(t[i],e[i],!1))}},p.prototype.computeEllipsisStates=function(){const t=this.items;for(let e=0;e<t.length;e++)if(!t[e].isIdentical)for(let i=Math.max(0,e-2);i<=Math.min(t.length-1,e+2);i++)t[i].ellipsed=!1};var _={data(){return{title:null,oldVersion:null,newVersion:null,diffProperties:{},diffLocales:{}}},computed:{documentId(){return parseInt(this.$route.params.id)},documentType(){return this.$route.name.replace("-diff","")},lang(){return this.$route.params.lang},geoLocalized(){return c["a"].objectDefinitions[this.documentType].geoLocalized},filenameHasChanged(){return this.oldVersion.document.filename!==this.newVersion.document.filename},geometryHasChanged(){if(!this.geoLocalized&&"area"!==this.documentType)return!1;if(!this.$documentUtils.hasSameGeolocation(this.oldVersion.document,this.newVersion.document))return!0;const t=this.oldVersion.document.geometry,e=this.newVersion.document.geometry;return t.geom_detail!==e.geom_detail}},watch:{$route:{handler:"loadVersions",immediate:!0}},methods:{getImageUrl:u["a"].getMedium,loadVersions(){this.loadVersion(this.$route.params.versionFrom,"oldVersion"),this.loadVersion(this.$route.params.versionTo,"newVersion")},getKeys(t,e,i=[]){let s=Object.keys(t).concat(Object.keys(e));return s=s.filter((function(t,e,s){return s.indexOf(t)===e&&!i.includes(t)})),s.sort(),s},buildDiff(){if(this.diffProperties={},this.diffLocales={},!this.oldVersion||!this.newVersion)return"Waiting for other version";const t=this.getKeys(this.oldVersion.document,this.newVersion.document,["version","locales","geometry","cooked","filename"]);for(const a of t)m(this.oldVersion.document[a],this.newVersion.document[a])&&(this.diffProperties[a]={old:this.oldVersion.document[a],new:this.newVersion.document[a]});const e=this.$documentUtils.getLocaleStupid(this.oldVersion.document,this.lang),i=this.$documentUtils.getLocaleStupid(this.newVersion.document,this.lang),s=this.getKeys(e,i,["lang","version"]),n=function(t){var e;return t=null!==(e=t)&&void 0!==e?e:"",t=t.replace(/\r\n?/g,"\n"),t+=t.endsWith("\n")?"":"\n",t};for(const a of s){const t=n(e[a]),s=n(i[a]);if(m(t,s)){const e=new p;e.build(t,s),e.computeEllipsisStates();const i=function(t){this.rows=[],this.ellipsed=t},n=[new i(e.items[0].ellipsed)];let o=n[0];for(const t of e.items)o.ellipsed!==t.ellipsed&&(o=new i(t.ellipsed),n.push(o)),o.rows.push(t);this.diffLocales[a]=n}}},loadVersion(t,e){if(this[e]=null,"prev"!==t&&"next"!==t)return d["a"][this.documentType].getVersion(this.documentId,this.lang,t).then(t=>{this[e]=t.data,"prev"===this.$route.params.versionFrom&&"newVersion"===e&&this.loadVersion(this.newVersion.previous_version_id,"oldVersion"),"next"===this.$route.params.versionTo&&"oldVersion"===e&&this.loadVersion(this.newVersion.next_version_id,"newVersion"),"newVersion"===e&&(this.title=this.$documentUtils.getLocaleStupid(this.newVersion.document,this.lang).title),this.buildDiff()})}}},g=_,b=(i("7e41"),i("2877")),y=Object(b["a"])(g,s,n,!1,null,"2da04bb2",null);e["default"]=y.exports},"8d80":function(t,e,i){},"8d8a":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("edition-container",{attrs:{mode:t.mode,document:t.document,"is-loading":t.saving},on:{save:t.save}},[i("form-section",{attrs:{title:t.$gettext("general informations"),"sub-title":t.$gettext("Main informations about your outing")}},[i("div",{staticClass:"columns"},[i("form-field",{staticClass:"is-narrow",attrs:{document:t.document,field:t.fields.date_start,max:t.showBothDates?t.document.date_end:void 0},on:{input:t.handleDates}}),t._v(" "),i("form-field",{directives:[{name:"show",rawName:"v-show",value:t.showBothDates,expression:"showBothDates"}],staticClass:"is-narrow",attrs:{document:t.document,field:t.fields.date_end,min:t.showBothDates?t.document.date_start:void 0}}),t._v(" "),i("div",{staticClass:"column is-narrow"},[i("input-checkbox",{model:{value:t.showBothDates,callback:function(e){t.showBothDates=e},expression:"showBothDates"}},[t._v(t._s(t.$gettext("Several days?")))])],1)],1),t._v(" "),i("div",{staticClass:"columns"},[i("form-field",{attrs:{document:t.document,field:t.fields.activities}})],1),t._v(" "),i("map-input-row",{attrs:{document:t.document,"geom-detail-editable":""}}),t._v(" "),i("associations-input-row",{attrs:{label:t.$gettext("routes"),document:t.document,field:t.fields.routes}}),t._v(" "),i("div",{staticClass:"columns is-multiline"},[i("form-field",{attrs:{document:t.document,field:t.fields.title}}),t._v(" "),i("form-field",{staticClass:"is-narrow",attrs:{document:t.document,field:t.fields.partial_trip}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.route_description,placeholder:t.$gettext("describe route_conditions")}})],1)],1),t._v(" "),i("form-section",{attrs:{title:t.$gettext("Weather & conditions"),"sub-title":t.$gettext("Describe the conditions you encountered during your outing")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.condition_rating}}),t._v(" "),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.glacier_rating}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.conditions_levels}})],1),t._v(" "),i("div",{staticClass:"columns"},[i("form-field",{attrs:{document:t.document,field:t.fields.elevation_up_snow}}),t._v(" "),i("form-field",{attrs:{document:t.document,field:t.fields.elevation_down_snow}})],1),t._v(" "),i("div",{staticClass:"columns"},[i("form-field",{attrs:{document:t.document,field:t.fields.snow_quantity}}),t._v(" "),i("form-field",{attrs:{document:t.document,field:t.fields.snow_quality}})],1),t._v(" "),i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.conditions,placeholder:t.$gettext("describe conditions")}}),t._v(" "),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.weather,placeholder:t.$gettext("describe weather")}}),t._v(" "),i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.timing,placeholder:t.$gettext("describe timing")}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.avalanche_signs}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.avalanches}})],1)]),t._v(" "),i("form-section",{attrs:{title:t.$gettext("Personal informations"),"sub-title":t.$gettext("People who were with you, and your feelings about this outing")}},[i("associations-input-row",{attrs:{label:t.$gettext("participants"),document:t.document,field:t.fields.users}}),t._v(" "),i("div",{staticClass:"columns"},[i("form-field",{staticClass:"is-narrow",attrs:{document:t.document,field:t.fields.participant_count}}),t._v(" "),i("form-field",{attrs:{document:t.document,field:t.fields.participants,placeholder:t.$gettext("Without c2c account")}})],1),t._v(" "),i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.description,label:t.$gettext("personal comments"),placeholder:t.$gettext("write your comments")}}),t._v(" "),i("form-field",{attrs:{document:t.document,field:t.fields.disable_comments}})],1)],1),t._v(" "),i("form-section",{attrs:{title:t.$gettext("Details"),"sub-title":t.$gettext("Detailed figures, like ratings, height differences, frequentation...")}},[i("div",{staticClass:"columns"},[i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.frequentation}})],1),t._v(" "),i("div",{staticClass:"columns is-multiline"},[i("div",{staticClass:"column is-4"},[i("form-field",{attrs:{"no-wrapper":"",document:t.document,field:t.fields.elevation_access}}),t._v(" "),i("form-field",{attrs:{"no-wrapper":"",document:t.document,field:t.fields.access_condition}}),t._v(" "),i("form-field",{attrs:{"no-wrapper":"",document:t.document,field:t.fields.public_transport}})],1),t._v(" "),i("form-field",{staticClass:"is-8",attrs:{document:t.document,field:t.fields.access_comment}}),t._v(" "),i("div",{staticClass:"column is-4"},[i("form-field",{attrs:{"no-wrapper":"",document:t.document,field:t.fields.lift_status}}),t._v(" "),i("form-field",{attrs:{"no-wrapper":"",document:t.document,field:t.fields.hut_status}})],1),t._v(" "),i("form-field",{staticClass:"is-8",attrs:{document:t.document,field:t.fields.hut_comment}})],1),t._v(" "),i("div",{staticClass:"columns"},[i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.height_diff_up}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.height_diff_down}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.height_diff_difficulties}})],1),t._v(" "),i("div",{staticClass:"columns"},[i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.length_total,unit:"km",divisor:1e3}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.elevation_min}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.elevation_max}})],1),t._v(" "),i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.global_rating}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.rock_free_rating}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.engagement_rating}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.equipment_rating}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.ski_rating,prefix:"?"},on:{"click-prefix":t.showCotometer}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.labande_global_rating}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.ice_rating}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.snowshoe_rating}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.via_ferrata_rating}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.hiking_rating}})],1),t._v(" "),i("div",{staticClass:"columns"},[i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.mtb_down_rating}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.mtb_up_rating}})],1),t._v(" "),i("div",{staticClass:"columns"},[i("quality-field",{ref:"qualityField",staticClass:"is-4",attrs:{document:t.document}})],1)]),t._v(" "),t.document?i("cotometer-window",{ref:"cotometerWindow",model:{value:t.document.ski_rating,callback:function(e){t.$set(t.document,"ski_rating",e)},expression:"document.ski_rating"}}):t._e()],1)},n=[],a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("modal-card",{ref:"modalWindow"},[i("span",{attrs:{slot:"title"},slot:"title"},[i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v(" This tool estimates the technical difficulty of a ski route (ski rating). ")])]),t._v(" "),i("div",{staticClass:"field"},[i("label",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"label"},[t._v("Skiability")]),t._v(" "),i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.skiability,expression:"skiability"}],staticClass:"is-checkradio is-info",attrs:{id:"c2c-skiability-0",name:"c2c-skiability",type:"radio"},domProps:{value:0,checked:t._q(t.skiability,0)},on:{change:function(e){t.skiability=0}}}),t._v(" "),i("label",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{for:"c2c-skiability-0"}},[t._v("Wide and constant")])]),t._v(" "),i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.skiability,expression:"skiability"}],staticClass:"is-checkradio is-info",attrs:{type:"radio",id:"c2c-skiability-1",name:"c2c-skiability"},domProps:{value:.1,checked:t._q(t.skiability,.1)},on:{change:function(e){t.skiability=.1}}}),t._v(" "),i("label",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{for:"c2c-skiability-1"}},[t._v("1 or 2 complications (steeper or narrow section...)")])]),t._v(" "),i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.skiability,expression:"skiability"}],staticClass:"is-checkradio is-info",attrs:{type:"radio",id:"c2c-skiability-2",name:"c2c-skiability"},domProps:{value:.2,checked:t._q(t.skiability,.2)},on:{change:function(e){t.skiability=.2}}}),t._v(" "),i("label",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{for:"c2c-skiability-2"}},[t._v("Very complex (steps, narrow sections, ridges...)")])])]),t._v(" "),i("div",{staticClass:"field"},[i("label",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"label"},[t._v("Average slope (degrees)")]),t._v(" "),i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.slope,expression:"slope"}],staticClass:"input",attrs:{placeholder:t.$gettext("Average slope in degree"),type:"number"},domProps:{value:t.slope},on:{input:function(e){e.target.composing||(t.slope=e.target.value)}}})]),t._v(" "),t.errorSlope?i("p",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"help is-danger"},[t._v("The slope must be between 0 and 80 deg")]):t._e()]),t._v(" "),i("div",{staticClass:"field"},[i("label",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"label"},[t._v("height_diff")]),t._v(" "),i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.elevation,expression:"elevation"}],staticClass:"input",attrs:{type:"number",min:"50",max:"3000"},domProps:{value:t.elevation},on:{input:function(e){e.target.composing||(t.elevation=e.target.value)}}})]),t._v(" "),t.errorElevation?i("p",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"help is-danger"},[t._v("The slope must be between 50 and 3000m high")]):t._e()]),t._v(" "),t.rating?i("h1",{staticClass:"title is-1 has-text-centered"},[i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Suggested rating")]),t._v(" "),i("br"),t._v(" "),i("span",{staticClass:"has-text-success"},[t._v("\n      "+t._s(t.rating)+"\n    ")])]):t._e(),t._v(" "),i("footer",{attrs:{slot:"footer"},slot:"footer"},[i("button",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button is-success",attrs:{type:"button",disabled:!t.rating},on:{click:t.setResult}},[t._v("Ok")]),t._v(" "),i("button",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button is-default",attrs:{type:"button"},on:{click:function(e){return t.$refs.modalWindow.hide()}}},[t._v("Cancel")])])])},o=[],l={data(){return{skiability:0,slope:null,elevation:50}},computed:{errorSlope(){return isNaN(this.slope)||this.slope<0||this.slope>80},errorElevation(){return(isNaN(this.elevation)||this.elevation<50||this.elevation>3e3)&&null!==this.elevation},rating(){if(this.errorSlope||this.errorElevation)return null;let t=Math.tan(Math.PI*this.slope/180)+.1*Math.log(this.elevation);t+=this.skiability*(t-1);const e=(1+this.skiability)*this.elevation;return this.slope<=17&&e<400?"1.1":this.slope<=23&&e<650?"1.2":this.slope<30&&e<800?"1.3":this.slope<35&&e<800||this.slope<23&&e>800?"2.1":this.slope<35&&e<=950?"2.2":this.slope<35&&e>950?"2.3":this.slope>=35&&this.slope<=40&&e<650?"3.1":this.slope>=35&&this.slope<=40&&e<=900?"3.2":this.slope>=35&&this.slope<=40&&e>900?"3.3":t<.98?"1.1":t>=.98&&t<1.02?"1.2":t>=1.03&&t<1.09?"+1.3":t>=1.09&&t<1.18?"+2.1":t>=1.18&&t<1.24?"2.2":t>=1.24&&t<1.3?"2.3":t>=1.3&&t<1.34?"3.1":t>=1.34&&t<1.39?"3.2":t>=1.39&&t<1.42?"3.3":t>=1.42&&t<1.46?"4.1":t>=1.46&&t<1.52?"4.2":t>=1.52&&t<1.575?"4.3":t>=1.575&&t<1.67?"5.1":t>=1.67&&t<1.745?"5.2":t>=1.745&&t<1.81?"5.3":t>=1.81&&t<1.95?"5.4":t>=1.95&&t<2.09?"5.5":t>=2.09&&t<2.25?"5.6":t>=2.25&&t<2.4?"5.7":"5.8"}},methods:{show(){this.$refs.modalWindow.show()},setResult(){this.$emit("input",this.rating),this.$refs.modalWindow.hide()}}},r=l,d=i("2877"),c=Object(d["a"])(r,a,o,!1,null,null,null),u=c.exports,m=i("1784"),f={components:{CotometerWindow:u},mixins:[m["a"]],data(){return{showBothDates:!1}},watch:{showBothDates:"handleDates"},methods:{afterLoad(){this.showBothDates=this.document.date_start!==this.document.date_end},handleDates(){this.showBothDates||(this.document.date_end=this.document.date_start)},beforeSave(){this.handleDates(),this.$refs.qualityField.beforeSave()},showCotometer(){this.$refs.cotometerWindow.show()}}},h=f,v=Object(d["a"])(h,s,n,!1,null,null,null);e["default"]=v.exports},"9eee":function(t,e,i){},"9ff5":function(t,e,i){},a194:function(t,e,i){},b9bf:function(t,e,i){},bbf1:function(t,e,i){"use strict";i("6d32")},cdfe:function(t,e,i){},d909:function(t,e,i){"use strict";i("cdfe")},d9bc:function(t,e,i){"use strict";i("0ac9")},e1e4:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"section content"},[i("html-header",{attrs:{title:t.$gettext("Recent changes")}}),t._v(" "),i("div",{attrs:{clas:"links"}},[i("association-history-link",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{"user-id":t.userId}},[t._v(" Associations history ")])],1),t._v(" "),i("table",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.load,expression:"load"}],attrs:{"infinite-scroll-disabled":"disableInfiniteSCroll","infinite-scroll-distance":"100"}},[i("tr",[i("th",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{"translate-context":"modification date"}},[t._v("Modified the")]),t._v(" "),i("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("contributor")]),t._v(" "),i("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Links")]),t._v(" "),i("th"),t._v(" "),i("th",[i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("title")]),t._v("\n        :\n        "),i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("comment")])])]),t._v(" "),t._l(t.feed,(function(e,s){return i("tr",{key:s},[i("td",[i("version-link",{attrs:{"document-type":e.document.documentType,id:e.document.document_id,version:e.version_id,lang:e.lang}},[t._v("\n          "+t._s(t.$dateUtils.toTechnicalString(e.written_at))+"\n        ")])],1),t._v(" "),i("td",[i("contributor-link",{attrs:{contributor:e.user}})],1),t._v(" "),i("td",[i("document-link",{attrs:{document:e.document,lang:e.lang}},[t._v(" last ")]),t._v(" "),i("diff-link",{attrs:{"document-type":e.document.documentType,id:e.document.document_id,lang:e.lang,"version-from":"prev","version-to":e.version_id}}),t._v(" "),i("history-link",{attrs:{document:e.document,lang:e.lang}})],1),t._v(" "),i("td",[i("marker-quality",{attrs:{quality:e.document.quality}}),t._v("\n        "+t._s(e.lang)+"\n      ")],1),t._v(" "),i("td",[i("colored-icon-document",{attrs:{"document-type":e.document.documentType}}),t._v("\n        "+t._s(e.document.title)+"\n        :\n        "),e.comment?i("span",[t._v("\n          "+t._s(e.comment)+"\n        ")]):i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v(" empty comment ")])],1)])}))],2),t._v(" "),i("loading-notification",{attrs:{promise:t.promise}})],1)},n=[],a=(i("5319"),i("ddb0"),i("487a")),o=i.n(a),l=i("66ba"),r=i("188b"),d={components:{ColoredIconDocument:l["a"]},directives:{infiniteScroll:o.a},data(){return{promise:{},feed:[],endOfFeed:!1}},computed:{userId(){return this.$route.query.u?parseInt(this.$route.query.u):null},loading(){return!!this.promise&&this.promise.loading},disableInfiniteSCroll(){return this.loading||this.endOfFeed},nextQuery(){return this.promise.data?Object.assign({},this.$route.query,{token:this.promise.data.pagination_token}):this.$route.query}},watch:{$route:{handler:"initialize",immediate:!0}},methods:{initialize(){this.feed=[],this.endOfFeed=!1,this.$route.hash?this.$router.replace(this.$route.fullPath.replace("#","?")):this.load()},load(){this.promise&&this.promise.loading||this.endOfFeed||(this.promise=r["a"].getRecentChanges(this.nextQuery).then(this.onLoad))},onLoad(){for(const t of this.promise.data.feed)t.document.documentType=this.$documentUtils.getDocumentType(t.document.type),this.feed.push(t);this.endOfFeed=0===this.promise.data.feed.length,this.$nextTick(this.onScroll)}}},c=d,u=(i("6c10"),i("2877")),m=Object(u["a"])(c,s,n,!1,null,"491a6da6",null);e["default"]=m.exports},e811:function(t,e,i){"use strict";i("4f08")},ec2b:function(t,e,i){"use strict";i("ed4a")},ed4a:function(t,e,i){},f411:function(t,e,i){"use strict";i("9eee")},fadd:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("edition-container",{attrs:{mode:t.mode,document:t.document,"is-loading":t.saving||t.uploadingNewFile},on:{save:t.save}},[i("form-section",{attrs:{title:t.$gettext("general informations"),"sub-title":t.$gettext("Title, activity and characteristics of the picture")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{attrs:{document:t.document,field:t.fields.title}}),t._v(" "),i("form-field",{staticClass:"is-narrow",attrs:{document:t.document,field:t.fields.image_type}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.activities}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.author}}),t._v(" "),i("form-field",{staticClass:"is-narrow",attrs:{document:t.document,field:t.fields.date_time}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.categories}}),t._v(" "),i("div",{staticClass:"column is-6"},[i("form-field",{attrs:{"no-wrapper":"",document:t.document,field:t.fields.filename}}),t._v(" "),i("form-field",{attrs:{"no-wrapper":"",document:t.document,field:t.fields.file_size}}),t._v(" "),i("form-field",{attrs:{"no-wrapper":"",document:t.document,field:t.fields.height}}),t._v(" "),i("form-field",{attrs:{"no-wrapper":"",document:t.document,field:t.fields.width}})],1),t._v(" "),"edit"===t.mode&&t.document?i("div",{staticClass:"column is-6 has-text-centered"},[i("div",{staticClass:"field"},[i("div",{staticClass:"file is-centered"},[i("label",{staticClass:"file-label"},[i("input",{staticClass:"file-input",attrs:{type:"file",name:"resume",accept:"image/*"},on:{change:t.onFileChange}}),t._v(" "),i("span",{staticClass:"file-cta button",class:{"is-loading":t.uploadingNewFile}},[i("span",{staticClass:"file-icon"},[i("fa-icon",{attrs:{icon:"upload"}})],1),t._v(" "),i("span",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"file-label"},[t._v(" Upload a new version ")])])])])]),t._v(" "),i("img",{attrs:{src:t.newVersionSource?t.newVersionSource:t.getImageUrl(t.document)}})]):t._e()],1)]),t._v(" "),i("form-section",{attrs:{title:t.$gettext("geolocation"),"sub-title":t.$gettext("Precise localisation of the shooting")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-6",attrs:{document:t.document,field:t.fields.elevation}})],1),t._v(" "),i("map-input-row",{attrs:{document:t.document}})],1),t._v(" "),i("form-section",{attrs:{title:t.$gettext("camera settings"),"sub-title":t.$gettext("Parameters of the Digital Camera")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.camera_name}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.fnumber}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.focal_length}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.exposure_time}}),t._v(" "),i("form-field",{staticClass:"is-4",attrs:{document:t.document,field:t.fields.iso_speed}})],1)]),t._v(" "),i("form-section",{attrs:{title:t.$gettext("Detailed information"),"sub-title":t.$gettext("Open fields to detail the picture's context")}},[i("div",{staticClass:"columns is-multiline"},[i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.summary}}),t._v(" "),i("form-field",{staticClass:"is-12",attrs:{document:t.document,field:t.fields.description}}),t._v(" "),i("quality-field",{ref:"qualityField",staticClass:"is-4",attrs:{document:t.document}})],1)]),t._v(" "),i("form-section",{attrs:{title:t.$gettext("associations"),"sub-title":t.$gettext("Articles, waypoints, routes or books to be linked.")}},[i("associations-input-row",{attrs:{document:t.document,field:t.fields.articles}}),t._v(" "),i("associations-input-row",{attrs:{document:t.document,field:t.fields.waypoints}}),t._v(" "),i("associations-input-row",{attrs:{document:t.document,field:t.fields.routes}}),t._v(" "),i("associations-input-row",{attrs:{document:t.document,field:t.fields.books}})],1)],1)},n=[],a=i("1784"),o=i("e952"),l=i("a9b2"),r={mixins:[a["a"]],data(){return{newVersionSource:null,uploadingNewFile:!1}},methods:{getImageUrl:o["a"].getMedium,beforeSave(){this.$refs.qualityField.beforeSave()},onFileChange(t){const e=t.target.files[0];e&&(this.uploadingNewFile=!0,Object(l["a"])(e,t=>{this.newVersionSource=t},()=>{},t=>{this.uploadingNewFile=!1,t.geometry&&(t.geometry.version=this.document.geometry.version),Object.assign(this.document,t)},()=>{this.uploadingNewFile=!1}),t.target.value="")}}},d=r,c=i("2877"),u=Object(c["a"])(d,s,n,!1,null,null,null);e["default"]=u.exports},fd5b:function(t,e,i){"use strict";i("8d80")}}]);
//# sourceMappingURL=wiki-tools-legacy.3659a4f4.js.map