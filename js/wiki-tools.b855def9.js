(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["wiki-tools"],{1023:function(t,e,i){"use strict";var n=i("af2c"),o=i.n(n);o.a},"16cf":function(t,e,i){},1928:function(t,e,i){"use strict";var n=i("2b9f"),o=i.n(n);o.a},"19d5":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("edition-container",{attrs:{mode:t.mode,"is-loading":!!t.promise.loading,document:t.document,"generic-errors":t.genericErrors},on:{save:t.save}},[i("form-input-row",{attrs:{document:t.document,field:t.fields.activities}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.categories}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.summary}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.description}}),i("form-row",{attrs:{label:t.$gettext("Terrain"),"is-grouped":"","always-visible":""}},[i("input-simple",{attrs:{type:"number",prefix:t.$gettext("Longitude"),postfix:"°E"},on:{input:t.setGeometryPoint},model:{value:t.longitude,callback:function(e){t.longitude=e},expression:"longitude"}}),i("input-simple",{attrs:{type:"number",prefix:t.$gettext("Latitude"),postfix:"°N"},on:{input:t.setGeometryPoint},model:{value:t.latitude,callback:function(e){t.latitude=e},expression:"latitude"}})],1),i("map-input-row",{attrs:{document:t.document}})],1)},o=[],r=i("7e2f"),s={mixins:[r["a"]]},a=s,l=i("2877"),d=Object(l["a"])(a,n,o,!1,null,null,null);e["default"]=d.exports},"1c08":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("edition-container",{attrs:{mode:t.mode,"is-loading":!!t.promise.loading,document:t.document,"generic-errors":t.genericErrors},on:{save:t.save}},[i("tab-view",[i("tab-item",{attrs:{title:t.$gettext("general informations")}},[i("form-input-row",{attrs:{document:t.document,field:t.fields.title,"is-expanded":""}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.activities}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.book_types}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.author}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.editor}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.langs}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.publication_date}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.nb_pages}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.isbn}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.url,"is-expanded":""}})],1),i("tab-item",{attrs:{title:t.$gettext("description")}},[i("form-input-row",{attrs:{document:t.document,field:t.fields.summary}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.description}})],1),i("tab-item",{attrs:{title:t.$gettext("associations")}},[i("associations-input-row",{attrs:{document:t.document,field:t.fields.articles}}),i("associations-input-row",{attrs:{document:t.document,field:t.fields.waypoints}}),i("associations-input-row",{attrs:{document:t.document,field:t.fields.routes}})],1)],1)],1)},o=[],r=i("7e2f"),s={mixins:[r["a"]]},a=s,l=i("2877"),d=Object(l["a"])(a,n,o,!1,null,null,null);e["default"]=d.exports},"257e":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("edition-container",{attrs:{mode:t.mode,"is-loading":!!t.promise.loading,document:t.document,"generic-errors":t.genericErrors},on:{save:t.save}},[i("tab-view",[i("tab-item",{attrs:{title:t.$gettext("general informations")}},[i("form-input-row",{attrs:{document:t.document,field:t.fields.title,"is-expanded":""}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.article_type}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.activities}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.categories}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.summary}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.description}}),i("quality-input-row",{attrs:{document:t.document}})],1),i("tab-item",{attrs:{title:t.$gettext("associations")}},[i("associations-input-row",{attrs:{document:t.document,field:t.fields.articles}}),i("associations-input-row",{attrs:{document:t.document,field:t.fields.waypoints}}),i("associations-input-row",{attrs:{document:t.document,field:t.fields.outings}}),i("associations-input-row",{attrs:{document:t.document,field:t.fields.routes}}),i("associations-input-row",{attrs:{document:t.document,field:t.fields.books}})],1)],1)],1)},o=[],r=i("7e2f"),s={mixins:[r["a"]]},a=s,l=i("2877"),d=Object(l["a"])(a,n,o,!1,null,null,null);e["default"]=d.exports},"2b9f":function(t,e,i){},5137:function(t,e,i){"use strict";var n=i("abdc"),o=i.n(n);o.a},"545b":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("edition-container",{attrs:{mode:t.mode,"is-loading":!!t.promise.loading,document:t.document,"generic-errors":t.genericErrors},on:{save:t.save}},[i("tab-view",[i("tab-item",{attrs:{title:t.$gettext("Comments")}},[i("form-input-row",{attrs:{document:t.document,field:t.fields.title}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.activities}})],1),i("tab-item",{attrs:{title:t.$gettext("Geolocation")}},[i("form-row",{attrs:{label:t.$gettext("Terrain"),"is-grouped":"","always-visible":""}},[i("form-input",{attrs:{document:t.document,field:t.fields.elevation,prefix:t.$gettext("elevation")}}),i("input-simple",{attrs:{type:"number",prefix:t.$gettext("Longitude"),postfix:"°E"},on:{input:t.setGeometryPoint},model:{value:t.longitude,callback:function(e){t.longitude=e},expression:"longitude"}}),i("input-simple",{attrs:{type:"number",prefix:t.$gettext("Latitude"),postfix:"°N"},on:{input:t.setGeometryPoint},model:{value:t.latitude,callback:function(e){t.latitude=e},expression:"latitude"}})],1),i("map-input-row",{attrs:{document:t.document,"geom-detail-editable":""}})],1),i("tab-item",{attrs:{title:t.$gettext("General informations")}},[i("form-input-row",{attrs:{document:t.document,field:t.fields.date}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.event_type}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.nb_participants}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.nb_impacted}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.severity}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.rescue}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.avalanche_level}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.avalanche_slope}})],1),i("tab-item",{attrs:{title:t.$gettext("General informations")}},[i("form-input-row",{attrs:{document:t.document,field:t.fields.age}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.gender}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.author_status}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.autonomy}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.activity_rate}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.nb_outings}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.previous_injuries}})],1),i("tab-item",{attrs:{title:t.$gettext("Description")}},[i("form-input-row",{attrs:{document:t.document,field:t.fields.summary}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.description,placeholder:t.$gettext("Details of the actual outing and the incident. If you have already written up your outing, you only need to describe the incident, then link it to your outing report (after first uploading it)")}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.anonymous}})],1),i("tab-item",{attrs:{title:t.$gettext("Factors")}},[i("form-input-row",{attrs:{document:t.document,field:t.fields.place,placeholder:t.$gettext("Information on the location of the incident.  Mark the location on the map above, even if you cannot do very accurately, (in which case give more details here).  After completing the report, you can associate it to a route, a climbing site or an outing.")}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.route_study,placeholder:t.$gettext("Maps, guidebooks and outings reports consulted. Evaluation of the route during the outing.")}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.conditions,placeholder:t.$gettext("Describe the information gathered before the outing and how these evolved once on route: weather forecast, avalanche risk reports, amount of refreezing, condition of the snow/ice/rock, reports from the previous days, etc.")}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.training,placeholder:t.$gettext("At the time of the incident, describe your technical level, your physical condition, how tired you had become just prior to the incident, and, if at altitude, how well you were acclimatized, etc.")}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.motivations,placeholder:t.$gettext("Why did you choose this outing? When did you decide to engage. What influenced your decision (holiday time, long journey, hotel/hut bookings, time spent already in preparation, limited possibilities, etc.)?")}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.group_management,placeholder:t.$gettext("Communication of the individual objectives and expectations, the thoughts and observations during the outing, discussions on new strategies, the way the group conducted itself and divided responsibilities, was the group used to working together, core aspirations, etc.")}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.risk,placeholder:t.$gettext("Have you (re)evaluated the risks at each change in the situation? What factors might have affected your awareness, such as tiredness, stress, relaxing having passed the main difficulties or on the descent, on a section reputed to be easy, presence of footprints or other people, complete confidence in the leader of the group, etc.")}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.time_management,placeholder:t.$gettext("Had a timetable for the route been foreseen? Did you maintain the schedule? Was time a factor in causing the incident?")}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.safety,placeholder:t.$gettext("Types of belay and protection used, verifications between climbers, snowpack stability tests, testing of avalanche transceivers, etc.")}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.reduce_impact}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.increase_impact}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.modifications}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.other_comments,placeholder:t.$gettext("Briefly describe any injuries. Comments that do not fit into any other fields can be entered here.")}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.disable_comments}})],1),i("tab-item",{attrs:{title:t.$gettext("associations")}},[i("associations-input-row",{attrs:{document:t.document,field:t.fields.articles}}),i("associations-input-row",{attrs:{document:t.document,field:t.fields.routes}}),i("associations-input-row",{attrs:{document:t.document,field:t.fields.outings}})],1)],1)],1)},o=[],r=i("7e2f"),s={mixins:[r["a"]]},a=s,l=i("2877"),d=Object(l["a"])(a,n,o,!1,null,null,null);e["default"]=d.exports},"5bf5":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("edition-container",{attrs:{mode:t.mode,"is-loading":!!t.promise.loading,document:t.document,"generic-errors":t.genericErrors},on:{save:t.save}},[i("form-input-row",{attrs:{document:t.document,field:t.fields.title}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.area_type}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.summary}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.description}})],1)},o=[],r=i("7e2f"),s={mixins:[r["a"]]},a=s,l=i("2877"),d=Object(l["a"])(a,n,o,!1,null,null,null);e["default"]=d.exports},"5edb":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("edition-container",{attrs:{mode:t.mode,"is-loading":!!t.promise.loading,document:t.document,"generic-errors":t.genericErrors},on:{save:t.save}},[i("tab-view",[i("tab-item",{attrs:{title:t.$gettext("general informations")}},[i("form-row",{attrs:{label:t.$gettext("waypoint"),"is-grouped":""}},[i("form-input",{attrs:{document:t.document,field:t.fields.waypoint_type,prefix:t.$gettext("type")}}),i("form-input",{attrs:{document:t.document,field:t.fields.title,prefix:t.$gettext("title"),"is-expanded":""}})],1),i("form-input-row",{attrs:{document:t.document,field:t.fields.elevation_min}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.prominence}}),i("form-row",{attrs:{label:t.$gettext("Terrain"),"is-grouped":""}},[i("form-input",{attrs:{document:t.document,field:t.fields.elevation,prefix:t.$gettext("elevation")}}),i("input-simple",{attrs:{type:"number",prefix:t.$gettext("Longitude"),postfix:"°E"},on:{input:t.setGeometryPoint},model:{value:t.longitude,callback:function(e){t.longitude=e},expression:"longitude"}}),i("input-simple",{attrs:{type:"number",prefix:t.$gettext("Latitude"),postfix:"°N"},on:{input:t.setGeometryPoint},model:{value:t.latitude,callback:function(e){t.latitude=e},expression:"latitude"}})],1),i("map-input-row",{attrs:{document:t.document}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.maps_info,"is-expanded":"",label:t.$gettext("maps_references"),placeholder:t.$gettext("Add here maps not automatically referenced")}})],1),i("tab-item",{attrs:{title:t.$gettext("Transport & road or PT access")}},[i("form-input-row",{attrs:{document:t.document,field:t.fields.snow_clearance_rating}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.lift_access}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.public_transportation_rating}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.parking_fee}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.public_transportation_types}})],1),i("tab-item",{attrs:{title:t.$gettext("Types and styles")}},[i("form-input-row",{attrs:{document:t.document,field:t.fields.climbing_outdoor_types}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.climbing_indoor_types}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.climbing_styles}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.rock_types}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.orientations}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.best_periods}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.access_time}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.rain_proof}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.children_proof}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.ground_types}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.product_types}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.slackline_types}})],1),i("tab-item",{attrs:{title:t.$gettext("Numbers")}},[i("form-input-row",{attrs:{document:t.document,field:t.fields.length}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.slope}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.custodianship}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.capacity_staffed}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.capacity}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.matress_unstaffed}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.blanket_unstaffed}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.gas_unstaffed}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.heating_unstaffed}}),i("form-row",{attrs:{label:t.$gettext("height"),"is-grouped":""}},[i("form-input",{attrs:{document:t.document,field:t.fields.height_min,prefix:"min"}}),i("form-input",{attrs:{document:t.document,field:t.fields.height_median,prefix:"median"}}),i("form-input",{attrs:{document:t.document,field:t.fields.height_max,prefix:"max"}})],1),i("form-input-row",{attrs:{document:t.document,field:t.fields.routes_quantity}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.slackline_length_max}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.slackline_length_min}})],1),i("tab-item",{attrs:{title:t.$gettext("ratings")}},[i("form-input-row",{attrs:{document:t.document,field:t.fields.equipment_ratings}}),i("form-row",{attrs:{label:t.$gettext("ratings"),"is-grouped":""}},[i("form-input",{attrs:{document:t.document,field:t.fields.climbing_rating_min,prefix:"min"}}),i("form-input",{attrs:{document:t.document,field:t.fields.climbing_rating_median,prefix:"median"}}),i("form-input",{attrs:{document:t.document,field:t.fields.climbing_rating_max,prefix:"max"}})],1),i("form-input-row",{attrs:{document:t.document,field:t.fields.paragliding_rating}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.exposition_rating}})],1),i("tab-item",{attrs:{title:t.$gettext("Contact")}},[i("form-input-row",{attrs:{document:t.document,field:t.fields.url}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.phone}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.phone_custodian}})],1),i("tab-item",{attrs:{title:t.$gettext("Description")}},[i("form-input-row",{attrs:{document:t.document,field:t.fields.summary,placeholder:t.$gettext("write a summary")}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.description,placeholder:t.descriptionPlaceholder}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.access,placeholder:t.accessPlaceholder}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.access_period,placeholder:t.accessPeriodPlaceholder}})],1),i("tab-item",{attrs:{title:t.$gettext("associations")}},[i("associations-input-row",{attrs:{document:t.document,field:t.fields.articles}}),i("associations-input-row",{attrs:{document:t.document,field:t.fields.waypoints}}),i("associations-input-row",{attrs:{document:t.document,field:t.fields.xreports}}),i("associations-input-row",{attrs:{document:t.document,field:t.fields.books}})],1)],1)],1)},o=[],r=i("7e2f"),s={mixins:[r["a"]],computed:{descriptionPlaceholder:function(){return"access"===this.document.waypoint_type?this.$gettext("Describe here the waypoint"):this.$gettext("Describe road access")},accessPlaceholder:function(){var t=this.document.waypoint_type;return"access"===t?this.$gettext("Describe pt access"):"hut"===t||"climbing_indoor"===t||"climbing_outdoor"===t?this.$gettext("Describe pedestrian access"):this.$gettext("Describe access")},accessPeriodPlaceholder:function(){var t=this.document.waypoint_type;return"hut"===t||"gite"===t||"camp_site"===t?this.$gettext("Describe opening periods"):"local_product"===t?this.$gettext("Describe opening hours"):"climbing_outdoor"===t?this.$gettext("Describe access restrictions"):this.$gettext("Describe access period")}}},a=s,l=i("2877"),d=Object(l["a"])(a,n,o,!1,null,null,null);e["default"]=d.exports},6375:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("edition-container",{attrs:{mode:t.mode,"is-loading":!!t.promise.loading,document:t.document,"generic-errors":t.genericErrors},on:{save:t.save}},[i("tab-view",[i("tab-item",{attrs:{title:t.$gettext("general informations")}},[i("form-input-row",{attrs:{document:t.document,field:t.fields.title,"is-expanded":""}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.activities}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.climbing_outdoor_type}}),i("map-input-row",{attrs:{document:t.document,"geom-detail-editable":""}}),i("form-input-row",{attrs:{label:t.$gettext("main waypoint"),document:t.document,field:t.fields.main_waypoint_id}}),i("associations-input-row",{attrs:{label:t.$gettext("Waypoints"),document:t.document,field:t.fields.waypoints}}),i("associations-input-row",{attrs:{document:t.document,field:t.fields.routes}}),i("associations-input-row",{attrs:{document:t.document,field:t.fields.articles}}),i("associations-input-row",{attrs:{document:t.document,field:t.fields.books}}),i("associations-input-row",{attrs:{document:t.document,field:t.fields.xreports}}),i("quality-input-row",{attrs:{document:t.document}})],1),i("tab-item",{attrs:{title:t.$gettext("configuration")}},[i("form-input-row",{attrs:{document:t.document,field:t.fields.orientations}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.route_types}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.configuration}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.rock_types}})],1),i("tab-item",{attrs:{title:t.$gettext("numbers")}},[i("form-row",{attrs:{label:t.$gettext("elevation"),"is-grouped":"",helper:"1063027#height-diff_up"}},[i("form-input",{attrs:{document:t.document,field:t.fields.elevation_min,prefix:t.$gettext("min")}}),i("form-input",{attrs:{document:t.document,field:t.fields.elevation_max,prefix:t.$gettext("max")}})],1),i("form-row",{attrs:{label:t.$gettext("height_diff"),"is-grouped":""}},[i("form-input",{attrs:{document:t.document,field:t.fields.height_diff_up,prefix:t.$gettext("up")}}),i("form-input",{attrs:{document:t.document,field:t.fields.height_diff_down,prefix:t.$gettext("down")}})],1),i("form-input-row",{attrs:{document:t.document,field:t.fields.height_diff_access}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.height_diff_difficulties}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.difficulties_height}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.route_length}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.mtb_length_asphalt}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.mtb_length_trail}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.mtb_height_diff_portages}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.durations}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.lift_access}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.slackline_type}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.slackline_height}})],1),i("tab-item",{attrs:{title:t.$gettext("ratings")}},[i("form-input-row",{attrs:{document:t.document,field:t.fields.global_rating}}),i("form-row",{attrs:{label:t.$gettext("Climbing ratings"),"is-grouped":""}},[i("form-input",{attrs:{document:t.document,field:t.fields.rock_free_rating,prefix:t.$gettext("free")}}),i("form-input",{attrs:{document:t.document,field:t.fields.rock_required_rating,prefix:t.$gettext("required")}}),i("form-input",{attrs:{document:t.document,field:t.fields.aid_rating,prefix:t.$gettext("aid")}})],1),i("form-input-row",{attrs:{document:t.document,field:t.fields.labande_global_rating}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.labande_ski_rating}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.ski_rating}}),i("form-row",{attrs:{label:t.$gettext("Ice & mixed"),"is-grouped":""}},[i("form-input",{attrs:{document:t.document,field:t.fields.ice_rating,prefix:t.$gettext("ice")}}),i("form-input",{attrs:{document:t.document,field:t.fields.mixed_rating,prefix:t.$gettext("mixed")}})],1),i("form-input-row",{attrs:{document:t.document,field:t.fields.snowshoe_rating}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.via_ferrata_rating}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.hiking_rating}}),i("form-row",{attrs:{label:t.$gettext("MTB ratings"),"is-grouped":""}},[i("form-input",{attrs:{document:t.document,field:t.fields.mtb_down_rating,prefix:t.$gettext("down")}}),i("form-input",{attrs:{document:t.document,field:t.fields.mtb_up_rating,prefix:t.$gettext("up")}})],1),i("form-row",{attrs:{label:t.$gettext("Exposition & engagement"),"is-grouped":""}},[i("form-input",{attrs:{document:t.document,field:t.fields.equipment_rating,prefix:t.$gettext("equipment")}}),i("form-input",{attrs:{document:t.document,field:t.fields.ski_exposition,prefix:t.$gettext("ski_exposition")}}),i("form-input",{attrs:{document:t.document,field:t.fields.engagement_rating,prefix:t.$gettext("engagement_rating")}}),i("form-input",{attrs:{document:t.document,field:t.fields.risk_rating,prefix:t.$gettext("risk_rating")}}),i("form-input",{attrs:{document:t.document,field:t.fields.exposition_rock_rating,prefix:t.$gettext("exposition_rock_rating")}}),i("form-input",{attrs:{document:t.document,field:t.fields.hiking_mtb_exposition,prefix:t.$gettext("hiking_mtb_exposition")}})],1)],1),i("tab-item",{attrs:{title:t.$gettext("Comments")}},[i("form-input-row",{attrs:{document:t.document,field:t.fields.summary}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.route_history,placeholder:t.$gettext("Describe historical information about the route (date, names..) here")}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.description}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.slackline_anchor1}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.slackline_anchor2}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.remarks}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.gear,placeholder:t.$gettext("Describe here the gear needed for this route")}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.glacier_gear}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.external_resources,placeholder:t.$gettext("Books and websites not already associated to this route")}})],1)],1)],1)},o=[],r=i("7e2f"),s={mixins:[r["a"]]},a=s,l=i("2877"),d=Object(l["a"])(a,n,o,!1,null,null,null);e["default"]=d.exports},7228:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("edition-container",{attrs:{mode:t.mode,"is-loading":!!t.promise.loading,document:t.document,"generic-errors":t.genericErrors},on:{save:t.save}},[i("form-input-row",{attrs:{document:t.document,field:t.fields.title}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.editor}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.scale}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.code}})],1)},o=[],r=i("7e2f"),s={mixins:[r["a"]]},a=s,l=i("2877"),d=Object(l["a"])(a,n,o,!1,null,null,null);e["default"]=d.exports},"7e2f":function(t,e,i){"use strict";i("8615"),i("ac4d"),i("8a81"),i("ac6a"),i("456d"),i("a481"),i("7f7f"),i("28a5");var n=i("25c4"),o=i("188b"),r=i("dac7"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{directives:[{name:"show",rawName:"v-show",value:t.isActive,expression:"isActive"}]},[t._t("default")],2)},a=[],l={props:{title:{type:String,required:!0}},data:function(){return{isActive:!0,visible:!0,hasError:!1}},mounted:function(){var t=!0,e=!1,i=void 0;try{for(var n,o=this.$children[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var r=n.value;r.$watch("visible",this.checkVisibility),r.$watch("hasError",this.checkHasError)}}catch(t){e=!0,i=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw i}}this.checkVisibility(),this.checkHasError()},methods:{checkVisibility:function(){this.visible=!1;var t=!0,e=!1,i=void 0;try{for(var n,o=this.$children[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var r=n.value;if(r.visible)return void(this.visible=!0)}}catch(t){e=!0,i=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw i}}},checkHasError:function(){this.hasError=!1;var t=!0,e=!1,i=void 0;try{for(var n,o=this.$children[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var r=n.value;!0===r.hasError&&(this.hasError=!0)}}catch(t){e=!0,i=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw i}}}}},d=l,u=i("2877"),c=Object(u["a"])(d,s,a,!1,null,null,null),m=c.exports,f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tab-view"},[i("div",{staticClass:"tabs is-centered is-large is-boxed is-fullwidth"},[i("ul",t._l(t.tabs,function(e,n){return i("li",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"tab.visible"}],key:n,class:{"is-active":e.isActive}},[i("a",{on:{click:function(i){t.selectTab(e)}}},[i("span",{staticClass:"is-first-letter-uppercase",class:{"has-text-danger":e.hasError}},[t._v("\n                        "+t._s(e.title)+"\n                    ")])])])}))]),t._t("default")],2)},h=[],p={data:function(){return{tabs:[]}},mounted:function(){this.tabs=this.$children;var t=!0,e=!1,i=void 0;try{for(var n,o=this.tabs[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var r=n.value;r.isActive=!1}}catch(t){e=!0,i=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw i}}this.tabs[0].isActive=!0},methods:{selectTab:function(t){if(!t.isActive){var e=!0,i=!1,n=void 0;try{for(var o,r=this.tabs[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var s=o.value;if(s.isActive){s.isActive=!1;break}}}catch(t){i=!0,n=t}finally{try{e||null==r.return||r.return()}finally{if(i)throw n}}t.isActive=!0}}}},g=p,v=(i("8264"),Object(u["a"])(g,f,h,!1,null,"6f9c4656",null)),_=v.exports,w=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.document?i("div",{staticClass:"section",class:{preview:t.isPreview}},[i("html-header",{attrs:{title:"Edit a document"}}),i("h1",{staticClass:"title"},[t._v("\n        Edit\n        "),i("document-title",{attrs:{document:t.document}}),t._v("\n        in\n        "+t._s(t.$gettext(t.$route.params.lang))+"\n        "),i("button",{staticClass:"button is-size-6",on:{click:function(e){t.isPreview=!t.isPreview}}},[i("fa-icon",{attrs:{icon:t.isPreview?"edit":"eye"}}),t._v("\n             \n            "),t.isPreview?i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Back to edit mode")]):i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Preview")])],1)],1),t._l(t.genericErrors,function(e,n){return i("div",{key:n,staticClass:"has-text-danger has-text-weight-bold"},[t._v("\n        "+t._s(e.name)+"\n        :\n        "+t._s(e.description)+"\n    ")])}),t.isPreview?i(t.$documentUtils.getDocumentType(t.document.type)+"-view",{tag:"component",attrs:{draft:t.document}}):t._t("default",[t._v("\n        ...\n    ")]),i("form-row",{attrs:{label:"","always-visible":"","is-grouped":""}},[i("div",{staticClass:"control"},[i("button",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button is-primary",class:{"is-loading":t.isLoading},on:{click:function(e){t.$emit("save",t.comment)}}},[t._v("\n                Save\n            ")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:"edit"==t.mode,expression:"mode=='edit'"}],staticClass:"control is-expanded"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],staticClass:"input",attrs:{type:"text",placeholder:t.$gettext("comment")},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}})]),i("div",{staticClass:"control"},[i("button",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button is-danger",on:{click:function(e){t.$router.go(-1)}}},[t._v("\n                Cancel\n            ")])])])],2):t._e()},b=[],y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"field is-horizontal"},[i("div",{staticClass:"field-label is-normal"},[i("label",{staticClass:"label is-first-letter-uppercase"},[i("marker-helper",{attrs:{name:t.helper}}),t._v("\n            "+t._s(t.label)+"\n        ")],1)]),i("div",{staticClass:"field-body"},[i("div",{staticClass:"field",class:{"is-grouped is-grouped-multiline":t.isGrouped,"is-expanded":t.isExpanded,"is-narrow":t.isNarrow}},[t._t("default")],2)])])},x=[],$={props:{label:{type:String,default:""},alwaysVisible:{type:Boolean,default:!1},isGrouped:{type:Boolean,default:!1},isExpanded:{type:Boolean,default:!1},isNarrow:{type:Boolean,default:!1},helper:{type:String,default:void 0}},data:function(){return{visible:!0,hasError:!1}},mounted:function(){var t=!0,e=!1,i=void 0;try{for(var n,o=this.$children[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var r=n.value;r.$watch("visible",this.checkVisibility),r.$watch("hasError",this.checkHasError)}}catch(t){e=!0,i=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw i}}this.checkVisibility(),this.checkHasError()},methods:{checkVisibility:function(){this.visible=this.alwaysVisible;var t=!0,e=!1,i=void 0;try{for(var n,o=this.$children[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var r=n.value;r.visible&&(this.visible=this.visible||!0)}}catch(t){e=!0,i=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw i}}},checkHasError:function(){this.hasError=!1;var t=!0,e=!1,i=void 0;try{for(var n,o=this.$children[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var r=n.value;!0===r.hasError&&(this.hasError=!0)}}catch(t){e=!0,i=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw i}}}}},k=$,C=Object(u["a"])(k,y,x,!1,null,null,null),E=C.exports,T=i("9f3f"),S=i("9b99"),M=i("62d5"),N=i("4947"),P=i("b32b"),j=i("e78b"),V=i("d83c"),L=i("a790"),A=i("d1c3"),D=i("cece"),I={components:{FormRow:E,AreaView:T["a"],ArticleView:S["a"],BookView:M["a"],ImageView:N["a"],MapView:P["a"],OutingView:j["a"],ProfileView:D["a"],RouteView:V["a"],WaypointView:L["a"],XreportView:A["a"]},props:{document:{type:Object,default:null},genericErrors:{type:Array,required:!0},isLoading:{type:Boolean,required:!0},mode:{type:String,required:!0}},data:function(){return{comment:"",isPreview:!1}},watch:{$route:"reset"},methods:{reset:function(){this.comment="",this.isPreview=!1}}},O=I,q=(i("1023"),Object(u["a"])(O,w,b,!1,null,"1cfa1e48",null)),R=q.exports,F=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("form-row",{attrs:{label:t.label||t.$gettext(t.field.name),helper:void 0===t.helper?t.field.helper:t.helper,"is-expanded":t.isExpanded||"markdown"==t.field.type,"is-narrow":!t.isExpanded&&"markdown"!=t.field.type}},[i("form-input",{ref:"input",attrs:{document:t.document,field:t.field,helper:null,placeholder:t.placeholder,"is-expanded":t.isExpanded}})],1)},B=[],Q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return"activities"==t.field.name?i("input-activity",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],attrs:{"error-message":t.errorMessage,"show-labels":""},model:{value:t.document.activities,callback:function(e){t.$set(t.document,"activities",e)},expression:"document.activities"}}):"orientations"==t.field.name?i("input-orientation",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],model:{value:t.document.orientations,callback:function(e){t.$set(t.document,"orientations",e)},expression:"document.orientations"}}):"main_waypoint_id"==t.field.name?i("div",{staticClass:"control select",class:{"is-danger":t.hasError}},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.document.main_waypoint_id,expression:"document.main_waypoint_id"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.document,"main_waypoint_id",e.target.multiple?i:i[0])}}},[i("option",{domProps:{value:null}}),t._l(t.document.associations.waypoints,function(e){return i("option",{key:e.document_id,domProps:{value:e.document_id}},[t._v("\n            "+t._s(t.$documentUtils.getDocumentTitle(e))+"\n        ")])})],2)]):"conditions_levels"==t.field.name?i("input-conditions-levels",{model:{value:t.object[t.field.name],callback:function(e){t.$set(t.object,t.field.name,e)},expression:"object[field.name]"}}):"markdown"==t.field.type?i("input-markdown",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],attrs:{placeholder:t.placeholder},model:{value:t.object[t.field.name],callback:function(e){t.$set(t.object,t.field.name,e)},expression:"object[field.name]"}}):"associations"==t.field.parent?i("input-document",{attrs:{"document-type":t.field.documentType,multiple:"","error-message":t.errorMessage},on:{add:function(e){t.$documentUtils.propagateAssociationProperties(t.document,arguments[0])}},model:{value:t.object[t.field.name],callback:function(e){t.$set(t.object,t.field.name,e)},expression:"object[field.name]"}}):t.field.values&&t.field.multiple?i("input-multi-select",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],attrs:{options:t.field.values,required:t.field.required,i18n:t.field.i18n,"error-message":t.errorMessage},model:{value:t.object[t.field.name],callback:function(e){t.$set(t.object,t.field.name,e)},expression:"object[field.name]"}}):t.simpleInputType?i("input-simple",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],ref:"input",attrs:{prefix:t.prefix,helper:void 0===t.helper?t.field.helper:t.helper,"is-expanded":t.isExpanded,postfix:t.field.unit,type:t.field.type,min:t.field.min,max:t.field.max,disabled:t.field.disabled,placeholder:t.placeholder||t.$gettext(t.field.name),required:t.field.required,i18n:t.field.i18n,options:t.field.values,"error-message":t.errorMessage},on:{"click:prefix":function(e){t.$emit("click:prefix")},input:function(e){t.$emit("input",arguments[0])}},model:{value:t.object[t.field.name],callback:function(e){t.$set(t.object,t.field.name,e)},expression:"object[field.name]"}}):"boolean"==t.field.type?i("input-yes-no",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],model:{value:t.object[t.field.name],callback:function(e){t.$set(t.object,t.field.name,e)},expression:"object[field.name]"}}):i("div",{staticClass:"notification is-danger"},[t._v("\n    Unknown field type : "+t._s(t.field.type)+"\n")])},G=[],U=(i("6762"),i("2fdb"),i("a50d")),H=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content"},[i("table",[i("tr",[i("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Location / elevation / orientation")]),i("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("soft snow")]),i("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("total snow")]),i("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("comment")]),i("th")]),t._l(t.levels,function(e,n){return i("tr",{key:n},[i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.level_place,expression:"level.level_place"}],staticClass:"input",attrs:{type:"text"},domProps:{value:e.level_place},on:{input:function(i){i.target.composing||t.$set(e,"level_place",i.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.level_snow_height_soft,expression:"level.level_snow_height_soft"}],staticClass:"input",attrs:{type:"text"},domProps:{value:e.level_snow_height_soft},on:{input:function(i){i.target.composing||t.$set(e,"level_snow_height_soft",i.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.level_snow_height_total,expression:"level.level_snow_height_total"}],staticClass:"input",attrs:{type:"text"},domProps:{value:e.level_snow_height_total},on:{input:function(i){i.target.composing||t.$set(e,"level_snow_height_total",i.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.level_comment,expression:"level.level_comment"}],staticClass:"input",attrs:{type:"text"},domProps:{value:e.level_comment},on:{input:function(i){i.target.composing||t.$set(e,"level_comment",i.target.value)}}})]),i("td",[i("delete-button",{staticClass:"is-size-2 delete-button",on:{click:function(e){t.levels.splice(n,1)}}})],1)])}),i("tr",[i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.newLevel.level_place,expression:"newLevel.level_place"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.newLevel.level_place},on:{input:function(e){e.target.composing||t.$set(t.newLevel,"level_place",e.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.newLevel.level_snow_height_soft,expression:"newLevel.level_snow_height_soft"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.newLevel.level_snow_height_soft},on:{input:function(e){e.target.composing||t.$set(t.newLevel,"level_snow_height_soft",e.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.newLevel.level_snow_height_total,expression:"newLevel.level_snow_height_total"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.newLevel.level_snow_height_total},on:{input:function(e){e.target.composing||t.$set(t.newLevel,"level_snow_height_total",e.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.newLevel.level_comment,expression:"newLevel.level_comment"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.newLevel.level_comment},on:{input:function(e){e.target.composing||t.$set(t.newLevel,"level_comment",e.target.value)}}})]),i("td",[i("fa-icon",{staticClass:"is-size-2 add-button has-text-success",attrs:{icon:"plus-circle"},on:{click:t.addLevel}})],1)])],2)])},W=[],z={props:{value:{type:String,default:null}},data:function(){return{levels:[],newLevel:{}}},watch:{levels:{handler:"change",deep:!0}},created:function(){var t=this.value?JSON.parse(this.value):[],e=!0,i=!1,n=void 0;try{for(var o,r=t[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var s=o.value;(s.level_place||s.level_place||s.level_place||s.level_place)&&this.levels.push(s)}}catch(t){i=!0,n=t}finally{try{e||null==r.return||r.return()}finally{if(i)throw n}}},methods:{change:function(){this.$emit("input",JSON.stringify(this.levels))},addLevel:function(){this.levels.push(this.newLevel),this.newLevel={}}}},J=z,K=(i("f546"),Object(u["a"])(J,H,W,!1,null,"9bbcd018",null)),X=K.exports,Y={components:{InputConditionsLevels:X},mixins:[U["c"],U["a"]],props:{prefix:{type:String,default:null},isExpanded:{type:Boolean,default:null},helper:{type:String,default:void 0},placeholder:{type:String,default:void 0}},computed:{editedLocale:function(){return this.document.locales[0]},object:function(){if("document"===this.field.parent)return this.document;if("locales"===this.field.parent)return this.editedLocale;if("associations"===this.field.parent)return this.document.associations;throw new Error("Unexpected parent value : ".concat(this.field.parent))},visible:function(){return this.field.isVisibleFor(this.document)},simpleInputType:function(){return["text","number","url","date","tel"].includes(this.field.type)},hasError:function(){return null!==this.field.error},errorMessage:function(){return this.hasError?this.$gettext(this.field.error.description):null}}},Z=Y,tt=Object(u["a"])(Z,Q,G,!1,null,null,null),et=tt.exports,it={components:{FormRow:E,FormInput:et},mixins:[U["c"],U["a"]],props:{isExpanded:{type:Boolean,default:!1},helper:{type:String,default:void 0},label:{type:String,default:void 0},placeholder:{type:String,default:void 0}},computed:{visible:function(){return this.$refs.input.visible},hasError:function(){return!0===this.$refs.input.hasError}}},nt=it,ot=Object(u["a"])(nt,F,B,!1,null,null,null),rt=ot.exports,st=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("form-row",{attrs:{label:t.$gettext("quality"),"always-visible":"","is-grouped":""}},[t.autoComputeQuality&&t.automaticComputationAvailable?i("input-simple",{attrs:{value:t.$gettext(t.computedQuality),disabled:""}}):i("input-simple",{attrs:{options:t.$options.quality_types,i18n:"",required:""},model:{value:t.manualQuality,callback:function(e){t.manualQuality=e},expression:"manualQuality"}}),t.automaticComputationAvailable?i("div",{staticClass:"control"},[i("input-checkbox",{model:{value:t.autoComputeQuality,callback:function(e){t.autoComputeQuality=e},expression:"autoComputeQuality"}},[i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Auto-compute quality")])])],1):t._e()],1)},at=[];i("386d");function lt(t,e){var i=!0,n=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var a=r.value;if(t.activities.includes(a))return!0}}catch(t){n=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(n)throw o}}return!1}function dt(t,e){return t.geometry&&t.geometry.geom_detail||e.route_description}function ut(t,e){if(e.conditions)return!0;if(!e.conditions_levels)return!1;var i=e.conditions_levels;return!!(i.level_place||i.level_comment||i.level_snow_height_total||i.level_snow_height_soft)}function ct(t){return t.elevation_up_snow||t.elevation_down_snow||t.snow_quantity||t.snow_quality||t.length_total||t.glacier_rating}function mt(t,e){var i=0;return i+=t.geometry&&t.geometry.geom?1:0,i+=t.activities&&t.activities.length?.5:0,i+=t.categories&&t.categories.length?.5:0,i+=t.associations.waypoints.length||t.associations.routes.length?1:0,i+=e.title?1:0,i+=e.description?1:0,i}function ft(t,e){var i=e.description||"",n=0;return n+=t.associations.waypoints.length?1:0,n+=t.associations.images.length?1:0,n+=e.summary?1:0,n+=i?1:-1,n+=-1!==i.search(/(^|\n)##/g)?1:0,n+=-1!==i.search(/\[img=/g)?1:0,n}function ht(t,e){function i(){var i=0;return i+=dt(t,e)?.5:0,i+=ct(t)?.5:0,t.access_condition&&"snowy"!==t.access_condition&&t.elevation_access?i+=.5:"snowy"===t.access_condition&&t.elevation_access&&e.access_comment&&(i+=.5),i+="no"!==t.avalanche_signs&&e.avalanches?.5:0,i+=e.description?.5:0,i+=e.weather?.5:0,i+=e.condition_rating?.5:0,i=ut(t,e)?i+1:Math.min(i,2),i}function n(){var i=0;return i+=dt(t,e)?.5:0,i+=t.condition_rating?.5:0,i+=e.description?1:0,i+=e.timing?.5:0,i+=e.weather?.5:0,i=ut(t,e)?i+1.5:Math.min(i,2),i}function o(){var i=0;return i+=dt(t,e)?.5:0,i+=e.description?1:0,i+=e.timing?.5:0,i+=e.weather?.5:0,i=e.conditions?i+2:Math.min(i,2),i}var r=0,s=0,a=0;return lt(t,["skitouring","snowshoeing"])&&(r=i()),lt(t,["snow_ice_mixed","ice_climbing","mountain_climbing"])&&(s=n()),lt(t,["rock_climbing","hiking","mountain_biking","via_ferrata","paragliding","slacklining"])&&(a=o()),Math.max(r,s,a)}var pt={components:{FormRow:E},props:{document:{type:Object,default:null}},data:function(){return{autoComputeQuality:!0,computedQuality:"empty",manualQuality:null}},computed:{editedLocale:function(){return this.document?this.document.locales[0]:null},automaticComputationAvailable:function(){return["o","c","i"].includes(this.document.type)}},watch:{document:{handler:"computeQuality",deep:!0,immediate:!0},autoComputeQuality:"storeQuality",manualQuality:"storeQuality"},methods:{storeQuality:function(){this.document.quality=this.autoComputeQuality&&this.automaticComputationAvailable?this.computedQuality:this.manualQuality},computeQuality:function(){if(!this.document)return null;null===this.manualQuality&&(this.manualQuality=this.document.quality);var t=this.document.quality;"o"===this.document.type?t=ht(this.document,this.editedLocale):"c"===this.document.type?t=ft(this.document,this.editedLocale):"i"===this.document.type&&(t=mt(this.document,this.editedLocale)),this.computedQuality=t<1?"empty":t<2?"draft":t<3?"medium":t<4?"fine":"great",this.storeQuality()}},quality_types:n["a"].quality_types},gt=pt,vt=Object(u["a"])(gt,st,at,!1,null,null,null),_t=vt.exports,wt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"field"},[t.geomDetailEditable?i("form-row",{attrs:{label:t.$gettext("Trace"),"always-visible":"","is-grouped":""}},[i("div",{staticClass:"control upload-button"},[i("input",{ref:"gpxFileInput",attrs:{type:"file",accept:".gpx"},on:{change:t.uploadGpxTrack}}),i("button",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button is-primary",on:{click:function(e){t.$refs.gpxFileInput.click()}}},[t._v("\n                Upload a GPS track\n            ")])]),i("div",{staticClass:"control is-expanded"},[i("label",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("\n                You may also drag, draw or edit the track on the map.\n            ")])])]):t._e(),i("form-row",{attrs:{label:"","always-visible":""}},[i("map-view",{ref:"map",attrs:{documents:[t.document],editable:"","geom-detail-editable":t.geomDetailEditable}})],1)],1)},bt=[],yt=(i("6d67"),i("d92a"),{components:{FormRow:E},mixins:[U["a"]],props:{geomDetailEditable:{type:Boolean,default:!1}},computed:{hasError:function(){return!1},visible:function(){return!0}},methods:{uploadGpxTrack:function(t){var e=new FileReader;e.onload=function(){this.$refs.map.setDocumentGeometryFromGpx(e.result)}.bind(this),e.readAsText(t.target.files[0])}}}),xt=yt,$t=(i("1928"),Object(u["a"])(xt,wt,bt,!1,null,"dbe6eb02",null)),kt=$t.exports,Ct=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("form-row",{attrs:{label:t.label||t.$gettext(t.field.name),helper:void 0!==t.helper?t.helper:t.field.helper,"always-visible":"","is-grouped":""}},[i("form-input",{ref:"input",attrs:{document:t.document,field:t.field}}),i("div",{staticClass:"control is-expanded"},[i("div",{staticClass:"columns is-multiline "},t._l(t.document.associations[t.field.name],function(e){return i("div",{key:e.document_id,staticClass:"column is-4"},[i("document-card",{attrs:{document:e,"show-delete-button":"","not-clickable":""},on:{delete:function(i){t.$documentUtils.removeAssociation(t.document,e)}}})],1)}))])],1)},Et=[],Tt={components:{FormRow:E,FormInput:et},mixins:[U["c"],U["a"]],props:{label:{type:String,default:null},helper:{type:String,default:void 0}},computed:{visible:function(){return this.$refs.input.visible},hasError:function(){return!0===this.$refs.input.hasError}}},St=Tt,Mt=Object(u["a"])(St,Ct,Et,!1,null,null,null),Nt=Mt.exports,Pt=new r["a"].format.GeoJSON,jt="EPSG:4326",Vt="EPSG:3857";e["a"]={components:{EditionContainer:R,TabView:_,TabItem:m,FormRow:E,FormInputRow:rt,FormInput:et,QualityInputRow:_t,MapInputRow:kt,AssociationsInputRow:Nt},data:function(){return{promise:{},fields:null,genericErrors:[],comment:"",latitude:null,longitude:null}},computed:{mode:function(){return this.$route.name.split("-")[1]},documentType:function(){return this.$route.name.replace(/-(edit|add)/,"")},documentId:function(){return this.$route.params.id},lang:function(){return this.$route.params.lang},document:function(){return this.promise.data},editedLocale:function(){return this.document?this.document.locales[0]:null}},watch:{$route:{handler:"load",immediate:!0},"document.geometry.geom":"setLatitudeLongitude"},beforeRouteEnter:function(t,e,i){i(function(t){t.$user.isLogged||t.$router.push({name:"auth"})})},methods:{load:function(){var t=this;if(this.fields=n["a"].objectDefinitions[this.documentType].fields,this.cleanErrors(),this.latitude=null,this.longitude=null,"edit"===this.mode)this.promise=o["a"][this.documentType].get(this.documentId,this.lang).then(this.afterLoad);else{this.promise={data:this.$documentUtils.buildDocument(this.documentType,this.lang)},"outing"===this.documentType&&o["a"].profile.get(this.$user.id).then(function(e){t.$documentUtils.addAssociation(t.document,e.data)});for(var e=Object.keys(this.$route.query),i=0;i<e.length;i++){var r=e[i],s=this.$documentUtils.getDocumentType(r);if(s&&this.$route.query[r]){var a=String(this.$route.query[r]).split(","),l=!0,d=!1,u=void 0;try{for(var c,m=a[Symbol.iterator]();!(l=(c=m.next()).done);l=!0){var f=c.value;o["a"][s].get(f).then(function(e){t.$documentUtils.addAssociation(t.document,e.data)})}}catch(t){d=!0,u=t}finally{try{l||null==m.return||m.return()}finally{if(d)throw u}}}}this.$route.query.act&&(this.document.activities=this.$route.query.act.split(",")),this.afterLoad()}},setGeometryPoint:function(){if(null!==this.latitude&&null!==this.longitude){var t=parseFloat(String(this.longitude).replace(",",".")),e=parseFloat(String(this.latitude).replace(",",".")),i=new r["a"].geom.Point([t,e]);i.transform(jt,Vt),this.document.geometry.geom=Pt.writeGeometry(i)}},setLatitudeLongitude:function(){if(!this.document||!this.document.geometry||!this.document.geometry.geom)return{};var t=Pt.readGeometry(this.document.geometry.geom);t.transform(Vt,jt);var e=t.getCoordinates();this.longitude=Math.round(1e6*e[0])/1e6,this.latitude=Math.round(1e6*e[1])/1e6},afterLoad:function(){},beforeSave:function(){},save:function(t){var e,i=this;(this.beforeSave(),this.hasError())||(e="edit"===this.mode?o["a"][this.documentType].save(this.document,t).then(function(){i.$router.push({name:i.documentType,params:{id:i.document.document_id}})}):o["a"][this.documentType].create(this.document).then(function(t){i.$router.push({name:i.documentType,params:{id:t.data.document_id}})}),e.catch(function(t){var e=t.response.data;i.dispatchErrors(e.errors)}))},hasError:function(){for(var t=!1,e=Object.values(this.fields),i=0;i<e.length;i++){var n=e[i],o=n.getError(this.document,this.editedLocale);t=t||null!==o,n.error=o}return t},dispatchErrors:function(t){this.cleanErrors();var e=!0,i=!1,n=void 0;try{for(var o,r=t[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var s=o.value,a=s.name.split(".");"locales"===a[0]?this.dispatchError(a[2],s):"associations"===a[0]?this.dispatchError(a[1],s):this.dispatchError(a[0],s)}}catch(t){i=!0,n=t}finally{try{e||null==r.return||r.return()}finally{if(i)throw n}}},dispatchError:function(t,e){void 0===this.fields[t]?this.genericErrors.push(e):this.fields[t].error=e},cleanErrors:function(){this.genericErrors=[];for(var t=Object.values(this.fields),e=0;e<t.length;e++){var i=t[e];i.error=null}}}}},8264:function(t,e,i){"use strict";var n=i("fe38"),o=i.n(n);o.a},8527:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"section"},[i("html-header",{attrs:{title:t.$gettext("Versions")}}),i("loading-notification",{attrs:{promise:t.promise}}),t.history?i("div",[i("h1",{staticClass:"title is-1"},[i("icon-document",{attrs:{"document-type":t.documentType}}),i("router-link",{attrs:{to:{name:t.documentType,params:{id:t.documentId,lang:t.lang}}}},[t._v(t._s(t.history.title))])],1),i("div",{staticClass:"buttons"},[i("diff-link",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button is-primary",attrs:{"document-type":t.documentType,id:t.documentId,lang:t.lang,"version-from":t.versionFrom,"version-to":t.versionTo}},[t._v("\n                Compare selected versions\n            ")]),i("router-link",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button is-link",attrs:{to:{name:t.documentType,params:{id:t.documentId,lang:t.lang}}}},[t._v("\n                See the latest version\n            ")]),i("button",{staticClass:"button",attrs:{disabled:""}},[i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("\n                    List of versions for language:\n                ")]),i("span",[t._v("\n                     "+t._s(t.$gettext(t.lang))+"\n                ")])])],1),i("table",{staticClass:"table is-striped"},[i("thead",[i("tr",[i("th"),i("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Created on")]),i("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Author")]),i("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("comment")])])]),i("tbody",t._l(t.history.versions,function(e){return i("tr",{key:e.verion_id},[i("td",["profile"!=t.documentType?i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.versionFrom,expression:"versionFrom"}],attrs:{disabled:t.versionTo<=e.version_id,type:"radio",name:"versionFrom"},domProps:{value:e.version_id,checked:t._q(t.versionFrom,e.version_id)},on:{change:function(i){t.versionFrom=e.version_id}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:t.versionTo,expression:"versionTo"}],attrs:{disabled:t.versionFrom>=e.version_id,type:"radio",name:"versionTo"},domProps:{value:e.version_id,checked:t._q(t.versionTo,e.version_id)},on:{change:function(i){t.versionTo=e.version_id}}}),e.version_id!==t.veryFirstVersionId?i("diff-link",{attrs:{"document-type":t.documentType,id:t.documentId,lang:t.lang,"version-from":"prev","version-to":e.version_id}}):t._e()],1):t._e()]),i("td",[i("version-link",{attrs:{"document-type":t.documentType,id:t.documentId,version:e.version_id,lang:t.lang}},[t._v("\n                            "+t._s(t.$moment.toTechnicalString(e.written_at))+"\n                        ")])],1),i("td",[i("contributor-link",{attrs:{contributor:e}})],1),i("td",[t._v("\n                        "+t._s(e.comment)+"\n                    ")])])}))]),i("div",{staticClass:"buttons"},[i("diff-link",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button is-primary",attrs:{"document-type":t.documentType,id:t.documentId,lang:t.lang,"version-from":t.versionFrom,"version-to":t.versionTo}},[t._v("\n                Compare selected versions\n            ")]),i("router-link",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button is-link",attrs:{to:{name:t.documentType,params:{id:t.documentId,lang:t.lang}}}},[t._v("\n                See the latest version\n            ")])],1)]):t._e()],1)},o=[],r=(i("7f7f"),i("a481"),i("188b")),s={data:function(){return{promise:{},versionFrom:void 0,versionTo:void 0}},computed:{documentId:function(){return parseInt(this.$route.params.id)},documentType:function(){return this.$route.name.replace("-history","")},lang:function(){return this.$route.params.lang},veryFirstVersionId:function(){return this.history.versions[this.history.versions.length-1].version_id},history:function(){return this.promise.data}},watch:{$route:{handler:"load",immediate:!0}},methods:{load:function(){var t=this;this.promise=r["a"][this.documentType].getHistory(this.documentId,this.lang).then(function(e){var i=e.data.versions.reverse();e.data.versions=i,t.versionFrom=i[i.length>1?1:0].version_id,t.versionTo=i[0].version_id})}}},a=s,l=(i("c404"),i("2877")),d=Object(l["a"])(a,n,o,!1,null,"244d8b78",null);e["default"]=d.exports},"85fb":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"section content"},[i("html-header",{attrs:{title:t.$gettext("Differences between versions")}}),i("h1",[i("icon-document",{staticClass:"is-large",attrs:{"document-type":t.documentType}}),i("span",[t._v("diff")]),t._v(" ("+t._s(t.lang)+") :\n        "),i("router-link",{attrs:{to:{name:t.documentType,params:{id:t.documentId,lang:t.lang}}}},[t._v(t._s(t.title))])],1),i("div",{staticClass:"columns"},[t.oldVersion?i("div",{staticClass:"column"},[i("div",[i("version-link",{attrs:{"document-type":t.documentType,id:t.documentId,version:t.oldVersion.version.version_id,lang:t.lang}},[t._v("\n                    Revision #"+t._s(t.oldVersion.document.version)+" as of "+t._s(t.$moment.toTechnicalString(t.oldVersion.version.written_at))+"\n                ")])],1),i("div",[t._v("\n                by "),i("contributor-link",{attrs:{contributor:t.oldVersion.version}})],1),i("div",[t._v("\n                "+t._s(t.oldVersion.version.comment)+"\n            ")]),i("div",[t.oldVersion.previous_version_id?i("diff-link",{attrs:{"document-type":t.documentType,id:t.documentId,lang:t.lang,"version-from":t.oldVersion.previous_version_id,"version-to":t.oldVersion.version.version_id}},[t._v("\n                    ← previous difference\n                ")]):i("span",[t._v("\n                    this is the first version\n                ")])],1)]):t._e(),t.newVersion?i("div",{staticClass:"column"},[i("div",[i("version-link",{attrs:{"document-type":t.documentType,id:t.documentId,version:t.newVersion.version.version_id,lang:t.lang}},[t._v("\n                    Revision #"+t._s(t.newVersion.document.version)+" as of "+t._s(t.$moment.toTechnicalString(t.newVersion.version.written_at))+"\n                ")])],1),i("div",[t._v("\n                by "),i("contributor-link",{attrs:{contributor:t.newVersion.version}})],1),i("div",[t._v("\n                "+t._s(t.newVersion.version.comment)+"\n            ")]),i("div",[t.newVersion.next_version_id?i("diff-link",{attrs:{"document-type":t.documentType,id:t.documentId,lang:t.lang,"version-from":t.newVersion.version.version_id,"version-to":t.newVersion.next_version_id}},[t._v("\n                    next difference →\n                ")]):i("span",[t._v("\n                    this is the last version\n                ")])],1)]):t._e()]),t.oldVersion&&t.newVersion?i("div",[t.geometryHasChanged?i("div",[i("map-view",{attrs:{"old-document":t.oldVersion.document,"new-document":t.newVersion.document}})],1):t._e(),t._l(Object.keys(t.diffProperties),function(e){return i("div",{key:e},[i("h2",{staticClass:"title is-2"},[t._v(t._s(t.$gettext(e)))]),i("div",{staticClass:"columns"},[i("div",{staticClass:"column is-6"},[i("del",[t._v(t._s(t.diffProperties[e].old))])]),i("div",{staticClass:"column is-6"},[i("ins",[t._v(t._s(t.diffProperties[e].new))])])])])}),t._l(Object.keys(t.diffLocales),function(e){return i("div",{key:e},[i("h2",{staticClass:"title is-2"},[t._v(t._s(t.$gettext(e)))]),i("div",{staticClass:"locale-diff"},[i("div",[i("pre",[t._v("                        "),t._v("\n                        "),i("code",{domProps:{innerHTML:t._s(t.diffLocales[e])}}),t._v("                    ")])])])])})],2):t._e()],1)},o=[],r=(i("28a5"),i("ac4d"),i("8a81"),i("55dd"),i("6762"),i("2fdb"),i("57e7"),i("d25f"),i("ac6a"),i("456d"),i("7f7f"),i("a481"),i("2caf"),i("188b")),s=i("25c4");function a(t){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function l(t){return l="function"===typeof Symbol&&"symbol"===a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)},l(t)}i("9865"),i("4917"),i("c5f6");function d(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}var u=-1,c=1,m=0;d.Diff,d.diff_main=function(t,e,i,n){"undefined"===typeof n&&(n=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var o=n;if(null==t||null==e)throw new Error("Null input. (diff_main)");if(t==e)return t?[[m,t]]:[];"undefined"===typeof i&&(i=!0);var r=i,s=this.diff_commonPrefix(t,e),a=t.substring(0,s);t=t.substring(s),e=e.substring(s),s=this.diff_commonSuffix(t,e);var l=t.substring(t.length-s);t=t.substring(0,t.length-s),e=e.substring(0,e.length-s);var d=this.diff_compute_(t,e,r,o);return a&&d.unshift([m,a]),l&&d.push([m,l]),this.diff_cleanupMerge(d),d},d.diff_compute_=function(t,e,i,n){var o;if(!t)return[[c,e]];if(!e)return[[u,t]];var r=t.length>e.length?t:e,s=t.length>e.length?e:t,a=r.indexOf(s);if(-1!=a)return o=[[c,r.substring(0,a)],[m,s],[c,r.substring(a+s.length)]],t.length>e.length&&(o[0][0]=o[2][0]=u),o;if(1==s.length)return[[u,t],[c,e]];var l=this.diff_halfMatch_(t,e);if(l){var d=l[0],f=l[1],h=l[2],p=l[3],g=l[4],v=this.diff_main(d,h,i,n),_=this.diff_main(f,p,i,n);return v.concat([[m,g]],_)}return i&&t.length>100&&e.length>100?this.diff_lineMode_(t,e,n):this.diff_bisect_(t,e,n)},d.diff_lineMode_=function(t,e,i){var n=this.diff_linesToChars_(t,e);t=n.chars1,e=n.chars2;var o=n.lineArray,r=this.diff_main(t,e,!1,i);this.diff_charsToLines_(r,o),this.diff_cleanupSemantic(r),r.push([m,""]);var s=0,a=0,l=0,d="",f="";while(s<r.length){switch(r[s][0]){case c:l++,f+=r[s][1];break;case u:a++,d+=r[s][1];break;case m:if(a>=1&&l>=1){r.splice(s-a-l,a+l),s=s-a-l;for(var h=this.diff_main(d,f,!1,i),p=h.length-1;p>=0;p--)r.splice(s,0,h[p]);s+=h.length}l=0,a=0,d="",f="";break}s++}return r.pop(),r},d.diff_bisect_=function(t,e,i){for(var n=t.length,o=e.length,r=Math.ceil((n+o)/2),s=r,a=2*r,l=new Array(a),d=new Array(a),m=0;m<a;m++)l[m]=-1,d[m]=-1;l[s+1]=0,d[s+1]=0;for(var f=n-o,h=f%2!=0,p=0,g=0,v=0,_=0,w=0;w<r;w++){if((new Date).getTime()>i)break;for(var b=-w+p;b<=w-g;b+=2){var y,x=s+b;y=b==-w||b!=w&&l[x-1]<l[x+1]?l[x+1]:l[x-1]+1;var $=y-b;while(y<n&&$<o&&t.charAt(y)==e.charAt($))y++,$++;if(l[x]=y,y>n)g+=2;else if($>o)p+=2;else if(h){var k=s+f-b;if(k>=0&&k<a&&-1!=d[k]){var C=n-d[k];if(y>=C)return this.diff_bisectSplit_(t,e,y,$,i)}}}for(var E=-w+v;E<=w-_;E+=2){var T=s+E,S=void 0;S=E==-w||E!=w&&d[T-1]<d[T+1]?d[T+1]:d[T-1]+1;var M=S-E;while(S<n&&M<o&&t.charAt(n-S-1)==e.charAt(o-M-1))S++,M++;if(d[T]=S,S>n)_+=2;else if(M>o)v+=2;else if(!h){var N=s+f-E;if(N>=0&&N<a&&-1!=l[N]){var P=l[N],j=s+P-N;if(S=n-S,P>=S)return this.diff_bisectSplit_(t,e,P,j,i)}}}}return[[u,t],[c,e]]},d.diff_bisectSplit_=function(t,e,i,n,o){var r=t.substring(0,i),s=e.substring(0,n),a=t.substring(i),l=e.substring(n),d=this.diff_main(r,s,!1,o),u=this.diff_main(a,l,!1,o);return d.concat(u)},d.diff_linesToChars_=function(t,e){var i=[],n={};function o(t){var e="",o=0,r=-1,s=i.length;while(r<t.length-1){r=t.indexOf("\n",o),-1==r&&(r=t.length-1);var a=t.substring(o,r+1);o=r+1,(n.hasOwnProperty?n.hasOwnProperty(a):void 0!==n[a])?e+=String.fromCharCode(n[a]):(e+=String.fromCharCode(s),n[a]=s,i[s++]=a)}return e}i[0]="";var r=o(t),s=o(e);return{chars1:r,chars2:s,lineArray:i}},d.diff_charsToLines_=function(t,e){for(var i=0;i<t.length;i++){for(var n=t[i][1],o=[],r=0;r<n.length;r++)o[r]=e[n.charCodeAt(r)];t[i][1]=o.join("")}},d.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;var i=0,n=Math.min(t.length,e.length),o=n,r=0;while(i<o)t.substring(r,o)==e.substring(r,o)?(i=o,r=i):n=o,o=Math.floor((n-i)/2+i);return o},d.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;var i=0,n=Math.min(t.length,e.length),o=n,r=0;while(i<o)t.substring(t.length-o,t.length-r)==e.substring(e.length-o,e.length-r)?(i=o,r=i):n=o,o=Math.floor((n-i)/2+i);return o},d.diff_commonOverlap_=function(t,e){var i=t.length,n=e.length;if(0==i||0==n)return 0;i>n?t=t.substring(i-n):i<n&&(e=e.substring(0,i));var o=Math.min(i,n);if(t==e)return o;var r=0,s=1;while(s==s){var a=t.substring(o-s),l=e.indexOf(a);if(-1==l)return r;s+=l,0!=l&&t.substring(o-s)!=e.substring(0,s)||(r=s,s++)}},d.diff_halfMatch_=function(t,e){if(this.Diff_Timeout<=0)return null;var i=t.length>e.length?t:e,n=t.length>e.length?e:t;if(i.length<4||2*n.length<i.length)return null;var o=this;function r(t,e,i){var n,r,s,a,l=t.substring(i,i+Math.floor(t.length/4)),d=-1,u="";while(-1!=(d=e.indexOf(l,d+1))){var c=o.diff_commonPrefix(t.substring(i),e.substring(d)),m=o.diff_commonSuffix(t.substring(0,i),e.substring(0,d));u.length<m+c&&(u=e.substring(d-m,d)+e.substring(d,d+c),n=t.substring(0,i-m),r=t.substring(i+c),s=e.substring(0,d-m),a=e.substring(d+c))}return 2*u.length>=t.length?[n,r,s,a,u]:null}var s,a,l,d,u,c=r(i,n,Math.ceil(i.length/4)),m=r(i,n,Math.ceil(i.length/2));if(!c&&!m)return null;s=m?c&&c[4].length>m[4].length?c:m:c,t.length>e.length?(a=s[0],l=s[1],d=s[2],u=s[3]):(d=s[0],u=s[1],a=s[2],l=s[3]);var f=s[4];return[a,l,d,u,f]},d.diff_cleanupSemantic=function(t){var e=!1,i=[],n=0,o=null,r=0,s=0,a=0,l=0,d=0;while(r<t.length)t[r][0]==m?(i[n++]=r,s=l,a=d,l=0,d=0,o=t[r][1]):(t[r][0]==c?l+=t[r][1].length:d+=t[r][1].length,o&&o.length<=Math.max(s,a)&&o.length<=Math.max(l,d)&&(t.splice(i[n-1],0,[u,o]),t[i[n-1]+1][0]=c,n--,n--,r=n>0?i[n-1]:-1,s=0,a=0,l=0,d=0,o=null,e=!0)),r++;e&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),r=1;while(r<t.length){if(t[r-1][0]==u&&t[r][0]==c){var f=t[r-1][1],h=t[r][1],p=this.diff_commonOverlap_(f,h),g=this.diff_commonOverlap_(h,f);p>=g?(p>=f.length/2||p>=h.length/2)&&(t.splice(r,0,[m,h.substring(0,p)]),t[r-1][1]=f.substring(0,f.length-p),t[r+1][1]=h.substring(p),r++):(g>=f.length/2||g>=h.length/2)&&(t.splice(r,0,[m,f.substring(0,g)]),t[r-1][0]=c,t[r-1][1]=h.substring(0,h.length-g),t[r+1][0]=u,t[r+1][1]=f.substring(g),r++),r++}r++}},d.diff_cleanupSemanticLossless=function(t){function e(t,e){if(!t||!e)return 6;var i=t.charAt(t.length-1),n=e.charAt(0),o=i.match(d.nonAlphaNumericRegex_),r=n.match(d.nonAlphaNumericRegex_),s=o&&i.match(d.whitespaceRegex_),a=r&&n.match(d.whitespaceRegex_),l=s&&i.match(d.linebreakRegex_),u=a&&n.match(d.linebreakRegex_),c=l&&t.match(d.blanklineEndRegex_),m=u&&e.match(d.blanklineStartRegex_);return c||m?5:l||u?4:o&&!s&&a?3:s||a?2:o||r?1:0}var i=1;while(i<t.length-1){if(t[i-1][0]==m&&t[i+1][0]==m){var n=t[i-1][1],o=t[i][1],r=t[i+1][1],s=this.diff_commonSuffix(n,o);if(s){var a=o.substring(o.length-s);n=n.substring(0,n.length-s),o=a+o.substring(0,o.length-s),r=a+r}var l=n,u=o,c=r,f=e(n,o)+e(o,r);while(o.charAt(0)===r.charAt(0)){n+=o.charAt(0),o=o.substring(1)+r.charAt(0),r=r.substring(1);var h=e(n,o)+e(o,r);h>=f&&(f=h,l=n,u=o,c=r)}t[i-1][1]!=l&&(l?t[i-1][1]=l:(t.splice(i-1,1),i--),t[i][1]=u,c?t[i+1][1]=c:(t.splice(i+1,1),i--))}i++}},d.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,d.whitespaceRegex_=/\s/,d.linebreakRegex_=/[\r\n]/,d.blanklineEndRegex_=/\n\r?\n$/,d.blanklineStartRegex_=/^\r?\n\r?\n/,d.diff_cleanupEfficiency=function(t){var e=!1,i=[],n=0,o=null,r=0,s=!1,a=!1,l=!1,d=!1;while(r<t.length)t[r][0]==m?(t[r][1].length<this.Diff_EditCost&&(l||d)?(i[n++]=r,s=l,a=d,o=t[r][1]):(n=0,o=null),l=d=!1):(t[r][0]==u?d=!0:l=!0,o&&(s&&a&&l&&d||o.length<this.Diff_EditCost/2&&s+a+l+d==3)&&(t.splice(i[n-1],0,[u,o]),t[i[n-1]+1][0]=c,n--,o=null,s&&a?(l=d=!0,n=0):(n--,r=n>0?i[n-1]:-1,l=d=!1),e=!0)),r++;e&&this.diff_cleanupMerge(t)},d.diff_cleanupMerge=function(t){t.push([m,""]);var e,i=0,n=0,o=0,r="",s="";while(i<t.length)switch(t[i][0]){case c:o++,s+=t[i][1],i++;break;case u:n++,r+=t[i][1],i++;break;case m:n+o>1?(0!==n&&0!==o&&(e=this.diff_commonPrefix(s,r),0!==e&&(i-n-o>0&&t[i-n-o-1][0]==m?t[i-n-o-1][1]+=s.substring(0,e):(t.splice(0,0,[m,s.substring(0,e)]),i++),s=s.substring(e),r=r.substring(e)),e=this.diff_commonSuffix(s,r),0!==e&&(t[i][1]=s.substring(s.length-e)+t[i][1],s=s.substring(0,s.length-e),r=r.substring(0,r.length-e))),0===n?t.splice(i-o,n+o,[c,s]):0===o?t.splice(i-n,n+o,[u,r]):t.splice(i-n-o,n+o,[u,r],[c,s]),i=i-n-o+(n?1:0)+(o?1:0)+1):0!==i&&t[i-1][0]==m?(t[i-1][1]+=t[i][1],t.splice(i,1)):i++,o=0,n=0,r="",s="";break}""===t[t.length-1][1]&&t.pop();var a=!1;i=1;while(i<t.length-1)t[i-1][0]==m&&t[i+1][0]==m&&(t[i][1].substring(t[i][1].length-t[i-1][1].length)==t[i-1][1]?(t[i][1]=t[i-1][1]+t[i][1].substring(0,t[i][1].length-t[i-1][1].length),t[i+1][1]=t[i-1][1]+t[i+1][1],t.splice(i-1,1),a=!0):t[i][1].substring(0,t[i+1][1].length)==t[i+1][1]&&(t[i-1][1]+=t[i+1][1],t[i][1]=t[i][1].substring(t[i+1][1].length)+t[i+1][1],t.splice(i+1,1),a=!0)),i++;a&&this.diff_cleanupMerge(t)},d.diff_xIndex=function(t,e){var i,n=0,o=0,r=0,s=0;for(i=0;i<t.length;i++){if(t[i][0]!==c&&(n+=t[i][1].length),t[i][0]!==u&&(o+=t[i][1].length),n>e)break;r=n,s=o}return t.length!=i&&t[i][0]===u?s:s+(e-r)},d.diff_prettyHtml=function(t){for(var e=[],i=/&/g,n=/</g,o=/>/g,r=/\n/g,s=0;s<t.length;s++){var a=t[s][0],l=t[s][1],d=l.replace(i,"&amp;").replace(n,"&lt;").replace(o,"&gt;").replace(r,"&para;<br>");switch(a){case c:e[s]='<ins style="background:#e6ffe6;">'+d+"</ins>";break;case u:e[s]='<del style="background:#ffe6e6;">'+d+"</del>";break;case m:e[s]="<span>"+d+"</span>";break}}return e.join("")},d.diff_text1=function(t){for(var e=[],i=0;i<t.length;i++)t[i][0]!==c&&(e[i]=t[i][1]);return e.join("")},d.diff_text2=function(t){for(var e=[],i=0;i<t.length;i++)t[i][0]!==u&&(e[i]=t[i][1]);return e.join("")},d.diff_levenshtein=function(t){for(var e=0,i=0,n=0,o=0;o<t.length;o++){var r=t[o][0],s=t[o][1];switch(r){case c:i+=s.length;break;case u:n+=s.length;break;case m:e+=Math.max(i,n),i=0,n=0;break}}return e+=Math.max(i,n),e},d.diff_toDelta=function(t){for(var e=[],i=0;i<t.length;i++)switch(t[i][0]){case c:e[i]="+"+encodeURI(t[i][1]);break;case u:e[i]="-"+t[i][1].length;break;case m:e[i]="="+t[i][1].length;break}return e.join("\t").replace(/%20/g," ")},d.diff_fromDelta=function(t,e){for(var i=[],n=0,o=0,r=e.split(/\t/g),s=0;s<r.length;s++){var a=r[s].substring(1);switch(r[s].charAt(0)){case"+":try{i[n++]=[c,decodeURI(a)]}catch(t){throw new Error("Illegal escape in diff_fromDelta: "+a)}break;case"-":case"=":var l=parseInt(a,10);if(isNaN(l)||l<0)throw new Error("Invalid number in diff_fromDelta: "+a);var d=t.substring(o,o+=l);"="==r[s].charAt(0)?i[n++]=[m,d]:i[n++]=[u,d];break;default:if(r[s])throw new Error("Invalid diff operation in diff_fromDelta: "+r[s])}}if(o!=t.length)throw new Error("Delta length ("+o+") does not equal source text length ("+t.length+").");return i},d.match_main=function(t,e,i){if(null==t||null==e||null==i)throw new Error("Null input. (match_main)");return i=Math.max(0,Math.min(i,t.length)),t==e?0:t.length?t.substring(i,i+e.length)==e?i:this.match_bitap_(t,e,i):-1},d.match_bitap_=function(t,e,i){if(e.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var n=this.match_alphabet_(e),o=this;function r(t,n){var r=t/e.length,s=Math.abs(i-n);return o.Match_Distance?r+s/o.Match_Distance:s?1:r}var s=this.Match_Threshold,a=t.indexOf(e,i);-1!=a&&(s=Math.min(r(0,a),s),a=t.lastIndexOf(e,i+e.length),-1!=a&&(s=Math.min(r(0,a),s)));var l,d,u=1<<e.length-1;a=-1;for(var c,m=e.length+t.length,f=0;f<e.length;f++){l=0,d=m;while(l<d)r(f,i+d)<=s?l=d:m=d,d=Math.floor((m-l)/2+l);m=d;var h=Math.max(1,i-d+1),p=Math.min(i+d,t.length)+e.length,g=Array(p+2);g[p+1]=(1<<f)-1;for(var v=p;v>=h;v--){var _=n[t.charAt(v-1)];if(g[v]=0===f?(g[v+1]<<1|1)&_:(g[v+1]<<1|1)&_|(c[v+1]|c[v])<<1|1|c[v+1],g[v]&u){var w=r(f,v-1);if(w<=s){if(s=w,a=v-1,!(a>i))break;h=Math.max(1,2*i-a)}}}if(r(f+1,i)>s)break;c=g}return a},d.match_alphabet_=function(t){for(var e={},i=0;i<t.length;i++)e[t.charAt(i)]=0;for(var n=0;n<t.length;n++)e[t.charAt(n)]|=1<<t.length-n-1;return e},d.patch_addContext_=function(t,e){if(0!=e.length){var i=e.substring(t.start2,t.start2+t.length1),n=0;while(e.indexOf(i)!=e.lastIndexOf(i)&&i.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin)n+=this.Patch_Margin,i=e.substring(t.start2-n,t.start2+t.length1+n);n+=this.Patch_Margin;var o=e.substring(t.start2-n,t.start2);o&&t.diffs.unshift([m,o]);var r=e.substring(t.start2+t.length1,t.start2+t.length1+n);r&&t.diffs.push([m,r]),t.start1-=o.length,t.start2-=o.length,t.length1+=o.length+r.length,t.length2+=o.length+r.length}},d.patch_make=function(t,e,i){var n,o;if("string"===typeof t&&"string"===typeof e&&"undefined"===typeof i)n=t,o=this.diff_main(n,e,!0),o.length>2&&(this.diff_cleanupSemantic(o),this.diff_cleanupEfficiency(o));else if(t&&"object"===l(t)&&"undefined"===typeof e&&"undefined"===typeof i)o=t,n=this.diff_text1(o);else if("string"===typeof t&&e&&"object"===l(e)&&"undefined"===typeof i)n=t,o=e;else{if("string"!==typeof t||"string"!==typeof e||!i||"object"!==l(i))throw new Error("Unknown call format to patch_make.");n=t,o=i}if(0===o.length)return[];for(var r=[],s=new d.patch_obj,a=0,f=0,h=0,p=n,g=n,v=0;v<o.length;v++){var _=o[v][0],w=o[v][1];switch(a||_===m||(s.start1=f,s.start2=h),_){case c:s.diffs[a++]=o[v],s.length2+=w.length,g=g.substring(0,h)+w+g.substring(h);break;case u:s.length1+=w.length,s.diffs[a++]=o[v],g=g.substring(0,h)+g.substring(h+w.length);break;case m:w.length<=2*this.Patch_Margin&&a&&o.length!=v+1?(s.diffs[a++]=o[v],s.length1+=w.length,s.length2+=w.length):w.length>=2*this.Patch_Margin&&a&&(this.patch_addContext_(s,p),r.push(s),s=new d.patch_obj,a=0,p=g,f=h);break}_!==c&&(f+=w.length),_!==u&&(h+=w.length)}return a&&(this.patch_addContext_(s,p),r.push(s)),r},d.patch_deepCopy=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i],o=new d.patch_obj;o.diffs=[];for(var r=0;r<n.diffs.length;r++)o.diffs[r]=n.diffs[r].slice();o.start1=n.start1,o.start2=n.start2,o.length1=n.length1,o.length2=n.length2,e[i]=o}return e},d.patch_apply=function(t,e){if(0==t.length)return[e,[]];t=this.patch_deepCopy(t);var i=this.patch_addPadding(t);e=i+e+i,this.patch_splitMax(t);for(var n=0,o=[],r=0;r<t.length;r++){var s,a,l=t[r].start2+n,d=this.diff_text1(t[r].diffs),f=-1;if(d.length>this.Match_MaxBits?(s=this.match_main(e,d.substring(0,this.Match_MaxBits),l),-1!=s&&(f=this.match_main(e,d.substring(d.length-this.Match_MaxBits),l+d.length-this.Match_MaxBits),(-1==f||s>=f)&&(s=-1))):s=this.match_main(e,d,l),-1==s)o[r]=!1,n-=t[r].length2-t[r].length1;else if(o[r]=!0,n=s-l,a=-1==f?e.substring(s,s+d.length):e.substring(s,f+this.Match_MaxBits),d==a)e=e.substring(0,s)+this.diff_text2(t[r].diffs)+e.substring(s+d.length);else{var h=this.diff_main(d,a,!1);if(d.length>this.Match_MaxBits&&this.diff_levenshtein(h)/d.length>this.Patch_DeleteThreshold)o[r]=!1;else{this.diff_cleanupSemanticLossless(h);for(var p,g=0,v=0;v<t[r].diffs.length;v++){var _=t[r].diffs[v];_[0]!==m&&(p=this.diff_xIndex(h,g)),_[0]===c?e=e.substring(0,s+p)+_[1]+e.substring(s+p):_[0]===u&&(e=e.substring(0,s+p)+e.substring(s+this.diff_xIndex(h,g+_[1].length))),_[0]!==u&&(g+=_[1].length)}}}}return e=e.substring(i.length,e.length-i.length),[e,o]},d.patch_addPadding=function(t){for(var e=this.Patch_Margin,i="",n=1;n<=e;n++)i+=String.fromCharCode(n);for(var o=0;o<t.length;o++)t[o].start1+=e,t[o].start2+=e;var r=t[0],s=r.diffs;if(0==s.length||s[0][0]!=m)s.unshift([m,i]),r.start1-=e,r.start2-=e,r.length1+=e,r.length2+=e;else if(e>s[0][1].length){var a=e-s[0][1].length;s[0][1]=i.substring(s[0][1].length)+s[0][1],r.start1-=a,r.start2-=a,r.length1+=a,r.length2+=a}if(r=t[t.length-1],s=r.diffs,0==s.length||s[s.length-1][0]!=m)s.push([m,i]),r.length1+=e,r.length2+=e;else if(e>s[s.length-1][1].length){var l=e-s[s.length-1][1].length;s[s.length-1][1]+=i.substring(0,l),r.length1+=l,r.length2+=l}return i},d.patch_splitMax=function(t){for(var e=this.Match_MaxBits,i=0;i<t.length;i++)if(!(t[i].length1<=e)){var n=t[i];t.splice(i--,1);var o=n.start1,r=n.start2,s="";while(0!==n.diffs.length){var a=new d.patch_obj,l=!0;a.start1=o-s.length,a.start2=r-s.length,""!==s&&(a.length1=a.length2=s.length,a.diffs.push([m,s]));while(0!==n.diffs.length&&a.length1<e-this.Patch_Margin){var f=n.diffs[0][0],h=n.diffs[0][1];f===c?(a.length2+=h.length,r+=h.length,a.diffs.push(n.diffs.shift()),l=!1):f===u&&1==a.diffs.length&&a.diffs[0][0]==m&&h.length>2*e?(a.length1+=h.length,o+=h.length,l=!1,a.diffs.push([f,h]),n.diffs.shift()):(h=h.substring(0,e-a.length1-this.Patch_Margin),a.length1+=h.length,o+=h.length,f===m?(a.length2+=h.length,r+=h.length):l=!1,a.diffs.push([f,h]),h==n.diffs[0][1]?n.diffs.shift():n.diffs[0][1]=n.diffs[0][1].substring(h.length))}s=this.diff_text2(a.diffs),s=s.substring(s.length-this.Patch_Margin);var p=this.diff_text1(n.diffs).substring(0,this.Patch_Margin);""!==p&&(a.length1+=p.length,a.length2+=p.length,0!==a.diffs.length&&a.diffs[a.diffs.length-1][0]===m?a.diffs[a.diffs.length-1][1]+=p:a.diffs.push([m,p])),l||t.splice(++i,0,a)}}},d.patch_toText=function(t){for(var e=[],i=0;i<t.length;i++)e[i]=t[i];return e.join("")},d.patch_fromText=function(t){var e=[];if(!t)return e;var i=t.split("\n"),n=0,o=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;while(n<i.length){var r=i[n].match(o);if(!r)throw new Error("Invalid patch string: "+i[n]);var s=new d.patch_obj;e.push(s),s.start1=parseInt(r[1],10),""===r[2]?(s.start1--,s.length1=1):"0"==r[2]?s.length1=0:(s.start1--,s.length1=parseInt(r[2],10)),s.start2=parseInt(r[3],10),""===r[4]?(s.start2--,s.length2=1):"0"==r[4]?s.length2=0:(s.start2--,s.length2=parseInt(r[4],10)),n++;while(n<i.length){var a=i[n].charAt(0);try{var l=decodeURI(i[n].substring(1))}catch(t){throw new Error("Illegal escape in patch_fromText: "+l)}if("-"==a)s.diffs.push([u,l]);else if("+"==a)s.diffs.push([c,l]);else if(" "==a)s.diffs.push([m,l]);else{if("@"==a)break;if(""!==a)throw new Error('Invalid patch mode "'+a+'" in: '+l)}n++}}return e},d.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},d.patch_obj.toString=function(){var t,e;t=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1,e=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2;for(var i,n=["@@ -"+t+" +"+e+" @@\n"],o=0;o<this.diffs.length;o++){switch(this.diffs[o][0]){case c:i="+";break;case u:i="-";break;case m:i=" ";break}n[o+1]=i+encodeURI(this.diffs[o][1])+"\n"}return n.join("").replace(/%20/g," ")};var f=function(t,e){return Array.isArray(t)||Array.isArray(e)?JSON.stringify(t)!==JSON.stringify(e):null===t&&null!==e||null!==t&&null===e||t!==e},h={data:function(){return{title:null,oldVersion:null,newVersion:null,diffProperties:{},diffLocales:{}}},computed:{documentId:function(){return parseInt(this.$route.params.id)},documentType:function(){return this.$route.name.replace("-diff","")},lang:function(){return this.$route.params.lang},geoLocalized:function(){return s["a"].objectDefinitions[this.documentType].geoLocalized},geometryHasChanged:function(){return!!this.geoLocalized&&(this.oldVersion.document.geometry.geom!==this.newVersion.document.geometry.geom||this.oldVersion.document.geometry.geom_detail!==this.newVersion.document.geometry.geom_detail)}},watch:{$route:{handler:"loadVersions",immediate:!0}},methods:{loadVersions:function(){this.loadVersionSmart(this.$route.params.versionFrom,"oldVersion",this.$route.params.versionTo),this.loadVersion(this.$route.params.versionTo,"newVersion")},getKeys:function(t,e,i){var n=Object.keys(t).concat(Object.keys(e));return i=i||[],n=n.filter(function(t,e,n){return n.indexOf(t)===e&&!i.includes(t)}),n.sort(),n},buildDiff:function(){if(this.diffProperties={},this.diffLocales={},!this.oldVersion||!this.newVersion)return"Waiting for other version";var t=this.getKeys(this.oldVersion.document,this.newVersion.document,["version","locales","geometry","cooked"]),e=!0,i=!1,n=void 0;try{for(var o,r=t[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var s=o.value;f(this.oldVersion.document[s],this.newVersion.document[s])&&(this.diffProperties[s]={old:this.oldVersion.document[s],new:this.newVersion.document[s]})}}catch(t){i=!0,n=t}finally{try{e||null==r.return||r.return()}finally{if(i)throw n}}var a=this.$documentUtils.getLocaleStupid(this.oldVersion.document,this.lang),l=this.$documentUtils.getLocaleStupid(this.newVersion.document,this.lang),u=this.getKeys(a,l,["lang","version"]),c=!0,m=!1,h=void 0;try{for(var p,g=u[Symbol.iterator]();!(c=(p=g.next()).done);c=!0){var v=p.value,_=(a[v]||"").replace(/\r\n?/g,"\n"),w=(l[v]||"").replace(/\r\n?/g,"\n");if(f(_,w)){var b=d.diff_main(_,w);d.diff_cleanupSemantic(b);var y=d.diff_prettyHtml(b).split("<br>");this.diffLocales[v]=y.join("<br>")}}}catch(t){m=!0,h=t}finally{try{c||null==g.return||g.return()}finally{if(m)throw h}}},loadVersion:function(t,e){var i=this;return this[e]=null,r["a"][this.documentType].getVersion(this.documentId,this.lang,t).then(function(t){i[e]=t.data,"newVersion"===e&&(i.title=i.$documentUtils.getLocaleStupid(i.newVersion.document,i.lang).title),i.buildDiff()})},loadVersionSmart:function(t,e,i){var n=this;if("prev"!==t)return this.loadVersion(t,e);r["a"][this.documentType].getHistory(this.documentId,this.lang).then(function(t){for(var o=t.data.versions,r=0;r<o.length;r++)o[r].version_id===i&&0!==r&&n.loadVersion(o[r-1].version_id,e)})}}},p=h,g=(i("5137"),i("2877")),v=Object(g["a"])(p,n,o,!1,null,"952b537a",null);e["default"]=v.exports},"86b3":function(t,e,i){},"8d8a":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("edition-container",{attrs:{mode:t.mode,"is-loading":!!t.promise.loading,document:t.document,"generic-errors":t.genericErrors},on:{save:t.save}},[i("tab-view",[i("tab-item",{attrs:{title:t.$gettext("general informations")}},[i("form-input-row",{attrs:{document:t.document,field:t.fields.title,"is-expanded":""}}),i("form-row",{attrs:{label:t.$gettext("Dates"),"is-grouped":""}},[i("form-input",{attrs:{document:t.document,field:t.fields.date_start,prefix:"start"},on:{input:t.handleDates}}),i("input-checkbox",{model:{value:t.showBothDates,callback:function(e){t.showBothDates=e},expression:"showBothDates"}},[t._v(t._s(t.$gettext("Several days?")))]),i("form-input",{directives:[{name:"show",rawName:"v-show",value:t.showBothDates,expression:"showBothDates"}],attrs:{document:t.document,field:t.fields.date_end,prefix:"end"}})],1),i("form-input-row",{attrs:{document:t.document,field:t.fields.description,label:t.$gettext("personal comments"),placeholder:t.$gettext("write your comments")}}),i("associations-input-row",{attrs:{label:t.$gettext("participants"),document:t.document,field:t.fields.users}}),i("associations-input-row",{attrs:{label:t.$gettext("Routes"),document:t.document,field:t.fields.routes}}),i("quality-input-row",{attrs:{document:t.document}})],1),i("tab-item",{attrs:{title:t.$gettext("GPS track")}},[i("map-input-row",{attrs:{document:t.document,"geom-detail-editable":""}})],1),i("tab-item",{attrs:{title:t.$gettext("detailled informations")}},[i("form-input-row",{attrs:{document:t.document,field:t.fields.activities}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.partial_trip}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.length_total}}),i("form-row",{attrs:{label:t.$gettext("Elevation"),"is-grouped":""}},[i("form-input",{attrs:{document:t.document,field:t.fields.elevation_min,prefix:"min"}}),i("form-input",{attrs:{document:t.document,field:t.fields.elevation_max,prefix:"max"}})],1),i("form-row",{attrs:{label:t.$gettext("height_diff"),"is-grouped":""}},[i("form-input",{attrs:{document:t.document,field:t.fields.height_diff_up,prefix:"up"}}),i("form-input",{attrs:{document:t.document,field:t.fields.height_diff_down,prefix:"down"}})],1),i("form-input-row",{attrs:{document:t.document,field:t.fields.height_diff_difficulties}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.global_rating}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.rock_free_rating}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.engagement_rating}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.equipment_rating}}),i("form-row",{attrs:{label:t.$gettext("ski_rating"),helper:t.fields.ski_rating.helper}},[i("form-input",{attrs:{document:t.document,field:t.fields.ski_rating,helper:null,prefix:"?"},on:{"click:prefix":t.showCotometer}})],1),i("form-input-row",{attrs:{document:t.document,field:t.fields.labande_global_rating}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.snowshoe_rating}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.ice_rating}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.via_ferrata_rating}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.hiking_rating}}),i("form-row",{attrs:{label:t.$gettext("MTB rating"),"is-grouped":""}},[i("form-input",{attrs:{document:t.document,field:t.fields.mtb_down_rating,prefix:"down"}}),i("form-input",{attrs:{document:t.document,field:t.fields.mtb_up_rating,prefix:"up"}})],1)],1),i("tab-item",{attrs:{title:t.$gettext("weather and conditions")}},[i("form-row",{attrs:{label:t.$gettext("condition_rating"),"is-grouped":""}},[i("form-input",{attrs:{document:t.document,field:t.fields.condition_rating}}),i("form-input",{attrs:{document:t.document,field:t.fields.glacier_rating,prefix:t.$gettext("glacier")}})],1),i("form-input-row",{attrs:{document:t.document,field:t.fields.elevation_up_snow}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.elevation_down_snow}}),i("form-row",{attrs:{label:t.$gettext("Snow"),"is-grouped":""}},[i("form-input",{attrs:{document:t.document,field:t.fields.snow_quantity,prefix:"quantity"}}),i("form-input",{attrs:{document:t.document,field:t.fields.snow_quality,prefix:"quality"}})],1),i("form-input-row",{attrs:{document:t.document,field:t.fields.conditions,placeholder:t.$gettext("describe conditions")}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.avalanches}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.avalanche_signs}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.weather,placeholder:t.$gettext("describe weather")}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.conditions_levels}})],1),i("tab-item",{attrs:{title:t.$gettext("access")}},[i("form-input-row",{attrs:{document:t.document,field:t.fields.public_transport}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.frequentation}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.hut_comment}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.hut_status}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.elevation_access}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.access_condition}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.access_comment}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.lift_status}})],1),i("tab-item",{attrs:{title:t.$gettext("comments")}},[i("form-row",{attrs:{label:t.$gettext("participants"),"is-grouped":""}},[i("form-input",{attrs:{document:t.document,field:t.fields.participant_count,prefix:t.$gettext("count")}}),i("form-input",{attrs:{document:t.document,field:t.fields.participants,prefix:t.$gettext("Without c2c account"),"is-expanded":""}})],1),i("form-input-row",{attrs:{document:t.document,field:t.fields.route_description,placeholder:t.$gettext("describe route_conditions")}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.timing,placeholder:t.$gettext("describe timing")}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.disable_comments}})],1)],1),t.document?i("cotometer-window",{ref:"cotometerWindow",model:{value:t.document.ski_rating,callback:function(e){t.$set(t.document,"ski_rating",e)},expression:"document.ski_rating"}}):t._e()],1)},o=[],r=i("7e2f"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("modal-card",{ref:"modalWindow"},[i("span",{attrs:{slot:"title"},slot:"title"},[i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("\n            This tool estimates the technical difficulty of a ski route (ski rating).\n        ")])]),i("div",{staticClass:"field"},[i("label",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"label"},[t._v("Skiability")]),i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.skiability,expression:"skiability"}],staticClass:"is-checkradio is-info",attrs:{id:"c2c-skiability-0",name:"c2c-skiability",type:"radio"},domProps:{value:0,checked:t._q(t.skiability,0)},on:{change:function(e){t.skiability=0}}}),i("label",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{for:"c2c-skiability-0"}},[t._v("Wide and constant")])]),i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.skiability,expression:"skiability"}],staticClass:"is-checkradio is-info",attrs:{type:"radio",id:"c2c-skiability-1",name:"c2c-skiability"},domProps:{value:.1,checked:t._q(t.skiability,.1)},on:{change:function(e){t.skiability=.1}}}),i("label",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{for:"c2c-skiability-1"}},[t._v("1 or 2 complications (steeper or narrow section...)")])]),i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.skiability,expression:"skiability"}],staticClass:"is-checkradio is-info",attrs:{type:"radio",id:"c2c-skiability-2",name:"c2c-skiability"},domProps:{value:.2,checked:t._q(t.skiability,.2)},on:{change:function(e){t.skiability=.2}}}),i("label",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{for:"c2c-skiability-2"}},[t._v("Very complex (steps, narrow sections, ridges...)")])])]),i("div",{staticClass:"field"},[i("label",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"label"},[t._v("Average slope (degrees)")]),i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.slope,expression:"slope"}],staticClass:"input",attrs:{placeholder:t.$gettext("Average slope in degree"),type:"number"},domProps:{value:t.slope},on:{input:function(e){e.target.composing||(t.slope=e.target.value)}}})]),t.errorSlope?i("p",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"help is-danger"},[t._v("The slope must be between 0 and 80 deg")]):t._e()]),i("div",{staticClass:"field"},[i("label",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"label"},[t._v("height_diff")]),i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.elevation,expression:"elevation"}],staticClass:"input",attrs:{type:"number",min:"50",max:"3000"},domProps:{value:t.elevation},on:{input:function(e){e.target.composing||(t.elevation=e.target.value)}}})]),t.errorElevation?i("p",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"help is-danger"},[t._v("The slope must be between 50 and 3000m high")]):t._e()]),t.rating?i("h1",{staticClass:"title is-1 has-text-centered"},[i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Suggested rating")]),i("br"),i("span",{staticClass:"has-text-success"},[t._v("\n            "+t._s(t.rating)+"\n        ")])]):t._e(),i("footer",{attrs:{slot:"footer"},slot:"footer"},[i("button",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button is-success",attrs:{type:"button",disabled:!t.rating},on:{click:t.setResult}},[t._v("\n            Ok\n        ")]),i("button",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button is-default",attrs:{type:"button"},on:{click:function(e){t.$refs.modalWindow.hide()}}},[t._v("\n            Cancel\n        ")])])])},a=[],l={data:function(){return{skiability:0,slope:null,elevation:50}},computed:{errorSlope:function(){return isNaN(this.slope)||this.slope<0||this.slope>80},errorElevation:function(){return(isNaN(this.elevation)||this.elevation<50||this.elevation>3e3)&&null!==this.elevation},rating:function(){if(this.errorSlope||this.errorElevation)return null;var t=Math.tan(Math.PI*this.slope/180)+.1*Math.log(this.elevation);t+=this.skiability*(t-1);var e=(1+this.skiability)*this.elevation;return this.slope<=17&&e<400?"1.1":this.slope<=23&&e<650?"1.2":this.slope<30&&e<800?"1.3":this.slope<35&&e<800||this.slope<23&&e>800?"2.1":this.slope<35&&e<=950?"2.2":this.slope<35&&e>950?"2.3":this.slope>=35&&this.slope<=40&&e<650?"3.1":this.slope>=35&&this.slope<=40&&e<=900?"3.2":this.slope>=35&&this.slope<=40&&e>900?"3.3":t<.98?"1.1":t>=.98&&t<1.02?"1.2":t>=1.03&&t<1.09?"+1.3":t>=1.09&&t<1.18?"+2.1":t>=1.18&&t<1.24?"2.2":t>=1.24&&t<1.3?"2.3":t>=1.3&&t<1.34?"3.1":t>=1.34&&t<1.39?"3.2":t>=1.39&&t<1.42?"3.3":t>=1.42&&t<1.46?"4.1":t>=1.46&&t<1.52?"4.2":t>=1.52&&t<1.575?"4.3":t>=1.575&&t<1.67?"5.1":t>=1.67&&t<1.745?"5.2":t>=1.745&&t<1.81?"5.3":t>=1.81&&t<1.95?"5.4":t>=1.95&&t<2.09?"5.5":t>=2.09&&t<2.25?"5.6":t>=2.25&&t<2.4?"5.7":"5.8"}},methods:{show:function(){this.$refs.modalWindow.show()},setResult:function(){this.$emit("input",this.rating),this.$refs.modalWindow.hide()}}},d=l,u=i("2877"),c=Object(u["a"])(d,s,a,!1,null,null,null),m=c.exports,f={components:{CotometerWindow:m},mixins:[r["a"]],data:function(){return{showBothDates:!1}},methods:{afterLoad:function(){this.showBothDates=this.document.date_start!==this.document.date_end},handleDates:function(){this.showBothDates||(this.document.date_end=this.document.date_start)},beforeSave:function(){this.handleDates()},showCotometer:function(){this.$refs.cotometerWindow.show()}}},h=f,p=Object(u["a"])(h,n,o,!1,null,null,null);e["default"]=p.exports},"9a9d":function(t,e,i){},abdc:function(t,e,i){},af2c:function(t,e,i){},bb7d:function(t,e,i){"use strict";var n=i("16cf"),o=i.n(n);o.a},c404:function(t,e,i){"use strict";var n=i("9a9d"),o=i.n(n);o.a},e1e4:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"section content"},[i("html-header",{attrs:{title:"Recents changes"}}),i("table",[i("tr",[i("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Modified the")]),i("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Author")]),i("th",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("Links")]),i("th"),i("th",[i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("title")]),t._v("\n                :\n                "),i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("comment")])])]),t._l(t.feed,function(e,n){return i("tr",{key:n},[i("td",[i("version-link",{attrs:{"document-type":e.document.documentType,id:e.document.document_id,version:e.version_id,lang:e.lang}},[t._v("\n                    "+t._s(t.$moment.toTechnicalString(e.written_at))+"\n                ")])],1),i("td",[i("contributor-link",{attrs:{contributor:e.user}})],1),i("td",[i("document-link",{attrs:{document:e.document,lang:e.lang}},[t._v("\n                    last\n                ")]),i("diff-link",{attrs:{"document-type":e.document.documentType,id:e.document.document_id,lang:e.lang,"version-from":"prev","version-to":e.version_id}}),i("history-link",{attrs:{document:e.document,lang:e.lang}})],1),i("td",[i("marker-quality",{attrs:{quality:e.document.quality}}),t._v("\n                "+t._s(e.lang)+"\n            ")],1),i("td",[i("icon-document",{attrs:{"document-type":e.document.documentType}}),t._v("\n                "+t._s(e.document.title)+"\n                :\n                "),e.comment?i("span",[t._v("\n                    "+t._s(e.comment)+"\n                ")]):i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[t._v("\n                    empty comment\n                ")])],1)])})],2),i("loading-notification",{attrs:{promise:t.promise}})],1)},o=[],r=(i("ac4d"),i("8a81"),i("ac6a"),i("f751"),i("188b")),s={data:function(){return{promise:{},feed:[],endOfFeed:!1}},computed:{nextQuery:function(){return this.promise.data?Object.assign({},this.$route.query,{token:this.promise.data.pagination_token}):this.$route.query}},watch:{$route:{handler:"initialize",immediate:!0}},mounted:function(){window.addEventListener("scroll",this.onScroll)},beforeDestroy:function(){window.removeEventListener("scroll",this.onScroll)},methods:{initialize:function(){this.feed=[],this.endOfFeed=!1,this.load()},load:function(){this.promise&&this.promise.loading||this.endOfFeed||(this.promise=r["a"].getRecentChanges(this.nextQuery).then(this.onLoad))},onLoad:function(){var t=!0,e=!1,i=void 0;try{for(var n,o=this.promise.data.feed[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var r=n.value;r.document.documentType=this.$documentUtils.getDocumentType(r.document.type),this.feed.push(r)}}catch(t){e=!0,i=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw i}}this.endOfFeed=0===this.promise.data.feed.length},onScroll:function(){document.documentElement.scrollTop+window.innerHeight===document.documentElement.offsetHeight&&this.load()}}},a=s,l=(i("bb7d"),i("2877")),d=Object(l["a"])(a,n,o,!1,null,"653e8b45",null);e["default"]=d.exports},f546:function(t,e,i){"use strict";var n=i("86b3"),o=i.n(n);o.a},fadd:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("edition-container",{attrs:{mode:t.mode,"is-loading":!!t.promise.loading,document:t.document,"generic-errors":t.genericErrors},on:{save:t.save}},[i("tab-view",[i("tab-item",{attrs:{title:t.$gettext("general information")}},[i("form-input-row",{attrs:{document:t.document,field:t.fields.title,"is-expanded":""}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.image_type}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.activities}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.categories}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.date_time}}),i("form-row",{attrs:{label:t.$gettext("File"),"is-grouped":""}},[i("form-input",{attrs:{document:t.document,field:t.fields.filename,prefix:t.$gettext("name")}}),i("form-input",{attrs:{document:t.document,field:t.fields.file_size,prefix:t.$gettext("file_size")}})],1),i("form-row",{attrs:{"is-grouped":""}},[i("form-input",{attrs:{document:t.document,field:t.fields.height,prefix:t.$gettext("height")}}),i("form-input",{attrs:{document:t.document,field:t.fields.width,prefix:t.$gettext("width")}})],1),i("quality-input-row",{attrs:{document:t.document}})],1),i("tab-item",{attrs:{title:t.$gettext("geolocation")}},[i("form-row",{attrs:{label:t.$gettext("Terrain"),"is-grouped":""}},[i("form-input",{attrs:{document:t.document,field:t.fields.elevation,prefix:t.$gettext("elevation")}}),i("input-simple",{attrs:{type:"number",prefix:t.$gettext("Longitude"),postfix:"°E"},on:{input:t.setGeometryPoint},model:{value:t.longitude,callback:function(e){t.longitude=e},expression:"longitude"}}),i("input-simple",{attrs:{type:"number",prefix:t.$gettext("Latitude"),postfix:"°N"},on:{input:t.setGeometryPoint},model:{value:t.latitude,callback:function(e){t.latitude=e},expression:"latitude"}})],1),i("map-input-row",{attrs:{document:t.document}})],1),i("tab-item",{attrs:{title:t.$gettext("camera settings")}},[i("form-input-row",{attrs:{document:t.document,field:t.fields.camera_name}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.fnumber}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.focal_length}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.exposure_time}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.iso_speed}})],1),i("tab-item",{attrs:{title:t.$gettext("general information")}},[i("form-input-row",{attrs:{document:t.document,field:t.fields.summary}}),i("form-input-row",{attrs:{document:t.document,field:t.fields.description}})],1),i("tab-item",{attrs:{title:t.$gettext("associations")}},[i("associations-input-row",{attrs:{document:t.document,field:t.fields.articles}}),i("associations-input-row",{attrs:{document:t.document,field:t.fields.waypoints}}),i("associations-input-row",{attrs:{document:t.document,field:t.fields.routes}}),i("associations-input-row",{attrs:{document:t.document,field:t.fields.books}})],1)],1)],1)},o=[],r=i("7e2f"),s={mixins:[r["a"]]},a=s,l=i("2877"),d=Object(l["a"])(a,n,o,!1,null,null,null);e["default"]=d.exports},fe38:function(t,e,i){}}]);
//# sourceMappingURL=wiki-tools.b855def9.js.map